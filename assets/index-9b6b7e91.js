var hA=Object.defineProperty;var fA=(e,t,r)=>t in e?hA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var dA=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var nd=(e,t,r)=>(fA(e,typeof t!="symbol"?t+"":t,r),r);var hZ=dA((pr,mr)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function qt(){}const pA=e=>e;function It(e,t){for(const r in t)e[r]=t[r];return e}function W2(e){return e()}function N1(){return Object.create(null)}function vr(e){e.forEach(W2)}function Vr(e){return typeof e=="function"}function Gt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function mA(e){return Object.keys(e).length===0}function X2(e,...t){if(e==null){for(const n of t)n(void 0);return qt}const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function _t(e,t,r){e.$$.on_destroy.push(X2(t,r))}function re(e,t,r,n){if(e){const i=$2(e,t,r,n);return e[0](i)}}function $2(e,t,r,n){return e[1]&&n?It(r.ctx.slice(),e[1](n(t))):r.ctx}function ne(e,t,r,n){if(e[2]&&n){const i=e[2](n(r));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(t.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=t.dirty[a]|i[a];return s}return t.dirty|i}return t.dirty}function ie(e,t,r,n,i,s){if(i){const o=$2(t,r,n,s);e.p(o,i)}}function se(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let n=0;n<r;n++)t[n]=-1;return t}return-1}function de(e){const t={};for(const r in e)r[0]!=="$"&&(t[r]=e[r]);return t}function ee(e,t){const r={};t=new Set(t);for(const n in e)!t.has(n)&&n[0]!=="$"&&(r[n]=e[n]);return r}function Qh(e){const t={};for(const r in e)t[r]=!0;return t}function Ue(e,t,r){return e.set(r),t}function ua(e){return e&&Vr(e.destroy)?e.destroy:qt}const j2=typeof window<"u";let gA=j2?()=>window.performance.now():()=>Date.now(),Wm=j2?e=>requestAnimationFrame(e):qt;const Mo=new Set;function Y2(e){Mo.forEach(t=>{t.c(e)||(Mo.delete(t),t.f())}),Mo.size!==0&&Wm(Y2)}function yA(e){let t;return Mo.size===0&&Wm(Y2),{promise:new Promise(r=>{Mo.add(t={c:e,f:r})}),abort(){Mo.delete(t)}}}function N(e,t){e.appendChild(t)}function q2(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function bA(e){const t=V("style");return t.textContent="/* empty */",_A(q2(e),t),t.sheet}function _A(e,t){return N(e.head||e,t),t.sheet}function tt(e,t,r){e.insertBefore(t,r||null)}function J(e){e.parentNode&&e.parentNode.removeChild(e)}function Z2(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function V(e){return document.createElement(e)}function He(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ht(e){return document.createTextNode(e)}function ot(){return Ht(" ")}function or(){return Ht("")}function gt(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function G(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}const vA=["width","height"];function ni(e,t){const r=Object.getOwnPropertyDescriptors(e.__proto__);for(const n in t)t[n]==null?e.removeAttribute(n):n==="style"?e.style.cssText=t[n]:n==="__value"?e.value=e[n]=t[n]:r[n]&&r[n].set&&vA.indexOf(n)===-1?e[n]=t[n]:G(e,n,t[n])}function wA(e,t){Object.keys(t).forEach(r=>{xA(e,r,t[r])})}function xA(e,t,r){const n=t.toLowerCase();n in e?e[n]=typeof e[n]=="boolean"&&r===""?!0:r:t in e?e[t]=typeof e[t]=="boolean"&&r===""?!0:r:G(e,t,r)}function Di(e){return/-/.test(e)?wA:ni}function TA(e){return Array.from(e.childNodes)}function Ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function O1(e,t){e.value=t??""}function AA(e,t,r,n){r==null?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}let Cu;function EA(){if(Cu===void 0){Cu=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Cu=!0}}return Cu}function CA(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const n=V("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=EA();let s;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=gt(window,"message",o=>{o.source===n.contentWindow&&t()})):(n.src="about:blank",n.onload=()=>{s=gt(n.contentWindow,"resize",t),t()}),N(e,n),()=>{(i||s&&n.contentWindow)&&s(),J(n)}}function F1(e,t,r){e.classList.toggle(t,!!r)}function K2(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}const Hc=new Map;let zc=0;function SA(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}function MA(e,t){const r={stylesheet:bA(t),rules:{}};return Hc.set(e,r),r}function B1(e,t,r,n,i,s,o,a=0){const l=16.666/n;let u=`{
`;for(let g=0;g<=1;g+=l){const y=t+(r-t)*s(g);u+=g*100+`%{${o(y,1-y)}}
`}const c=u+`100% {${o(r,1-r)}}
}`,h=`__svelte_${SA(c)}_${a}`,f=q2(e),{stylesheet:d,rules:p}=Hc.get(f)||MA(f,e);p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${c}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${n}ms linear ${i}ms 1 both`,zc+=1,h}function IA(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=r.length-n.length;i&&(e.style.animation=n.join(", "),zc-=i,zc||RA())}function RA(){Wm(()=>{zc||(Hc.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&J(t)}),Hc.clear())})}let pl;function el(e){pl=e}function ca(){if(!pl)throw new Error("Function called outside component initialization");return pl}function Q2(e){ca().$$.on_mount.push(e)}function PA(e){ca().$$.on_destroy.push(e)}function Xm(){const e=ca();return(t,r,{cancelable:n=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=K2(t,r,{cancelable:n});return i.slice().forEach(o=>{o.call(e,s)}),!s.defaultPrevented}return!0}}function zo(e,t){return ca().$$.context.set(e,t),t}function $r(e){return ca().$$.context.get(e)}function ut(e,t){const r=e.$$.callbacks[t.type];r&&r.slice().forEach(n=>n.call(this,t))}const po=[],zt=[];let Io=[];const N0=[],kA=Promise.resolve();let O0=!1;function DA(){O0||(O0=!0,kA.then(J2))}function Cs(e){Io.push(e)}function pe(e){N0.push(e)}const id=new Set;let no=0;function J2(){if(no!==0)return;const e=pl;do{try{for(;no<po.length;){const t=po[no];no++,el(t),NA(t.$$)}}catch(t){throw po.length=0,no=0,t}for(el(null),po.length=0,no=0;zt.length;)zt.pop()();for(let t=0;t<Io.length;t+=1){const r=Io[t];id.has(r)||(id.add(r),r())}Io.length=0}while(po.length);for(;N0.length;)N0.pop()();O0=!1,id.clear(),el(e)}function NA(e){if(e.fragment!==null){e.update(),vr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Cs)}}function OA(e){const t=[],r=[];Io.forEach(n=>e.indexOf(n)===-1?t.push(n):r.push(n)),r.forEach(n=>n()),Io=t}let xa;function FA(){return xa||(xa=Promise.resolve(),xa.then(()=>{xa=null})),xa}function sd(e,t,r){e.dispatchEvent(K2(`${t?"intro":"outro"}${r}`))}const Ac=new Set;let Yn;function ve(){Yn={r:0,c:[],p:Yn}}function we(){Yn.r||vr(Yn.c),Yn=Yn.p}function W(e,t){e&&e.i&&(Ac.delete(e),e.i(t))}function $(e,t,r,n){if(e&&e.o){if(Ac.has(e))return;Ac.add(e),Yn.c.push(()=>{Ac.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}const BA={duration:0};function L1(e,t,r,n){let s=t(e,r,{direction:"both"}),o=n?0:1,a=null,l=null,u=null,c;function h(){u&&IA(e,u)}function f(p,m){const g=p.b-o;return m*=Math.abs(g),{a:o,b:p.b,d:g,duration:m,start:p.start,end:p.start+m,group:p.group}}function d(p){const{delay:m=0,duration:g=300,easing:y=pA,tick:b=qt,css:_}=s||BA,v={start:gA()+m,b:p};p||(v.group=Yn,Yn.r+=1),"inert"in e&&(p?c!==void 0&&(e.inert=c):(c=e.inert,e.inert=!0)),a||l?l=v:(_&&(h(),u=B1(e,o,p,g,m,y,_)),p&&b(0,1),a=f(v,g),Cs(()=>sd(e,p,"start")),yA(w=>{if(l&&w>l.start&&(a=f(l,g),l=null,sd(e,a.b,"start"),_&&(h(),u=B1(e,o,a.b,a.duration,0,y,s.css))),a){if(w>=a.end)b(o=a.b,1-o),sd(e,a.b,"end"),l||(a.b?h():--a.group.r||vr(a.group.c)),a=null;else if(w>=a.start){const A=w-a.start;o=a.a+a.d*y(A/a.duration),b(o,1-o)}}return!!(a||l)}))}return{run(p){Vr(s)?FA().then(()=>{s=s({direction:p?"in":"out"}),d(p)}):d(p)},end(){h(),a=l=null}}}function Vc(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Dr(e,t){const r={},n={},i={$$scope:1};let s=e.length;for(;s--;){const o=e[s],a=t[s];if(a){for(const l in o)l in a||(n[l]=1);for(const l in a)i[l]||(r[l]=a[l],i[l]=1);e[s]=a}else for(const l in o)i[l]=1}for(const o in n)o in r||(r[o]=void 0);return r}function Jh(e){return typeof e=="object"&&e!==null?e:{}}function me(e,t,r){const n=e.$$.props[t];n!==void 0&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}function Ft(e){e&&e.c()}function kt(e,t,r){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,r),Cs(()=>{const s=e.$$.on_mount.map(W2).filter(Vr);e.$$.on_destroy?e.$$.on_destroy.push(...s):vr(s),e.$$.on_mount=[]}),i.forEach(Cs)}function Dt(e,t){const r=e.$$;r.fragment!==null&&(OA(r.after_update),vr(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function LA(e,t){e.$$.dirty[0]===-1&&(po.push(e),DA(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Kt(e,t,r,n,i,s,o=null,a=[-1]){const l=pl;el(e);const u=e.$$={fragment:null,ctx:[],props:s,update:qt,not_equal:i,bound:N1(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:N1(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};o&&o(u.root);let c=!1;if(u.ctx=r?r(e,t.props||{},(h,f,...d)=>{const p=d.length?d[0]:f;return u.ctx&&i(u.ctx[h],u.ctx[h]=p)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](p),c&&LA(e,h)),f}):[],u.update(),c=!0,vr(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const h=TA(t.target);u.fragment&&u.fragment.l(h),h.forEach(J)}else u.fragment&&u.fragment.c();t.intro&&W(e.$$.fragment),kt(e,t.target,t.anchor),J2()}el(l)}class Qt{constructor(){nd(this,"$$");nd(this,"$$set")}$destroy(){Dt(this,1),this.$destroy=qt}$on(t,r){if(!Vr(r))return qt;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!mA(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const UA="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(UA);const io=[];function $m(e,t){return{subscribe:Ie(e,t).subscribe}}function Ie(e,t=qt){let r;const n=new Set;function i(a){if(Gt(e,a)&&(e=a,r)){const l=!io.length;for(const u of n)u[1](),io.push(u,e);if(l){for(let u=0;u<io.length;u+=2)io[u][0](io[u+1]);io.length=0}}}function s(a){i(a(e))}function o(a,l=qt){const u=[a,l];return n.add(u),n.size===1&&(r=t(i,s)||qt),a(e),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}function ar(e,t,r){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=t.length<2;return $m(r,(o,a)=>{let l=!1;const u=[];let c=0,h=qt;const f=()=>{if(c)return;h();const p=t(n?u[0]:u,o,a);s?o(p):h=Vr(p)?p:qt},d=i.map((p,m)=>X2(p,g=>{u[m]=g,c&=~(1<<m),l&&f()},()=>{c|=1<<m}));return l=!0,f(),function(){vr(d),h(),l=!1}})}var GA=typeof global=="object"&&global&&global.Object===Object&&global;const tw=GA;var HA=typeof self=="object"&&self&&self.Object===Object&&self,zA=tw||HA||Function("return this")();const Pn=zA;var VA=Pn.Symbol;const Ni=VA;var ew=Object.prototype,WA=ew.hasOwnProperty,XA=ew.toString,Ta=Ni?Ni.toStringTag:void 0;function $A(e){var t=WA.call(e,Ta),r=e[Ta];try{e[Ta]=void 0;var n=!0}catch{}var i=XA.call(e);return n&&(t?e[Ta]=r:delete e[Ta]),i}var jA=Object.prototype,YA=jA.toString;function qA(e){return YA.call(e)}var ZA="[object Null]",KA="[object Undefined]",U1=Ni?Ni.toStringTag:void 0;function Vs(e){return e==null?e===void 0?KA:ZA:U1&&U1 in Object(e)?$A(e):qA(e)}function Oi(e){return e!=null&&typeof e=="object"}var QA="[object Symbol]";function Vo(e){return typeof e=="symbol"||Oi(e)&&Vs(e)==QA}function rl(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var JA=Array.isArray;const Se=JA;var tE=1/0,G1=Ni?Ni.prototype:void 0,H1=G1?G1.toString:void 0;function rw(e){if(typeof e=="string")return e;if(Se(e))return rl(e,rw)+"";if(Vo(e))return H1?H1.call(e):"";var t=e+"";return t=="0"&&1/e==-tE?"-0":t}var eE=/\s/;function rE(e){for(var t=e.length;t--&&eE.test(e.charAt(t)););return t}var nE=/^\s+/;function iE(e){return e&&e.slice(0,rE(e)+1).replace(nE,"")}function Cn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var z1=0/0,sE=/^[-+]0x[0-9a-f]+$/i,oE=/^0b[01]+$/i,aE=/^0o[0-7]+$/i,lE=parseInt;function uE(e){if(typeof e=="number")return e;if(Vo(e))return z1;if(Cn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=iE(e);var r=oE.test(e);return r||aE.test(e)?lE(e.slice(2),r?2:8):sE.test(e)?z1:+e}var V1=1/0,cE=17976931348623157e292;function hE(e){if(!e)return e===0?e:0;if(e=uE(e),e===V1||e===-V1){var t=e<0?-1:1;return t*cE}return e===e?e:0}function W1(e){var t=hE(e),r=t%1;return t===t?r?t-r:t:0}function Yl(e){return e}var fE="[object AsyncFunction]",dE="[object Function]",pE="[object GeneratorFunction]",mE="[object Proxy]";function jm(e){if(!Cn(e))return!1;var t=Vs(e);return t==dE||t==pE||t==fE||t==mE}var gE=Pn["__core-js_shared__"];const od=gE;var X1=function(){var e=/[^.]+$/.exec(od&&od.keys&&od.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function yE(e){return!!X1&&X1 in e}var bE=Function.prototype,_E=bE.toString;function Ws(e){if(e!=null){try{return _E.call(e)}catch{}try{return e+""}catch{}}return""}var vE=/[\\^$.*+?()[\]{}|]/g,wE=/^\[object .+?Constructor\]$/,xE=Function.prototype,TE=Object.prototype,AE=xE.toString,EE=TE.hasOwnProperty,CE=RegExp("^"+AE.call(EE).replace(vE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SE(e){if(!Cn(e)||yE(e))return!1;var t=jm(e)?CE:wE;return t.test(Ws(e))}function ME(e,t){return e==null?void 0:e[t]}function Xs(e,t){var r=ME(e,t);return SE(r)?r:void 0}var IE=Xs(Pn,"WeakMap");const F0=IE;var $1=Object.create,RE=function(){function e(){}return function(t){if(!Cn(t))return{};if($1)return $1(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const PE=RE;function kE(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function DE(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var NE=800,OE=16,FE=Date.now;function BE(e){var t=0,r=0;return function(){var n=FE(),i=OE-(n-r);if(r=n,i>0){if(++t>=NE)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function LE(e){return function(){return e}}var UE=function(){try{var e=Xs(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Wc=UE;var GE=Wc?function(e,t){return Wc(e,"toString",{configurable:!0,enumerable:!1,value:LE(t),writable:!0})}:Yl;const HE=GE;var zE=BE(HE);const VE=zE;function WE(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var XE=9007199254740991,$E=/^(?:0|[1-9]\d*)$/;function Ym(e,t){var r=typeof e;return t=t??XE,!!t&&(r=="number"||r!="symbol"&&$E.test(e))&&e>-1&&e%1==0&&e<t}function tf(e,t,r){t=="__proto__"&&Wc?Wc(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function ql(e,t){return e===t||e!==e&&t!==t}var jE=Object.prototype,YE=jE.hasOwnProperty;function qE(e,t,r){var n=e[t];(!(YE.call(e,t)&&ql(n,r))||r===void 0&&!(t in e))&&tf(e,t,r)}function ZE(e,t,r,n){var i=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=n?n(r[a],e[a],a,r,e):void 0;l===void 0&&(l=e[a]),i?tf(r,a,l):qE(r,a,l)}return r}var j1=Math.max;function KE(e,t,r){return t=j1(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=j1(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(o),kE(e,this,a)}}function QE(e,t){return VE(KE(e,t,Yl),e+"")}var JE=9007199254740991;function qm(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=JE}function $s(e){return e!=null&&qm(e.length)&&!jm(e)}function nw(e,t,r){if(!Cn(r))return!1;var n=typeof t;return(n=="number"?$s(r)&&Ym(t,r.length):n=="string"&&t in r)?ql(r[t],e):!1}function tC(e){return QE(function(t,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,o&&nw(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++n<i;){var a=r[n];a&&e(t,a,n,s)}return t})}var eC=Object.prototype;function ef(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||eC;return e===r}function rC(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var nC="[object Arguments]";function Y1(e){return Oi(e)&&Vs(e)==nC}var iw=Object.prototype,iC=iw.hasOwnProperty,sC=iw.propertyIsEnumerable,oC=Y1(function(){return arguments}())?Y1:function(e){return Oi(e)&&iC.call(e,"callee")&&!sC.call(e,"callee")};const ml=oC;function aC(){return!1}var sw=typeof pr=="object"&&pr&&!pr.nodeType&&pr,q1=sw&&typeof mr=="object"&&mr&&!mr.nodeType&&mr,lC=q1&&q1.exports===sw,Z1=lC?Pn.Buffer:void 0,uC=Z1?Z1.isBuffer:void 0,cC=uC||aC;const gl=cC;var hC="[object Arguments]",fC="[object Array]",dC="[object Boolean]",pC="[object Date]",mC="[object Error]",gC="[object Function]",yC="[object Map]",bC="[object Number]",_C="[object Object]",vC="[object RegExp]",wC="[object Set]",xC="[object String]",TC="[object WeakMap]",AC="[object ArrayBuffer]",EC="[object DataView]",CC="[object Float32Array]",SC="[object Float64Array]",MC="[object Int8Array]",IC="[object Int16Array]",RC="[object Int32Array]",PC="[object Uint8Array]",kC="[object Uint8ClampedArray]",DC="[object Uint16Array]",NC="[object Uint32Array]",jt={};jt[CC]=jt[SC]=jt[MC]=jt[IC]=jt[RC]=jt[PC]=jt[kC]=jt[DC]=jt[NC]=!0;jt[hC]=jt[fC]=jt[AC]=jt[dC]=jt[EC]=jt[pC]=jt[mC]=jt[gC]=jt[yC]=jt[bC]=jt[_C]=jt[vC]=jt[wC]=jt[xC]=jt[TC]=!1;function OC(e){return Oi(e)&&qm(e.length)&&!!jt[Vs(e)]}function ow(e){return function(t){return e(t)}}var aw=typeof pr=="object"&&pr&&!pr.nodeType&&pr,nl=aw&&typeof mr=="object"&&mr&&!mr.nodeType&&mr,FC=nl&&nl.exports===aw,ad=FC&&tw.process,BC=function(){try{var e=nl&&nl.require&&nl.require("util").types;return e||ad&&ad.binding&&ad.binding("util")}catch{}}();const K1=BC;var Q1=K1&&K1.isTypedArray,LC=Q1?ow(Q1):OC;const rf=LC;var UC=Object.prototype,GC=UC.hasOwnProperty;function lw(e,t){var r=Se(e),n=!r&&ml(e),i=!r&&!n&&gl(e),s=!r&&!n&&!i&&rf(e),o=r||n||i||s,a=o?rC(e.length,String):[],l=a.length;for(var u in e)(t||GC.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ym(u,l)))&&a.push(u);return a}function uw(e,t){return function(r){return e(t(r))}}var HC=uw(Object.keys,Object);const zC=HC;var VC=Object.prototype,WC=VC.hasOwnProperty;function cw(e){if(!ef(e))return zC(e);var t=[];for(var r in Object(e))WC.call(e,r)&&r!="constructor"&&t.push(r);return t}function Zm(e){return $s(e)?lw(e):cw(e)}function XC(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var $C=Object.prototype,jC=$C.hasOwnProperty;function YC(e){if(!Cn(e))return XC(e);var t=ef(e),r=[];for(var n in e)n=="constructor"&&(t||!jC.call(e,n))||r.push(n);return r}function hw(e){return $s(e)?lw(e,!0):YC(e)}var qC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ZC=/^\w*$/;function Km(e,t){if(Se(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Vo(e)?!0:ZC.test(e)||!qC.test(e)||t!=null&&e in Object(t)}var KC=Xs(Object,"create");const yl=KC;function QC(){this.__data__=yl?yl(null):{},this.size=0}function JC(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var tS="__lodash_hash_undefined__",eS=Object.prototype,rS=eS.hasOwnProperty;function nS(e){var t=this.__data__;if(yl){var r=t[e];return r===tS?void 0:r}return rS.call(t,e)?t[e]:void 0}var iS=Object.prototype,sS=iS.hasOwnProperty;function oS(e){var t=this.__data__;return yl?t[e]!==void 0:sS.call(t,e)}var aS="__lodash_hash_undefined__";function lS(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yl&&t===void 0?aS:t,this}function Ss(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ss.prototype.clear=QC;Ss.prototype.delete=JC;Ss.prototype.get=nS;Ss.prototype.has=oS;Ss.prototype.set=lS;function uS(){this.__data__=[],this.size=0}function nf(e,t){for(var r=e.length;r--;)if(ql(e[r][0],t))return r;return-1}var cS=Array.prototype,hS=cS.splice;function fS(e){var t=this.__data__,r=nf(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():hS.call(t,r,1),--this.size,!0}function dS(e){var t=this.__data__,r=nf(t,e);return r<0?void 0:t[r][1]}function pS(e){return nf(this.__data__,e)>-1}function mS(e,t){var r=this.__data__,n=nf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function fi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fi.prototype.clear=uS;fi.prototype.delete=fS;fi.prototype.get=dS;fi.prototype.has=pS;fi.prototype.set=mS;var gS=Xs(Pn,"Map");const bl=gS;function yS(){this.size=0,this.__data__={hash:new Ss,map:new(bl||fi),string:new Ss}}function bS(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function sf(e,t){var r=e.__data__;return bS(t)?r[typeof t=="string"?"string":"hash"]:r.map}function _S(e){var t=sf(this,e).delete(e);return this.size-=t?1:0,t}function vS(e){return sf(this,e).get(e)}function wS(e){return sf(this,e).has(e)}function xS(e,t){var r=sf(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function di(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}di.prototype.clear=yS;di.prototype.delete=_S;di.prototype.get=vS;di.prototype.has=wS;di.prototype.set=xS;var TS="Expected a function";function Qm(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(TS);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Qm.Cache||di),r}Qm.Cache=di;var AS=500;function ES(e){var t=Qm(e,function(n){return r.size===AS&&r.clear(),n}),r=t.cache;return t}var CS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,SS=/\\(\\)?/g,MS=ES(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(CS,function(r,n,i,s){t.push(i?s.replace(SS,"$1"):n||r)}),t});const IS=MS;function RS(e){return e==null?"":rw(e)}function fw(e,t){return Se(e)?e:Km(e,t)?[e]:IS(RS(e))}var PS=1/0;function of(e){if(typeof e=="string"||Vo(e))return e;var t=e+"";return t=="0"&&1/e==-PS?"-0":t}function Jm(e,t){t=fw(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[of(t[r++])];return r&&r==n?e:void 0}function kS(e,t,r){var n=e==null?void 0:Jm(e,t);return n===void 0?r:n}function DS(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var NS=uw(Object.getPrototypeOf,Object);const dw=NS;var OS="[object Object]",FS=Function.prototype,BS=Object.prototype,pw=FS.toString,LS=BS.hasOwnProperty,US=pw.call(Object);function GS(e){if(!Oi(e)||Vs(e)!=OS)return!1;var t=dw(e);if(t===null)return!0;var r=LS.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&pw.call(r)==US}function HS(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}function zS(){this.__data__=new fi,this.size=0}function VS(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function WS(e){return this.__data__.get(e)}function XS(e){return this.__data__.has(e)}var $S=200;function jS(e,t){var r=this.__data__;if(r instanceof fi){var n=r.__data__;if(!bl||n.length<$S-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new di(n)}return r.set(e,t),this.size=r.size,this}function vn(e){var t=this.__data__=new fi(e);this.size=t.size}vn.prototype.clear=zS;vn.prototype.delete=VS;vn.prototype.get=WS;vn.prototype.has=XS;vn.prototype.set=jS;var mw=typeof pr=="object"&&pr&&!pr.nodeType&&pr,J1=mw&&typeof mr=="object"&&mr&&!mr.nodeType&&mr,YS=J1&&J1.exports===mw,ty=YS?Pn.Buffer:void 0,ey=ty?ty.allocUnsafe:void 0;function qS(e,t){if(t)return e.slice();var r=e.length,n=ey?ey(r):new e.constructor(r);return e.copy(n),n}function gw(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}function ZS(){return[]}var KS=Object.prototype,QS=KS.propertyIsEnumerable,ry=Object.getOwnPropertySymbols,JS=ry?function(e){return e==null?[]:(e=Object(e),gw(ry(e),function(t){return QS.call(e,t)}))}:ZS;const t7=JS;function e7(e,t,r){var n=t(e);return Se(e)?n:DS(n,r(e))}function ny(e){return e7(e,Zm,t7)}var r7=Xs(Pn,"DataView");const B0=r7;var n7=Xs(Pn,"Promise");const L0=n7;var i7=Xs(Pn,"Set");const U0=i7;var iy="[object Map]",s7="[object Object]",sy="[object Promise]",oy="[object Set]",ay="[object WeakMap]",ly="[object DataView]",o7=Ws(B0),a7=Ws(bl),l7=Ws(L0),u7=Ws(U0),c7=Ws(F0),rs=Vs;(B0&&rs(new B0(new ArrayBuffer(1)))!=ly||bl&&rs(new bl)!=iy||L0&&rs(L0.resolve())!=sy||U0&&rs(new U0)!=oy||F0&&rs(new F0)!=ay)&&(rs=function(e){var t=Vs(e),r=t==s7?e.constructor:void 0,n=r?Ws(r):"";if(n)switch(n){case o7:return ly;case a7:return iy;case l7:return sy;case u7:return oy;case c7:return ay}return t});const G0=rs;var h7=Pn.Uint8Array;const Xc=h7;function f7(e){var t=new e.constructor(e.byteLength);return new Xc(t).set(new Xc(e)),t}function d7(e,t){var r=t?f7(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function p7(e){return typeof e.constructor=="function"&&!ef(e)?PE(dw(e)):{}}var m7="__lodash_hash_undefined__";function g7(e){return this.__data__.set(e,m7),this}function y7(e){return this.__data__.has(e)}function $c(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new di;++t<r;)this.add(e[t])}$c.prototype.add=$c.prototype.push=g7;$c.prototype.has=y7;function b7(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function _7(e,t){return e.has(t)}var v7=1,w7=2;function yw(e,t,r,n,i,s){var o=r&v7,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(e),c=s.get(t);if(u&&c)return u==t&&c==e;var h=-1,f=!0,d=r&w7?new $c:void 0;for(s.set(e,t),s.set(t,e);++h<a;){var p=e[h],m=t[h];if(n)var g=o?n(m,p,h,t,e,s):n(p,m,h,e,t,s);if(g!==void 0){if(g)continue;f=!1;break}if(d){if(!b7(t,function(y,b){if(!_7(d,b)&&(p===y||i(p,y,r,n,s)))return d.push(b)})){f=!1;break}}else if(!(p===m||i(p,m,r,n,s))){f=!1;break}}return s.delete(e),s.delete(t),f}function x7(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function T7(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var A7=1,E7=2,C7="[object Boolean]",S7="[object Date]",M7="[object Error]",I7="[object Map]",R7="[object Number]",P7="[object RegExp]",k7="[object Set]",D7="[object String]",N7="[object Symbol]",O7="[object ArrayBuffer]",F7="[object DataView]",uy=Ni?Ni.prototype:void 0,ld=uy?uy.valueOf:void 0;function B7(e,t,r,n,i,s,o){switch(r){case F7:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O7:return!(e.byteLength!=t.byteLength||!s(new Xc(e),new Xc(t)));case C7:case S7:case R7:return ql(+e,+t);case M7:return e.name==t.name&&e.message==t.message;case P7:case D7:return e==t+"";case I7:var a=x7;case k7:var l=n&A7;if(a||(a=T7),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=E7,o.set(e,t);var c=yw(a(e),a(t),n,i,s,o);return o.delete(e),c;case N7:if(ld)return ld.call(e)==ld.call(t)}return!1}var L7=1,U7=Object.prototype,G7=U7.hasOwnProperty;function H7(e,t,r,n,i,s){var o=r&L7,a=ny(e),l=a.length,u=ny(t),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var f=a[h];if(!(o?f in t:G7.call(t,f)))return!1}var d=s.get(e),p=s.get(t);if(d&&p)return d==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=o;++h<l;){f=a[h];var y=e[f],b=t[f];if(n)var _=o?n(b,y,f,t,e,s):n(y,b,f,e,t,s);if(!(_===void 0?y===b||i(y,b,r,n,s):_)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var v=e.constructor,w=t.constructor;v!=w&&"constructor"in e&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(e),s.delete(t),m}var z7=1,cy="[object Arguments]",hy="[object Array]",Su="[object Object]",V7=Object.prototype,fy=V7.hasOwnProperty;function W7(e,t,r,n,i,s){var o=Se(e),a=Se(t),l=o?hy:G0(e),u=a?hy:G0(t);l=l==cy?Su:l,u=u==cy?Su:u;var c=l==Su,h=u==Su,f=l==u;if(f&&gl(e)){if(!gl(t))return!1;o=!0,c=!1}if(f&&!c)return s||(s=new vn),o||rf(e)?yw(e,t,r,n,i,s):B7(e,t,l,r,n,i,s);if(!(r&z7)){var d=c&&fy.call(e,"__wrapped__"),p=h&&fy.call(t,"__wrapped__");if(d||p){var m=d?e.value():e,g=p?t.value():t;return s||(s=new vn),i(m,g,r,n,s)}}return f?(s||(s=new vn),H7(e,t,r,n,i,s)):!1}function tg(e,t,r,n,i){return e===t?!0:e==null||t==null||!Oi(e)&&!Oi(t)?e!==e&&t!==t:W7(e,t,r,n,tg,i)}var X7=1,$7=2;function j7(e,t,r,n){var i=r.length,s=i,o=!n;if(e==null)return!s;for(e=Object(e);i--;){var a=r[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){a=r[i];var l=a[0],u=e[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in e))return!1}else{var h=new vn;if(n)var f=n(u,c,l,e,t,h);if(!(f===void 0?tg(c,u,X7|$7,n,h):f))return!1}}return!0}function bw(e){return e===e&&!Cn(e)}function Y7(e){for(var t=Zm(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,bw(i)]}return t}function _w(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function q7(e){var t=Y7(e);return t.length==1&&t[0][2]?_w(t[0][0],t[0][1]):function(r){return r===e||j7(r,e,t)}}function Z7(e,t){return e!=null&&t in Object(e)}function K7(e,t,r){t=fw(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=of(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&qm(i)&&Ym(o,i)&&(Se(e)||ml(e)))}function Q7(e,t){return e!=null&&K7(e,t,Z7)}var J7=1,t9=2;function e9(e,t){return Km(e)&&bw(t)?_w(of(e),t):function(r){var n=kS(r,e);return n===void 0&&n===t?Q7(r,e):tg(t,n,J7|t9)}}function r9(e){return function(t){return t==null?void 0:t[e]}}function n9(e){return function(t){return Jm(t,e)}}function i9(e){return Km(e)?r9(of(e)):n9(e)}function af(e){return typeof e=="function"?e:e==null?Yl:typeof e=="object"?Se(e)?e9(e[0],e[1]):q7(e):i9(e)}function s9(e,t,r,n){for(var i=-1,s=e==null?0:e.length;++i<s;){var o=e[i];t(n,o,r(o),e)}return n}function o9(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[e?a:++i];if(r(s[l],l,s)===!1)break}return t}}var a9=o9();const vw=a9;function l9(e,t){return e&&vw(e,t,Zm)}function u9(e,t){return function(r,n){if(r==null)return r;if(!$s(r))return e(r,n);for(var i=r.length,s=t?i:-1,o=Object(r);(t?s--:++s<i)&&n(o[s],s,o)!==!1;);return r}}var c9=u9(l9);const lf=c9;function h9(e,t,r,n){return lf(e,function(i,s,o){t(n,i,r(i),o)}),n}function f9(e,t){return function(r,n){var i=Se(r)?s9:h9,s=t?t():{};return i(r,e,af(n),s)}}function H0(e,t,r){(r!==void 0&&!ql(e[t],r)||r===void 0&&!(t in e))&&tf(e,t,r)}function d9(e){return Oi(e)&&$s(e)}function z0(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function p9(e){return ZE(e,hw(e))}function m9(e,t,r,n,i,s,o){var a=z0(e,r),l=z0(t,r),u=o.get(l);if(u){H0(e,r,u);return}var c=s?s(a,l,r+"",e,t,o):void 0,h=c===void 0;if(h){var f=Se(l),d=!f&&gl(l),p=!f&&!d&&rf(l);c=l,f||d||p?Se(a)?c=a:d9(a)?c=DE(a):d?(h=!1,c=qS(l,!0)):p?(h=!1,c=d7(l,!0)):c=[]:GS(l)||ml(l)?(c=a,ml(a)?c=p9(a):(!Cn(a)||jm(a))&&(c=p7(l))):h=!1}h&&(o.set(l,c),i(c,l,n,s,o),o.delete(l)),H0(e,r,c)}function ww(e,t,r,n,i){e!==t&&vw(t,function(s,o){if(i||(i=new vn),Cn(s))m9(e,t,o,r,ww,n,i);else{var a=n?n(z0(e,o),s,o+"",e,t,i):void 0;a===void 0&&(a=s),H0(e,o,a)}},hw)}function g9(e){return typeof e=="function"?e:Yl}function Ua(e,t){var r=Se(e)?WE:lf;return r(e,g9(t))}function y9(e,t){var r=[];return lf(e,function(n,i,s){t(n,i,s)&&r.push(n)}),r}function xw(e,t){var r=Se(e)?gw:y9;return r(e,af(t))}function Tw(e,t){var r=-1,n=$s(e)?Array(e.length):[];return lf(e,function(i,s,o){n[++r]=t(i,s,o)}),n}function wn(e,t){var r=Se(e)?rl:Tw;return r(e,af(t))}var b9="[object Map]",_9="[object Set]",v9=Object.prototype,w9=v9.hasOwnProperty;function Pi(e){if(e==null)return!0;if($s(e)&&(Se(e)||typeof e=="string"||typeof e.splice=="function"||gl(e)||rf(e)||ml(e)))return!e.length;var t=G0(e);if(t==b9||t==_9)return!e.size;if(ef(e))return!cw(e).length;for(var r in e)if(w9.call(e,r))return!1;return!0}var x9=f9(function(e,t,r){tf(e,r,t)});const _l=x9;var T9=tC(function(e,t,r){ww(e,t,r)});const A9=T9;function E9(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}function C9(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,s=Vo(e),o=t!==void 0,a=t===null,l=t===t,u=Vo(t);if(!a&&!u&&!s&&e>t||s&&o&&l&&!a&&!u||n&&o&&l||!r&&l||!i)return 1;if(!n&&!s&&!u&&e<t||u&&r&&i&&!n&&!s||a&&r&&i||!o&&i||!l)return-1}return 0}function S9(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,o=i.length,a=r.length;++n<o;){var l=C9(i[n],s[n]);if(l){if(n>=a)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return e.index-t.index}function M9(e,t,r){t.length?t=rl(t,function(s){return Se(s)?function(o){return Jm(o,s.length===1?s[0]:s)}:s}):t=[Yl];var n=-1;t=rl(t,ow(af));var i=Tw(e,function(s,o,a){var l=rl(t,function(u){return u(s)});return{criteria:l,index:++n,value:s}});return E9(i,function(s,o){return S9(s,o,r)})}function eg(e,t,r,n){return e==null?[]:(Se(t)||(t=t==null?[]:[t]),r=n?void 0:r,Se(r)||(r=r==null?[]:[r]),M9(e,t,r))}function I9(e,t,r){var n=e==null?0:e.length;return n?(r&&typeof r!="number"&&nw(e,t,r)?(t=0,r=n):(t=t==null?0:W1(t),r=r===void 0?n:W1(r)),HS(e,t,r)):[]}function nr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uf(e){let t,r,n;e.length!==2?(t=nr,r=(a,l)=>nr(e(a),l),n=(a,l)=>e(a)-l):(t=e===nr||e===Zl?e:R9,r=e,n=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const h=u+c>>>1;r(a[h],l)<0?u=h+1:c=h}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const h=u+c>>>1;r(a[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function o(a,l,u=0,c=a.length){const h=i(a,l,u,c-1);return h>u&&n(a[h-1],l)>-n(a[h],l)?h-1:h}return{left:i,center:o,right:s}}function R9(){return 0}function Aw(e){return e===null?NaN:+e}function*P9(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const k9=uf(nr),D9=k9.right;uf(Aw).center;const cf=D9;function rg(e,t){let r=0;if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&++r;else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&++r}return r}function N9(e){return e.length|0}function O9(e){return!(e>0)}function F9(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function B9(e){return t=>e(...t)}function L9(...e){const t=typeof e[e.length-1]=="function"&&B9(e.pop());e=e.map(F9);const r=e.map(N9),n=e.length-1,i=new Array(n+1).fill(0),s=[];if(n<0||r.some(O9))return s;for(;;){s.push(i.map((a,l)=>e[l][a]));let o=n;for(;++i[o]===r[o];){if(o===0)return t?s.map(t):s;i[o--]=0}}}function U9(e,t){var r=0,n=0;return Float64Array.from(e,t===void 0?i=>r+=+i||0:i=>r+=+t(i,n++,e)||0)}function Ew(e,t){let r=0,n,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(n=o-i,i+=n/++r,s+=n*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(n=a-i,i+=n/++r,s+=n*(a-i))}if(r>1)return s/(r-1)}function Cw(e,t){const r=Ew(e,t);return r&&Math.sqrt(r)}function Ee(e,t){let r,n;if(t===void 0)for(const i of e)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(r===void 0?s>=s&&(r=n=s):(r>s&&(r=s),n<s&&(n=s)))}return[r,n]}class Ms{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const r=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const s=r[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(r[n++]=a),t=o}return r[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let r=this._n,n,i,s,o=0;if(r>0){for(o=t[--r];r>0&&(n=o,i=t[--r],o=n+i,s=i-(o-n),!s););r>0&&(s<0&&t[r-1]<0||s>0&&t[r-1]>0)&&(i=s*2,n=o+i,i==n-o&&(o=n))}return o}}class Is extends Map{constructor(t,r=Iw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(V0(this,t))}has(t){return super.has(V0(this,t))}set(t,r){return super.set(Sw(this,t),r)}delete(t){return super.delete(Mw(this,t))}}class hf extends Set{constructor(t,r=Iw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const n of t)this.add(n)}has(t){return super.has(V0(this,t))}add(t){return super.add(Sw(this,t))}delete(t){return super.delete(Mw(this,t))}}function V0({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Sw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Mw({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Iw(e){return e!==null&&typeof e=="object"?e.valueOf():e}function W0(e){return e}function ng(e,...t){return ig(e,W0,W0,t)}function Ro(e,t,...r){return ig(e,W0,t,r)}function G9(e,t,...r){return ig(e,Array.from,t,r)}function ig(e,t,r,n){return function i(s,o){if(o>=n.length)return r(s);const a=new Is,l=n[o++];let u=-1;for(const c of s){const h=l(c,++u,s),f=a.get(h);f?f.push(c):a.set(h,[c])}for(const[c,h]of a)a.set(c,i(h,o));return t(a)}(e,0)}function H9(e,t){return Array.from(t,r=>e[r])}function vl(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[r]=t;if(r&&r.length!==2||t.length>1){const n=Uint32Array.from(e,(i,s)=>s);return t.length>1?(t=t.map(i=>e.map(i)),n.sort((i,s)=>{for(const o of t){const a=jc(o[i],o[s]);if(a)return a}})):(r=e.map(r),n.sort((i,s)=>jc(r[i],r[s]))),H9(e,n)}return e.sort(Rw(r))}function Rw(e=nr){if(e===nr)return jc;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function jc(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function sg(e,t,r){return(t.length!==2?vl(Ro(e,t,r),([n,i],[s,o])=>nr(i,o)||nr(n,s)):vl(ng(e,r),([n,i],[s,o])=>t(i,o)||nr(n,s))).map(([n])=>n)}const z9=Math.sqrt(50),V9=Math.sqrt(10),W9=Math.sqrt(2);function Yc(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=z9?10:s>=V9?5:s>=W9?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=r&&r<2?Yc(e,t,r*2):[a,l,u]}function wl(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,o]=n?Yc(t,e,r):Yc(e,t,r);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(n)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function qc(e,t,r){return t=+t,e=+e,r=+r,Yc(e,t,r)[2]}function X0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?qc(t,e,r):qc(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function X9(e){return Math.max(1,Math.ceil(Math.log(rg(e))/Math.LN2)+1)}function jr(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function $9(e,t){let r,n=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(r<s||r===void 0&&s>=s)&&(r=s,n=i);else for(let s of e)(s=t(s,++i,e))!=null&&(r<s||r===void 0&&s>=s)&&(r=s,n=i);return n}function ii(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}return r}function j9(e,t){let r,n=-1,i=-1;if(t===void 0)for(const s of e)++i,s!=null&&(r>s||r===void 0&&s>=s)&&(r=s,n=i);else for(let s of e)(s=t(s,++i,e))!=null&&(r>s||r===void 0&&s>=s)&&(r=s,n=i);return n}function Pw(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?jc:Rw(i);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,c=Math.log(l),h=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*h*(l-h)/l)*(u-l/2<0?-1:1),d=Math.max(r,Math.floor(t-u*h/l+f)),p=Math.min(n,Math.floor(t+(l-u)*h/l+f));Pw(e,t,d,p,i)}const s=e[t];let o=r,a=n;for(Aa(e,r,t),i(e[n],s)>0&&Aa(e,r,n);o<a;){for(Aa(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[r],s)===0?Aa(e,r,a):(++a,Aa(e,a,n)),a<=t&&(r=a+1),t<=a&&(n=a-1)}return e}function Aa(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function kw(e,t=nr){let r,n=!1;if(t.length===1){let i;for(const s of e){const o=t(s);(n?nr(o,i)>0:nr(o,o)===0)&&(r=s,i=o,n=!0)}}else for(const i of e)(n?t(i,r)>0:t(i,i)===0)&&(r=i,n=!0);return r}function Wo(e,t,r){if(e=Float64Array.from(P9(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return ii(e);if(t>=1)return jr(e);var n,i=(n-1)*t,s=Math.floor(i),o=jr(Pw(e,s).subarray(0,s+1)),a=ii(e.subarray(s+1));return o+(a-o)*(i-s)}}function Y9(e,t,r=Aw){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),o=+r(e[s],s,e),a=+r(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function q9(e,t,r){const n=rg(e),i=Wo(e,.75)-Wo(e,.25);return n&&i?Math.ceil((r-t)/(2*i*Math.pow(n,-1/3))):1}function Dw(e,t,r){const n=rg(e),i=Cw(e);return n&&i?Math.ceil((r-t)*Math.cbrt(n)/(3.49*i)):1}function Z9(e,t){let r=0,n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++r,n+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++r,n+=s)}if(r)return n/r}function $0(e,t){return Wo(e,.5,t)}function*K9(e){for(const t of e)yield*t}function Nw(e){return Array.from(K9(e))}function Q9(e,t){const r=new Is;if(t===void 0)for(let s of e)s!=null&&s>=s&&r.set(s,(r.get(s)||0)+1);else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&o>=o&&r.set(o,(r.get(o)||0)+1)}let n,i=0;for(const[s,o]of r)o>i&&(i=o,n=s);return n}function J9(e,t=tM){const r=[];let n,i=!1;for(const s of e)i&&r.push(t(n,s)),n=s,i=!0;return r}function tM(e,t){return[e,t]}function j0(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Fi(e,t){let r=0;if(t===void 0)for(let n of e)(n=+n)&&(r+=n);else{let n=-1;for(let i of e)(i=+t(i,++n,e))&&(r+=i)}return r}function Zc(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function eM(e){return e}var ud=1,cd=2,Y0=3,Mu=4,dy=1e-6;function rM(e){return"translate("+e+",0)"}function nM(e){return"translate(0,"+e+")"}function iM(e){return t=>+e(t)}function sM(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function oM(){return!this.__axis}function aM(e,t){var r=[],n=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===ud||e===Mu?-1:1,c=e===Mu||e===cd?"x":"y",h=e===ud||e===Y0?rM:nM;function f(d){var p=n??(t.ticks?t.ticks.apply(t,r):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,r):eM),g=Math.max(s,0)+a,y=t.range(),b=+y[0]+l,_=+y[y.length-1]+l,v=(t.bandwidth?sM:iM)(t.copy(),l),w=d.selection?d.selection():d,A=w.selectAll(".domain").data([null]),x=w.selectAll(".tick").data(p,t).order(),E=x.exit(),T=x.enter().append("g").attr("class","tick"),M=x.select("line"),P=x.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(T),M=M.merge(T.append("line").attr("stroke","currentColor").attr(c+"2",u*s)),P=P.merge(T.append("text").attr("fill","currentColor").attr(c,u*g).attr("dy",e===ud?"0em":e===Y0?"0.71em":"0.32em")),d!==w&&(A=A.transition(d),x=x.transition(d),M=M.transition(d),P=P.transition(d),E=E.transition(d).attr("opacity",dy).attr("transform",function(R){return isFinite(R=v(R))?h(R+l):this.getAttribute("transform")}),T.attr("opacity",dy).attr("transform",function(R){var S=this.parentNode.__axis;return h((S&&isFinite(S=S(R))?S:v(R))+l)})),E.remove(),A.attr("d",e===Mu||e===cd?o?"M"+u*o+","+b+"H"+l+"V"+_+"H"+u*o:"M"+l+","+b+"V"+_:o?"M"+b+","+u*o+"V"+l+"H"+_+"V"+u*o:"M"+b+","+l+"H"+_),x.attr("opacity",1).attr("transform",function(R){return h(v(R)+l)}),M.attr(c+"2",u*s),P.attr(c,u*g).text(m),w.filter(oM).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===cd?"start":e===Mu?"end":"middle"),w.each(function(){this.__axis=v})}return f.scale=function(d){return arguments.length?(t=d,f):t},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(d){return arguments.length?(r=d==null?[]:Array.from(d),f):r.slice()},f.tickValues=function(d){return arguments.length?(n=d==null?null:Array.from(d),f):n&&n.slice()},f.tickFormat=function(d){return arguments.length?(i=d,f):i},f.tickSize=function(d){return arguments.length?(s=o=+d,f):s},f.tickSizeInner=function(d){return arguments.length?(s=+d,f):s},f.tickSizeOuter=function(d){return arguments.length?(o=+d,f):o},f.tickPadding=function(d){return arguments.length?(a=+d,f):a},f.offset=function(d){return arguments.length?(l=+d,f):l},f}function lM(e){return aM(Y0,e)}var uM={value:()=>{}};function Ow(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Ec(r)}function Ec(e){this._=e}function cM(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Ec.prototype=Ow.prototype={constructor:Ec,on:function(e,t){var r=this._,n=cM(e+"",r),i,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((i=(e=n[s]).type)&&(i=hM(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=n[s]).type)r[i]=py(r[i],e.name,t);else if(t==null)for(i in r)r[i]=py(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Ec(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,s;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,i=s.length;n<i;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,s=n.length;i<s;++i)n[i].value.apply(t,r)}};function hM(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function py(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=uM,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var q0="http://www.w3.org/1999/xhtml";const Xo={svg:"http://www.w3.org/2000/svg",xhtml:q0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ff(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Xo.hasOwnProperty(t)?{space:Xo[t],local:e}:e}function fM(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===q0&&t.documentElement.namespaceURI===q0?t.createElement(e):t.createElementNS(r,e)}}function dM(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function df(e){var t=ff(e);return(t.local?dM:fM)(t)}function pM(){}function og(e){return e==null?pM:function(){return this.querySelector(e)}}function mM(e){typeof e!="function"&&(e=og(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new yr(n,this._parents)}function gM(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function yM(){return[]}function Fw(e){return e==null?yM:function(){return this.querySelectorAll(e)}}function bM(e){return function(){return gM(e.apply(this,arguments))}}function _M(e){typeof e=="function"?e=bM(e):e=Fw(e);for(var t=this._groups,r=t.length,n=[],i=[],s=0;s<r;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(n.push(e.call(l,l.__data__,u,o)),i.push(l));return new yr(n,i)}function Bw(e){return function(){return this.matches(e)}}function Lw(e){return function(t){return t.matches(e)}}var vM=Array.prototype.find;function wM(e){return function(){return vM.call(this.children,e)}}function xM(){return this.firstElementChild}function TM(e){return this.select(e==null?xM:wM(typeof e=="function"?e:Lw(e)))}var AM=Array.prototype.filter;function EM(){return Array.from(this.children)}function CM(e){return function(){return AM.call(this.children,e)}}function SM(e){return this.selectAll(e==null?EM:CM(typeof e=="function"?e:Lw(e)))}function MM(e){typeof e!="function"&&(e=Bw(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new yr(n,this._parents)}function Uw(e){return new Array(e.length)}function IM(){return new yr(this._enter||this._groups.map(Uw),this._parents)}function Kc(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Kc.prototype={constructor:Kc,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function RM(e){return function(){return e}}function PM(e,t,r,n,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],n[o]=a):r[o]=new Kc(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function kM(e,t,r,n,i,s,o){var a,l,u=new Map,c=t.length,h=s.length,f=new Array(c),d;for(a=0;a<c;++a)(l=t[a])&&(f[a]=d=o.call(l,l.__data__,a,t)+"",u.has(d)?i[a]=l:u.set(d,l));for(a=0;a<h;++a)d=o.call(e,s[a],a,s)+"",(l=u.get(d))?(n[a]=l,l.__data__=s[a],u.delete(d)):r[a]=new Kc(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function DM(e){return e.__data__}function NM(e,t){if(!arguments.length)return Array.from(this,DM);var r=t?kM:PM,n=this._parents,i=this._groups;typeof e!="function"&&(e=RM(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=n[u],h=i[u],f=h.length,d=OM(e.call(c,c&&c.__data__,u,n)),p=d.length,m=a[u]=new Array(p),g=o[u]=new Array(p),y=l[u]=new Array(f);r(c,h,m,g,y,d,t);for(var b=0,_=0,v,w;b<p;++b)if(v=m[b]){for(b>=_&&(_=b+1);!(w=g[_])&&++_<p;);v._next=w||null}}return o=new yr(o,n),o._enter=a,o._exit=l,o}function OM(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FM(){return new yr(this._exit||this._groups.map(Uw),this._parents)}function BM(e,t,r){var n=this.enter(),i=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?s.remove():r(s),n&&i?n.merge(i).order():i}function LM(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,s=n.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=r[l],c=n[l],h=u.length,f=a[l]=new Array(h),d,p=0;p<h;++p)(d=u[p]||c[p])&&(f[p]=d);for(;l<i;++l)a[l]=r[l];return new yr(a,this._parents)}function UM(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,s=n[i],o;--i>=0;)(o=n[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function GM(e){e||(e=HM);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var r=this._groups,n=r.length,i=new Array(n),s=0;s<n;++s){for(var o=r[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new yr(i,this._parents).order()}function HM(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function zM(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function VM(){return Array.from(this)}function WM(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length;i<s;++i){var o=n[i];if(o)return o}return null}function XM(){let e=0;for(const t of this)++e;return e}function $M(){return!this.node()}function jM(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function YM(e){return function(){this.removeAttribute(e)}}function qM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ZM(e,t){return function(){this.setAttribute(e,t)}}function KM(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function QM(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function JM(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function tI(e,t){var r=ff(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?qM:YM:typeof t=="function"?r.local?JM:QM:r.local?KM:ZM)(r,t))}function Gw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eI(e){return function(){this.style.removeProperty(e)}}function rI(e,t,r){return function(){this.style.setProperty(e,t,r)}}function nI(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function iI(e,t,r){return arguments.length>1?this.each((t==null?eI:typeof t=="function"?nI:rI)(e,t,r??"")):$o(this.node(),e)}function $o(e,t){return e.style.getPropertyValue(t)||Gw(e).getComputedStyle(e,null).getPropertyValue(t)}function sI(e){return function(){delete this[e]}}function oI(e,t){return function(){this[e]=t}}function aI(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function lI(e,t){return arguments.length>1?this.each((t==null?sI:typeof t=="function"?aI:oI)(e,t)):this.node()[e]}function Hw(e){return e.trim().split(/^|\s+/)}function ag(e){return e.classList||new zw(e)}function zw(e){this._node=e,this._names=Hw(e.getAttribute("class")||"")}zw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Vw(e,t){for(var r=ag(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function Ww(e,t){for(var r=ag(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function uI(e){return function(){Vw(this,e)}}function cI(e){return function(){Ww(this,e)}}function hI(e,t){return function(){(t.apply(this,arguments)?Vw:Ww)(this,e)}}function fI(e,t){var r=Hw(e+"");if(arguments.length<2){for(var n=ag(this.node()),i=-1,s=r.length;++i<s;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?hI:t?uI:cI)(r,t))}function dI(){this.textContent=""}function pI(e){return function(){this.textContent=e}}function mI(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function gI(e){return arguments.length?this.each(e==null?dI:(typeof e=="function"?mI:pI)(e)):this.node().textContent}function yI(){this.innerHTML=""}function bI(e){return function(){this.innerHTML=e}}function _I(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vI(e){return arguments.length?this.each(e==null?yI:(typeof e=="function"?_I:bI)(e)):this.node().innerHTML}function wI(){this.nextSibling&&this.parentNode.appendChild(this)}function xI(){return this.each(wI)}function TI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AI(){return this.each(TI)}function EI(e){var t=typeof e=="function"?e:df(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function CI(){return null}function SI(e,t){var r=typeof e=="function"?e:df(e),n=t==null?CI:typeof t=="function"?t:og(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function MI(){var e=this.parentNode;e&&e.removeChild(this)}function II(){return this.each(MI)}function RI(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function PI(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kI(e){return this.select(e?PI:RI)}function DI(e){return arguments.length?this.property("__data__",e):this.node().__data__}function NI(e){return function(t){e.call(this,t,this.__data__)}}function OI(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function FI(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,s;r<i;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function BI(e,t,r){return function(){var n=this.__on,i,s=NI(t);if(n){for(var o=0,a=n.length;o<a;++o)if((i=n[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=r),i.value=t;return}}this.addEventListener(e.type,s,r),i={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(i):this.__on=[i]}}function LI(e,t,r){var n=OI(e+""),i,s=n.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=n[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?BI:FI,i=0;i<s;++i)this.each(a(n[i],t,r));return this}function Xw(e,t,r){var n=Gw(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function UI(e,t){return function(){return Xw(this,e,t)}}function GI(e,t){return function(){return Xw(this,e,t.apply(this,arguments))}}function HI(e,t){return this.each((typeof t=="function"?GI:UI)(e,t))}function*zI(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,s=n.length,o;i<s;++i)(o=n[i])&&(yield o)}var $w=[null];function yr(e,t){this._groups=e,this._parents=t}function Kl(){return new yr([[document.documentElement]],$w)}function VI(){return this}yr.prototype=Kl.prototype={constructor:yr,select:mM,selectAll:_M,selectChild:TM,selectChildren:SM,filter:MM,data:NM,enter:IM,exit:FM,join:BM,merge:LM,selection:VI,order:UM,sort:GM,call:zM,nodes:VM,node:WM,size:XM,empty:$M,each:jM,attr:tI,style:iI,property:lI,classed:fI,text:gI,html:vI,raise:xI,lower:AI,append:EI,insert:SI,remove:II,clone:kI,datum:DI,on:LI,dispatch:HI,[Symbol.iterator]:zI};function Po(e){return typeof e=="string"?new yr([[document.querySelector(e)]],[document.documentElement]):new yr([[e]],$w)}function WI(e){let t;for(;t=e.sourceEvent;)e=t;return e}function XI(e,t){if(e=WI(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function ha(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ql(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Vi(){}var Rs=.7,jo=1/Rs,ko="\\s*([+-]?\\d+)\\s*",xl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$I=/^#([0-9a-f]{3,8})$/,jI=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),YI=new RegExp(`^rgb\\(${xn},${xn},${xn}\\)$`),qI=new RegExp(`^rgba\\(${ko},${ko},${ko},${xl}\\)$`),ZI=new RegExp(`^rgba\\(${xn},${xn},${xn},${xl}\\)$`),KI=new RegExp(`^hsl\\(${xl},${xn},${xn}\\)$`),QI=new RegExp(`^hsla\\(${xl},${xn},${xn},${xl}\\)$`),my={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ha(Vi,Ps,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gy,formatHex:gy,formatHex8:JI,formatHsl:tR,formatRgb:yy,toString:yy});function gy(){return this.rgb().formatHex()}function JI(){return this.rgb().formatHex8()}function tR(){return jw(this).formatHsl()}function yy(){return this.rgb().formatRgb()}function Ps(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=$I.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?by(t):r===3?new Fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Iu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Iu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jI.exec(e))?new Fe(t[1],t[2],t[3],1):(t=YI.exec(e))?new Fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qI.exec(e))?Iu(t[1],t[2],t[3],t[4]):(t=ZI.exec(e))?Iu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=KI.exec(e))?wy(t[1],t[2]/100,t[3]/100,1):(t=QI.exec(e))?wy(t[1],t[2]/100,t[3]/100,t[4]):my.hasOwnProperty(e)?by(my[e]):e==="transparent"?new Fe(NaN,NaN,NaN,0):null}function by(e){return new Fe(e>>16&255,e>>8&255,e&255,1)}function Iu(e,t,r,n){return n<=0&&(e=t=r=NaN),new Fe(e,t,r,n)}function lg(e){return e instanceof Vi||(e=Ps(e)),e?(e=e.rgb(),new Fe(e.r,e.g,e.b,e.opacity)):new Fe}function Bi(e,t,r,n){return arguments.length===1?lg(e):new Fe(e,t,r,n??1)}function Fe(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}ha(Fe,Bi,Ql(Vi,{brighter(e){return e=e==null?jo:Math.pow(jo,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Rs:Math.pow(Rs,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fe(ys(this.r),ys(this.g),ys(this.b),Qc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_y,formatHex:_y,formatHex8:eR,formatRgb:vy,toString:vy}));function _y(){return`#${ds(this.r)}${ds(this.g)}${ds(this.b)}`}function eR(){return`#${ds(this.r)}${ds(this.g)}${ds(this.b)}${ds((isNaN(this.opacity)?1:this.opacity)*255)}`}function vy(){const e=Qc(this.opacity);return`${e===1?"rgb(":"rgba("}${ys(this.r)}, ${ys(this.g)}, ${ys(this.b)}${e===1?")":`, ${e})`}`}function Qc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ys(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ds(e){return e=ys(e),(e<16?"0":"")+e.toString(16)}function wy(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Gr(e,t,r,n)}function jw(e){if(e instanceof Gr)return new Gr(e.h,e.s,e.l,e.opacity);if(e instanceof Vi||(e=Ps(e)),!e)return new Gr;if(e instanceof Gr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(r-n)/a+(r<n)*6:r===s?o=(n-t)/a+2:o=(t-r)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Gr(o,a,l,e.opacity)}function Z0(e,t,r,n){return arguments.length===1?jw(e):new Gr(e,t,r,n??1)}function Gr(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}ha(Gr,Z0,Ql(Vi,{brighter(e){return e=e==null?jo:Math.pow(jo,e),new Gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rs:Math.pow(Rs,e),new Gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Fe(hd(e>=240?e-240:e+120,i,n),hd(e,i,n),hd(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Gr(xy(this.h),Ru(this.s),Ru(this.l),Qc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qc(this.opacity);return`${e===1?"hsl(":"hsla("}${xy(this.h)}, ${Ru(this.s)*100}%, ${Ru(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xy(e){return e=(e||0)%360,e<0?e+360:e}function Ru(e){return Math.max(0,Math.min(1,e||0))}function hd(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Yw=Math.PI/180,qw=180/Math.PI,Jc=18,Zw=.96422,Kw=1,Qw=.82521,Jw=4/29,Do=6/29,tx=3*Do*Do,rR=Do*Do*Do;function ex(e){if(e instanceof Tn)return new Tn(e.l,e.a,e.b,e.opacity);if(e instanceof qn)return rx(e);e instanceof Fe||(e=lg(e));var t=md(e.r),r=md(e.g),n=md(e.b),i=fd((.2225045*t+.7168786*r+.0606169*n)/Kw),s,o;return t===r&&r===n?s=o=i:(s=fd((.4360747*t+.3850649*r+.1430804*n)/Zw),o=fd((.0139322*t+.0971045*r+.7141733*n)/Qw)),new Tn(116*i-16,500*(s-i),200*(i-o),e.opacity)}function K0(e,t,r,n){return arguments.length===1?ex(e):new Tn(e,t,r,n??1)}function Tn(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n}ha(Tn,K0,Ql(Vi,{brighter(e){return new Tn(this.l+Jc*(e??1),this.a,this.b,this.opacity)},darker(e){return new Tn(this.l-Jc*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=Zw*dd(t),e=Kw*dd(e),r=Qw*dd(r),new Fe(pd(3.1338561*t-1.6168667*e-.4906146*r),pd(-.9787684*t+1.9161415*e+.033454*r),pd(.0719453*t-.2289914*e+1.4052427*r),this.opacity)}}));function fd(e){return e>rR?Math.pow(e,1/3):e/tx+Jw}function dd(e){return e>Do?e*e*e:tx*(e-Jw)}function pd(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function md(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function nR(e){if(e instanceof qn)return new qn(e.h,e.c,e.l,e.opacity);if(e instanceof Tn||(e=ex(e)),e.a===0&&e.b===0)return new qn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*qw;return new qn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Q0(e,t,r,n){return arguments.length===1?nR(e):new qn(e,t,r,n??1)}function qn(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n}function rx(e){if(isNaN(e.h))return new Tn(e.l,0,0,e.opacity);var t=e.h*Yw;return new Tn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ha(qn,Q0,Ql(Vi,{brighter(e){return new qn(this.h,this.c,this.l+Jc*(e??1),this.opacity)},darker(e){return new qn(this.h,this.c,this.l-Jc*(e??1),this.opacity)},rgb(){return rx(this).rgb()}}));var nx=-.14861,ug=1.78277,cg=-.29227,pf=-.90649,Tl=1.97294,Ty=Tl*pf,Ay=Tl*ug,Ey=ug*cg-pf*nx;function iR(e){if(e instanceof bs)return new bs(e.h,e.s,e.l,e.opacity);e instanceof Fe||(e=lg(e));var t=e.r/255,r=e.g/255,n=e.b/255,i=(Ey*n+Ty*t-Ay*r)/(Ey+Ty-Ay),s=n-i,o=(Tl*(r-i)-cg*s)/pf,a=Math.sqrt(o*o+s*s)/(Tl*i*(1-i)),l=a?Math.atan2(o,s)*qw-120:NaN;return new bs(l<0?l+360:l,a,i,e.opacity)}function Sn(e,t,r,n){return arguments.length===1?iR(e):new bs(e,t,r,n??1)}function bs(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}ha(bs,Sn,Ql(Vi,{brighter(e){return e=e==null?jo:Math.pow(jo,e),new bs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Rs:Math.pow(Rs,e),new bs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Yw,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),i=Math.sin(e);return new Fe(255*(t+r*(nx*n+ug*i)),255*(t+r*(cg*n+pf*i)),255*(t+r*(Tl*n)),this.opacity)}}));function sR(e,t,r,n,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*r+(1+3*e+3*s-3*o)*n+o*i)/6}function oR(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],s=e[n+1],o=n>0?e[n-1]:2*i-s,a=n<t-1?e[n+2]:2*s-i;return sR((r-n/t)*t,o,i,s,a)}}const mf=e=>()=>e;function ix(e,t){return function(r){return e+r*t}}function aR(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function hg(e,t){var r=t-e;return r?ix(e,r>180||r<-180?r-360*Math.round(r/360):r):mf(isNaN(e)?t:e)}function lR(e){return(e=+e)==1?$e:function(t,r){return r-t?aR(t,r,e):mf(isNaN(t)?r:t)}}function $e(e,t){var r=t-e;return r?ix(e,r):mf(isNaN(e)?t:e)}const ks=function e(t){var r=lR(t);function n(i,s){var o=r((i=Bi(i)).r,(s=Bi(s)).r),a=r(i.g,s.g),l=r(i.b,s.b),u=$e(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return n.gamma=e,n}(1);function uR(e){return function(t){var r=t.length,n=new Array(r),i=new Array(r),s=new Array(r),o,a;for(o=0;o<r;++o)a=Bi(t[o]),n[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return n=e(n),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=n(l),a.g=i(l),a.b=s(l),a+""}}}var cR=uR(oR);function hR(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function fR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dR(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=Jl(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(a){for(o=0;o<n;++o)s[o]=i[o](a);return s}}function pR(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function We(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function mR(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Jl(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var J0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gd=new RegExp(J0.source,"g");function gR(e){return function(){return e}}function yR(e){return function(t){return e(t)+""}}function sx(e,t){var r=J0.lastIndex=gd.lastIndex=0,n,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(n=J0.exec(e))&&(i=gd.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:We(n,i)})),r=gd.lastIndex;return r<t.length&&(s=t.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?yR(l[0].x):gR(t):(t=l.length,function(u){for(var c=0,h;c<t;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}function Jl(e,t){var r=typeof t,n;return t==null||r==="boolean"?mf(t):(r==="number"?We:r==="string"?(n=Ps(t))?(t=n,ks):sx:t instanceof Ps?ks:t instanceof Date?pR:fR(t)?hR:Array.isArray(t)?dR:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mR:We)(e,t)}function fg(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var Cy=180/Math.PI,tp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ox(e,t,r,n,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*r+t*n)&&(r-=e*l,n-=t*l),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,l/=a),e*n<t*r&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Cy,skewX:Math.atan(l)*Cy,scaleX:o,scaleY:a}}var Pu;function bR(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tp:ox(t.a,t.b,t.c,t.d,t.e,t.f)}function _R(e){return e==null||(Pu||(Pu=document.createElementNS("http://www.w3.org/2000/svg","g")),Pu.setAttribute("transform",e),!(e=Pu.transform.baseVal.consolidate()))?tp:(e=e.matrix,ox(e.a,e.b,e.c,e.d,e.e,e.f))}function ax(e,t,r,n){function i(u){return u.length?u.pop()+" ":""}function s(u,c,h,f,d,p){if(u!==h||c!==f){var m=d.push("translate(",null,t,null,r);p.push({i:m-4,x:We(u,h)},{i:m-2,x:We(c,f)})}else(h||f)&&d.push("translate("+h+t+f+r)}function o(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,n)-2,x:We(u,c)})):c&&h.push(i(h)+"rotate("+c+n)}function a(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,n)-2,x:We(u,c)}):c&&h.push(i(h)+"skewX("+c+n)}function l(u,c,h,f,d,p){if(u!==h||c!==f){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:We(u,h)},{i:m-2,x:We(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,f),o(u.rotate,c.rotate,h,f),a(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var p=-1,m=f.length,g;++p<m;)h[(g=f[p]).i]=g.x(d);return h.join("")}}}var vR=ax(bR,"px, ","px)","deg)"),wR=ax(_R,", ",")",")");function xR(e){return function(t,r){var n=e((t=Z0(t)).h,(r=Z0(r)).h),i=$e(t.s,r.s),s=$e(t.l,r.l),o=$e(t.opacity,r.opacity);return function(a){return t.h=n(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const TR=xR(hg);function AR(e,t){var r=$e((e=K0(e)).l,(t=K0(t)).l),n=$e(e.a,t.a),i=$e(e.b,t.b),s=$e(e.opacity,t.opacity);return function(o){return e.l=r(o),e.a=n(o),e.b=i(o),e.opacity=s(o),e+""}}function ER(e){return function(t,r){var n=e((t=Q0(t)).h,(r=Q0(r)).h),i=$e(t.c,r.c),s=$e(t.l,r.l),o=$e(t.opacity,r.opacity);return function(a){return t.h=n(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const CR=ER(hg);function lx(e){return function t(r){r=+r;function n(i,s){var o=e((i=Sn(i)).h,(s=Sn(s)).h),a=$e(i.s,s.s),l=$e(i.l,s.l),u=$e(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,r)),i.opacity=u(c),i+""}}return n.gamma=t,n}(1)}lx(hg);var dg=lx($e);function gf(e,t){t===void 0&&(t=e,e=Jl);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(o){var a=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[a](o-a)}}function Yr(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e(n/(t-1));return r}var Yo=0,Ga=0,Ea=0,ux=1e3,th,Ha,eh=0,Ds=0,yf=0,Al=typeof performance=="object"&&performance.now?performance:Date,cx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pg(){return Ds||(cx(SR),Ds=Al.now()+yf)}function SR(){Ds=0}function rh(){this._call=this._time=this._next=null}rh.prototype=hx.prototype={constructor:rh,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?pg():+r)+(t==null?0:+t),!this._next&&Ha!==this&&(Ha?Ha._next=this:th=this,Ha=this),this._call=e,this._time=r,ep()},stop:function(){this._call&&(this._call=null,this._time=1/0,ep())}};function hx(e,t,r){var n=new rh;return n.restart(e,t,r),n}function MR(){pg(),++Yo;for(var e=th,t;e;)(t=Ds-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Yo}function Sy(){Ds=(eh=Al.now())+yf,Yo=Ga=0;try{MR()}finally{Yo=0,RR(),Ds=0}}function IR(){var e=Al.now(),t=e-eh;t>ux&&(yf-=t,eh=e)}function RR(){for(var e,t=th,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:th=r);Ha=e,ep(n)}function ep(e){if(!Yo){Ga&&(Ga=clearTimeout(Ga));var t=e-Ds;t>24?(e<1/0&&(Ga=setTimeout(Sy,e-Al.now()-yf)),Ea&&(Ea=clearInterval(Ea))):(Ea||(eh=Al.now(),Ea=setInterval(IR,ux)),Yo=1,cx(Sy))}}function My(e,t,r){var n=new rh;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var PR=Ow("start","end","cancel","interrupt"),kR=[],fx=0,Iy=1,rp=2,Cc=3,Ry=4,np=5,Sc=6;function bf(e,t,r,n,i,s){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;DR(e,r,{name:t,index:n,group:i,on:PR,tween:kR,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fx})}function mg(e,t){var r=Qr(e,t);if(r.state>fx)throw new Error("too late; already scheduled");return r}function kn(e,t){var r=Qr(e,t);if(r.state>Cc)throw new Error("too late; already running");return r}function Qr(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function DR(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=hx(s,0,r.time);function s(u){r.state=Iy,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var c,h,f,d;if(r.state!==Iy)return l();for(c in n)if(d=n[c],d.name===r.name){if(d.state===Cc)return My(o);d.state===Ry?(d.state=Sc,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete n[c]):+c<t&&(d.state=Sc,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete n[c])}if(My(function(){r.state===Cc&&(r.state=Ry,r.timer.restart(a,r.delay,r.time),a(u))}),r.state=rp,r.on.call("start",e,e.__data__,r.index,r.group),r.state===rp){for(r.state=Cc,i=new Array(f=r.tween.length),c=0,h=-1;c<f;++c)(d=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(i[++h]=d);i.length=h+1}}function a(u){for(var c=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=np,1),h=-1,f=i.length;++h<f;)i[h].call(e,c);r.state===np&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=Sc,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function NR(e,t){var r=e.__transition,n,i,s=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){s=!1;continue}i=n.state>rp&&n.state<np,n.state=Sc,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}s&&delete e.__transition}}function OR(e){return this.each(function(){NR(this,e)})}function FR(e,t){var r,n;return function(){var i=kn(this,e),s=i.tween;if(s!==r){n=r=s;for(var o=0,a=n.length;o<a;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}i.tween=n}}function BR(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var s=kn(this,e),o=s.tween;if(o!==n){i=(n=o).slice();for(var a={name:t,value:r},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function LR(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Qr(this.node(),r).tween,i=0,s=n.length,o;i<s;++i)if((o=n[i]).name===e)return o.value;return null}return this.each((t==null?FR:BR)(r,e,t))}function gg(e,t,r){var n=e._id;return e.each(function(){var i=kn(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return Qr(i,n).value[t]}}function dx(e,t){var r;return(typeof t=="number"?We:t instanceof Ps?ks:(r=Ps(t))?(t=r,ks):sx)(e,t)}function UR(e){return function(){this.removeAttribute(e)}}function GR(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HR(e,t,r){var n,i=r+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===n?s:s=t(n=o,r)}}function zR(e,t,r){var n,i=r+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===n?s:s=t(n=o,r)}}function VR(e,t,r){var n,i,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===n&&l===i?s:(i=l,s=t(n=o,a)))}}function WR(e,t,r){var n,i,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===n&&l===i?s:(i=l,s=t(n=o,a)))}}function XR(e,t){var r=ff(e),n=r==="transform"?wR:dx;return this.attrTween(e,typeof t=="function"?(r.local?WR:VR)(r,n,gg(this,"attr."+e,t)):t==null?(r.local?GR:UR)(r):(r.local?zR:HR)(r,n,t))}function $R(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function jR(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function YR(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&jR(e,s)),r}return i._value=t,i}function qR(e,t){var r,n;function i(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&$R(e,s)),r}return i._value=t,i}function ZR(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=ff(e);return this.tween(r,(n.local?YR:qR)(n,t))}function KR(e,t){return function(){mg(this,e).delay=+t.apply(this,arguments)}}function QR(e,t){return t=+t,function(){mg(this,e).delay=t}}function JR(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?KR:QR)(t,e)):Qr(this.node(),t).delay}function tP(e,t){return function(){kn(this,e).duration=+t.apply(this,arguments)}}function eP(e,t){return t=+t,function(){kn(this,e).duration=t}}function rP(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tP:eP)(t,e)):Qr(this.node(),t).duration}function nP(e,t){if(typeof t!="function")throw new Error;return function(){kn(this,e).ease=t}}function iP(e){var t=this._id;return arguments.length?this.each(nP(t,e)):Qr(this.node(),t).ease}function sP(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;kn(this,e).ease=r}}function oP(e){if(typeof e!="function")throw new Error;return this.each(sP(this._id,e))}function aP(e){typeof e!="function"&&(e=Bw(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var s=t[i],o=s.length,a=n[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new si(n,this._parents,this._name,this._id)}function lP(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,s=Math.min(n,i),o=new Array(n),a=0;a<s;++a)for(var l=t[a],u=r[a],c=l.length,h=o[a]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;a<n;++a)o[a]=t[a];return new si(o,this._parents,this._name,this._id)}function uP(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function cP(e,t,r){var n,i,s=uP(t)?mg:kn;return function(){var o=s(this,e),a=o.on;a!==n&&(i=(n=a).copy()).on(t,r),o.on=i}}function hP(e,t){var r=this._id;return arguments.length<2?Qr(this.node(),r).on.on(e):this.each(cP(r,e,t))}function fP(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function dP(){return this.on("end.remove",fP(this._id))}function pP(e){var t=this._name,r=this._id;typeof e!="function"&&(e=og(e));for(var n=this._groups,i=n.length,s=new Array(i),o=0;o<i;++o)for(var a=n[o],l=a.length,u=s[o]=new Array(l),c,h,f=0;f<l;++f)(c=a[f])&&(h=e.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,bf(u[f],t,r,f,u,Qr(c,r)));return new si(s,this._parents,t,r)}function mP(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Fw(e));for(var n=this._groups,i=n.length,s=[],o=[],a=0;a<i;++a)for(var l=n[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=e.call(c,c.__data__,h,l),d,p=Qr(c,r),m=0,g=f.length;m<g;++m)(d=f[m])&&bf(d,t,r,m,f,p);s.push(f),o.push(c)}return new si(s,o,t,r)}var gP=Kl.prototype.constructor;function yP(){return new gP(this._groups,this._parents)}function bP(e,t){var r,n,i;return function(){var s=$o(this,e),o=(this.style.removeProperty(e),$o(this,e));return s===o?null:s===r&&o===n?i:i=t(r=s,n=o)}}function px(e){return function(){this.style.removeProperty(e)}}function _P(e,t,r){var n,i=r+"",s;return function(){var o=$o(this,e);return o===i?null:o===n?s:s=t(n=o,r)}}function vP(e,t,r){var n,i,s;return function(){var o=$o(this,e),a=r(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),$o(this,e))),o===l?null:o===n&&l===i?s:(i=l,s=t(n=o,a))}}function wP(e,t){var r,n,i,s="style."+t,o="end."+s,a;return function(){var l=kn(this,e),u=l.on,c=l.value[s]==null?a||(a=px(t)):void 0;(u!==r||i!==c)&&(n=(r=u).copy()).on(o,i=c),l.on=n}}function xP(e,t,r){var n=(e+="")=="transform"?vR:dx;return t==null?this.styleTween(e,bP(e,n)).on("end.style."+e,px(e)):typeof t=="function"?this.styleTween(e,vP(e,n,gg(this,"style."+e,t))).each(wP(this._id,e)):this.styleTween(e,_P(e,n,t),r).on("end.style."+e,null)}function TP(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function AP(e,t,r){var n,i;function s(){var o=t.apply(this,arguments);return o!==i&&(n=(i=o)&&TP(e,o,r)),n}return s._value=t,s}function EP(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,AP(e,t,r??""))}function CP(e){return function(){this.textContent=e}}function SP(e){return function(){var t=e(this);this.textContent=t??""}}function MP(e){return this.tween("text",typeof e=="function"?SP(gg(this,"text",e)):CP(e==null?"":e+""))}function IP(e){return function(t){this.textContent=e.call(this,t)}}function RP(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&IP(i)),t}return n._value=e,n}function PP(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,RP(e))}function kP(){for(var e=this._name,t=this._id,r=mx(),n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=Qr(l,t);bf(l,e,r,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new si(n,this._parents,e,r)}function DP(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};r.each(function(){var u=kn(this,n),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var NP=0;function si(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function mx(){return++NP}var Bn=Kl.prototype;si.prototype={constructor:si,select:pP,selectAll:mP,selectChild:Bn.selectChild,selectChildren:Bn.selectChildren,filter:aP,merge:lP,selection:yP,transition:kP,call:Bn.call,nodes:Bn.nodes,node:Bn.node,size:Bn.size,empty:Bn.empty,each:Bn.each,on:hP,attr:XR,attrTween:ZR,style:xP,styleTween:EP,text:MP,textTween:PP,remove:dP,tween:LR,delay:JR,duration:rP,ease:iP,easeVarying:oP,end:DP,[Symbol.iterator]:Bn[Symbol.iterator]};function OP(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var FP={time:null,delay:0,duration:250,ease:OP};function BP(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function LP(e){var t,r;e instanceof si?(t=e._id,e=e._name):(t=mx(),(r=FP).time=pg(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,s=0;s<i;++s)for(var o=n[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&bf(l,e,t,u,o,r||BP(l,t));return new si(n,this._parents,e,t)}Kl.prototype.interrupt=OR;Kl.prototype.transition=LP;const ip=Math.PI,sp=2*ip,ns=1e-6,UP=sp-ns;function gx(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function GP(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return gx;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class HP{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?gx:GP(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,o){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=n-t,u=i-r,c=o-t,h=a-r,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>ns)if(!(Math.abs(h*l-u*c)>ns)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let d=n-o,p=i-a,m=l*l+u*u,g=d*d+p*p,y=Math.sqrt(m),b=Math.sqrt(f),_=s*Math.tan((ip-Math.acos((m+f-g)/(2*y*b)))/2),v=_/b,w=_/y;Math.abs(v-1)>ns&&this._append`L${t+v*c},${r+v*h}`,this._append`A${s},${s},0,0,${+(h*d>c*p)},${this._x1=t+w*l},${this._y1=r+w*u}`}}arc(t,r,n,i,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),l=n*Math.sin(i),u=t+a,c=r+l,h=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>ns||Math.abs(this._y1-c)>ns)&&this._append`L${u},${c}`,n&&(f<0&&(f=f%sp+sp),f>UP?this._append`A${n},${n},0,1,${h},${t-a},${r-l}A${n},${n},0,1,${h},${this._x1=u},${this._y1=c}`:f>ns&&this._append`A${n},${n},0,${+(f>=ip)},${h},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function op(e=3){return new HP(+e)}var Py={},yd={},bd=34,Ca=10,_d=13;function yx(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function zP(e,t){var r=yx(e);return function(n,i){return t(r(n),i,e)}}function ky(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var i in n)i in t||r.push(t[i]=i)}),r}function tr(e,t){var r=e+"",n=r.length;return n<t?new Array(t-n+1).join(0)+r:r}function VP(e){return e<0?"-"+tr(-e,6):e>9999?"+"+tr(e,6):tr(e,4)}function WP(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),n=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":VP(e.getUTCFullYear())+"-"+tr(e.getUTCMonth()+1,2)+"-"+tr(e.getUTCDate(),2)+(i?"T"+tr(t,2)+":"+tr(r,2)+":"+tr(n,2)+"."+tr(i,3)+"Z":n?"T"+tr(t,2)+":"+tr(r,2)+":"+tr(n,2)+"Z":r||t?"T"+tr(t,2)+":"+tr(r,2)+"Z":"")}function XP(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function n(h,f){var d,p,m=i(h,function(g,y){if(d)return d(g,y-1);p=g,d=f?zP(g,f):yx(g)});return m.columns=p||[],m}function i(h,f){var d=[],p=h.length,m=0,g=0,y,b=p<=0,_=!1;h.charCodeAt(p-1)===Ca&&--p,h.charCodeAt(p-1)===_d&&--p;function v(){if(b)return yd;if(_)return _=!1,Py;var A,x=m,E;if(h.charCodeAt(x)===bd){for(;m++<p&&h.charCodeAt(m)!==bd||h.charCodeAt(++m)===bd;);return(A=m)>=p?b=!0:(E=h.charCodeAt(m++))===Ca?_=!0:E===_d&&(_=!0,h.charCodeAt(m)===Ca&&++m),h.slice(x+1,A-1).replace(/""/g,'"')}for(;m<p;){if((E=h.charCodeAt(A=m++))===Ca)_=!0;else if(E===_d)_=!0,h.charCodeAt(m)===Ca&&++m;else if(E!==r)continue;return h.slice(x,A)}return b=!0,h.slice(x,p)}for(;(y=v())!==yd;){for(var w=[];y!==Py&&y!==yd;)w.push(y),y=v();f&&(w=f(w,g++))==null||d.push(w)}return d}function s(h,f){return h.map(function(d){return f.map(function(p){return c(d[p])}).join(e)})}function o(h,f){return f==null&&(f=ky(h)),[f.map(c).join(e)].concat(s(h,f)).join(`
`)}function a(h,f){return f==null&&(f=ky(h)),s(h,f).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(c).join(e)}function c(h){return h==null?"":h instanceof Date?WP(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:n,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}var $P=XP(","),jP=$P.parse;function YP(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function qP(e,t){return fetch(e,t).then(YP)}function ZP(e){return function(t,r,n){return arguments.length===2&&typeof r=="function"&&(n=r,r=void 0),qP(t,r).then(function(i){return e(i,n)})}}var bx=ZP(jP);function KP(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function nh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function qo(e){return e=nh(Math.abs(e)),e?e[1]:NaN}function QP(e,t){return function(r,n){for(var i=r.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(r.substring(i-=a,i+a)),!((l+=a+1)>n));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function JP(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var tk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function El(e){if(!(t=tk.exec(e)))throw new Error("invalid format: "+e);var t;return new yg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}El.prototype=yg.prototype;function yg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ek(e){t:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break t;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var _x;function rk(e,t){var r=nh(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(_x=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+nh(e,Math.max(0,t+s-1))[0]}function Dy(e,t){var r=nh(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const Ny={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:KP,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Dy(e*100,t),r:Dy,s:rk,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Oy(e){return e}var Fy=Array.prototype.map,By=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function nk(e){var t=e.grouping===void 0||e.thousands===void 0?Oy:QP(Fy.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Oy:JP(Fy.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(h){h=El(h);var f=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,y=h.width,b=h.comma,_=h.precision,v=h.trim,w=h.type;w==="n"?(b=!0,w="g"):Ny[w]||(_===void 0&&(_=12),v=!0,w="g"),(g||f==="0"&&d==="=")&&(g=!0,f="0",d="=");var A=m==="$"?r:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",x=m==="$"?n:/[%p]/.test(w)?o:"",E=Ny[w],T=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function M(P){var R=A,S=x,C,I,F;if(w==="c")S=E(P)+S,P="";else{P=+P;var H=P<0||1/P<0;if(P=isNaN(P)?l:E(Math.abs(P),_),v&&(P=ek(P)),H&&+P==0&&p!=="+"&&(H=!1),R=(H?p==="("?p:a:p==="-"||p==="("?"":p)+R,S=(w==="s"?By[8+_x/3]:"")+S+(H&&p==="("?")":""),T){for(C=-1,I=P.length;++C<I;)if(F=P.charCodeAt(C),48>F||F>57){S=(F===46?i+P.slice(C+1):P.slice(C))+S,P=P.slice(0,C);break}}}b&&!g&&(P=t(P,1/0));var X=R.length+P.length+S.length,Z=X<y?new Array(y-X+1).join(f):"";switch(b&&g&&(P=t(Z+P,Z.length?y-S.length:1/0),Z=""),d){case"<":P=R+P+S+Z;break;case"=":P=R+Z+P+S;break;case"^":P=Z.slice(0,X=Z.length>>1)+R+P+S+Z.slice(X);break;default:P=Z+R+P+S;break}return s(P)}return M.toString=function(){return h+""},M}function c(h,f){var d=u((h=El(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(qo(f)/3)))*3,m=Math.pow(10,-p),g=By[8+p/3];return function(y){return d(m*y)+g}}return{format:u,formatPrefix:c}}var ku,Mn,vx;ik({thousands:",",grouping:[3],currency:["$",""]});function ik(e){return ku=nk(e),Mn=ku.format,vx=ku.formatPrefix,ku}function sk(e){return Math.max(0,-qo(Math.abs(e)))}function ok(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qo(t)/3)))*3-qo(Math.abs(e)))}function ak(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qo(t)-qo(e))+1}var Tt=1e-6,wx=1e-12,Ct=Math.PI,he=Ct/2,Ly=Ct/4,br=Ct*2,qe=180/Ct,ce=Ct/180,Vt=Math.abs,fa=Math.atan,oi=Math.atan2,Et=Math.cos,xx=Math.exp,ih=Math.log,vd=Math.pow,wt=Math.sin,Er=Math.sign||function(e){return e>0?1:e<0?-1:0},ir=Math.sqrt,bg=Math.tan;function Tx(e){return e>1?0:e<-1?Ct:Math.acos(e)}function Pr(e){return e>1?he:e<-1?-he:Math.asin(e)}function Cr(){}function sh(e,t){e&&Gy.hasOwnProperty(e.type)&&Gy[e.type](e,t)}var Uy={Feature:function(e,t){sh(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,n=-1,i=r.length;++n<i;)sh(r[n].geometry,t)}},Gy={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)e=r[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){ap(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)ap(r[n],t,0)},Polygon:function(e,t){Hy(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,n=-1,i=r.length;++n<i;)Hy(r[n],t)},GeometryCollection:function(e,t){for(var r=e.geometries,n=-1,i=r.length;++n<i;)sh(r[n],t)}};function ap(e,t,r){var n=-1,i=e.length-r,s;for(t.lineStart();++n<i;)s=e[n],t.point(s[0],s[1],s[2]);t.lineEnd()}function Hy(e,t){var r=-1,n=e.length;for(t.polygonStart();++r<n;)ap(e[r],t,1);t.polygonEnd()}function cs(e,t){e&&Uy.hasOwnProperty(e.type)?Uy[e.type](e,t):sh(e,t)}function lp(e){return[oi(e[1],e[0]),Pr(e[2])]}function Zo(e){var t=e[0],r=e[1],n=Et(r);return[n*Et(t),n*wt(t),wt(r)]}function Du(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function oh(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wd(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Nu(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function up(e){var t=ir(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function cp(e,t){function r(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(r.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),r}function hp(e,t){return Vt(e)>Ct&&(e-=Math.round(e/br)*br),[e,t]}hp.invert=hp;function Ax(e,t,r){return(e%=br)?t||r?cp(Vy(e),Wy(t,r)):Vy(e):t||r?Wy(t,r):hp}function zy(e){return function(t,r){return t+=e,Vt(t)>Ct&&(t-=Math.round(t/br)*br),[t,r]}}function Vy(e){var t=zy(e);return t.invert=zy(-e),t}function Wy(e,t){var r=Et(e),n=wt(e),i=Et(t),s=wt(t);function o(a,l){var u=Et(l),c=Et(a)*u,h=wt(a)*u,f=wt(l),d=f*r+c*n;return[oi(h*i-d*s,c*r-f*n),Pr(d*i+h*s)]}return o.invert=function(a,l){var u=Et(l),c=Et(a)*u,h=wt(a)*u,f=wt(l),d=f*i-h*s;return[oi(h*i+f*s,c*r+d*n),Pr(d*r-c*n)]},o}function lk(e){e=Ax(e[0]*ce,e[1]*ce,e.length>2?e[2]*ce:0);function t(r){return r=e(r[0]*ce,r[1]*ce),r[0]*=qe,r[1]*=qe,r}return t.invert=function(r){return r=e.invert(r[0]*ce,r[1]*ce),r[0]*=qe,r[1]*=qe,r},t}function uk(e,t,r,n,i,s){if(r){var o=Et(t),a=wt(t),l=n*r;i==null?(i=t+n*br,s=t-l/2):(i=Xy(o,i),s=Xy(o,s),(n>0?i<s:i>s)&&(i+=n*br));for(var u,c=i;n>0?c>s:c<s;c-=l)u=lp([o,-a*Et(c),-a*wt(c)]),e.point(u[0],u[1])}}function Xy(e,t){t=Zo(t),t[0]-=e,up(t);var r=Tx(-t[1]);return((-t[2]<0?-r:r)+br-Tt)%br}function Ex(){var e=[],t;return{point:function(r,n,i){t.push([r,n,i])},lineStart:function(){e.push(t=[])},lineEnd:Cr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var r=e;return e=[],t=null,r}}}function Mc(e,t){return Vt(e[0]-t[0])<Tt&&Vt(e[1]-t[1])<Tt}function Ou(e,t,r,n){this.x=e,this.z=t,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Cx(e,t,r,n,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(Mc(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Tt}s.push(b=new Ou(g,p,null,!0)),o.push(b.o=new Ou(g,null,b,!1)),s.push(b=new Ou(y,p,null,!1)),o.push(b.o=new Ou(y,null,b,!0))}}),!!s.length){for(o.sort(t),$y(s),$y(o),a=0,l=o.length;a<l;++a)o[a].e=r=!r;for(var u=s[0],c,h;;){for(var f=u,d=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(a=0,l=c.length;a<l;++a)i.point((h=c[a])[0],h[1]);else n(f.x,f.n.x,1,i);f=f.n}else{if(d)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((h=c[a])[0],h[1]);else n(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,d=!d}while(!f.v);i.lineEnd()}}}function $y(e){if(t=e.length){for(var t,r=0,n=e[0],i;++r<t;)n.n=i=e[r],i.p=n,n=i;n.n=i=e[0],i.p=n}}function xd(e){return Vt(e[0])<=Ct?e[0]:Er(e[0])*((Vt(e[0])+Ct)%br-Ct)}function ck(e,t){var r=xd(t),n=t[1],i=wt(n),s=[wt(r),-Et(r),0],o=0,a=0,l=new Ms;i===1?n=he+Tt:i===-1&&(n=-he-Tt);for(var u=0,c=e.length;u<c;++u)if(f=(h=e[u]).length)for(var h,f,d=h[f-1],p=xd(d),m=d[1]/2+Ly,g=wt(m),y=Et(m),b=0;b<f;++b,p=v,g=A,y=x,d=_){var _=h[b],v=xd(_),w=_[1]/2+Ly,A=wt(w),x=Et(w),E=v-p,T=E>=0?1:-1,M=T*E,P=M>Ct,R=g*A;if(l.add(oi(R*T*wt(M),y*x+R*Et(M))),o+=P?E+T*br:E,P^p>=r^v>=r){var S=oh(Zo(d),Zo(_));up(S);var C=oh(s,S);up(C);var I=(P^E>=0?-1:1)*Pr(C[2]);(n>I||n===I&&(S[0]||S[1]))&&(a+=P^E>=0?1:-1)}}return(o<-Tt||o<Tt&&l<-wx)^a&1}function Sx(e,t,r,n){return function(i){var s=t(i),o=Ex(),a=t(o),l=!1,u,c,h,f={point:d,lineStart:m,lineEnd:g,polygonStart:function(){f.point=y,f.lineStart=b,f.lineEnd=_,c=[],u=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=g,c=Nw(c);var v=ck(u,n);c.length?(l||(i.polygonStart(),l=!0),Cx(c,fk,v,r,i)):v&&(l||(i.polygonStart(),l=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(v,w){e(v,w)&&i.point(v,w)}function p(v,w){s.point(v,w)}function m(){f.point=p,s.lineStart()}function g(){f.point=d,s.lineEnd()}function y(v,w){h.push([v,w]),a.point(v,w)}function b(){a.lineStart(),h=[]}function _(){y(h[0][0],h[0][1]),a.lineEnd();var v=a.clean(),w=o.result(),A,x=w.length,E,T,M;if(h.pop(),u.push(h),h=null,!!x){if(v&1){if(T=w[0],(E=T.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),A=0;A<E;++A)i.point((M=T[A])[0],M[1]);i.lineEnd()}return}x>1&&v&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(hk))}}return f}}function hk(e){return e.length>1}function fk(e,t){return((e=e.x)[0]<0?e[1]-he-Tt:he-e[1])-((t=t.x)[0]<0?t[1]-he-Tt:he-t[1])}const jy=Sx(function(){return!0},dk,mk,[-Ct,-he]);function dk(e){var t=NaN,r=NaN,n=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Ct:-Ct,l=Vt(s-t);Vt(l-Ct)<Tt?(e.point(t,r=(r+o)/2>0?he:-he),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(s,r),i=0):n!==a&&l>=Ct&&(Vt(t-n)<Tt&&(t-=n*Tt),Vt(s-a)<Tt&&(s-=a*Tt),r=pk(t,r,s,o),e.point(n,r),e.lineEnd(),e.lineStart(),e.point(a,r),i=0),e.point(t=s,r=o),n=a},lineEnd:function(){e.lineEnd(),t=r=NaN},clean:function(){return 2-i}}}function pk(e,t,r,n){var i,s,o=wt(e-r);return Vt(o)>Tt?fa((wt(t)*(s=Et(n))*wt(r)-wt(n)*(i=Et(t))*wt(e))/(i*s*o)):(t+n)/2}function mk(e,t,r,n){var i;if(e==null)i=r*he,n.point(-Ct,i),n.point(0,i),n.point(Ct,i),n.point(Ct,0),n.point(Ct,-i),n.point(0,-i),n.point(-Ct,-i),n.point(-Ct,0),n.point(-Ct,i);else if(Vt(e[0]-t[0])>Tt){var s=e[0]<t[0]?Ct:-Ct;i=r*s/2,n.point(-s,i),n.point(0,i),n.point(s,i)}else n.point(t[0],t[1])}function gk(e){var t=Et(e),r=6*ce,n=t>0,i=Vt(t)>Tt;function s(c,h,f,d){uk(d,e,r,f,c,h)}function o(c,h){return Et(c)*Et(h)>t}function a(c){var h,f,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(g,y){var b=[g,y],_,v=o(g,y),w=n?v?0:u(g,y):v?u(g+(g<0?Ct:-Ct),y):0;if(!h&&(p=d=v)&&c.lineStart(),v!==d&&(_=l(h,b),(!_||Mc(h,_)||Mc(b,_))&&(b[2]=1)),v!==d)m=0,v?(c.lineStart(),_=l(b,h),c.point(_[0],_[1])):(_=l(h,b),c.point(_[0],_[1],2),c.lineEnd()),h=_;else if(i&&h&&n^v){var A;!(w&f)&&(A=l(b,h,!0))&&(m=0,n?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)))}v&&(!h||!Mc(h,b))&&c.point(b[0],b[1]),h=b,d=v,f=w},lineEnd:function(){d&&c.lineEnd(),h=null},clean:function(){return m|(p&&d)<<1}}}function l(c,h,f){var d=Zo(c),p=Zo(h),m=[1,0,0],g=oh(d,p),y=Du(g,g),b=g[0],_=y-b*b;if(!_)return!f&&c;var v=t*y/_,w=-t*b/_,A=oh(m,g),x=Nu(m,v),E=Nu(g,w);wd(x,E);var T=A,M=Du(x,T),P=Du(T,T),R=M*M-P*(Du(x,x)-1);if(!(R<0)){var S=ir(R),C=Nu(T,(-M-S)/P);if(wd(C,x),C=lp(C),!f)return C;var I=c[0],F=h[0],H=c[1],X=h[1],Z;F<I&&(Z=I,I=F,F=Z);var D=F-I,O=Vt(D-Ct)<Tt,z=O||D<Tt;if(!O&&X<H&&(Z=H,H=X,X=Z),z?O?H+X>0^C[1]<(Vt(C[0]-I)<Tt?H:X):H<=C[1]&&C[1]<=X:D>Ct^(I<=C[0]&&C[0]<=F)){var k=Nu(T,(-M+S)/P);return wd(k,x),[C,lp(k)]}}}function u(c,h){var f=n?e:Ct-e,d=0;return c<-f?d|=1:c>f&&(d|=2),h<-f?d|=4:h>f&&(d|=8),d}return Sx(o,a,s,n?[0,-e]:[-Ct,e-Ct])}function yk(e,t,r,n,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],c=0,h=1,f=l-o,d=u-a,p;if(p=r-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<h&&(h=p)}else if(f>0){if(p>h)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>h)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<h&&(h=p)}if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>c&&(c=p)}if(p=s-a,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<h&&(h=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*d),h<1&&(t[0]=o+h*f,t[1]=a+h*d),!0}}}}}var za=1e9,Fu=-za;function Mx(e,t,r,n){function i(u,c){return e<=u&&u<=r&&t<=c&&c<=n}function s(u,c,h,f){var d=0,p=0;if(u==null||(d=o(u,h))!==(p=o(c,h))||l(u,c)<0^h>0)do f.point(d===0||d===3?e:r,d>1?n:t);while((d=(d+h+4)%4)!==p);else f.point(c[0],c[1])}function o(u,c){return Vt(u[0]-e)<Tt?c>0?0:3:Vt(u[0]-r)<Tt?c>0?2:1:Vt(u[1]-t)<Tt?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var h=o(u,1),f=o(c,1);return h!==f?h-f:h===0?c[1]-u[1]:h===1?u[0]-c[0]:h===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,h=Ex(),f,d,p,m,g,y,b,_,v,w,A,x={point:E,lineStart:R,lineEnd:S,polygonStart:M,polygonEnd:P};function E(I,F){i(I,F)&&c.point(I,F)}function T(){for(var I=0,F=0,H=d.length;F<H;++F)for(var X=d[F],Z=1,D=X.length,O=X[0],z,k,Y=O[0],B=O[1];Z<D;++Z)z=Y,k=B,O=X[Z],Y=O[0],B=O[1],k<=n?B>n&&(Y-z)*(n-k)>(B-k)*(e-z)&&++I:B<=n&&(Y-z)*(n-k)<(B-k)*(e-z)&&--I;return I}function M(){c=h,f=[],d=[],A=!0}function P(){var I=T(),F=A&&I,H=(f=Nw(f)).length;(F||H)&&(u.polygonStart(),F&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),H&&Cx(f,a,I,s,u),u.polygonEnd()),c=u,f=d=p=null}function R(){x.point=C,d&&d.push(p=[]),w=!0,v=!1,b=_=NaN}function S(){f&&(C(m,g),y&&v&&h.rejoin(),f.push(h.result())),x.point=E,v&&c.lineEnd()}function C(I,F){var H=i(I,F);if(d&&p.push([I,F]),w)m=I,g=F,y=H,w=!1,H&&(c.lineStart(),c.point(I,F));else if(H&&v)c.point(I,F);else{var X=[b=Math.max(Fu,Math.min(za,b)),_=Math.max(Fu,Math.min(za,_))],Z=[I=Math.max(Fu,Math.min(za,I)),F=Math.max(Fu,Math.min(za,F))];yk(X,Z,e,t,r,n)?(v||(c.lineStart(),c.point(X[0],X[1])),c.point(Z[0],Z[1]),H||c.lineEnd(),A=!1):H&&(c.lineStart(),c.point(I,F),A=!1)}b=I,_=F,v=H}return x}}const fp=e=>e;var Td=new Ms,dp=new Ms,Ix,Rx,pp,mp,Ci={point:Cr,lineStart:Cr,lineEnd:Cr,polygonStart:function(){Ci.lineStart=bk,Ci.lineEnd=vk},polygonEnd:function(){Ci.lineStart=Ci.lineEnd=Ci.point=Cr,Td.add(Vt(dp)),dp=new Ms},result:function(){var e=Td/2;return Td=new Ms,e}};function bk(){Ci.point=_k}function _k(e,t){Ci.point=Px,Ix=pp=e,Rx=mp=t}function Px(e,t){dp.add(mp*e-pp*t),pp=e,mp=t}function vk(){Px(Ix,Rx)}const Yy=Ci;var Ko=1/0,ah=Ko,Cl=-Ko,lh=Cl,wk={point:xk,lineStart:Cr,lineEnd:Cr,polygonStart:Cr,polygonEnd:Cr,result:function(){var e=[[Ko,ah],[Cl,lh]];return Cl=lh=-(ah=Ko=1/0),e}};function xk(e,t){e<Ko&&(Ko=e),e>Cl&&(Cl=e),t<ah&&(ah=t),t>lh&&(lh=t)}const uh=wk;var gp=0,yp=0,Va=0,ch=0,hh=0,xo=0,bp=0,_p=0,Wa=0,kx,Dx,pn,mn,Hr={point:Ns,lineStart:qy,lineEnd:Zy,polygonStart:function(){Hr.lineStart=Ek,Hr.lineEnd=Ck},polygonEnd:function(){Hr.point=Ns,Hr.lineStart=qy,Hr.lineEnd=Zy},result:function(){var e=Wa?[bp/Wa,_p/Wa]:xo?[ch/xo,hh/xo]:Va?[gp/Va,yp/Va]:[NaN,NaN];return gp=yp=Va=ch=hh=xo=bp=_p=Wa=0,e}};function Ns(e,t){gp+=e,yp+=t,++Va}function qy(){Hr.point=Tk}function Tk(e,t){Hr.point=Ak,Ns(pn=e,mn=t)}function Ak(e,t){var r=e-pn,n=t-mn,i=ir(r*r+n*n);ch+=i*(pn+e)/2,hh+=i*(mn+t)/2,xo+=i,Ns(pn=e,mn=t)}function Zy(){Hr.point=Ns}function Ek(){Hr.point=Sk}function Ck(){Nx(kx,Dx)}function Sk(e,t){Hr.point=Nx,Ns(kx=pn=e,Dx=mn=t)}function Nx(e,t){var r=e-pn,n=t-mn,i=ir(r*r+n*n);ch+=i*(pn+e)/2,hh+=i*(mn+t)/2,xo+=i,i=mn*e-pn*t,bp+=i*(pn+e),_p+=i*(mn+t),Wa+=i*3,Ns(pn=e,mn=t)}const Ky=Hr;function Ox(e){this._context=e}Ox.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,br);break}}},result:Cr};var vp=new Ms,Ad,Fx,Bx,Xa,$a,fh={point:Cr,lineStart:function(){fh.point=Mk},lineEnd:function(){Ad&&Lx(Fx,Bx),fh.point=Cr},polygonStart:function(){Ad=!0},polygonEnd:function(){Ad=null},result:function(){var e=+vp;return vp=new Ms,e}};function Mk(e,t){fh.point=Lx,Fx=Xa=e,Bx=$a=t}function Lx(e,t){Xa-=e,$a-=t,vp.add(ir(Xa*Xa+$a*$a)),Xa=e,$a=t}const Qy=fh;let Jy,dh,tb,eb;class rb{constructor(t){this._append=t==null?Ux:Ik(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==tb||this._append!==dh){const n=this._radius,i=this._;this._="",this._append`m0,${n}a${n},${n} 0 1,1 0,${-2*n}a${n},${n} 0 1,1 0,${2*n}z`,tb=n,dh=this._append,eb=this._,this._=i}this._+=eb;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Ux(e){let t=1;this._+=e[0];for(const r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Ik(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Ux;if(t!==Jy){const r=10**t;Jy=t,dh=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*r)/r+i[s]}}return dh}function Gx(e,t){let r=3,n=4.5,i,s;function o(a){return a&&(typeof n=="function"&&s.pointRadius(+n.apply(this,arguments)),cs(a,i(s))),s.result()}return o.area=function(a){return cs(a,i(Yy)),Yy.result()},o.measure=function(a){return cs(a,i(Qy)),Qy.result()},o.bounds=function(a){return cs(a,i(uh)),uh.result()},o.centroid=function(a){return cs(a,i(Ky)),Ky.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,fp):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new rb(r)):new Ox(t=a),typeof n!="function"&&s.pointRadius(n),o):t},o.pointRadius=function(a){return arguments.length?(n=typeof a=="function"?a:(s.pointRadius(+a),+a),o):n},o.digits=function(a){if(!arguments.length)return r;if(a==null)r=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);r=l}return t===null&&(s=new rb(r)),o},o.projection(e).digits(r).context(t)}function wp(e){return{stream:_f(e)}}function _f(e){return function(t){var r=new xp;for(var n in e)r[n]=e[n];return r.stream=t,r}}function xp(){}xp.prototype={constructor:xp,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _g(e,t,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),n!=null&&e.clipExtent(null),cs(r,e.stream(uh)),t(uh.result()),n!=null&&e.clipExtent(n),e}function vg(e,t,r){return _g(e,function(n){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),a=+t[0][0]+(i-o*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(s-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,l])},r)}function Hx(e,t,r){return vg(e,[[0,0],t],r)}function zx(e,t,r){return _g(e,function(n){var i=+t,s=i/(n[1][0]-n[0][0]),o=(i-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];e.scale(150*s).translate([o,a])},r)}function Vx(e,t,r){return _g(e,function(n){var i=+t,s=i/(n[1][1]-n[0][1]),o=-s*n[0][0],a=(i-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([o,a])},r)}var nb=16,Rk=Et(30*ce);function ib(e,t){return+t?kk(e,t):Pk(e)}function Pk(e){return _f({point:function(t,r){t=e(t,r),this.stream.point(t[0],t[1])}})}function kk(e,t){function r(n,i,s,o,a,l,u,c,h,f,d,p,m,g){var y=u-n,b=c-i,_=y*y+b*b;if(_>4*t&&m--){var v=o+f,w=a+d,A=l+p,x=ir(v*v+w*w+A*A),E=Pr(A/=x),T=Vt(Vt(A)-1)<Tt||Vt(s-h)<Tt?(s+h)/2:oi(w,v),M=e(T,E),P=M[0],R=M[1],S=P-n,C=R-i,I=b*S-y*C;(I*I/_>t||Vt((y*S+b*C)/_-.5)>.3||o*f+a*d+l*p<Rk)&&(r(n,i,s,o,a,l,P,R,T,v/=x,w/=x,A,m,g),g.point(P,R),r(P,R,T,v,w,A,u,c,h,f,d,p,m,g))}}return function(n){var i,s,o,a,l,u,c,h,f,d,p,m,g={point:y,lineStart:b,lineEnd:v,polygonStart:function(){n.polygonStart(),g.lineStart=w},polygonEnd:function(){n.polygonEnd(),g.lineStart=b}};function y(E,T){E=e(E,T),n.point(E[0],E[1])}function b(){h=NaN,g.point=_,n.lineStart()}function _(E,T){var M=Zo([E,T]),P=e(E,T);r(h,f,c,d,p,m,h=P[0],f=P[1],c=E,d=M[0],p=M[1],m=M[2],nb,n),n.point(h,f)}function v(){g.point=y,n.lineEnd()}function w(){b(),g.point=A,g.lineEnd=x}function A(E,T){_(i=E,T),s=h,o=f,a=d,l=p,u=m,g.point=_}function x(){r(h,f,c,d,p,m,s,o,i,a,l,u,nb,n),g.lineEnd=v,v()}return g}}var Dk=_f({point:function(e,t){this.stream.point(e*ce,t*ce)}});function Nk(e){return _f({point:function(t,r){var n=e(t,r);return this.stream.point(n[0],n[1])}})}function Ok(e,t,r,n,i){function s(o,a){return o*=n,a*=i,[t+e*o,r-e*a]}return s.invert=function(o,a){return[(o-t)/e*n,(r-a)/e*i]},s}function sb(e,t,r,n,i,s){if(!s)return Ok(e,t,r,n,i);var o=Et(s),a=wt(s),l=o*e,u=a*e,c=o/e,h=a/e,f=(a*r-o*t)/e,d=(a*t+o*r)/e;function p(m,g){return m*=n,g*=i,[l*m-u*g+t,r-u*m-l*g]}return p.invert=function(m,g){return[n*(c*m-h*g+f),i*(d-h*m-c*g)]},p}function Wi(e){return Wx(function(){return e})()}function Wx(e){var t,r=150,n=480,i=250,s=0,o=0,a=0,l=0,u=0,c,h=0,f=1,d=1,p=null,m=jy,g=null,y,b,_,v=fp,w=.5,A,x,E,T,M;function P(I){return E(I[0]*ce,I[1]*ce)}function R(I){return I=E.invert(I[0],I[1]),I&&[I[0]*qe,I[1]*qe]}P.stream=function(I){return T&&M===I?T:T=Dk(Nk(c)(m(A(v(M=I)))))},P.preclip=function(I){return arguments.length?(m=I,p=void 0,C()):m},P.postclip=function(I){return arguments.length?(v=I,g=y=b=_=null,C()):v},P.clipAngle=function(I){return arguments.length?(m=+I?gk(p=I*ce):(p=null,jy),C()):p*qe},P.clipExtent=function(I){return arguments.length?(v=I==null?(g=y=b=_=null,fp):Mx(g=+I[0][0],y=+I[0][1],b=+I[1][0],_=+I[1][1]),C()):g==null?null:[[g,y],[b,_]]},P.scale=function(I){return arguments.length?(r=+I,S()):r},P.translate=function(I){return arguments.length?(n=+I[0],i=+I[1],S()):[n,i]},P.center=function(I){return arguments.length?(s=I[0]%360*ce,o=I[1]%360*ce,S()):[s*qe,o*qe]},P.rotate=function(I){return arguments.length?(a=I[0]%360*ce,l=I[1]%360*ce,u=I.length>2?I[2]%360*ce:0,S()):[a*qe,l*qe,u*qe]},P.angle=function(I){return arguments.length?(h=I%360*ce,S()):h*qe},P.reflectX=function(I){return arguments.length?(f=I?-1:1,S()):f<0},P.reflectY=function(I){return arguments.length?(d=I?-1:1,S()):d<0},P.precision=function(I){return arguments.length?(A=ib(x,w=I*I),C()):ir(w)},P.fitExtent=function(I,F){return vg(P,I,F)},P.fitSize=function(I,F){return Hx(P,I,F)},P.fitWidth=function(I,F){return zx(P,I,F)},P.fitHeight=function(I,F){return Vx(P,I,F)};function S(){var I=sb(r,0,0,f,d,h).apply(null,t(s,o)),F=sb(r,n-I[0],i-I[1],f,d,h);return c=Ax(a,l,u),x=cp(t,F),E=cp(c,x),A=ib(x,w),C()}function C(){return T=M=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&R,S()}}function wg(e){var t=0,r=Ct/3,n=Wx(e),i=n(t,r);return i.parallels=function(s){return arguments.length?n(t=s[0]*ce,r=s[1]*ce):[t*qe,r*qe]},i}function Fk(e){var t=Et(e);function r(n,i){return[n*t,wt(i)/t]}return r.invert=function(n,i){return[n/t,Pr(i*t)]},r}function Bk(e,t){var r=wt(e),n=(r+wt(t))/2;if(Vt(n)<Tt)return Fk(e);var i=1+r*(2*n-r),s=ir(i)/n;function o(a,l){var u=ir(i-2*n*wt(l))/n;return[u*wt(a*=n),s-u*Et(a)]}return o.invert=function(a,l){var u=s-l,c=oi(a,Vt(u))*Er(u);return u*n<0&&(c-=Ct*Er(a)*Er(u)),[c/n,Pr((i-(a*a+u*u)*n*n)/(2*n))]},o}function ph(){return wg(Bk).scale(155.424).center([0,33.6442])}function Xx(){return ph().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Lk(e){var t=e.length;return{point:function(r,n){for(var i=-1;++i<t;)e[i].point(r,n)},sphere:function(){for(var r=-1;++r<t;)e[r].sphere()},lineStart:function(){for(var r=-1;++r<t;)e[r].lineStart()},lineEnd:function(){for(var r=-1;++r<t;)e[r].lineEnd()},polygonStart:function(){for(var r=-1;++r<t;)e[r].polygonStart()},polygonEnd:function(){for(var r=-1;++r<t;)e[r].polygonEnd()}}}function Uk(){var e,t,r=Xx(),n,i=ph().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=ph().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(f,d){l=[f,d]}};function c(f){var d=f[0],p=f[1];return l=null,n.point(d,p),l||(s.point(d,p),l)||(a.point(d,p),l)}c.invert=function(f){var d=r.scale(),p=r.translate(),m=(f[0]-p[0])/d,g=(f[1]-p[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:r).invert(f)},c.stream=function(f){return e&&t===f?e:e=Lk([r.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(r.precision(f),i.precision(f),o.precision(f),h()):r.precision()},c.scale=function(f){return arguments.length?(r.scale(f),i.scale(f*.35),o.scale(f),c.translate(r.translate())):r.scale()},c.translate=function(f){if(!arguments.length)return r.translate();var d=r.scale(),p=+f[0],m=+f[1];return n=r.translate(f).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(u),s=i.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+Tt,m+.12*d+Tt],[p-.214*d-Tt,m+.234*d-Tt]]).stream(u),a=o.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+Tt,m+.166*d+Tt],[p-.115*d-Tt,m+.234*d-Tt]]).stream(u),h()},c.fitExtent=function(f,d){return vg(c,f,d)},c.fitSize=function(f,d){return Hx(c,f,d)},c.fitWidth=function(f,d){return zx(c,f,d)},c.fitHeight=function(f,d){return Vx(c,f,d)};function h(){return e=t=null,c}return c.scale(1070)}function $x(e){return function(t,r){var n=Et(t),i=Et(r),s=e(n*i);return s===1/0?[2,0]:[s*i*wt(t),s*wt(r)]}}function tu(e){return function(t,r){var n=ir(t*t+r*r),i=e(n),s=wt(i),o=Et(i);return[oi(t*s,n*o),Pr(n&&r*s/n)]}}var jx=$x(function(e){return ir(2/(1+e))});jx.invert=tu(function(e){return 2*Pr(e/2)});function Gk(){return Wi(jx).scale(124.75).clipAngle(180-.001)}var Yx=$x(function(e){return(e=Tx(e))&&e/wt(e)});Yx.invert=tu(function(e){return e});function Hk(){return Wi(Yx).scale(79.4188).clipAngle(180-.001)}function vf(e,t){return[e,ih(bg((he+t)/2))]}vf.invert=function(e,t){return[e,2*fa(xx(t))-he]};function zk(){return qx(vf).scale(961/br)}function qx(e){var t=Wi(e),r=t.center,n=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(h){return arguments.length?(n(h),c()):n()},t.translate=function(h){return arguments.length?(i(h),c()):i()},t.center=function(h){return arguments.length?(r(h),c()):r()},t.clipExtent=function(h){return arguments.length?(h==null?o=a=l=u=null:(o=+h[0][0],a=+h[0][1],l=+h[1][0],u=+h[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var h=Ct*n(),f=t(lk(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-h,f[1]-h],[f[0]+h,f[1]+h]]:e===vf?[[Math.max(f[0]-h,o),a],[Math.min(f[0]+h,l),u]]:[[o,Math.max(f[1]-h,a)],[l,Math.min(f[1]+h,u)]])}return c()}function Bu(e){return bg((he+e)/2)}function Vk(e,t){var r=Et(e),n=e===t?wt(e):ih(r/Et(t))/ih(Bu(t)/Bu(e)),i=r*vd(Bu(e),n)/n;if(!n)return vf;function s(o,a){i>0?a<-he+Tt&&(a=-he+Tt):a>he-Tt&&(a=he-Tt);var l=i/vd(Bu(a),n);return[l*wt(n*o),i-l*Et(n*o)]}return s.invert=function(o,a){var l=i-a,u=Er(n)*ir(o*o+l*l),c=oi(o,Vt(l))*Er(l);return l*n<0&&(c-=Ct*Er(o)*Er(l)),[c/n,2*fa(vd(i/u,1/n))-he]},s}function Wk(){return wg(Vk).scale(109.5).parallels([30,30])}function mh(e,t){return[e,t]}mh.invert=mh;function Xk(){return Wi(mh).scale(152.63)}function $k(e,t){var r=Et(e),n=e===t?wt(e):(r-Et(t))/(t-e),i=r/n+e;if(Vt(n)<Tt)return mh;function s(o,a){var l=i-a,u=n*o;return[l*wt(u),i-l*Et(u)]}return s.invert=function(o,a){var l=i-a,u=oi(o,Vt(l))*Er(l);return l*n<0&&(u-=Ct*Er(o)*Er(l)),[u/n,i-Er(n)*ir(o*o+l*l)]},s}function jk(){return wg($k).scale(131.154).center([0,13.9389])}var il=1.340264,sl=-.081106,ol=893e-6,al=.003796,gh=ir(3)/2,Yk=12;function Zx(e,t){var r=Pr(gh*wt(t)),n=r*r,i=n*n*n;return[e*Et(r)/(gh*(il+3*sl*n+i*(7*ol+9*al*n))),r*(il+sl*n+i*(ol+al*n))]}Zx.invert=function(e,t){for(var r=t,n=r*r,i=n*n*n,s=0,o,a,l;s<Yk&&(a=r*(il+sl*n+i*(ol+al*n))-t,l=il+3*sl*n+i*(7*ol+9*al*n),r-=o=a/l,n=r*r,i=n*n*n,!(Vt(o)<wx));++s);return[gh*e*(il+3*sl*n+i*(7*ol+9*al*n))/Et(r),Pr(wt(r)/gh)]};function qk(){return Wi(Zx).scale(177.158)}function Kx(e,t){var r=Et(t),n=Et(e)*r;return[r*wt(e)/n,wt(t)/n]}Kx.invert=tu(fa);function Zk(){return Wi(Kx).scale(144.049).clipAngle(60)}function Qx(e,t){return[Et(t)*wt(e),wt(t)]}Qx.invert=tu(Pr);function Kk(){return Wi(Qx).scale(249.5).clipAngle(90+Tt)}function Jx(e,t){var r=Et(t),n=1+Et(e)*r;return[r*wt(e)/n,wt(t)/n]}Jx.invert=tu(function(e){return 2*fa(e)});function Qk(){return Wi(Jx).scale(250).clipAngle(142)}function t3(e,t){return[ih(bg((he+t)/2)),-e]}t3.invert=function(e,t){return[-t,2*fa(xx(e))-he]};function Jk(){var e=qx(t3),t=e.center,r=e.rotate;return e.center=function(n){return arguments.length?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},e.rotate=function(n){return arguments.length?r([n[0],n[1],n.length>2?n[2]+90:90]):(n=r(),[n[0],n[1],n[2]-90])},r([0,0,90]).scale(159.155)}function Dn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Tp=Symbol("implicit");function xg(){var e=new Is,t=[],r=[],n=Tp;function i(s){let o=e.get(s);if(o===void 0){if(n!==Tp)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Is;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return xg(t,r).unknown(n)},Dn.apply(i,arguments),i}function xf(){var e=xg().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete e.unknown;function h(){var f=t().length,d=i<n,p=d?i:n,m=d?n:i;s=(m-p)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-l))*c,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=j0(f).map(function(y){return p+s*y});return r(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,h()):[n,i]},e.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,a=!0,h()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(a=!!f,h()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),h()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),h()):c},e.copy=function(){return xf(t(),[n,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},Dn.apply(h(),arguments)}function e3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return e3(t())},e}function tD(){return e3(xf.apply(null,arguments).paddingInner(1))}function eD(e){return function(){return e}}function Ap(e){return+e}var ob=[0,1];function Sr(e){return e}function Ep(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:eD(isNaN(t)?NaN:.5)}function rD(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function nD(e,t,r){var n=e[0],i=e[1],s=t[0],o=t[1];return i<n?(n=Ep(i,n),s=r(o,s)):(n=Ep(n,i),s=r(s,o)),function(a){return s(n(a))}}function iD(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=Ep(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(a){var l=cf(e,a,1,n)-1;return s[l](i[l](a))}}function eu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Tf(){var e=ob,t=ob,r=Jl,n,i,s,o=Sr,a,l,u;function c(){var f=Math.min(e.length,t.length);return o!==Sr&&(o=rD(e[0],e[f-1])),a=f>2?iD:nD,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=a(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(i((u||(u=a(t,e.map(n),We)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Ap),c()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=fg,c()},h.clamp=function(f){return arguments.length?(o=f?!0:Sr,c()):o!==Sr},h.interpolate=function(f){return arguments.length?(r=f,c()):r},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,d){return n=f,i=d,c()}}function r3(){return Tf()(Sr,Sr)}function sD(e,t,r,n){var i=X0(e,t,r),s;switch(n=El(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=ok(i,o))&&(n.precision=s),vx(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=ak(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=sk(i))&&(n.precision=s-(n.type==="%")*2);break}}return Mn(n)}function ru(e){var t=e.domain;return e.ticks=function(r){var n=t();return wl(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return sD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,o=n[i],a=n[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=qc(o,a,r),u===l)return n[i]=o,n[s]=a,t(n);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function nu(){var e=r3();return e.copy=function(){return eu(e,nu())},Dn.apply(e,arguments),ru(e)}function n3(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Ap),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return n3(e).unknown(t)},e=arguments.length?Array.from(e,Ap):[0,1],ru(r)}function i3(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),e[r]=t.floor(i),e[n]=t.ceil(s),e}function ab(e){return Math.log(e)}function lb(e){return Math.exp(e)}function oD(e){return-Math.log(-e)}function aD(e){return-Math.exp(-e)}function lD(e){return isFinite(e)?+("1e"+e):e<0?0:e}function uD(e){return e===10?lD:e===Math.E?Math.exp:t=>Math.pow(e,t)}function cD(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ub(e){return(t,r)=>-e(-t,r)}function s3(e){const t=e(ab,lb),r=t.domain;let n=10,i,s;function o(){return i=cD(n),s=uD(n),r()[0]<0?(i=ub(i),s=ub(s),e(oD,aD)):e(ab,lb),t}return t.base=function(a){return arguments.length?(n=+a,o()):n},t.domain=function(a){return arguments.length?(r(a),o()):r()},t.ticks=a=>{const l=r();let u=l[0],c=l[l.length-1];const h=c<u;h&&([u,c]=[c,u]);let f=i(u),d=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(n%1)&&d-f<g){if(f=Math.floor(f),d=Math.ceil(d),u>0){for(;f<=d;++f)for(p=1;p<n;++p)if(m=f<0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=d;++f)for(p=n-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=wl(u,c,g))}else y=wl(f,d,Math.min(d-f,g)).map(s);return h?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=El(l)).precision==null&&(l.trim=!0),l=Mn(l)),a===1/0)return l;const u=Math.max(1,n*a/t.ticks().length);return c=>{let h=c/s(Math.round(i(c)));return h*n<n-.5&&(h*=n),h<=u?l(c):""}},t.nice=()=>r(i3(r(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function o3(){const e=s3(Tf()).domain([1,10]);return e.copy=()=>eu(e,o3()).base(e.base()),Dn.apply(e,arguments),e}function cb(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hb(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function a3(e){var t=1,r=e(cb(t),hb(t));return r.constant=function(n){return arguments.length?e(cb(t=+n),hb(t)):t},ru(r)}function l3(){var e=a3(Tf());return e.copy=function(){return eu(e,l3()).constant(e.constant())},Dn.apply(e,arguments)}function fb(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function hD(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function fD(e){return e<0?-e*e:e*e}function u3(e){var t=e(Sr,Sr),r=1;function n(){return r===1?e(Sr,Sr):r===.5?e(hD,fD):e(fb(r),fb(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},ru(t)}function Tg(){var e=u3(Tf());return e.copy=function(){return eu(e,Tg()).exponent(e.exponent())},Dn.apply(e,arguments),e}function db(){return Tg.apply(null,arguments).exponent(.5)}function c3(){var e=[],t=[],r=[],n;function i(){var o=0,a=Math.max(1,t.length);for(r=new Array(a-1);++o<a;)r[o-1]=Y9(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?n:t[cf(r,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?r[a-1]:e[0],a<r.length?r[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(nr),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return c3().domain(e).range(t).unknown(n)},Dn.apply(s,arguments)}function h3(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[cf(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return h3().domain(e).range(t).unknown(r)},Dn.apply(i,arguments)}const Ed=new Date,Cd=new Date;function Re(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>Re(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),r&&(i.count=(s,o)=>(Ed.setTime(+s),Cd.setTime(+o),e(Ed),e(Cd),Math.floor(r(Ed,Cd))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const yh=Re(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);yh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Re(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):yh);yh.range;const Zn=1e3,Mr=Zn*60,Kn=Mr*60,ai=Kn*24,Ag=ai*7,pb=ai*30,Sd=ai*365,gn=Re(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zn)},(e,t)=>(t-e)/Zn,e=>e.getUTCSeconds());gn.range;const Af=Re(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zn)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getMinutes());Af.range;const iu=Re(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getUTCMinutes());iu.range;const Ef=Re(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zn-e.getMinutes()*Mr)},(e,t)=>{e.setTime(+e+t*Kn)},(e,t)=>(t-e)/Kn,e=>e.getHours());Ef.range;const su=Re(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kn)},(e,t)=>(t-e)/Kn,e=>e.getUTCHours());su.range;const js=Re(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Mr)/ai,e=>e.getDate()-1);js.range;const Cf=Re(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ai,e=>e.getUTCDate()-1);Cf.range;const Sf=Re(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ai,e=>Math.floor(e/ai));Sf.range;function Ys(e){return Re(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Mr)/Ag)}const Qo=Ys(0),Sl=Ys(1),f3=Ys(2),d3=Ys(3),Os=Ys(4),p3=Ys(5),m3=Ys(6);Qo.range;Sl.range;f3.range;d3.range;Os.range;p3.range;m3.range;function qs(e){return Re(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ag)}const Jo=qs(0),Ml=qs(1),g3=qs(2),y3=qs(3),Fs=qs(4),b3=qs(5),_3=qs(6);Jo.range;Ml.range;g3.range;y3.range;Fs.range;b3.range;_3.range;const ou=Re(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ou.range;const au=Re(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());au.range;const qr=Re(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Re(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});qr.range;const Zr=Re(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Zr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Re(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Zr.range;function v3(e,t,r,n,i,s){const o=[[gn,1,Zn],[gn,5,5*Zn],[gn,15,15*Zn],[gn,30,30*Zn],[s,1,Mr],[s,5,5*Mr],[s,15,15*Mr],[s,30,30*Mr],[i,1,Kn],[i,3,3*Kn],[i,6,6*Kn],[i,12,12*Kn],[n,1,ai],[n,2,2*ai],[r,1,Ag],[t,1,pb],[t,3,3*pb],[e,1,Sd]];function a(u,c,h){const f=c<u;f&&([u,c]=[c,u]);const d=h&&typeof h.range=="function"?h:l(u,c,h),p=d?d.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,h){const f=Math.abs(c-u)/h,d=uf(([,,g])=>g).right(o,f);if(d===o.length)return e.every(X0(u/Sd,c/Sd,h));if(d===0)return yh.every(Math.max(X0(u,c,h),1));const[p,m]=o[f/o[d-1][2]<o[d][2]/f?d-1:d];return p.every(m)}return[a,l]}const[dD,w3]=v3(Zr,au,Jo,Sf,su,iu),[pD,mD]=v3(qr,ou,Qo,js,Ef,Af);function Md(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Id(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sa(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function gD(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=Ma(i),c=Ia(i),h=Ma(s),f=Ia(s),d=Ma(o),p=Ia(o),m=Ma(a),g=Ia(a),y=Ma(l),b=Ia(l),_={a:H,A:X,b:Z,B:D,c:null,d:vb,e:vb,f:UD,g:qD,G:KD,H:FD,I:BD,j:LD,L:x3,m:GD,M:HD,p:O,q:z,Q:Tb,s:Ab,S:zD,u:VD,U:WD,V:XD,w:$D,W:jD,x:null,X:null,y:YD,Y:ZD,Z:QD,"%":xb},v={a:k,A:Y,b:B,B:rt,c:null,d:wb,e:wb,f:rN,g:fN,G:pN,H:JD,I:tN,j:eN,L:A3,m:nN,M:iN,p:Q,q:et,Q:Tb,s:Ab,S:sN,u:oN,U:aN,V:lN,w:uN,W:cN,x:null,X:null,y:hN,Y:dN,Z:mN,"%":xb},w={a:M,A:P,b:R,B:S,c:C,d:bb,e:bb,f:kD,g:yb,G:gb,H:_b,I:_b,j:MD,L:PD,m:SD,M:ID,p:T,q:CD,Q:ND,s:OD,S:RD,u:wD,U:xD,V:TD,w:vD,W:AD,x:I,X:F,y:yb,Y:gb,Z:ED,"%":DD};_.x=A(r,_),_.X=A(n,_),_.c=A(t,_),v.x=A(r,v),v.X=A(n,v),v.c=A(t,v);function A(U,j){return function(K){var L=[],dt=-1,lt=0,bt=U.length,Nt,Jt,ye;for(K instanceof Date||(K=new Date(+K));++dt<bt;)U.charCodeAt(dt)===37&&(L.push(U.slice(lt,dt)),(Jt=mb[Nt=U.charAt(++dt)])!=null?Nt=U.charAt(++dt):Jt=Nt==="e"?" ":"0",(ye=j[Nt])&&(Nt=ye(K,Jt)),L.push(Nt),lt=dt+1);return L.push(U.slice(lt,dt)),L.join("")}}function x(U,j){return function(K){var L=Sa(1900,void 0,1),dt=E(L,U,K+="",0),lt,bt;if(dt!=K.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(j&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(lt=Id(Sa(L.y,0,1)),bt=lt.getUTCDay(),lt=bt>4||bt===0?Ml.ceil(lt):Ml(lt),lt=Cf.offset(lt,(L.V-1)*7),L.y=lt.getUTCFullYear(),L.m=lt.getUTCMonth(),L.d=lt.getUTCDate()+(L.w+6)%7):(lt=Md(Sa(L.y,0,1)),bt=lt.getDay(),lt=bt>4||bt===0?Sl.ceil(lt):Sl(lt),lt=js.offset(lt,(L.V-1)*7),L.y=lt.getFullYear(),L.m=lt.getMonth(),L.d=lt.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),bt="Z"in L?Id(Sa(L.y,0,1)).getUTCDay():Md(Sa(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(bt+5)%7:L.w+L.U*7-(bt+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,Id(L)):Md(L)}}function E(U,j,K,L){for(var dt=0,lt=j.length,bt=K.length,Nt,Jt;dt<lt;){if(L>=bt)return-1;if(Nt=j.charCodeAt(dt++),Nt===37){if(Nt=j.charAt(dt++),Jt=w[Nt in mb?j.charAt(dt++):Nt],!Jt||(L=Jt(U,K,L))<0)return-1}else if(Nt!=K.charCodeAt(L++))return-1}return L}function T(U,j,K){var L=u.exec(j.slice(K));return L?(U.p=c.get(L[0].toLowerCase()),K+L[0].length):-1}function M(U,j,K){var L=d.exec(j.slice(K));return L?(U.w=p.get(L[0].toLowerCase()),K+L[0].length):-1}function P(U,j,K){var L=h.exec(j.slice(K));return L?(U.w=f.get(L[0].toLowerCase()),K+L[0].length):-1}function R(U,j,K){var L=y.exec(j.slice(K));return L?(U.m=b.get(L[0].toLowerCase()),K+L[0].length):-1}function S(U,j,K){var L=m.exec(j.slice(K));return L?(U.m=g.get(L[0].toLowerCase()),K+L[0].length):-1}function C(U,j,K){return E(U,t,j,K)}function I(U,j,K){return E(U,r,j,K)}function F(U,j,K){return E(U,n,j,K)}function H(U){return o[U.getDay()]}function X(U){return s[U.getDay()]}function Z(U){return l[U.getMonth()]}function D(U){return a[U.getMonth()]}function O(U){return i[+(U.getHours()>=12)]}function z(U){return 1+~~(U.getMonth()/3)}function k(U){return o[U.getUTCDay()]}function Y(U){return s[U.getUTCDay()]}function B(U){return l[U.getUTCMonth()]}function rt(U){return a[U.getUTCMonth()]}function Q(U){return i[+(U.getUTCHours()>=12)]}function et(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var j=A(U+="",_);return j.toString=function(){return U},j},parse:function(U){var j=x(U+="",!1);return j.toString=function(){return U},j},utcFormat:function(U){var j=A(U+="",v);return j.toString=function(){return U},j},utcParse:function(U){var j=x(U+="",!0);return j.toString=function(){return U},j}}}var mb={"-":"",_:" ",0:"0"},Le=/^\s*\d+/,yD=/^%/,bD=/[\\^$*+?|[\]().{}]/g;function Lt(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function _D(e){return e.replace(bD,"\\$&")}function Ma(e){return new RegExp("^(?:"+e.map(_D).join("|")+")","i")}function Ia(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function vD(e,t,r){var n=Le.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function wD(e,t,r){var n=Le.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function xD(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function TD(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function AD(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function gb(e,t,r){var n=Le.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function yb(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ED(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function CD(e,t,r){var n=Le.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function SD(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function bb(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function MD(e,t,r){var n=Le.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function _b(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function ID(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function RD(e,t,r){var n=Le.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function PD(e,t,r){var n=Le.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function kD(e,t,r){var n=Le.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function DD(e,t,r){var n=yD.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function ND(e,t,r){var n=Le.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function OD(e,t,r){var n=Le.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function vb(e,t){return Lt(e.getDate(),t,2)}function FD(e,t){return Lt(e.getHours(),t,2)}function BD(e,t){return Lt(e.getHours()%12||12,t,2)}function LD(e,t){return Lt(1+js.count(qr(e),e),t,3)}function x3(e,t){return Lt(e.getMilliseconds(),t,3)}function UD(e,t){return x3(e,t)+"000"}function GD(e,t){return Lt(e.getMonth()+1,t,2)}function HD(e,t){return Lt(e.getMinutes(),t,2)}function zD(e,t){return Lt(e.getSeconds(),t,2)}function VD(e){var t=e.getDay();return t===0?7:t}function WD(e,t){return Lt(Qo.count(qr(e)-1,e),t,2)}function T3(e){var t=e.getDay();return t>=4||t===0?Os(e):Os.ceil(e)}function XD(e,t){return e=T3(e),Lt(Os.count(qr(e),e)+(qr(e).getDay()===4),t,2)}function $D(e){return e.getDay()}function jD(e,t){return Lt(Sl.count(qr(e)-1,e),t,2)}function YD(e,t){return Lt(e.getFullYear()%100,t,2)}function qD(e,t){return e=T3(e),Lt(e.getFullYear()%100,t,2)}function ZD(e,t){return Lt(e.getFullYear()%1e4,t,4)}function KD(e,t){var r=e.getDay();return e=r>=4||r===0?Os(e):Os.ceil(e),Lt(e.getFullYear()%1e4,t,4)}function QD(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Lt(t/60|0,"0",2)+Lt(t%60,"0",2)}function wb(e,t){return Lt(e.getUTCDate(),t,2)}function JD(e,t){return Lt(e.getUTCHours(),t,2)}function tN(e,t){return Lt(e.getUTCHours()%12||12,t,2)}function eN(e,t){return Lt(1+Cf.count(Zr(e),e),t,3)}function A3(e,t){return Lt(e.getUTCMilliseconds(),t,3)}function rN(e,t){return A3(e,t)+"000"}function nN(e,t){return Lt(e.getUTCMonth()+1,t,2)}function iN(e,t){return Lt(e.getUTCMinutes(),t,2)}function sN(e,t){return Lt(e.getUTCSeconds(),t,2)}function oN(e){var t=e.getUTCDay();return t===0?7:t}function aN(e,t){return Lt(Jo.count(Zr(e)-1,e),t,2)}function E3(e){var t=e.getUTCDay();return t>=4||t===0?Fs(e):Fs.ceil(e)}function lN(e,t){return e=E3(e),Lt(Fs.count(Zr(e),e)+(Zr(e).getUTCDay()===4),t,2)}function uN(e){return e.getUTCDay()}function cN(e,t){return Lt(Ml.count(Zr(e)-1,e),t,2)}function hN(e,t){return Lt(e.getUTCFullYear()%100,t,2)}function fN(e,t){return e=E3(e),Lt(e.getUTCFullYear()%100,t,2)}function dN(e,t){return Lt(e.getUTCFullYear()%1e4,t,4)}function pN(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Fs(e):Fs.ceil(e),Lt(e.getUTCFullYear()%1e4,t,4)}function mN(){return"+0000"}function xb(){return"%"}function Tb(e){return+e}function Ab(e){return Math.floor(+e/1e3)}var so,Eg,lu;gN({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function gN(e){return so=gD(e),Eg=so.format,so.parse,lu=so.utcFormat,so.utcParse,so}function yN(e){return new Date(e)}function bN(e){return e instanceof Date?+e:+new Date(+e)}function Cg(e,t,r,n,i,s,o,a,l,u){var c=r3(),h=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),b=u("%b %d"),_=u("%B"),v=u("%Y");function w(A){return(l(A)<A?d:a(A)<A?p:o(A)<A?m:s(A)<A?g:n(A)<A?i(A)<A?y:b:r(A)<A?_:v)(A)}return c.invert=function(A){return new Date(h(A))},c.domain=function(A){return arguments.length?f(Array.from(A,bN)):f().map(yN)},c.ticks=function(A){var x=f();return e(x[0],x[x.length-1],A??10)},c.tickFormat=function(A,x){return x==null?w:u(x)},c.nice=function(A){var x=f();return(!A||typeof A.range!="function")&&(A=t(x[0],x[x.length-1],A??10)),A?f(i3(x,A)):c},c.copy=function(){return eu(c,Cg(e,t,r,n,i,s,o,a,l,u))},c}function _N(){return Dn.apply(Cg(pD,mD,qr,ou,Qo,js,Ef,Af,gn,Eg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vN(){return Dn.apply(Cg(dD,w3,Zr,au,Jo,Cf,su,iu,gn,lu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function If(){var e=0,t=.5,r=1,n=1,i,s,o,a,l,u=Sr,c,h=!1,f;function d(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(n*m<n*s?a:l),u(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,r]=m,i=c(e=+e),s=c(t=+t),o=c(r=+r),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),n=s<i?-1:1,d):[e,t,r]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(u=m,d):u};function p(m){return function(g){var y,b,_;return arguments.length?([y,b,_]=g,u=gf(m,[y,b,_]),d):[u(0),u(.5),u(1)]}}return d.range=p(Jl),d.rangeRound=p(fg),d.unknown=function(m){return arguments.length?(f=m,d):f},function(m){return c=m,i=m(e),s=m(t),o=m(r),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),n=s<i?-1:1,d}}function C3(){var e=ru(If()(Sr));return e.copy=function(){return Mf(e,C3())},wf.apply(e,arguments)}function S3(){var e=s3(If()).domain([.1,1,10]);return e.copy=function(){return Mf(e,S3()).base(e.base())},wf.apply(e,arguments)}function M3(){var e=a3(If());return e.copy=function(){return Mf(e,M3()).constant(e.constant())},wf.apply(e,arguments)}function I3(){var e=u3(If());return e.copy=function(){return Mf(e,I3()).exponent(e.exponent())},wf.apply(e,arguments)}function At(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const wN=At("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xN=At("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),TN=At("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),AN=At("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),EN=At("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),CN=At("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),SN=At("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),MN=At("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),IN=At("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),RN=At("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Wt=e=>cR(e[e.length-1]);var R3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(At);const P3=Wt(R3);var k3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(At);const D3=Wt(k3);var N3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(At);const O3=Wt(N3);var F3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(At);const B3=Wt(F3);var Cp=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(At);const bh=Wt(Cp);var L3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(At);const U3=Wt(L3);var Sp=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(At);const _h=Wt(Sp);var G3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(At);const H3=Wt(G3);var z3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(At);const V3=Wt(z3);var W3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(At);const X3=Wt(W3);var $3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(At);const j3=Wt($3);var Y3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(At);const q3=Wt(Y3);var Z3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(At);const K3=Wt(Z3);var Q3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(At);const J3=Wt(Q3);var tT=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(At);const eT=Wt(tT);var rT=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(At);const nT=Wt(rT);var iT=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(At);const sT=Wt(iT);var oT=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(At);const aT=Wt(oT);var lT=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(At);const uT=Wt(lT);var cT=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(At);const hT=Wt(cT);var fT=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(At);const dT=Wt(fT);var pT=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(At);const mT=Wt(pT);var gT=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(At);const yT=Wt(gT);var bT=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(At);const _T=Wt(bT);var vT=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(At);const wT=Wt(vT);var xT=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(At);const TT=Wt(xT);var AT=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(At);const ET=Wt(AT);function CT(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const ST=dg(Sn(300,.5,0),Sn(-240,.5,1));var MT=dg(Sn(-100,.75,.35),Sn(80,1.5,.8)),IT=dg(Sn(260,.75,.35),Sn(80,1.5,.8)),Lu=Sn();function RT(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Lu.h=360*e-100,Lu.s=1.5-1.5*t,Lu.l=.8-.9*t,Lu+""}var Uu=Bi(),PN=Math.PI/3,kN=Math.PI*2/3;function PT(e){var t;return e=(.5-e)*Math.PI,Uu.r=255*(t=Math.sin(e))*t,Uu.g=255*(t=Math.sin(e+PN))*t,Uu.b=255*(t=Math.sin(e+kN))*t,Uu+""}function kT(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Rf(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}const DT=Rf(At("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var NT=Rf(At("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),OT=Rf(At("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),FT=Rf(At("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const BT=Math.cos,Sg=Math.min,vh=Math.sin,Pe=Math.sqrt,wh=Math.PI,Pf=2*wh,DN=Pe(3),LT={draw(e,t){const r=Pe(t+Sg(t/28,.75))*.59436,n=r/2,i=n*DN;e.moveTo(0,r),e.lineTo(0,-r),e.moveTo(-i,-n),e.lineTo(i,n),e.moveTo(-i,n),e.lineTo(i,-n)}},Mg={draw(e,t){const r=Pe(t/wh);e.moveTo(r,0),e.arc(0,0,r,0,Pf)}},UT={draw(e,t){const r=Pe(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},GT=Pe(1/3),NN=GT*2,HT={draw(e,t){const r=Pe(t/NN),n=r*GT;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},zT={draw(e,t){const r=Pe(t)*.62625;e.moveTo(0,-r),e.lineTo(r,0),e.lineTo(0,r),e.lineTo(-r,0),e.closePath()}},VT={draw(e,t){const r=Pe(t-Sg(t/7,2))*.87559;e.moveTo(-r,0),e.lineTo(r,0),e.moveTo(0,r),e.lineTo(0,-r)}},WT={draw(e,t){const r=Pe(t),n=-r/2;e.rect(n,n,r,r)}},XT={draw(e,t){const r=Pe(t)*.4431;e.moveTo(r,r),e.lineTo(r,-r),e.lineTo(-r,-r),e.lineTo(-r,r),e.closePath()}},ON=.8908130915292852,$T=vh(wh/10)/vh(7*wh/10),FN=vh(Pf/10)*$T,BN=-BT(Pf/10)*$T,jT={draw(e,t){const r=Pe(t*ON),n=FN*r,i=BN*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const o=Pf*s/5,a=BT(o),l=vh(o);e.lineTo(l*r,-a*r),e.lineTo(a*n-l*i,l*n+a*i)}e.closePath()}},Rd=Pe(3),YT={draw(e,t){const r=-Pe(t/(Rd*3));e.moveTo(0,r*2),e.lineTo(-Rd*r,-r),e.lineTo(Rd*r,-r),e.closePath()}},LN=Pe(3),qT={draw(e,t){const r=Pe(t)*.6824,n=r/2,i=r*LN/2;e.moveTo(0,-r),e.lineTo(i,n),e.lineTo(-i,n),e.closePath()}},xr=-.5,Tr=Pe(3)/2,Mp=1/Pe(12),UN=(Mp/2+1)*3,ZT={draw(e,t){const r=Pe(t/UN),n=r/2,i=r*Mp,s=n,o=r*Mp+r,a=-s,l=o;e.moveTo(n,i),e.lineTo(s,o),e.lineTo(a,l),e.lineTo(xr*n-Tr*i,Tr*n+xr*i),e.lineTo(xr*s-Tr*o,Tr*s+xr*o),e.lineTo(xr*a-Tr*l,Tr*a+xr*l),e.lineTo(xr*n+Tr*i,xr*i-Tr*n),e.lineTo(xr*s+Tr*o,xr*o-Tr*s),e.lineTo(xr*a+Tr*l,xr*l-Tr*a),e.closePath()}},KT={draw(e,t){const r=Pe(t-Sg(t/6,1.7))*.6189;e.moveTo(-r,-r),e.lineTo(r,r),e.moveTo(-r,r),e.lineTo(r,-r)}},GN=[Mg,UT,HT,WT,jT,YT,ZT],HN=[Mg,VT,KT,qT,LT,XT,zT];function ja(e,t,r){this.k=e,this.x=t,this.y=r}ja.prototype={constructor:ja,scale:function(e){return e===1?this:new ja(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ja(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ja.prototype;const zN="data/engagement_nodes_positions.csv",VN="data/engagement_edges.csv",da=$m([],e=>{bx(zN,t=>({id:t.id,label:t.label,score:+t.score,rank:+t.rank,seed:+t.rank<=10,curated_degree_in:+t.degree_in,curated_degree_out:+t.degree_out,curated:t.curated==="True",profile_age:+t.profile_age_in_days,interacted_days:+t.number_of_interacted_days,x:+t.x,y:+t.y})).then(t=>{e(t)})}),WN=$m([],e=>{bx(VN,t=>({id:`${t.source}-${t.target}`,...t,weight:+t.weight})).then(t=>{e(t)})}),ll=Ie(""),cr=Ie(""),XN=Ie(""),Ip=Ie(!0),Rp=Ie(!1),Pp=Ie(!0),Il=Ie(void 0),Rl=Ie(void 0),Pl=Ie(void 0),kl=Ie(void 0),Dl=Ie(void 0),Nl=Ie(void 0),Ol=Ie(void 0),Fl=Ie(void 0),kp=Ie(!1),Ig=ar([da],([e])=>{if(e.length!==0)return Ee(e,t=>+t.score)}),QT=ar([da],([e])=>{if(e.length!==0)return Ee(e,t=>+t.interacted_days)}),Rg=ar([da],([e])=>{if(e.length!==0)return Ee(e,t=>+t.curated_degree_in)}),Pg=ar([da],([e])=>{if(e.length!==0)return Ee(e,t=>+t.curated_degree_out)});function Gu(e,t,r){return e>=t&&e<=r}const JT=ar([da,cr,XN,Ip,Rp,Pp,Il,Rl,Pl,kl,Dl,Nl,Ol,Fl],([e,t,r,n,i,s,o,a,l,u,c,h,f,d])=>{if(e.length===0)return[];const p=t!=="",m=r!=="";return wn(e,g=>{const y=Gu(g.score,o,a)&&Gu(g.interacted_days,l,u)&&Gu(g.curated_degree_in,c,h)&&Gu(g.curated_degree_out,f,d);return{...g,selected:p&&t===g.id,hidden:m&&!g.label.toLowerCase().includes(r)||g.curated&&!n||!g.curated&&!i||s&&!y,marked:!s&&!y}})}),kg=ar([JT],([e])=>e.length===0?{}:_l(e,"id")),$N=ar([da],([e])=>e.length===0?{}:_l(e,"label")),kf=ar([WN,kg,kp,cr],([e,t,r,n])=>{if(e.length===0||Pi(t))return[];const i=n!=="";return wn(e,s=>{const o=t[s.source],a=t[s.target];return{...s,hidden:!r||i&&!o.selected&&!a.selected||o.hidden||a.hidden,marked:o.marked||a.marked}})}),jN=ar([kf],([e])=>{if(e.length===0)return{};const t={},r=(n,i,s,o=1)=>{n[i]===void 0&&(n[i]={}),n[i][s]===void 0&&(n[i][s]=o)};return Ua(e,n=>{r(t,n.source,n.target),r(t,n.target,n.source)}),t}),Dg=ar([JT,cr,jN],([e,t,r])=>{if(e.length===0)return[];const n=t!=="";return wn(e,i=>({...i,hidden:i.hidden||n&&t!==i.id&&r[t]&&r[t][i.id]===void 0}))}),YN=ar([Dg],([e])=>e.length===0?[]:wn(xw(e,t=>!t.hidden),t=>({id:t.id,label:t.label}))),qN=ar([kg,ll],([e,t])=>{if(!Pi(e))return e[t]}),ZN=ar([kg,cr,kf],([e,t,r])=>{if(t===""||r.length===0||Pi(e))return;const n=eg(xw(r,i=>i.target===t),"weight","desc");return{...e[t],edges:wn(n,i=>({...i,source:e[i.source]}))}}),Dp=ar([Dg,kf,Ig,Rg,Pg],([e,t,r,n,i])=>e.length>0&&!Pi(t)&&r!==void 0&&n!==void 0&&i!==void 0),KN={fontFamily:{sans:"'DM Sans', 'sans-serif'"},colors:{gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},black:"#000",white:"#fff",scale:{nodes:{true:"#A69EF5",false:"#70D38F"},edge:"#5B53B6"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"}}};var Zs=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Zs||{}),t5=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(t5||{}),Np=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Np||{}),yt=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(yt||{}),yn=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(yn||{}),q=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(q||{}),No=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(No||{}),pt=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(pt||{}),st=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(st||{}),Qn=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Qn||{}),ki=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(ki||{}),In=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(In||{}),rr=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(rr||{}),fn=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(fn||{}),Ng=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(Ng||{}),Ir=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(Ir||{}),xe=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(xe||{}),_e=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(_e||{}),An=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(An||{});const QN={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},at={ADAPTER:QN,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Pd=/iPhone/i,Eb=/iPod/i,Cb=/iPad/i,Sb=/\biOS-universal(?:.+)Mac\b/i,kd=/\bAndroid(?:.+)Mobile\b/i,Mb=/Android/i,oo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Hu=/Silk/i,Ln=/Windows Phone/i,Ib=/\bWindows(?:.+)ARM\b/i,Rb=/BlackBerry/i,Pb=/BB10/i,kb=/Opera Mini/i,Db=/\b(CriOS|Chrome)(?:.+)Mobile/i,Nb=/Mobile(?:.+)Firefox\b/i,Ob=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function JN(e){return function(t){return t.test(e)}}function Fb(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var r=t.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=JN(r),s={apple:{phone:i(Pd)&&!i(Ln),ipod:i(Eb),tablet:!i(Pd)&&(i(Cb)||Ob(t))&&!i(Ln),universal:i(Sb),device:(i(Pd)||i(Eb)||i(Cb)||i(Sb)||Ob(t))&&!i(Ln)},amazon:{phone:i(oo),tablet:!i(oo)&&i(Hu),device:i(oo)||i(Hu)},android:{phone:!i(Ln)&&i(oo)||!i(Ln)&&i(kd),tablet:!i(Ln)&&!i(oo)&&!i(kd)&&(i(Hu)||i(Mb)),device:!i(Ln)&&(i(oo)||i(Hu)||i(kd)||i(Mb))||i(/\bokhttp\b/i)},windows:{phone:i(Ln),tablet:i(Ib),device:i(Ln)||i(Ib)},other:{blackberry:i(Rb),blackberry10:i(Pb),opera:i(kb),firefox:i(Nb),chrome:i(Db),device:i(Rb)||i(Pb)||i(kb)||i(Nb)||i(Db)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const tO=Fb.default??Fb,Jn=tO(globalThis.navigator);at.RETINA_PREFIX=/@([0-9\.]+)x/;at.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Og(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eO(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var e5={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,h,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,h||l,f),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,h;if(this._eventsCount===0)return u;for(h in c=this._events)t.call(c,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=r?r+u:u,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,p=new Array(d);f<d;f++)p[f]=h[f].fn;return p},a.prototype.listenerCount=function(u){var c=r?r+u:u,h=this._events[c];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,c,h,f,d,p){var m=r?r+u:u;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,b,_;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,h),!0;case 4:return g.fn.call(g.context,c,h,f),!0;case 5:return g.fn.call(g.context,c,h,f,d),!0;case 6:return g.fn.call(g.context,c,h,f,d,p),!0}for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];g.fn.apply(g.context,b)}else{var v=g.length,w;for(_=0;_<v;_++)switch(g[_].once&&this.removeListener(u,g[_].fn,void 0,!0),y){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,c);break;case 3:g[_].fn.call(g[_].context,c,h);break;case 4:g[_].fn.call(g[_].context,c,h,f);break;default:if(!b)for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];g[_].fn.apply(g[_].context,b)}}return!0},a.prototype.on=function(u,c,h){return s(this,u,c,h,!1)},a.prototype.once=function(u,c,h){return s(this,u,c,h,!0)},a.prototype.removeListener=function(u,c,h,f){var d=r?r+u:u;if(!this._events[d])return this;if(!c)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!f||p.once)&&(!h||p.context===h)&&o(this,d);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==c||f&&!p[m].once||h&&p[m].context!==h)&&g.push(p[m]);g.length?this._events[d]=g.length===1?g[0]:g:o(this,d)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=r?r+u:u,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a})(e5);var rO=e5.exports;const uu=Og(rO);var Fg={exports:{}};Fg.exports=Df;Fg.exports.default=Df;function Df(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,s=r5(e,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,c,h,f,d;if(n&&(s=aO(e,t,s,r)),e.length>80*r){a=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)h=e[p],f=e[p+1],h<a&&(a=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return Bl(s,o,r,a,l,d,0),o}function r5(e,t,r,n,i){var s,o;if(i===Bp(e,t,r,n)>0)for(s=t;s<r;s+=n)o=Bb(s,e[s],e[s+1],o);else for(s=r-n;s>=t;s-=n)o=Bb(s,e[s],e[s+1],o);return o&&Nf(o,o.next)&&(Ul(o),o=o.next),o}function Bs(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Nf(r,r.next)||le(r.prev,r,r.next)===0)){if(Ul(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Bl(e,t,r,n,i,s,o){if(e){!o&&s&&fO(e,n,i,s);for(var a=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,s?iO(e,n,i,s):nO(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),Ul(e),e=u.next,a=u.next;continue}if(e=u,e===a){o?o===1?(e=sO(Bs(e),t,r),Bl(e,t,r,n,i,s,2)):o===2&&oO(e,t,r,n,i,s):Bl(Bs(e),t,r,n,i,s,1);break}}}}function nO(e){var t=e.prev,r=e,n=e.next;if(le(t,r,n)>=0)return!1;for(var i=t.x,s=r.x,o=n.x,a=t.y,l=r.y,u=n.y,c=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,f=i>s?i>o?i:o:s>o?s:o,d=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&To(i,a,s,l,o,u,p.x,p.y)&&le(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function iO(e,t,r,n){var i=e.prev,s=e,o=e.next;if(le(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,c=i.y,h=s.y,f=o.y,d=a<l?a<u?a:u:l<u?l:u,p=c<h?c<f?c:f:h<f?h:f,m=a>l?a>u?a:u:l>u?l:u,g=c>h?c>f?c:f:h>f?h:f,y=Op(d,p,t,r,n),b=Op(m,g,t,r,n),_=e.prevZ,v=e.nextZ;_&&_.z>=y&&v&&v.z<=b;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&To(a,c,l,h,u,f,_.x,_.y)&&le(_.prev,_,_.next)>=0||(_=_.prevZ,v.x>=d&&v.x<=m&&v.y>=p&&v.y<=g&&v!==i&&v!==o&&To(a,c,l,h,u,f,v.x,v.y)&&le(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;_&&_.z>=y;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&To(a,c,l,h,u,f,_.x,_.y)&&le(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;v&&v.z<=b;){if(v.x>=d&&v.x<=m&&v.y>=p&&v.y<=g&&v!==i&&v!==o&&To(a,c,l,h,u,f,v.x,v.y)&&le(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function sO(e,t,r){var n=e;do{var i=n.prev,s=n.next.next;!Nf(i,s)&&n5(i,n,n.next,s)&&Ll(i,s)&&Ll(s,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(s.i/r|0),Ul(n),Ul(n.next),n=e=s),n=n.next}while(n!==e);return Bs(n)}function oO(e,t,r,n,i,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&mO(o,a)){var l=i5(o,a);o=Bs(o,o.next),l=Bs(l,l.next),Bl(o,t,r,n,i,s,0),Bl(l,t,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==e)}function aO(e,t,r,n){var i=[],s,o,a,l,u;for(s=0,o=t.length;s<o;s++)a=t[s]*n,l=s<o-1?t[s+1]*n:e.length,u=r5(e,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(pO(u));for(i.sort(lO),s=0;s<i.length;s++)r=uO(i[s],r);return r}function lO(e,t){return e.x-t.x}function uO(e,t){var r=cO(e,t);if(!r)return t;var n=i5(r,e);return Bs(n,n.next),Bs(r,r.next)}function cO(e,t){var r=t,n=e.x,i=e.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==t);if(!o)return null;var l=o,u=o.x,c=o.y,h=1/0,f;r=o;do n>=r.x&&r.x>=u&&n!==r.x&&To(i<c?n:s,i,u,c,i<c?s:n,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(n-r.x),Ll(r,e)&&(f<h||f===h&&(r.x>o.x||r.x===o.x&&hO(o,r)))&&(o=r,h=f)),r=r.next;while(r!==l);return o}function hO(e,t){return le(e.prev,e,t.prev)<0&&le(t.next,e,e.next)<0}function fO(e,t,r,n){var i=e;do i.z===0&&(i.z=Op(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,dO(i)}function dO(e){var t,r,n,i,s,o,a,l,u=1;do{for(r=e,e=null,s=null,o=0;r;){for(o++,n=r,a=0,t=0;t<u&&(a++,n=n.nextZ,!!n);t++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,u*=2}while(o>1);return e}function Op(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function pO(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function To(e,t,r,n,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(r-o)*(t-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function mO(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!gO(e,t)&&(Ll(e,t)&&Ll(t,e)&&yO(e,t)&&(le(e.prev,e,t.prev)||le(e,t.prev,t))||Nf(e,t)&&le(e.prev,e,e.next)>0&&le(t.prev,t,t.next)>0)}function le(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Nf(e,t){return e.x===t.x&&e.y===t.y}function n5(e,t,r,n){var i=Vu(le(e,t,r)),s=Vu(le(e,t,n)),o=Vu(le(r,n,e)),a=Vu(le(r,n,t));return!!(i!==s&&o!==a||i===0&&zu(e,r,t)||s===0&&zu(e,n,t)||o===0&&zu(r,e,n)||a===0&&zu(r,t,n))}function zu(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Vu(e){return e>0?1:e<0?-1:0}function gO(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&n5(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Ll(e,t){return le(e.prev,e,e.next)<0?le(e,t,e.next)>=0&&le(e,e.prev,t)>=0:le(e,t,e.prev)<0||le(e,e.next,t)<0}function yO(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function i5(e,t){var r=new Fp(e.i,e.x,e.y),n=new Fp(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function Bb(e,t,r,n){var i=new Fp(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ul(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Fp(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Df.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,o=Math.abs(Bp(e,0,s,r));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,c=a<l-1?t[a+1]*r:e.length;o-=Math.abs(Bp(e,u,c,r))}var h=0;for(a=0;a<n.length;a+=3){var f=n[a]*r,d=n[a+1]*r,p=n[a+2]*r;h+=Math.abs((e[f]-e[p])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[p+1]-e[f+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function Bp(e,t,r,n){for(var i=0,s=t,o=r-n;s<r;s+=n)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}Df.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var o=0;o<t;o++)r.vertices.push(e[i][s][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var bO=Fg.exports;const _O=Og(bO);var xh={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */xh.exports;(function(e,t){(function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,s=typeof Ic=="object"&&Ic;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,l=36,u=1,c=26,h=38,f=700,d=72,p=128,m="-",g=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=l-u,w=Math.floor,A=String.fromCharCode,x;function E(D){throw new RangeError(_[D])}function T(D,O){for(var z=D.length,k=[];z--;)k[z]=O(D[z]);return k}function M(D,O){var z=D.split("@"),k="";z.length>1&&(k=z[0]+"@",D=z[1]),D=D.replace(b,".");var Y=D.split("."),B=T(Y,O).join(".");return k+B}function P(D){for(var O=[],z=0,k=D.length,Y,B;z<k;)Y=D.charCodeAt(z++),Y>=55296&&Y<=56319&&z<k?(B=D.charCodeAt(z++),(B&64512)==56320?O.push(((Y&1023)<<10)+(B&1023)+65536):(O.push(Y),z--)):O.push(Y);return O}function R(D){return T(D,function(O){var z="";return O>65535&&(O-=65536,z+=A(O>>>10&1023|55296),O=56320|O&1023),z+=A(O),z}).join("")}function S(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:l}function C(D,O){return D+22+75*(D<26)-((O!=0)<<5)}function I(D,O,z){var k=0;for(D=z?w(D/f):D>>1,D+=w(D/O);D>v*c>>1;k+=l)D=w(D/v);return w(k+(v+1)*D/(D+h))}function F(D){var O=[],z=D.length,k,Y=0,B=p,rt=d,Q,et,U,j,K,L,dt,lt,bt;for(Q=D.lastIndexOf(m),Q<0&&(Q=0),et=0;et<Q;++et)D.charCodeAt(et)>=128&&E("not-basic"),O.push(D.charCodeAt(et));for(U=Q>0?Q+1:0;U<z;){for(j=Y,K=1,L=l;U>=z&&E("invalid-input"),dt=S(D.charCodeAt(U++)),(dt>=l||dt>w((a-Y)/K))&&E("overflow"),Y+=dt*K,lt=L<=rt?u:L>=rt+c?c:L-rt,!(dt<lt);L+=l)bt=l-lt,K>w(a/bt)&&E("overflow"),K*=bt;k=O.length+1,rt=I(Y-j,k,j==0),w(Y/k)>a-B&&E("overflow"),B+=w(Y/k),Y%=k,O.splice(Y++,0,B)}return R(O)}function H(D){var O,z,k,Y,B,rt,Q,et,U,j,K,L=[],dt,lt,bt,Nt;for(D=P(D),dt=D.length,O=p,z=0,B=d,rt=0;rt<dt;++rt)K=D[rt],K<128&&L.push(A(K));for(k=Y=L.length,Y&&L.push(m);k<dt;){for(Q=a,rt=0;rt<dt;++rt)K=D[rt],K>=O&&K<Q&&(Q=K);for(lt=k+1,Q-O>w((a-z)/lt)&&E("overflow"),z+=(Q-O)*lt,O=Q,rt=0;rt<dt;++rt)if(K=D[rt],K<O&&++z>a&&E("overflow"),K==O){for(et=z,U=l;j=U<=B?u:U>=B+c?c:U-B,!(et<j);U+=l)Nt=et-j,bt=l-j,L.push(A(C(j+Nt%bt,0))),et=w(Nt/bt);L.push(A(C(et,0))),B=I(z,lt,k==Y),z=0,++k}++z,++O}return L.join("")}function X(D){return M(D,function(O){return g.test(O)?F(O.slice(4).toLowerCase()):O})}function Z(D){return M(D,function(O){return y.test(O)?"xn--"+H(O):O})}if(o={version:"1.4.1",ucs2:{decode:P,encode:R},decode:F,encode:H,toASCII:Z,toUnicode:X},n&&i)if(e.exports==n)i.exports=o;else for(x in o)o.hasOwnProperty(x)&&(n[x]=o[x]);else r.punycode=o})(Ic)})(xh,xh.exports);var vO=xh.exports,wO=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Lb=typeof Symbol<"u"&&Symbol,xO=wO,TO=function(){return typeof Lb!="function"||typeof Symbol!="function"||typeof Lb("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:xO()},Ub={foo:{}},AO=Object,EO=function(){return{__proto__:Ub}.foo===Ub.foo&&!({__proto__:null}instanceof AO)},CO="Function.prototype.bind called on incompatible ",SO=Object.prototype.toString,MO=Math.max,IO="[object Function]",Gb=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var s=0;s<r.length;s+=1)n[s+t.length]=r[s];return n},RO=function(t,r){for(var n=[],i=r||0,s=0;i<t.length;i+=1,s+=1)n[s]=t[i];return n},PO=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},kO=function(t){var r=this;if(typeof r!="function"||SO.apply(r)!==IO)throw new TypeError(CO+r);for(var n=RO(arguments,1),i,s=function(){if(this instanceof i){var c=r.apply(this,Gb(n,arguments));return Object(c)===c?c:this}return r.apply(t,Gb(n,arguments))},o=MO(0,r.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+PO(a,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},DO=kO,Bg=Function.prototype.bind||DO,NO=Function.prototype.call,OO=Object.prototype.hasOwnProperty,FO=Bg,BO=FO.call(NO,OO),Pt,ta=SyntaxError,s5=Function,Oo=TypeError,Dd=function(e){try{return s5('"use strict"; return ('+e+").constructor;")()}catch{}},_s=Object.getOwnPropertyDescriptor;if(_s)try{_s({},"")}catch{_s=null}var Nd=function(){throw new Oo},LO=_s?function(){try{return arguments.callee,Nd}catch{try{return _s(arguments,"callee").get}catch{return Nd}}}():Nd,ao=TO(),UO=EO(),Ne=Object.getPrototypeOf||(UO?function(e){return e.__proto__}:null),mo={},GO=typeof Uint8Array>"u"||!Ne?Pt:Ne(Uint8Array),vs={"%AggregateError%":typeof AggregateError>"u"?Pt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Pt:ArrayBuffer,"%ArrayIteratorPrototype%":ao&&Ne?Ne([][Symbol.iterator]()):Pt,"%AsyncFromSyncIteratorPrototype%":Pt,"%AsyncFunction%":mo,"%AsyncGenerator%":mo,"%AsyncGeneratorFunction%":mo,"%AsyncIteratorPrototype%":mo,"%Atomics%":typeof Atomics>"u"?Pt:Atomics,"%BigInt%":typeof BigInt>"u"?Pt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Pt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Pt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Pt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Pt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Pt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Pt:FinalizationRegistry,"%Function%":s5,"%GeneratorFunction%":mo,"%Int8Array%":typeof Int8Array>"u"?Pt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Pt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Pt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ao&&Ne?Ne(Ne([][Symbol.iterator]())):Pt,"%JSON%":typeof JSON=="object"?JSON:Pt,"%Map%":typeof Map>"u"?Pt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ao||!Ne?Pt:Ne(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Pt:Promise,"%Proxy%":typeof Proxy>"u"?Pt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Pt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Pt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ao||!Ne?Pt:Ne(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Pt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ao&&Ne?Ne(""[Symbol.iterator]()):Pt,"%Symbol%":ao?Symbol:Pt,"%SyntaxError%":ta,"%ThrowTypeError%":LO,"%TypedArray%":GO,"%TypeError%":Oo,"%Uint8Array%":typeof Uint8Array>"u"?Pt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Pt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Pt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Pt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Pt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Pt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Pt:WeakSet};if(Ne)try{null.error}catch(e){var HO=Ne(Ne(e));vs["%Error.prototype%"]=HO}var zO=function e(t){var r;if(t==="%AsyncFunction%")r=Dd("async function () {}");else if(t==="%GeneratorFunction%")r=Dd("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Dd("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ne&&(r=Ne(i.prototype))}return vs[t]=r,r},Hb={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},cu=Bg,Th=BO,VO=cu.call(Function.call,Array.prototype.concat),WO=cu.call(Function.apply,Array.prototype.splice),zb=cu.call(Function.call,String.prototype.replace),Ah=cu.call(Function.call,String.prototype.slice),XO=cu.call(Function.call,RegExp.prototype.exec),$O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,jO=/\\(\\)?/g,YO=function(t){var r=Ah(t,0,1),n=Ah(t,-1);if(r==="%"&&n!=="%")throw new ta("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new ta("invalid intrinsic syntax, expected opening `%`");var i=[];return zb(t,$O,function(s,o,a,l){i[i.length]=a?zb(l,jO,"$1"):o||s}),i},qO=function(t,r){var n=t,i;if(Th(Hb,n)&&(i=Hb[n],n="%"+i[0]+"%"),Th(vs,n)){var s=vs[n];if(s===mo&&(s=zO(n)),typeof s>"u"&&!r)throw new Oo("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new ta("intrinsic "+t+" does not exist!")},Ks=function(t,r){if(typeof t!="string"||t.length===0)throw new Oo("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Oo('"allowMissing" argument must be a boolean');if(XO(/^%?[^%]*%?$/,t)===null)throw new ta("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=YO(t),i=n.length>0?n[0]:"",s=qO("%"+i+"%",r),o=s.name,a=s.value,l=!1,u=s.alias;u&&(i=u[0],WO(n,VO([0,1],u)));for(var c=1,h=!0;c<n.length;c+=1){var f=n[c],d=Ah(f,0,1),p=Ah(f,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new ta("property names with quotes must have matching quotes");if((f==="constructor"||!h)&&(l=!0),i+="."+f,o="%"+i+"%",Th(vs,o))a=vs[o];else if(a!=null){if(!(f in a)){if(!r)throw new Oo("base intrinsic for "+t+" exists, but the property is not available.");return}if(_s&&c+1>=n.length){var m=_s(a,f);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[f]}else h=Th(a,f),a=a[f];h&&!l&&(vs[o]=a)}}return a},o5={exports:{}},ZO=Ks,Lp=ZO("%Object.defineProperty%",!0),Up=function(){if(Lp)try{return Lp({},"a",{value:1}),!0}catch{return!1}return!1};Up.hasArrayLengthDefineBug=function(){if(!Up())return null;try{return Lp([],"length",{value:1}).length!==1}catch{return!0}};var a5=Up,KO=Ks,Rc=KO("%Object.getOwnPropertyDescriptor%",!0);if(Rc)try{Rc([],"length")}catch{Rc=null}var l5=Rc,QO=a5(),Lg=Ks,ul=QO&&Lg("%Object.defineProperty%",!0);if(ul)try{ul({},"a",{value:1})}catch{ul=!1}var JO=Lg("%SyntaxError%"),lo=Lg("%TypeError%"),Vb=l5,tF=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new lo("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new lo("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new lo("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new lo("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new lo("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new lo("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!Vb&&Vb(t,r);if(ul)ul(t,r,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)t[r]=n;else throw new JO("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},u5=Ks,Wb=tF,eF=a5(),Xb=l5,$b=u5("%TypeError%"),rF=u5("%Math.floor%"),nF=function(t,r){if(typeof t!="function")throw new $b("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||rF(r)!==r)throw new $b("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in t&&Xb){var o=Xb(t,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(eF?Wb(t,"length",r,!0,!0):Wb(t,"length",r)),t};(function(e){var t=Bg,r=Ks,n=nF,i=r("%TypeError%"),s=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||t.call(o,s),l=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}e.exports=function(f){if(typeof f!="function")throw new i("a function is required");var d=a(t,o,arguments);return n(d,1+u(0,f.length-(arguments.length-1)),!0)};var c=function(){return a(t,s,arguments)};l?l(e.exports,"apply",{value:c}):e.exports.apply=c})(o5);var iF=o5.exports,c5=Ks,h5=iF,sF=h5(c5("String.prototype.indexOf")),oF=function(t,r){var n=c5(t,!!r);return typeof n=="function"&&sF(t,".prototype.")>-1?h5(n):n};const aF={},lF=Object.freeze(Object.defineProperty({__proto__:null,default:aF},Symbol.toStringTag,{value:"Module"})),uF=eO(lF);var Ug=typeof Map=="function"&&Map.prototype,Od=Object.getOwnPropertyDescriptor&&Ug?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Eh=Ug&&Od&&typeof Od.get=="function"?Od.get:null,jb=Ug&&Map.prototype.forEach,Gg=typeof Set=="function"&&Set.prototype,Fd=Object.getOwnPropertyDescriptor&&Gg?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ch=Gg&&Fd&&typeof Fd.get=="function"?Fd.get:null,Yb=Gg&&Set.prototype.forEach,cF=typeof WeakMap=="function"&&WeakMap.prototype,cl=cF?WeakMap.prototype.has:null,hF=typeof WeakSet=="function"&&WeakSet.prototype,hl=hF?WeakSet.prototype.has:null,fF=typeof WeakRef=="function"&&WeakRef.prototype,qb=fF?WeakRef.prototype.deref:null,dF=Boolean.prototype.valueOf,pF=Object.prototype.toString,mF=Function.prototype.toString,gF=String.prototype.match,Hg=String.prototype.slice,Mi=String.prototype.replace,yF=String.prototype.toUpperCase,Zb=String.prototype.toLowerCase,f5=RegExp.prototype.test,Kb=Array.prototype.concat,dn=Array.prototype.join,bF=Array.prototype.slice,Qb=Math.floor,Gp=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Bd=Object.getOwnPropertySymbols,Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ea=typeof Symbol=="function"&&typeof Symbol.iterator=="object",je=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ea||"symbol")?Symbol.toStringTag:null,d5=Object.prototype.propertyIsEnumerable,Jb=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function t_(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||f5.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-Qb(-e):Qb(e);if(n!==e){var i=String(n),s=Hg.call(t,i.length+1);return Mi.call(i,r,"$&_")+"."+Mi.call(Mi.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Mi.call(t,r,"$&_")}var zp=uF,e_=zp.custom,r_=m5(e_)?e_:null,_F=function e(t,r,n,i){var s=r||{};if(Ai(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ai(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Ai(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ai(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ai(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return y5(t,s);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?t_(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return a?t_(t,u):u}var c=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof t=="object")return Vp(t)?"[Array]":"[Object]";var h=BF(s,n);if(typeof i>"u")i=[];else if(g5(i,t)>=0)return"[Circular]";function f(S,C,I){if(C&&(i=bF.call(i),i.push(C)),I){var F={depth:s.depth};return Ai(s,"quoteStyle")&&(F.quoteStyle=s.quoteStyle),e(S,F,n+1,i)}return e(S,s,n+1,i)}if(typeof t=="function"&&!n_(t)){var d=MF(t),p=Wu(t,f);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+dn.call(p,", ")+" }":"")}if(m5(t)){var m=ea?Mi.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Hp.call(t);return typeof t=="object"&&!ea?Ra(m):m}if(NF(t)){for(var g="<"+Zb.call(String(t.nodeName)),y=t.attributes||[],b=0;b<y.length;b++)g+=" "+y[b].name+"="+p5(vF(y[b].value),"double",s);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+Zb.call(String(t.nodeName))+">",g}if(Vp(t)){if(t.length===0)return"[]";var _=Wu(t,f);return h&&!FF(_)?"["+Wp(_,h)+"]":"[ "+dn.call(_,", ")+" ]"}if(xF(t)){var v=Wu(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!d5.call(t,"cause")?"{ ["+String(t)+"] "+dn.call(Kb.call("[cause]: "+f(t.cause),v),", ")+" }":v.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+dn.call(v,", ")+" }"}if(typeof t=="object"&&o){if(r_&&typeof t[r_]=="function"&&zp)return zp(t,{depth:c-n});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(IF(t)){var w=[];return jb&&jb.call(t,function(S,C){w.push(f(C,t,!0)+" => "+f(S,t))}),i_("Map",Eh.call(t),w,h)}if(kF(t)){var A=[];return Yb&&Yb.call(t,function(S){A.push(f(S,t))}),i_("Set",Ch.call(t),A,h)}if(RF(t))return Ld("WeakMap");if(DF(t))return Ld("WeakSet");if(PF(t))return Ld("WeakRef");if(AF(t))return Ra(f(Number(t)));if(CF(t))return Ra(f(Gp.call(t)));if(EF(t))return Ra(dF.call(t));if(TF(t))return Ra(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(t===Ic)return"{ [object globalThis] }";if(!wF(t)&&!n_(t)){var x=Wu(t,f),E=Jb?Jb(t)===Object.prototype:t instanceof Object||t.constructor===Object,T=t instanceof Object?"":"null prototype",M=!E&&je&&Object(t)===t&&je in t?Hg.call(Xi(t),8,-1):T?"Object":"",P=E||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",R=P+(M||T?"["+dn.call(Kb.call([],M||[],T||[]),": ")+"] ":"");return x.length===0?R+"{}":h?R+"{"+Wp(x,h)+"}":R+"{ "+dn.call(x,", ")+" }"}return String(t)};function p5(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function vF(e){return Mi.call(String(e),/"/g,"&quot;")}function Vp(e){return Xi(e)==="[object Array]"&&(!je||!(typeof e=="object"&&je in e))}function wF(e){return Xi(e)==="[object Date]"&&(!je||!(typeof e=="object"&&je in e))}function n_(e){return Xi(e)==="[object RegExp]"&&(!je||!(typeof e=="object"&&je in e))}function xF(e){return Xi(e)==="[object Error]"&&(!je||!(typeof e=="object"&&je in e))}function TF(e){return Xi(e)==="[object String]"&&(!je||!(typeof e=="object"&&je in e))}function AF(e){return Xi(e)==="[object Number]"&&(!je||!(typeof e=="object"&&je in e))}function EF(e){return Xi(e)==="[object Boolean]"&&(!je||!(typeof e=="object"&&je in e))}function m5(e){if(ea)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Hp)return!1;try{return Hp.call(e),!0}catch{}return!1}function CF(e){if(!e||typeof e!="object"||!Gp)return!1;try{return Gp.call(e),!0}catch{}return!1}var SF=Object.prototype.hasOwnProperty||function(e){return e in this};function Ai(e,t){return SF.call(e,t)}function Xi(e){return pF.call(e)}function MF(e){if(e.name)return e.name;var t=gF.call(mF.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function g5(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function IF(e){if(!Eh||!e||typeof e!="object")return!1;try{Eh.call(e);try{Ch.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function RF(e){if(!cl||!e||typeof e!="object")return!1;try{cl.call(e,cl);try{hl.call(e,hl)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function PF(e){if(!qb||!e||typeof e!="object")return!1;try{return qb.call(e),!0}catch{}return!1}function kF(e){if(!Ch||!e||typeof e!="object")return!1;try{Ch.call(e);try{Eh.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function DF(e){if(!hl||!e||typeof e!="object")return!1;try{hl.call(e,hl);try{cl.call(e,cl)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function NF(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function y5(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return y5(Hg.call(e,0,t.maxStringLength),t)+n}var i=Mi.call(Mi.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,OF);return p5(i,"single",t)}function OF(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+yF.call(t.toString(16))}function Ra(e){return"Object("+e+")"}function Ld(e){return e+" { ? }"}function i_(e,t,r,n){var i=n?Wp(r,n):dn.call(r,", ");return e+" ("+t+") {"+i+"}"}function FF(e){for(var t=0;t<e.length;t++)if(g5(e[t],`
`)>=0)return!1;return!0}function BF(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=dn.call(Array(e.indent+1)," ");else return null;return{base:r,prev:dn.call(Array(t+1),r)}}function Wp(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+dn.call(e,","+r)+`
`+t.prev}function Wu(e,t){var r=Vp(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Ai(e,i)?t(e[i],e):""}var s=typeof Bd=="function"?Bd(e):[],o;if(ea){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in e)Ai(e,l)&&(r&&String(Number(l))===l&&l<e.length||ea&&o["$"+l]instanceof Symbol||(f5.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if(typeof Bd=="function")for(var u=0;u<s.length;u++)d5.call(e,s[u])&&n.push("["+t(s[u])+"]: "+t(e[s[u]],e));return n}var zg=Ks,pa=oF,LF=_F,UF=zg("%TypeError%"),Xu=zg("%WeakMap%",!0),$u=zg("%Map%",!0),GF=pa("WeakMap.prototype.get",!0),HF=pa("WeakMap.prototype.set",!0),zF=pa("WeakMap.prototype.has",!0),VF=pa("Map.prototype.get",!0),WF=pa("Map.prototype.set",!0),XF=pa("Map.prototype.has",!0),Vg=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},$F=function(e,t){var r=Vg(e,t);return r&&r.value},jF=function(e,t,r){var n=Vg(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},YF=function(e,t){return!!Vg(e,t)},qF=function(){var t,r,n,i={assert:function(s){if(!i.has(s))throw new UF("Side channel does not contain "+LF(s))},get:function(s){if(Xu&&s&&(typeof s=="object"||typeof s=="function")){if(t)return GF(t,s)}else if($u){if(r)return VF(r,s)}else if(n)return $F(n,s)},has:function(s){if(Xu&&s&&(typeof s=="object"||typeof s=="function")){if(t)return zF(t,s)}else if($u){if(r)return XF(r,s)}else if(n)return YF(n,s);return!1},set:function(s,o){Xu&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new Xu),HF(t,s,o)):$u?(r||(r=new $u),WF(r,s,o)):(n||(n={key:{},next:null}),jF(n,s,o))}};return i},ZF=String.prototype.replace,KF=/%20/g,Ud={RFC1738:"RFC1738",RFC3986:"RFC3986"},Wg={default:Ud.RFC3986,formatters:{RFC1738:function(e){return ZF.call(e,KF,"+")},RFC3986:function(e){return String(e)}},RFC1738:Ud.RFC1738,RFC3986:Ud.RFC3986},QF=Wg,Gd=Object.prototype.hasOwnProperty,hs=Array.isArray,on=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),JF=function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(hs(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},b5=function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},tB=function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(hs(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Gd.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return hs(t)&&!hs(r)&&(i=b5(t,n)),hs(t)&&hs(r)?(r.forEach(function(s,o){if(Gd.call(t,o)){var a=t[o];a&&typeof a=="object"&&s&&typeof s=="object"?t[o]=e(a,s,n):t.push(s)}else t[o]=s}),t):Object.keys(r).reduce(function(s,o){var a=r[o];return Gd.call(s,o)?s[o]=e(s[o],a,n):s[o]=a,s},i)},eB=function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},rB=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},nB=function(t,r,n,i,s){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var u=o.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===QF.RFC1738&&(u===40||u===41)){a+=o.charAt(l);continue}if(u<128){a=a+on[u];continue}if(u<2048){a=a+(on[192|u>>6]+on[128|u&63]);continue}if(u<55296||u>=57344){a=a+(on[224|u>>12]+on[128|u>>6&63]+on[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|o.charCodeAt(l)&1023),a+=on[240|u>>18]+on[128|u>>12&63]+on[128|u>>6&63]+on[128|u&63]}return a},iB=function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],c=o[u];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(r.push({obj:o,prop:u}),n.push(c))}return JF(r),t},sB=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},oB=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},aB=function(t,r){return[].concat(t,r)},lB=function(t,r){if(hs(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)},_5={arrayToObject:b5,assign:eB,combine:aB,compact:iB,decode:rB,encode:nB,isBuffer:oB,isRegExp:sB,maybeMap:lB,merge:tB},v5=qF,Pc=_5,fl=Wg,uB=Object.prototype.hasOwnProperty,s_={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},$n=Array.isArray,cB=Array.prototype.push,w5=function(e,t){cB.apply(e,$n(t)?t:[t])},hB=Date.prototype.toISOString,o_=fl.default,ze={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Pc.encode,encodeValuesOnly:!1,format:o_,formatter:fl.formatters[o_],indices:!1,serializeDate:function(t){return hB.call(t)},skipNulls:!1,strictNullHandling:!1},fB=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Hd={},dB=function e(t,r,n,i,s,o,a,l,u,c,h,f,d,p,m,g){for(var y=t,b=g,_=0,v=!1;(b=b.get(Hd))!==void 0&&!v;){var w=b.get(t);if(_+=1,typeof w<"u"){if(w===_)throw new RangeError("Cyclic object value");v=!0}typeof b.get(Hd)>"u"&&(_=0)}if(typeof l=="function"?y=l(r,y):y instanceof Date?y=h(y):n==="comma"&&$n(y)&&(y=Pc.maybeMap(y,function(F){return F instanceof Date?h(F):F})),y===null){if(s)return a&&!p?a(r,ze.encoder,m,"key",f):r;y=""}if(fB(y)||Pc.isBuffer(y)){if(a){var A=p?r:a(r,ze.encoder,m,"key",f);return[d(A)+"="+d(a(y,ze.encoder,m,"value",f))]}return[d(r)+"="+d(String(y))]}var x=[];if(typeof y>"u")return x;var E;if(n==="comma"&&$n(y))p&&a&&(y=Pc.maybeMap(y,a)),E=[{value:y.length>0?y.join(",")||null:void 0}];else if($n(l))E=l;else{var T=Object.keys(y);E=u?T.sort(u):T}for(var M=i&&$n(y)&&y.length===1?r+"[]":r,P=0;P<E.length;++P){var R=E[P],S=typeof R=="object"&&typeof R.value<"u"?R.value:y[R];if(!(o&&S===null)){var C=$n(y)?typeof n=="function"?n(M,R):M:M+(c?"."+R:"["+R+"]");g.set(t,_);var I=v5();I.set(Hd,g),w5(x,e(S,C,n,i,s,o,n==="comma"&&p&&$n(y)?null:a,l,u,c,h,f,d,p,m,I))}}return x},pB=function(t){if(!t)return ze;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||ze.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=fl.default;if(typeof t.format<"u"){if(!uB.call(fl.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=fl.formatters[n],s=ze.filter;return(typeof t.filter=="function"||$n(t.filter))&&(s=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ze.addQueryPrefix,allowDots:typeof t.allowDots>"u"?ze.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ze.charsetSentinel,delimiter:typeof t.delimiter>"u"?ze.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ze.encode,encoder:typeof t.encoder=="function"?t.encoder:ze.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ze.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ze.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ze.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ze.strictNullHandling}},mB=function(e,t){var r=e,n=pB(t),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):$n(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a;t&&t.arrayFormat in s_?a=t.arrayFormat:t&&"indices"in t?a=t.indices?"indices":"repeat":a="indices";var l=s_[a];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&t&&t.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=v5(),h=0;h<i.length;++h){var f=i[h];n.skipNulls&&r[f]===null||w5(o,dB(r[f],f,l,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}var d=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""},ra=_5,Xp=Object.prototype.hasOwnProperty,gB=Array.isArray,De={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ra.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},yB=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},x5=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},bB="utf8=%26%2310003%3B",_B="utf8=%E2%9C%93",vB=function(t,r){var n={__proto__:null},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),a=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===_B?u="utf-8":o[l]===bB&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var c=o[l],h=c.indexOf("]="),f=h===-1?c.indexOf("="):h+1,d,p;f===-1?(d=r.decoder(c,De.decoder,u,"key"),p=r.strictNullHandling?null:""):(d=r.decoder(c.slice(0,f),De.decoder,u,"key"),p=ra.maybeMap(x5(c.slice(f+1),r),function(m){return r.decoder(m,De.decoder,u,"value")})),p&&r.interpretNumericEntities&&u==="iso-8859-1"&&(p=yB(p)),c.indexOf("[]=")>-1&&(p=gB(p)?[p]:p),Xp.call(n,d)?n[d]=ra.combine(n[d],p):n[d]=p}return n},wB=function(e,t,r,n){for(var i=n?t:x5(t,r),s=e.length-1;s>=0;--s){var o,a=e[s];if(a==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=parseInt(l,10);!r.parseArrays&&l===""?o={0:i}:!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[],o[u]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},xB=function(t,r,n,i){if(t){var s=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,c=[];if(u){if(!n.plainObjects&&Xp.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var h=0;n.depth>0&&(l=a.exec(s))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&Xp.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(l[1])}return l&&c.push("["+s.slice(l.index)+"]"),wB(c,r,n,i)}},TB=function(t){if(!t)return De;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?De.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?De.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:De.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:De.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:De.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:De.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:De.comma,decoder:typeof t.decoder=="function"?t.decoder:De.decoder,delimiter:typeof t.delimiter=="string"||ra.isRegExp(t.delimiter)?t.delimiter:De.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:De.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:De.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:De.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:De.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:De.strictNullHandling}},AB=function(e,t){var r=TB(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?vB(e,r):e,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=xB(a,n[a],r,typeof e=="string");i=ra.merge(i,l,r)}return r.allowSparse===!0?i:ra.compact(i)},EB=mB,CB=AB,SB=Wg,MB={formats:SB,parse:CB,stringify:EB},IB=vO;function ri(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var RB=/^([a-z0-9.+-]+:)/i,PB=/:[0-9]*$/,kB=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,DB=["<",">",'"',"`"," ","\r",`
`,"	"],NB=["{","}","|","\\","^","`"].concat(DB),$p=["'"].concat(NB),a_=["%","/","?",";","#"].concat($p),l_=["/","?","#"],OB=255,u_=/^[+a-z0-9A-Z_-]{0,63}$/,FB=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,BB={javascript:!0,"javascript:":!0},jp={javascript:!0,"javascript:":!0},Fo={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Yp=MB;function LB(e,t,r){if(e&&typeof e=="object"&&e instanceof ri)return e;var n=new ri;return n.parse(e,t,r),n}ri.prototype.parse=function(e,t,r){if(typeof e!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(i);var a=e;if(a=a.trim(),!r&&e.split("#").length===1){var l=kB.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Yp.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=RB.exec(a);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,a=a.substr(u.length)}if(r||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(u&&jp[u])&&(a=a.substr(2),this.slashes=!0)}if(!jp[u]&&(h||u&&!Fo[u])){for(var f=-1,d=0;d<l_.length;d++){var p=a.indexOf(l_[d]);p!==-1&&(f===-1||p<f)&&(f=p)}var m,g;f===-1?g=a.lastIndexOf("@"):g=a.lastIndexOf("@",f),g!==-1&&(m=a.slice(0,g),a=a.slice(g+1),this.auth=decodeURIComponent(m)),f=-1;for(var d=0;d<a_.length;d++){var p=a.indexOf(a_[d]);p!==-1&&(f===-1||p<f)&&(f=p)}f===-1&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var b=this.hostname.split(/\./),d=0,_=b.length;d<_;d++){var v=b[d];if(v&&!v.match(u_)){for(var w="",A=0,x=v.length;A<x;A++)v.charCodeAt(A)>127?w+="x":w+=v[A];if(!w.match(u_)){var E=b.slice(0,d),T=b.slice(d+1),M=v.match(FB);M&&(E.push(M[1]),T.unshift(M[2])),T.length&&(a="/"+T.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>OB?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=IB.toASCII(this.hostname));var P=this.port?":"+this.port:"",R=this.hostname||"";this.host=R+P,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!BB[c])for(var d=0,_=$p.length;d<_;d++){var S=$p[d];if(a.indexOf(S)!==-1){var C=encodeURIComponent(S);C===S&&(C=escape(S)),a=a.split(S).join(C)}}var I=a.indexOf("#");I!==-1&&(this.hash=a.substr(I),a=a.slice(0,I));var F=a.indexOf("?");if(F!==-1?(this.search=a.substr(F),this.query=a.substr(F+1),t&&(this.query=Yp.parse(this.query)),a=a.slice(0,F)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Fo[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",H=this.search||"";this.path=P+H}return this.href=this.format(),this};ri.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Yp.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Fo[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+i+r+o+n};ri.prototype.resolve=function(e){return this.resolveObject(LB(e,!1,!0)).format()};ri.prototype.resolveObject=function(e){if(typeof e=="string"){var t=new ri;t.parse(e,!1,!0),e=t}for(var r=new ri,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=e[l])}return Fo[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Fo[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var h=u[c];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!jp[e.protocol]){for(var _=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),r.pathname=_.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",d=r.search||"";r.path=f+d}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",g=m||p||r.host&&e.pathname,y=g,b=r.pathname&&r.pathname.split("/")||[],_=e.pathname&&e.pathname.split("/")||[],v=r.protocol&&!Fo[r.protocol];if(v&&(r.hostname="",r.port=null,r.host&&(b[0]===""?b[0]=r.host:b.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(_[0]===""?_[0]=e.host:_.unshift(e.host)),e.host=null),g=g&&(_[0]===""||b[0]==="")),m)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,b=_;else if(_.length)b||(b=[]),b.pop(),b=b.concat(_),r.search=e.search,r.query=e.query;else if(e.search!=null){if(v){r.host=b.shift(),r.hostname=r.host;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return r.search=e.search,r.query=e.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!b.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var A=b.slice(-1)[0],x=(r.host||e.host||b.length>1)&&(A==="."||A==="..")||A==="",E=0,T=b.length;T>=0;T--)A=b[T],A==="."?b.splice(T,1):A===".."?(b.splice(T,1),E++):E&&(b.splice(T,1),E--);if(!g&&!y)for(;E--;E)b.unshift("..");g&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),x&&b.join("/").substr(-1)!=="/"&&b.push("");var M=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(v){r.hostname=M?"":b.length?b.shift():"",r.host=r.hostname;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return g=g||r.host&&b.length,g&&!M&&b.unshift(""),b.length>0?r.pathname=b.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};ri.prototype.parseHost=function(){var e=this.host,t=PB.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const c_={};function St(e,t,r=3){if(c_[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(n))),c_[t]=!0}function Nr(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function Pa(e){return e.split("?")[0].split("#")[0]}function UB(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function GB(e,t,r){return e.replace(new RegExp(UB(t),"g"),r)}function HB(e,t){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${e.slice(i+1,a)}`:r=e.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const Ce={toPosix(e){return GB(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},isBlobUrl(e){return e.startsWith("blob:")},hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){Nr(e),e=this.toPosix(e);const t=/^file:\/\/\//.exec(e);if(t)return t[0];const r=/^[^/:]+:\/{0,2}/.exec(e);return r?r[0]:""},toAbsolute(e,t,r){if(Nr(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;const n=Pa(this.toPosix(t??at.ADAPTER.getBaseUrl())),i=Pa(this.toPosix(r??this.rootname(n)));return e=this.toPosix(e),e.startsWith("/")?Ce.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(Nr(e),e.length===0)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;e=this.toPosix(e);let t="";const r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return e=HB(e,!1),e.length>0&&n&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return Nr(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let r=0;r<e.length;++r){const n=e[r];if(Nr(n),n.length>0)if(t===void 0)t=n;else{const i=e[r-1]??"";this.extname(i)?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(Nr(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const r=t===47;let n=-1,i=!0;const s=this.getProtocol(e),o=e;e=e.slice(s.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+e:s:r&&n===1?"//":s+e.slice(0,n)},rootname(e){Nr(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const r=e.indexOf("/",t.length);r!==-1?t=e.slice(0,r):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Nr(e),t&&Nr(t),e=Pa(this.toPosix(e));let r=0,n=-1,i=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(s=e.length-1;s>=0;--s){const l=e.charCodeAt(s);if(l===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=e.length),e.slice(r,n)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":e.slice(r,n)},extname(e){Nr(e),e=Pa(this.toPosix(e));let t=-1,r=0,n=-1,i=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||n===-1||s===0||s===1&&t===n-1&&t===r+1?"":e.slice(t,n)},parse(e){Nr(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=Pa(this.toPosix(e));let r=e.charCodeAt(0);const n=this.isAbsolute(e);let i;t.root=this.rootname(e),n||this.hasProtocol(e)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,u=e.length-1,c=0;for(;u>=i;--u){if(r=e.charCodeAt(u),r===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),r===46?s===-1?s=u:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||a===-1||c===0||c===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&n?(t.name=e.slice(1,s),t.base=e.slice(1,a)):(t.name=e.slice(o,s),t.base=e.slice(o,a)),t.ext=e.slice(s,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"};let zd;async function zB(){return zd??(zd=(async()=>{var s;const e=document.createElement("canvas").getContext("webgl");if(!e)return rr.UNPACK;const t=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!t)return rr.UNPACK;const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const i=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,i),e.deleteFramebuffer(n),e.deleteTexture(r),(s=e.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?rr.PMA:rr.UNPACK})()),zd}let Vd;function VB(){return typeof Vd>"u"&&(Vd=function(){var t;const e={stencil:!0,failIfMajorPerformanceCaveat:at.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!at.ADAPTER.getWebGLRenderingContext())return!1;const r=at.ADAPTER.createCanvas();let n=r.getContext("webgl",e)||r.getContext("experimental-webgl",e);const i=!!((t=n==null?void 0:n.getContextAttributes())!=null&&t.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Vd}var WB={grad:.9,turn:360,rad:360/(2*Math.PI)},Un=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Oe=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Rr=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},T5=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},h_=function(e){return{r:Rr(e.r,0,255),g:Rr(e.g,0,255),b:Rr(e.b,0,255),a:Rr(e.a)}},Wd=function(e){return{r:Oe(e.r),g:Oe(e.g),b:Oe(e.b),a:Oe(e.a,3)}},XB=/^#([0-9a-f]{3,8})$/i,ju=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},A5=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=Math.max(t,r,n),o=s-Math.min(t,r,n),a=o?s===t?(r-n)/o:s===r?2+(n-t)/o:4+(t-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},E5=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var s=Math.floor(t),o=n*(1-r),a=n*(1-(t-s)*r),l=n*(1-(1-t+s)*r),u=s%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u],a:i}},f_=function(e){return{h:T5(e.h),s:Rr(e.s,0,100),l:Rr(e.l,0,100),a:Rr(e.a)}},d_=function(e){return{h:Oe(e.h),s:Oe(e.s),l:Oe(e.l),a:Oe(e.a,3)}},p_=function(e){return E5((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},dl=function(e){return{h:(t=A5(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},$B=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jB=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,YB=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qB=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qp={string:[[function(e){var t=XB.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Oe(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Oe(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=YB.exec(e)||qB.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:h_({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=$B.exec(e)||jB.exec(e);if(!t)return null;var r,n,i=f_({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(WB[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return p_(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,s=i===void 0?1:i;return Un(t)&&Un(r)&&Un(n)?h_({r:Number(t),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,s=i===void 0?1:i;if(!Un(t)||!Un(r)||!Un(n))return null;var o=f_({h:Number(t),s:Number(r),l:Number(n),a:Number(s)});return p_(o)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,s=i===void 0?1:i;if(!Un(t)||!Un(r)||!Un(n))return null;var o=function(a){return{h:T5(a.h),s:Rr(a.s,0,100),v:Rr(a.v,0,100),a:Rr(a.a)}}({h:Number(t),s:Number(r),v:Number(n),a:Number(s)});return E5(o)},"hsv"]]},m_=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},ZB=function(e){return typeof e=="string"?m_(e.trim(),qp.string):typeof e=="object"&&e!==null?m_(e,qp.object):[null,void 0]},Xd=function(e,t){var r=dl(e);return{h:r.h,s:Rr(r.s+100*t,0,100),l:r.l,a:r.a}},$d=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},g_=function(e,t){var r=dl(e);return{h:r.h,s:r.s,l:Rr(r.l+100*t,0,100),a:r.a}},Zp=function(){function e(t){this.parsed=ZB(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Oe($d(this.rgba),2)},e.prototype.isDark=function(){return $d(this.rgba)<.5},e.prototype.isLight=function(){return $d(this.rgba)>=.5},e.prototype.toHex=function(){return t=Wd(this.rgba),r=t.r,n=t.g,i=t.b,o=(s=t.a)<1?ju(Oe(255*s)):"","#"+ju(r)+ju(n)+ju(i)+o;var t,r,n,i,s,o},e.prototype.toRgb=function(){return Wd(this.rgba)},e.prototype.toRgbString=function(){return t=Wd(this.rgba),r=t.r,n=t.g,i=t.b,(s=t.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var t,r,n,i,s},e.prototype.toHsl=function(){return d_(dl(this.rgba))},e.prototype.toHslString=function(){return t=d_(dl(this.rgba)),r=t.h,n=t.s,i=t.l,(s=t.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var t,r,n,i,s},e.prototype.toHsv=function(){return t=A5(this.rgba),{h:Oe(t.h),s:Oe(t.s),v:Oe(t.v),a:Oe(t.a,3)};var t},e.prototype.invert=function(){return an({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),an(Xd(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),an(Xd(this.rgba,-t))},e.prototype.grayscale=function(){return an(Xd(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),an(g_(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),an(g_(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?an({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):Oe(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=dl(this.rgba);return typeof t=="number"?an({h:t,s:r.s,l:r.l,a:r.a}):Oe(r.h)},e.prototype.isEqual=function(t){return this.toHex()===an(t).toHex()},e}(),an=function(e){return e instanceof Zp?e:new Zp(e)},y_=[],KB=function(e){e.forEach(function(t){y_.indexOf(t)<0&&(t(Zp,qp),y_.push(t))})};function QB(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};e.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=n[this.toHex()];if(u)return u;if(o!=null&&o.closest){var c=this.toRgb(),h=1/0,f="black";if(!s.length)for(var d in r)s[d]=new e(r[d]).toRgb();for(var p in r){var m=(a=c,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<h&&(h=m,f=p)}return f}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":r[a];return l?new e(l).toRgb():null},"name"])}KB([QB]);const go=class kc{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof kc)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,r){const n=typeof t;if(n!==typeof r)return!1;if(n==="number"||n==="string"||t instanceof Number)return t===r;if(Array.isArray(t)&&Array.isArray(r)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(r))return t.length!==r.length?!1:t.every((i,s)=>i===r[s]);if(t!==null&&r!==null){const i=Object.keys(t),s=Object.keys(r);return i.length!==s.length?!1:i.every(o=>t[o]===r[o])}return t===r}toRgba(){const[t,r,n,i]=this._components;return{r:t,g:r,b:n,a:i}}toRgb(){const[t,r,n]=this._components;return{r:t,g:r,b:n}}toRgbaString(){const[t,r,n]=this.toUint8RgbArray();return`rgba(${t},${r},${n},${this.alpha})`}toUint8RgbArray(t){const[r,n,i]=this._components;return t=t??[],t[0]=Math.round(r*255),t[1]=Math.round(n*255),t[2]=Math.round(i*255),t}toRgbArray(t){t=t??[];const[r,n,i]=this._components;return t[0]=r,t[1]=n,t[2]=i,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[r,n,i,s]=kc.temp.setValue(t)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(t,r=!0){return r&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,r=!0){if(t===1)return(255<<24)+this._int;if(t===0)return r?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return r&&(n=n*t+.5|0,i=i*t+.5|0,s=s*t+.5|0),(t*255<<24)+(n<<16)+(i<<8)+s}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[r,n,i]=this._components;return this._components[0]=Math.round(r*t)/t,this._components[1]=Math.round(n*t)/t,this._components[2]=Math.round(i*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[r,n,i,s]=this._components;return t[0]=r,t[1]=n,t[2]=i,t[3]=s,t}normalize(t){let r,n,i,s;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;r=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[r,n,i,s=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[r,n,i,s=255]=t,r/=255,n/=255,i/=255,s/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=kc.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=an(t);o.isValid()&&({r,g:n,b:i,a:s}=o.rgba,r/=255,n/=255,i/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,r,n]=this._components;this._int=(t*255<<16)+(r*255<<8)+(n*255|0)}_clamp(t,r=0,n=1){return typeof t=="number"?Math.min(Math.max(t,r),n):(t.forEach((i,s)=>{t[s]=Math.min(Math.max(i,r),n)}),t)}};go.shared=new go,go.temp=new go,go.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Yt=go;function JB(e){return St("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Yt.shared.setValue(e).toHex()}function tL(e){return St("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Yt.shared.setValue(e).toNumber()}function eL(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[yt.NORMAL_NPM]=yt.NORMAL,e[yt.ADD_NPM]=yt.ADD,e[yt.SCREEN_NPM]=yt.SCREEN,t[yt.NORMAL]=yt.NORMAL_NPM,t[yt.ADD]=yt.ADD_NPM,t[yt.SCREEN]=yt.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}const C5=eL();function S5(e,t){return C5[t?1:0][e]}function rL(e,t=null){const r=e*6;if(t=t||new Uint16Array(r),t.length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)t[n+0]=i+0,t[n+1]=i+1,t[n+2]=i+2,t[n+3]=i+0,t[n+4]=i+2,t[n+5]=i+3;return t}function M5(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function Sh(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function b_(e){return!(e&e-1)&&!!e}function __(e){let t=(e>65535?1:0)<<4;e>>>=t;let r=(e>255?1:0)<<3;return e>>>=r,t|=r,r=(e>15?1:0)<<2,e>>>=r,t|=r,r=(e>3?1:0)<<1,e>>>=r,t|=r,t|e>>1}function Bo(e,t,r){const n=e.length;let i;if(t>=n||r===0)return;r=t+r>n?n-t:r;const s=n-r;for(i=t;i<s;++i)e[i]=e[i+r];e.length=s}function Ii(e){return e===0?0:e<0?-1:1}let nL=0;function Ls(){return++nL}const Kp=class{constructor(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Kp.EMPTY=new Kp(0,0,0,0);let v_=Kp;const w_={},ln=Object.create(null),bi=Object.create(null);class iL{constructor(t,r,n){this._canvas=at.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||at.RESOLUTION,this.resize(t,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,r){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function x_(e,t,r){for(let n=0,i=4*r*t;n<t;++n,i+=4)if(e[i+3]!==0)return!1;return!0}function T_(e,t,r,n,i){const s=4*t;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(e[a+3]!==0)return!1;return!0}function sL(e){const{width:t,height:r}=e,n=e.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,t,r).data;let s=0,o=0,a=t-1,l=r-1;for(;o<r&&x_(i,t,o);)++o;if(o===r)return v_.EMPTY;for(;x_(i,t,l);)--l;for(;T_(i,t,s,o,l);)++s;for(;T_(i,t,a,o,l);)--a;return++a,++l,new v_(s,o,a,l)}function oL(e){const t=sL(e),{width:r,height:n}=t;let i=null;if(!t.isEmpty()){const s=e.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(t.left,t.top,r,n)}return{width:r,height:n,data:i}}function aL(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location;const r=new URL(e,document.baseURI);return r.hostname!==t.hostname||r.port!==t.port||r.protocol!==t.protocol?"anonymous":""}function li(e,t=1){var n;const r=(n=at.RETINA_PREFIX)==null?void 0:n.exec(e);return r?parseFloat(r[1]):t}var nt=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(nt||{});const Qp=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},A_=(e,t)=>Qp(e).priority??t,ct={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Qp).forEach(t=>{t.type.forEach(r=>{var n,i;return(i=(n=this._removeHandlers)[r])==null?void 0:i.call(n,t)})}),this},add(...e){return e.map(Qp).forEach(t=>{t.type.forEach(r=>{const n=this._addHandlers,i=this._queue;n[r]?n[r](t):(i[r]=i[r]||[],i[r].push(t))})}),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const s=this._queue;return s[e]&&(s[e].forEach(o=>t(o)),delete s[e]),this},handleByMap(e,t){return this.handle(e,r=>{t[r.name]=r.ref},r=>{delete t[r.name]})},handleByList(e,t,r=-1){return this.handle(e,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((i,s)=>A_(s,r)-A_(i,r)))},n=>{const i=t.indexOf(n.ref);i!==-1&&t.splice(i,1)})}};class Jp{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const lL=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function uL(e){let t="";for(let r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function cL(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=lL.replace(/%forloop%/gi,uL(e));if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))e=e/2|0;else break}return e}const jd=0,Yd=1,qd=2,Zd=3,Kd=4,Qd=5;class Nn{constructor(){this.data=0,this.blendMode=yt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<jd)}set blend(t){!!(this.data&1<<jd)!==t&&(this.data^=1<<jd)}get offsets(){return!!(this.data&1<<Yd)}set offsets(t){!!(this.data&1<<Yd)!==t&&(this.data^=1<<Yd)}get culling(){return!!(this.data&1<<qd)}set culling(t){!!(this.data&1<<qd)!==t&&(this.data^=1<<qd)}get depthTest(){return!!(this.data&1<<Zd)}set depthTest(t){!!(this.data&1<<Zd)!==t&&(this.data^=1<<Zd)}get depthMask(){return!!(this.data&1<<Qd)}set depthMask(t){!!(this.data&1<<Qd)!==t&&(this.data^=1<<Qd)}get clockwiseFrontFace(){return!!(this.data&1<<Kd)}set clockwiseFrontFace(t){!!(this.data&1<<Kd)!==t&&(this.data^=1<<Kd)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==yt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new Nn;return t.depthTest=!1,t.blend=!0,t}}Nn.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const tm=[];function I5(e,t){if(!e)return null;let r="";if(typeof e=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(r=n[1].toLowerCase())}for(let n=tm.length-1;n>=0;--n){const i=tm[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Wr{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,r,n,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:c}=this;this._aliasCount++;for(let h=0,f=c.length;h<f;h++)c[h][u](t,r,n,i,s,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const r=this.items.indexOf(t);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Wr.prototype,{dispatch:{value:Wr.prototype.emit},run:{value:Wr.prototype.emit}});class Gl{constructor(t=0,r=0){this._width=t,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Wr("setRealSize"),this.onUpdate=new Wr("update"),this.onError=new Wr("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,r){(t!==this._width||r!==this._height)&&(this._width=t,this._height=r,this.onResize.emit(t,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,r){return!1}}class Of extends Gl{constructor(t,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=t,this.unpackAlignment=r.unpackAlignment??4}upload(t,r,n){const i=t.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===rr.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const hL={scaleMode:Qn.NEAREST,alphaMode:rr.NPM},em=class yo extends uu{constructor(t=null,r=null){super(),r=Object.assign({},yo.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:c,type:h,target:f,resolution:d,resourceOptions:p}=r;t&&!(t instanceof Gl)&&(t=I5(t,p),t.internal=!0),this.resolution=d||at.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=c,this.type=h,this.target=f,this.alphaMode=n,this.uid=Ls(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,r){let n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this}setSize(t,r,n){return n=n||this.resolution,this.setRealSize(t*n,r*n,n)}setRealSize(t,r,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=b_(this.realWidth)&&b_(this.realHeight)}setResolution(t){const r=this.resolution;return r===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*r)/t,this.height=Math.round(this.height*r)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete bi[this.cacheId],delete ln[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),yo.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,r,n=at.STRICT_TEXTURE_CACHE){const i=typeof t=="string";let s=null;if(i)s=t;else{if(!t._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Ls()}`}s=t._pixiId}let o=bi[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new yo(t,r),o.cacheId=s,yo.addToCache(o,s)),o}static fromBuffer(t,r,n,i){t=t||new Float32Array(r*n*4);const s=new Of(t,{width:r,height:n,...i==null?void 0:i.resourceOptions});let o,a;return t instanceof Float32Array?(o=q.RGBA,a=pt.FLOAT):t instanceof Int32Array?(o=q.RGBA_INTEGER,a=pt.INT):t instanceof Uint32Array?(o=q.RGBA_INTEGER,a=pt.UNSIGNED_INT):t instanceof Int16Array?(o=q.RGBA_INTEGER,a=pt.SHORT):t instanceof Uint16Array?(o=q.RGBA_INTEGER,a=pt.UNSIGNED_SHORT):t instanceof Int8Array?(o=q.RGBA,a=pt.BYTE):(o=q.RGBA,a=pt.UNSIGNED_BYTE),s.internal=!0,new yo(s,Object.assign({},hL,{type:a,format:o},i))}static addToCache(t,r){r&&(t.textureCacheIds.includes(r)||t.textureCacheIds.push(r),bi[r]&&bi[r]!==t&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),bi[r]=t)}static removeFromCache(t){if(typeof t=="string"){const r=bi[t];if(r){const n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete bi[t],r}}else if(t!=null&&t.textureCacheIds){for(let r=0;r<t.textureCacheIds.length;++r)delete bi[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null}};em.defaultOptions={mipmap:In.POW2,anisotropicLevel:0,scaleMode:Qn.LINEAR,wrapMode:ki.CLAMP,alphaMode:rr.UNPACK,target:No.TEXTURE_2D,format:q.RGBA,type:pt.UNSIGNED_BYTE},em._globalBatch=0;let vt=em;class rm{constructor(){this.texArray=null,this.blend=0,this.type=yn.TRIANGLES,this.start=0,this.size=0,this.data=null}}let fL=0;class ge{constructor(t,r=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=fL++,this.disposeRunner=new Wr("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?An.ELEMENT_ARRAY_BUFFER:An.ARRAY_BUFFER}get index(){return this.type===An.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ge(t)}}class Mh{constructor(t,r=0,n=!1,i=pt.FLOAT,s,o,a,l=1){this.buffer=t,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,r,n,i,s){return new Mh(t,r,n,i,s)}}const dL={Float32Array,Uint32Array,Int32Array,Uint8Array};function pL(e,t){let r=0,n=0;const i={};for(let l=0;l<e.length;l++)n+=t[l],r+=e[l].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let l=0;l<e.length;l++){const u=t[l],c=e[l],h=M5(c);i[h]||(i[h]=new dL[h](s)),o=i[h];for(let f=0;f<c.length;f++){const d=(f/u|0)*n+a,p=f%u;o[d+p]=c[f]}a+=u}return new Float32Array(s)}const E_={5126:4,5123:2,5121:1};let mL=0;const gL={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Li{constructor(t=[],r={}){this.buffers=t,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=mL++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Wr("disposeGeometry"),this.refCount=0}addAttribute(t,r,n=0,i=!1,s,o,a,l=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof ge||(r instanceof Array&&(r=new Float32Array(r)),r=new ge(r));const u=t.split("|");if(u.length>1){for(let h=0;h<u.length;h++)this.addAttribute(u[h],r,n,i,s);return this}let c=this.buffers.indexOf(r);return c===-1&&(this.buffers.push(r),c=this.buffers.length-1),this.attributes[t]=new Mh(c,n,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ge||(t instanceof Array&&(t=new Uint16Array(t)),t=new ge(t)),t.type=An.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],r=[],n=new ge;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];t.push(o.data),r.push(s.size*E_[s.type]/4),s.buffer=0}for(n.data=pL(t,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const r=this.attributes[t];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new Li;for(let r=0;r<this.buffers.length;r++)t.buffers[r]=new ge(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];t.attributes[r]=new Mh(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=An.ELEMENT_ARRAY_BUFFER),t}static merge(t){const r=new Li,n=[],i=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new gL[M5(o.buffers[a].data)](i[a]),r.buffers[a]=new ge(n[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=An.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,c=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){c=h;break}for(const h in o.attributes){const f=o.attributes[h];(f.buffer|0)===c&&(l+=f.size*E_[f.type]/4)}for(let h=0;h<t.length;h++){const f=t[h].indexBuffer.data;for(let d=0;d<f.length;d++)r.indexBuffer.data[d+u]+=a;a+=t[h].buffers[c].data.length/l,u+=f.length}}return r}}class R5 extends Li{constructor(t=!1){super(),this._buffer=new ge(null,t,!1),this._indexBuffer=new ge(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,pt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,pt.FLOAT).addAttribute("aColor",this._buffer,4,!0,pt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,pt.FLOAT).addIndex(this._indexBuffer)}}const Ih=Math.PI*2,yL=180/Math.PI,bL=Math.PI/180;var Ge=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Ge||{});class Bt{constructor(t=0,r=0){this.x=0,this.y=0,this.x=t,this.y=r}clone(){return new Bt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,r=t){return this.x=t,this.y=r,this}}Bt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Yu=[new Bt,new Bt,new Bt,new Bt];class xt{constructor(t=0,r=0,n=0,i=0){this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Ge.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new xt(0,0,0,0)}clone(){return new xt(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,r){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(t,r){if(!r){const E=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=E)return!1;const T=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>T}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Yu[0].set(t.left,t.top),l=Yu[1].set(t.left,t.bottom),u=Yu[2].set(t.right,t.top),c=Yu[3].set(t.right,t.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(r.a*r.d-r.b*r.c);if(h===0||(r.apply(a,a),r.apply(l,l),r.apply(u,u),r.apply(c,c),Math.max(a.x,l.x,u.x,c.x)<=n||Math.min(a.x,l.x,u.x,c.x)>=i||Math.max(a.y,l.y,u.y,c.y)<=s||Math.min(a.y,l.y,u.y,c.y)>=o))return!1;const f=h*(l.y-a.y),d=h*(a.x-l.x),p=f*n+d*s,m=f*i+d*s,g=f*n+d*o,y=f*i+d*o;if(Math.max(p,m,g,y)<=f*a.x+d*a.y||Math.min(p,m,g,y)>=f*c.x+d*c.y)return!1;const b=h*(a.y-u.y),_=h*(u.x-a.x),v=b*n+_*s,w=b*i+_*s,A=b*n+_*o,x=b*i+_*o;return!(Math.max(v,w,A,x)<=b*a.x+_*a.y||Math.min(v,w,A,x)>=b*c.x+_*c.y)}pad(t=0,r=t){return this.x-=t,this.y-=r,this.width+=t*2,this.height+=r*2,this}fit(t){const r=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(t=1,r=.001){const n=Math.ceil((this.x+this.width-r)*t)/t,i=Math.ceil((this.y+this.height-r)*t)/t;return this.x=Math.floor((this.x+r)*t)/t,this.y=Math.floor((this.y+r)*t)/t,this.width=n-this.x,this.height=i-this.y,this}enlarge(t){const r=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}}xt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ff{constructor(t=0,r=0,n=0){this.x=t,this.y=r,this.radius=n,this.type=Ge.CIRC}clone(){return new Ff(this.x,this.y,this.radius)}contains(t,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-t,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new xt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Ff.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Bf{constructor(t=0,r=0,n=0,i=0){this.x=t,this.y=r,this.width=n,this.height=i,this.type=Ge.ELIP}clone(){return new Bf(this.x,this.y,this.width,this.height)}contains(t,r){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new xt(this.x-this.width,this.y-this.height,this.width,this.height)}}Bf.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ws{constructor(...t){let r=Array.isArray(t[0])?t[0]:t;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=Ge.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),r=new ws(t);return r.closeStroke=this.closeStroke,r}contains(t,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],c=this.points[o*2+1];l>r!=c>r&&t<(u-a)*((r-l)/(c-l))+a&&(n=!n)}return n}}ws.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`};class Lf{constructor(t=0,r=0,n=0,i=0,s=20){this.x=t,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=Ge.RREC}clone(){return new Lf(this.x,this.y,this.width,this.height,this.radius)}contains(t,r){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let i=t-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=t-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=t-(this.x+n),i*i+s*s<=o))return!0}return!1}}Lf.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Zt{constructor(t=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,r,n,i,s,o){return this.a=t,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(t,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,r){r=r||new Bt;const n=t.x,i=t.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(t,r){r=r||new Bt;const n=1/(this.a*this.d+this.c*-this.b),i=t.x,s=t.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(t,r){return this.tx+=t,this.ty+=r,this}scale(t,r){return this.a*=t,this.d*=r,this.c*=t,this.b*=r,this.tx*=t,this.ty*=r,this}rotate(t){const r=Math.cos(t),n=Math.sin(t),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(t){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=t.a*r+t.b*i,this.b=t.a*n+t.b*s,this.c=t.c*r+t.d*i,this.d=t.c*n+t.d*s,this.tx=t.tx*r+t.ty*i+this.tx,this.ty=t.tx*n+t.ty*s+this.ty,this}setTransform(t,r,n,i,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(t){const r=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,i=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this}decompose(t){const r=this.a,n=this.b,i=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-i,s),l=Math.atan2(n,r),u=Math.abs(a+l);return u<1e-5||Math.abs(Ih-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(r*r+n*n),t.scale.y=Math.sqrt(i*i+s*s),t.position.x=this.tx+(o.x*r+o.y*i),t.position.y=this.ty+(o.x*n+o.y*s),t}invert(){const t=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=t*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(t*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Zt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Zt}static get TEMP_MATRIX(){return new Zt}}Zt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const is=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ss=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],os=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],as=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],nm=[],P5=[],qu=Math.sign;function _L(){for(let e=0;e<16;e++){const t=[];nm.push(t);for(let r=0;r<16;r++){const n=qu(is[e]*is[r]+os[e]*ss[r]),i=qu(ss[e]*is[r]+as[e]*ss[r]),s=qu(is[e]*os[r]+os[e]*as[r]),o=qu(ss[e]*os[r]+as[e]*as[r]);for(let a=0;a<16;a++)if(is[a]===n&&ss[a]===i&&os[a]===s&&as[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new Zt;t.set(is[e],ss[e],os[e],as[e],0,0),P5.push(t)}}_L();const ae={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>is[e],uY:e=>ss[e],vX:e=>os[e],vY:e=>as[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>nm[e][t],sub:(e,t)=>nm[e][ae.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?ae.S:ae.N:Math.abs(t)*2<=Math.abs(e)?e>0?ae.E:ae.W:t>0?e>0?ae.SE:ae.SW:e>0?ae.NE:ae.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=P5[ae.inv(t)];i.tx=r,i.ty=n,e.append(i)}};class ti{constructor(t,r,n=0,i=0){this._x=n,this._y=i,this.cb=t,this.scope=r}clone(t=this.cb,r=this.scope){return new ti(t,r,this._x,this._y)}set(t=0,r=t){return(this._x!==t||this._y!==r)&&(this._x=t,this._y=r,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}ti.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const im=class{constructor(){this.worldTransform=new Zt,this.localTransform=new Zt,this.position=new ti(this.onChange,this,0,0),this.scale=new ti(this.onChange,this,1,1),this.pivot=new ti(this.onChange,this,0,0),this.skew=new ti(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};im.IDENTITY=new im;let Xg=im;Xg.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var vL=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,wL=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function C_(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function Jd(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function k5(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Jd(2*t);case"bvec3":return Jd(3*t);case"bvec4":return Jd(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Lo=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],xL={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},TL={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function AL(e,t){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in e.uniforms){const s=t[i];if(!s){((n=e.uniforms[i])==null?void 0:n.group)===!0&&(e.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=e.uniforms[i];let a=!1;for(let l=0;l<Lo.length;l++)if(Lo[l].test(s,o)){r.push(Lo[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?xL:TL)[s.type].replace("location",`ud["${i}"].location`);r.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const D5={};let uo=D5;function EL(){if(uo===D5||uo!=null&&uo.isContextLost()){const e=at.ADAPTER.createCanvas();let t;at.PREFER_ENV>=Zs.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),uo=t}return uo}let Zu;function CL(){if(!Zu){Zu=Ir.MEDIUM;const e=EL();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);t&&(Zu=t.precision?Ir.HIGH:Ir.MEDIUM)}}return Zu}function S_(e,t){const r=e.getShaderSource(t).split(`
`).map((u,c)=>`${c}: ${u}`),n=e.getShaderInfoLog(t),i=n.split(`
`),s={},o=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{r[u-1]=`%c${r[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function SL(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||S_(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||S_(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const ML={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function N5(e){return ML[e]}let Ku=null;const M_={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function O5(e,t){if(!Ku){const r=Object.keys(M_);Ku={};for(let n=0;n<r.length;++n){const i=r[n];Ku[e[i]]=M_[i]}}return Ku[t]}function I_(e,t,r){if(e.substring(0,9)!=="precision"){let n=t;return t===Ir.HIGH&&r!==Ir.HIGH&&(n=Ir.MEDIUM),`precision ${n} float;
${e}`}else if(r!==Ir.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let ka;function IL(){if(typeof ka=="boolean")return ka;try{ka=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ka=!1}return ka}let RL=0;const Qu={},sm=class bo{constructor(t,r,n="pixi-shader",i={}){this.extra={},this.id=RL++,this.vertexSrc=t||bo.defaultVertexSrc,this.fragmentSrc=r||bo.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Qu[n]?(Qu[n]++,n+=`-${Qu[n]}`):Qu[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=I_(this.vertexSrc,bo.defaultVertexPrecision,Ir.HIGH),this.fragmentSrc=I_(this.fragmentSrc,bo.defaultFragmentPrecision,CL())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return wL}static get defaultFragmentSrc(){return vL}static from(t,r,n){const i=t+r;let s=w_[i];return s||(w_[i]=s=new bo(t,r,n)),s}};sm.defaultVertexPrecision=Ir.HIGH,sm.defaultFragmentPrecision=Jn.apple.device?Ir.HIGH:Ir.MEDIUM;let ei=sm,PL=0;class Xr{constructor(t,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=PL++,this.static=!!r,this.ubo=!!n,t instanceof ge?(this.buffer=t,this.buffer.type=An.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ge(new Float32Array(1)),this.buffer.type=An.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,r,n){if(!this.ubo)this.uniforms[t]=new Xr(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,r,n){return new Xr(t,r,n)}static uboFrom(t,r){return new Xr(t,r??!0,!0)}}class En{constructor(t,r){this.uniformBindCount=0,this.program=t,r?r instanceof Xr?this.uniformGroup=r:this.uniformGroup=new Xr(r):this.uniformGroup=new Xr({}),this.disposeRunner=new Wr("disposeShader")}checkUniformExists(t,r){if(r.uniforms[t])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group===!0&&this.checkUniformExists(t,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,r,n){const i=ei.from(t,r);return new En(i,n)}}class kL{constructor(t,r){if(this.vertexSrc=t,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let s=0;s<t;s++)n[s]=s;this.defaultGroupCache[t]=Xr.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${t}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new ei(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Zt,default:this.defaultGroupCache[t]};return new En(this.programCache[t],r)}generateSampleSrc(t){let r="";r+=`
`,r+=`
`;for(let n=0;n<t;n++)n>0&&(r+=`
else `),n<t-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class om{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function DL(){return!Jn.apple.device}function NL(e){let t=!0;const r=at.ADAPTER.getNavigator();if(Jn.tablet||Jn.phone){if(Jn.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(Jn.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?e:4}class Uf{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var OL=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,FL=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ya=class Br extends Uf{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=R5,this.vertexSize=6,this.state=Nn.for2d(),this.size=Br.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??NL(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??DL(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return St("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return FL}static get defaultFragmentTemplate(){return OL}setShaderGenerator({vertex:t=Br.defaultVertexSrc,fragment:r=Br.defaultFragmentTemplate}={}){this.shaderGenerator=new kL(t,r)}contextChange(){const t=this.renderer.gl;at.PREFER_ENV===Zs.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Br.defaultMaxTextures),this.maxTextures=cL(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:r}=Br,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new rm);for(;r.length<i;)r.push(new om);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:r}=this,n=Br._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++vt._globalBatch,l=0,u=n[0],c=0;i.copyBoundTextures(s,r);for(let h=0;h<this._bufferSize;++h){const f=t[h];t[h]=null,f._batchEnabled!==a&&(u.count>=r&&(i.boundArray(u,s,a,r),this.buildDrawCalls(u,c,h),c=h,u=n[++l],++a),f._batchEnabled=a,f.touched=o,u.elements[u.count++]=f)}u.count>0&&(i.boundArray(u,s,a,r),this.buildDrawCalls(u,c,this._bufferSize),++l,++a);for(let h=0;h<s.length;h++)s[h]=null;vt._globalBatch=a}buildDrawCalls(t,r,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Br._drawCallPool;let u=this._dcIndex,c=this._aIndex,h=this._iIndex,f=l[u];f.start=this._iIndex,f.texArray=t;for(let d=r;d<n;++d){const p=i[d],m=p._texture.baseTexture,g=C5[m.alphaMode?1:0][p.blendMode];i[d]=null,r<d&&f.blend!==g&&(f.size=h-f.start,r=d,f=l[++u],f.texArray=t,f.start=h),this.packInterleavedGeometry(p,s,o,c,h),c+=p.vertexData.length/2*a,h+=p.indices.length,f.blend=g}r<n&&(f.size=h-f.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=h}bindAndClearTexArray(t){const r=this.renderer.texture;for(let n=0;n<t.count;n++)r.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:r,_indexBuffer:n}=this;Br.canUploadSameBuffer?(t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:r,state:n}=this.renderer,i=Br._drawCallPool;let s=null;for(let o=0;o<t;o++){const{texArray:a,type:l,size:u,start:c,blend:h}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,n.set(this.state),r.drawElements(l,u,r.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Br.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const r=Sh(Math.ceil(t/8)),n=__(r),i=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new Jp(i*this.vertexSize*4)),s}getIndexBuffer(t){const r=Sh(Math.ceil(t/12)),n=__(r),i=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(t,r,n,i,s){const{uint32View:o,float32View:a}=r,l=i/this.vertexSize,u=t.uvs,c=t.indices,h=t.vertexData,f=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),p=Yt.shared.setValue(t._tintRGB).toPremultiplied(d,t._texture.baseTexture.alphaMode>0);for(let m=0;m<h.length;m+=2)a[i++]=h[m],a[i++]=h[m+1],a[i++]=u[m],a[i++]=u[m+1],o[i++]=p,a[i++]=f;for(let m=0;m<c.length;m++)n[s++]=l+c[m]}};Ya.defaultBatchSize=4096,Ya.extension={name:"batch",type:nt.RendererPlugin},Ya._drawCallPool=[],Ya._textureArrayPool=[];let ls=Ya;ct.add(ls);var BL=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,LL=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const am=class qa extends En{constructor(t,r,n){const i=ei.from(t||qa.defaultVertexSrc,r||qa.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=qa.defaultResolution,this.multisample=qa.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Nn}apply(t,r,n,i,s){t.applyFilter(this,r,n,i)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return LL}static get defaultFragmentSrc(){return BL}};am.defaultResolution=1,am.defaultMultisample=_e.NONE;let Ke=am;class Rh{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Yt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=t,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Rh.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Rh.extension={type:[nt.RendererSystem,nt.CanvasRendererSystem],name:"background"};ct.add(Rh);class F5{constructor(t){this.renderer=t,this.emptyRenderer=new Uf(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)t[i]=n[i]||null,t[i]&&(t[i]._batchLocation=i)}boundArray(t,r,n,i){const{elements:s,ids:o,count:a}=t;let l=0;for(let u=0;u<a;u++){const c=s[u],h=c._batchLocation;if(h>=0&&h<i&&r[h]===c){o[u]=h;continue}for(;l<i;){const f=r[l];if(f&&f._batchEnabled===n&&f._batchLocation===l){l++;continue}o[u]=l,c._batchLocation=l,r[l]=c;break}}}destroy(){this.renderer=null}}F5.extension={type:nt.RendererSystem,name:"batch"};ct.add(F5);let R_=0;class Ph{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=R_++}init(t){if(t.context)this.initFromContext(t.context);else{const r=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=R_++,this.renderer.runners.contextChange.emit(t);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const r=this.createContext(this.renderer.view,t);this.initFromContext(r)}createContext(t,r){let n;if(at.PREFER_ENV>=Zs.WEBGL2&&(n=t.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,r={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const r=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ph.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ph.extension={type:nt.RendererSystem,name:"context"};ct.add(Ph);class lm{constructor(t,r){if(this.width=Math.round(t),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Wr("disposeFramebuffer"),this.multisample=_e.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,r){return this.colorTextures[t]=r||new vt(null,{scaleMode:Qn.NEAREST,resolution:1,mipmap:In.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new vt(null,{scaleMode:Qn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:In.OFF,format:q.DEPTH_COMPONENT,type:pt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,r){if(t=Math.round(t),r=Math.round(r),!t||!r)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&r===this.height)){this.width=t,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(t/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class B5 extends vt{constructor(t={}){if(typeof t=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];t={width:r,height:n,scaleMode:i,resolution:s}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=_e.NONE),super(null,t),this.mipmap=In.OFF,this.valid=!0,this._clear=new Yt([0,0,0,0]),this.framebuffer=new lm(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ui extends Gl{constructor(t){const r=t,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;super(n,i),this.source=t,this.noSubImage=!1}static crossOrigin(t,r,n){n===void 0&&!r.startsWith("data:")?t.crossOrigin=aL(r):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,r,n,i){const s=t.gl,o=r.realWidth,a=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===rr.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const t=this.source,r=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class L5 extends Ui{constructor(t,r){if(r=r||{},typeof t=="string"){const n=new Image;Ui.crossOrigin(n,t,r.crossorigin),n.src=t,t=n}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??at.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===rr.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class $g{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,r,n){const i=r.width,s=r.height;if(n){const o=t.width/2/i,a=t.height/2/s,l=t.x/i+o,u=t.y/s+a;n=ae.add(n,ae.NW),this.x0=l+o*ae.uX(n),this.y0=u+a*ae.uY(n),n=ae.add(n,2),this.x1=l+o*ae.uX(n),this.y1=u+a*ae.uY(n),n=ae.add(n,2),this.x2=l+o*ae.uX(n),this.y2=u+a*ae.uY(n),n=ae.add(n,2),this.x3=l+o*ae.uX(n),this.y3=u+a*ae.uY(n)}else this.x0=t.x/i,this.y0=t.y/s,this.x1=(t.x+t.width)/i,this.y1=t.y/s,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/s,this.x3=t.x/i,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}$g.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const P_=new $g;function Ju(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class ft extends uu{constructor(t,r,n,i,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new xt(0,0,1,1)),t instanceof ft&&(t=t.baseTexture),this.baseTexture=t,this._frame=r,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=P_,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Bt(o.x,o.y):new Bt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=r:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:r}=this.baseTexture;r!=null&&r.url&&ln[r.url]&&ft.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ft.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new ft(this.baseTexture,!this.noFrame&&t,r,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===P_&&(this._uvs=new $g),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,r={},n=at.STRICT_TEXTURE_CACHE){const i=typeof t=="string";let s=null;if(i)s=t;else if(t instanceof vt){if(!t.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Ls()}`,vt.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Ls()}`}s=t._pixiId}let o=ln[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof vt)?(r.resolution||(r.resolution=li(t)),o=new ft(new vt(t,r)),o.baseTexture.cacheId=s,vt.addToCache(o.baseTexture,s),ft.addToCache(o,s)):!o&&t instanceof vt&&(o=new ft(t),ft.addToCache(o,s)),o}static fromURL(t,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),i=ft.from(t,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(t,r,n,i){return new ft(vt.fromBuffer(t,r,n,i))}static fromLoader(t,r,n,i){const s=new vt(t,Object.assign({scaleMode:vt.defaultOptions.scaleMode,resolution:li(r)},i)),{resource:o}=s;o instanceof L5&&(o.url=r);const a=new ft(s);return n||(n=r),vt.addToCache(a.baseTexture,n),ft.addToCache(a,n),n!==r&&(vt.addToCache(a.baseTexture,r),ft.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,r){r&&(t.textureCacheIds.includes(r)||t.textureCacheIds.push(r),ln[r]&&ln[r]!==t&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),ln[r]=t)}static removeFromCache(t){if(typeof t=="string"){const r=ln[t];if(r){const n=r.textureCacheIds.indexOf(t);return n>-1&&r.textureCacheIds.splice(n,1),delete ln[t],r}}else if(t!=null&&t.textureCacheIds){for(let r=0;r<t.textureCacheIds.length;++r)ln[t.textureCacheIds[r]]===t&&delete ln[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=t,o=r+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,c=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${c}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ft._EMPTY||(ft._EMPTY=new ft(new vt),Ju(ft._EMPTY),Ju(ft._EMPTY.baseTexture)),ft._EMPTY}static get WHITE(){if(!ft._WHITE){const t=at.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),ft._WHITE=new ft(vt.from(t)),Ju(ft._WHITE),Ju(ft._WHITE.baseTexture)}return ft._WHITE}}class Qs extends ft{constructor(t,r){super(t,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(t*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:r}=this;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))}static create(t){return new Qs(new B5(t))}}class U5{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,r,n=_e.NONE){const i=new B5(Object.assign({width:t,height:r,resolution:1,multisample:n},this.textureOptions));return new Qs(i)}getOptimalTexture(t,r,n=1,i=_e.NONE){let s;t=Math.max(Math.ceil(t*n-1e-6),1),r=Math.max(Math.ceil(r*n-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||r!==this._pixelsHeight?(t=Sh(t),r=Sh(r),s=((t&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(t,r,n){const i=this.getOptimalTexture(t.width,t.height,r||t.resolution,n||_e.NONE);return i.filterFrame=t.filterFrame,i}returnTexture(t){const r=t.filterPoolKey;t.filterFrame=null,this.texturePool[r].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}U5.SCREEN_KEY=-1;class UL extends Li{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class G5 extends Li{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ge(this.vertices),this.uvBuffer=new ge(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/t.width,this.uvs[3]=i,this.uvs[4]=n+r.width/t.width,this.uvs[5]=i+r.height/t.height,this.uvs[6]=n,this.uvs[7]=i+r.height/t.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class GL{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=_e.NONE,this.sourceFrame=new xt,this.destinationFrame=new xt,this.bindingSourceFrame=new xt,this.bindingDestinationFrame=new xt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tc=[new Bt,new Bt,new Bt,new Bt],t0=new Zt;class H5{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new U5,this.statePool=[],this.quad=new UL,this.quadUv=new G5,this.tempRect=new xt,this.activeState={},this.globalUniforms=new Xr({outputFrame:new xt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new GL,o=n.renderTexture;let a,l;if(o.current){const g=o.current;a=g.resolution,l=g.multisample}else a=n.resolution,l=n.multisample;let u=r[0].resolution||a,c=r[0].multisample??l,h=r[0].padding,f=r[0].autoFit,d=r[0].legacy??!0;for(let g=1;g<r.length;g++){const y=r[g];u=Math.min(u,y.resolution||a),c=Math.min(c,y.multisample??l),h=this.useMaxPadding?Math.max(h,y.padding):h+y.padding,f=f&&y.autoFit,d=d||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=u,s.multisample=c,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(h);const p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(t0.copyFrom(n.projection.transform).invert(),p),f?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,c),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,r=t.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const u=i.filterArea;u[0]=r.destinationFrame.width,u[1]=r.destinationFrame.height,u[2]=r.sourceFrame.x,u[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,fn.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let u=r.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,r.resolution);c.filterFrame=u.filterFrame;let h=0;for(h=0;h<n.length-1;++h){h===1&&r.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,r.resolution),c.filterFrame=u.filterFrame),n[h].apply(this,u,c,fn.CLEAR,r);const f=u;u=c,c=f}n[h].apply(this,u,l.renderTexture,fn.BLEND,r),h>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}r.clear(),this.statePool.push(r)}bindAndClear(t,r=fn.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===fn.CLEAR||r===fn.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,r,n,i){const s=this.renderer;s.state.set(t.state),this.bindAndClear(n,i),t.uniforms.uSampler=r,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(yn.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(yn.TRIANGLE_STRIP))}calculateSpriteMatrix(t,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=t.set(i.width,0,0,i.height,n.x,n.y),a=r.worldTransform.copyTo(Zt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,r,n=1,i=_e.NONE){return this.texturePool.getOptimalTexture(t,r,n,i)}getFilterTexture(t,r,n){if(typeof t=="number"){const s=t;t=r,r=s}t=t||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(t.width,t.height,r||t.resolution,n||_e.NONE);return i.filterFrame=t.filterFrame,i}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,r){const n=tc[0],i=tc[1],s=tc[2],o=tc[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),t.apply(n,n),t.apply(i,i),t.apply(s,s),t.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),l=Math.min(n.y,i.y,s.y,o.y),u=Math.max(n.x,i.x,s.x,o.x),c=Math.max(n.y,i.y,s.y,o.y);r.x=a,r.y=l,r.width=u-a,r.height=c-l}roundFrame(t,r,n,i,s){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?t0.copyFrom(s):t0.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,t),t.ceil(r),this.transformAABB(s.invert(),t)}}}H5.extension={type:nt.RendererSystem,name:"filter"};ct.add(H5);class HL{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=_e.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const zL=new xt;class z5{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new lm(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new xt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;at.PREFER_ENV===Zs.WEBGL_LEGACY&&(r=null,n=null),r?t.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,r,n=0){const{gl:i}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=n),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),r){const o=r.width>>n,a=r.height>>n,l=o/r.width;this.setViewport(r.x*l,r.y*l,o,a)}else{const o=t.width>>n,a=t.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,r,n,i){const s=this.viewport;t=Math.round(t),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==t||s.y!==r)&&(s.x=t,s.y=r,s.width=n,s.height=i,this.gl.viewport(t,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,r,n,i,s=Np.COLOR|Np.DEPTH){const{gl:o}=this;o.clearColor(t,r,n,i),o.clear(s)}initFramebuffer(t){const{gl:r}=this,n=new HL(r.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID];if(n.stencil){r.bindRenderbuffer(r.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:t.depth&&t.stencil?o=r.DEPTH24_STENCIL8:t.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,o,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,o,t.width,t.height)}const i=t.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,r){const{gl:n}=this,i=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(t)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const l=t.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,r)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH_STENCIL):t.depth&&t.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH24_STENCIL8):t.depth?(l=n.DEPTH_ATTACHMENT,u=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,u=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,u,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,u,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:r}=this;let n=_e.NONE;if(t<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=t){n=r[i];break}return n===1&&(n=_e.NONE),n}blit(t,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const c=i.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new lm(i.width,i.height),l.blitFramebuffer.addColorTexture(0,c)),t=l.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==i.width||t.height!==i.height)&&(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}r||(r=zL,r.width=i.width,r.height=i.height),n||(n=r);const u=r.width===n.width&&r.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,r){const n=t.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(t){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],t)}forceStencil(){const t=this.current;if(!t)return;const r=t.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&t.stencil)return;t.stencil=!0;const n=t.width,i=t.height,s=this.gl,o=r.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):t.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,l,n,i):s.renderbufferStorage(s.RENDERBUFFER,l,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new xt}destroy(){this.renderer=null}}z5.extension={type:nt.RendererSystem,name:"framebuffer"};ct.add(z5);const e0={5126:4,5123:2,5121:1};class V5{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;at.PREFER_ENV===Zs.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=i=>n.bindVertexArrayOES(i),t.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),t.drawElementsInstanced=(i,s,o,a,l)=>n.drawElementsInstancedANGLE(i,s,o,a,l),t.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(t,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(t,r,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const i=t.buffers[n];r.update(i)}}checkCompatibility(t,r){const n=t.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,r){const n=t.attributes,i=r.attributeData,s=["g",t.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(t,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(t,a);const l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID];let c=u[l];if(c)return u[a.id]=c,c;const h=t.buffers,f=t.attributes,d={},p={};for(const m in h)d[m]=0,p[m]=0;for(const m in f)!f[m].size&&a.attributeData[m]?f[m].size=a.attributeData[m].size:f[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),d[f[m].buffer]+=f[m].size*e0[f[m].type];for(const m in f){const g=f[m],y=g.size;g.stride===void 0&&(d[g.buffer]===y*e0[g.type]?g.stride=0:g.stride=d[g.buffer]),g.start===void 0&&(g.start=p[g.buffer],p[g.buffer]+=y*e0[g.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(let m=0;m<h.length;m++){const g=h[m];o.bind(g),n&&g._glBuffers[s].refCount++}return this.activateVao(t,a),u[a.id]=c,u[l]=c,i.bindVertexArray(null),o.unbind(An.ARRAY_BUFFER),c}disposeGeometry(t,r){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&o.dispose(s[l],r))}if(!r){for(const l in n)if(l[0]==="g"){const u=n[l];this._activeVao===u&&this.unbind(),i.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],t)}activateVao(t,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let l=null;for(const u in a){const c=a[u],h=o[c.buffer],f=h._glBuffers[i];if(r.attributeData[u]){l!==f&&(s.bind(h),l=f);const d=r.attributeData[u].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(d,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,r||o.indexBuffer.data.length,l,(n||0)*a,i||1):s.drawElements(t,r||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,n,r||o.getSize(),i||1):s.drawArrays(t,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}V5.extension={type:nt.RendererSystem,name:"geometry"};ct.add(V5);const k_=new Zt;class W5{constructor(t,r){this._texture=t,this.mapCoord=new Zt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,r){r===void 0&&(r=t);const n=this.mapCoord;for(let i=0;i<t.length;i+=2){const s=t[i],o=t[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(t){const r=this._texture;if(!r||!r.valid||!t&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&(k_.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(k_));const o=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(r._frame.x+l+u)/o.width,a[1]=(r._frame.y+l+u)/o.height,a[2]=(r._frame.x+r._frame.width-l+u)/o.width,a[3]=(r._frame.y+r._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var VL=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,WL=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class XL extends Ke{constructor(t,r,n){let i=null;typeof t!="string"&&r===void 0&&n===void 0&&(i=t,t=void 0,r=void 0,n=void 0),super(t||WL,r||VL,n),this.maskSprite=i,this.maskMatrix=new Zt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,r,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new W5(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,r,n,i))}}class $L{constructor(t=null){this.type=xe.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ke.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=xe.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class X5{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new $L;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==xe.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case xe.SCISSOR:this.renderer.scissor.push(n);break;case xe.STENCIL:this.renderer.stencil.push(n);break;case xe.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case xe.COLOR:this.pushColorMask(n);break}n.type===xe.SPRITE&&this.maskStack.push(n)}pop(t){const r=this.maskStack.pop();if(!(!r||r._target!==t)){if(r.enabled)switch(r.type){case xe.SCISSOR:this.renderer.scissor.pop(r);break;case xe.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case xe.SPRITE:this.popSpriteMask(r);break;case xe.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===xe.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const r=t.maskObject;r?r.isSprite?t.type=xe.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=xe.SCISSOR:t.type=xe.STENCIL:t.type=xe.COLOR}pushSpriteMask(t){const{maskObject:r}=t,n=t._target;let i=t._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new XL])),i[0].resolution=t.resolution,i[0].multisample=t.multisample,i[0].maskSprite=r;const s=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const r=t._colorMask,n=t._colorMask=r&t.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const r=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}X5.extension={type:nt.RendererSystem,name:"mask"};ct.add(X5);class $5{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=t;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const D_=new Zt,N_=[],j5=class Dc extends $5{constructor(t){super(t),this.glConst=at.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const r=t._scissorRect,{maskObject:n}=t,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,N_.pop()??new xt);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),r&&o.fit(r),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:r,b:n,c:i,d:s}=t;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(s)>1e-4)}testScissor(t){const{maskObject:r}=t;if(!r.isFastRect||!r.isFastRect()||Dc.isMatrixRotated(r.worldTransform)||Dc.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,r,n,i,s){Dc.isMatrixRotated(s)||(s=s?D_.copyFrom(s):D_.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,t),t.fit(i),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:r}=this.renderer;t._scissorRect||r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:r}=this.renderer;t&&N_.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=t.y:r=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,r,t.width,t.height)}};j5.extension={type:nt.RendererSystem,name:"scissor"};let jL=j5;ct.add(jL);class Y5 extends $5{constructor(t){super(t),this.glConst=at.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const r=t.maskObject,{gl:n}=this.renderer,i=t._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(t._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Y5.extension={type:nt.RendererSystem,name:"stencil"};ct.add(Y5);class q5{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return St("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return St("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return St("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const r in t)this.plugins[r]=new t[r](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}q5.extension={type:[nt.RendererSystem,nt.CanvasRendererSystem],name:"_plugin"};ct.add(q5);class Z5{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Zt,this.transform=null}update(t,r,n,i){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(t){}destroy(){this.renderer=null}}Z5.extension={type:nt.RendererSystem,name:"projection"};ct.add(Z5);const YL=new Xg,O_=new xt;class K5{constructor(t){this.renderer=t,this._tempMatrix=new Zt}generateTexture(t,r){const{region:n,...i}=r||{},s=(n==null?void 0:n.copyTo(O_))||t.getLocalBounds(O_,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=Qs.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=t.transform;return t.transform=YL,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,a}destroy(){}}K5.extension={type:[nt.RendererSystem,nt.CanvasRendererSystem],name:"textureGenerator"};ct.add(K5);const ts=new xt,Da=new xt;class Q5{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new xt,this.destinationFrame=new xt,this.viewportFrame=new xt}contextChange(){var r;const t=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,r,n){const i=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,r||(ts.width=t.frame.width,ts.height=t.frame.height,r=ts),n||(Da.x=t.frame.x,Da.y=t.frame.y,Da.width=r.width,Da.height=r.height,n=Da),o=s.framebuffer):(a=i.resolution,r||(ts.width=i._view.screen.width,ts.height=i._view.screen.height,r=ts),n||(n=ts,n.width=r.width,n.height=r.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,t||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,r,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(t,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=Yt.shared.setValue(t||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:c,height:h}=this.viewportFrame;l=Math.round(l),u=Math.round(u),c=Math.round(c),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Q5.extension={type:nt.RendererSystem,name:"renderTexture"};ct.add(Q5);class qL{constructor(t,r){this.program=t,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function ZL(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=t.getActiveAttrib(e,i);if(s.name.startsWith("gl_"))continue;const o=O5(t,s.type),a={type:o,name:s.name,size:N5(o),location:t.getAttribLocation(e,s.name)};r[s.name]=a}return r}function KL(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=t.getActiveUniform(e,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=O5(t,s.type);r[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:k5(l,s.size)}}return r}function QL(e,t){var a;const r=C_(e,e.VERTEX_SHADER,t.vertexSrc),n=C_(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const s=(a=t.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||SL(e,i,r,n),t.attributeData=ZL(i,e),t.uniformData=KL(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const l=Object.keys(t.attributeData);l.sort((u,c)=>u>c?1:-1);for(let u=0;u<l.length;u++)t.attributeData[l[u]].location=u,e.bindAttribLocation(i,u,l[u]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const o={};for(const l in t.uniformData){const u=t.uniformData[l];o[l]={location:e.getUniformLocation(i,l),value:k5(u.type,u.size)}}return new qL(i,o)}function JL(e,t,r,n,i){r.buffer.update(i)}const tU={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},J5={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function eU(e){const t=e.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<t.length;s++){const o=t[s];if(r=J5[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:t,size:i}}function rU(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort((n,i)=>n.index-i.index),r}function nU(e,t){if(!e.autoManage)return{size:0,syncFunc:JL};const r=rU(e.uniforms,t),{uboElements:n,size:i}=eU(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=e.uniforms[a.data.name],u=a.data.name;let c=!1;for(let h=0;h<Lo.length;h++){const f=Lo[h];if(f.codeUbo&&f.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Lo[h].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const h=N5(a.data.type),f=Math.max(J5[a.data.type]/16,1),d=h/f,p=(4-d%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*f}; i++)
                {
                    for(var j = 0; j < ${d}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const h=tU[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let iU=0;const ec={textureCount:0,uboCount:0};class t4{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=iU++}systemCheck(){if(!IL())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,r){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(ec.textureCount=0,ec.uboCount=0,this.syncUniformGroup(t.uniformGroup,ec)),i}setUniforms(t){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,r){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,r))}syncUniforms(t,r,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(r.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const r=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=AL(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[r],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,r){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const i=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,r);t.buffer.update(),i(n.uniformData,t.uniforms,this.renderer,ec,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(t,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=nU(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return r.uniformGroups[t.id]=a.syncFunc,r.uniformGroups[t.id]}getSignature(t,r,n){const i=t.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const r=this.gl,n=t.program,i=QL(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}t4.extension={type:nt.RendererSystem,name:"shader"};ct.add(t4);class kh{constructor(t){this.renderer=t}run(t){const{renderer:r}=this;r.runners.init.emit(r.options),t.hello&&console.log(`PixiJS 7.3.2 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}kh.defaultOptions={hello:!1},kh.extension={type:[nt.RendererSystem,nt.CanvasRendererSystem],name:"startup"};ct.add(kh);function sU(e,t=[]){return t[yt.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.ADD]=[e.ONE,e.ONE],t[yt.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.NONE]=[0,0],t[yt.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[yt.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[yt.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[yt.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[yt.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[yt.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[yt.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[yt.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[yt.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[yt.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[yt.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const oU=0,aU=1,lU=2,uU=3,cU=4,hU=5,e4=class um{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=yt.NONE,this._blendEq=!1,this.map=[],this.map[oU]=this.setBlend,this.map[aU]=this.setOffset,this.map[lU]=this.setCullFace,this.map[uU]=this.setDepthTest,this.map[cU]=this.setFrontFace,this.map[hU]=this.setDepthMask,this.checks=[],this.defaultState=new Nn,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=sU(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let r=this.stateId^t.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(t.data&1<<n)),r=r>>1,n++;this.stateId=t.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,t)}forceState(t){t=t||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(t.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(um.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(um.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const r=this.blendModes[t],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,r){this.gl.polygonOffset(t,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,r){const n=this.checks.indexOf(t);r&&n===-1?this.checks.push(t):!r&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(t,r){t.setBlendMode(r.blendMode)}static checkPolygonOffset(t,r){t.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};e4.extension={type:nt.RendererSystem,name:"state"};let fU=e4;ct.add(fU);class dU extends uu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const r=(t.priority??[]).filter(i=>t.systems[i]),n=[...r,...Object.keys(t.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(t.systems[i],i)}addRunners(...t){t.forEach(r=>{this.runners[r]=new Wr(r)})}addSystem(t,r){const n=new t(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(t,r){const n=Object.keys(this._systemsHash);t.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[t.name](r[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Za=class Nc{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Nc.defaultMaxIdle,this.checkCountMax=Nc.defaultCheckCountMax,this.mode=Nc.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Ng.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,r=t.managedTextures;let n=!1;for(let i=0;i<r.length;i++){const s=r[i];s.resource&&this.count-s.touched>this.maxIdle&&(t.destroyTexture(s,!0),r[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<r.length;s++)r[s]!==null&&(r[i++]=r[s]);r.length=i}}unload(t){const r=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(let i=t.children.length-1;i>=0;i--)this.unload(t.children[i])}destroy(){this.renderer=null}};Za.defaultMode=Ng.AUTO,Za.defaultMaxIdle=60*60,Za.defaultCheckCountMax=60*10,Za.extension={type:nt.RendererSystem,name:"textureGC"};let us=Za;ct.add(us);class r0{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=pt.UNSIGNED_BYTE,this.internalFormat=q.RGBA,this.samplerType=0}}function pU(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[e.RGB]:st.FLOAT,[e.RGBA]:st.FLOAT,[e.ALPHA]:st.FLOAT,[e.LUMINANCE]:st.FLOAT,[e.LUMINANCE_ALPHA]:st.FLOAT,[e.R8]:st.FLOAT,[e.R8_SNORM]:st.FLOAT,[e.RG8]:st.FLOAT,[e.RG8_SNORM]:st.FLOAT,[e.RGB8]:st.FLOAT,[e.RGB8_SNORM]:st.FLOAT,[e.RGB565]:st.FLOAT,[e.RGBA4]:st.FLOAT,[e.RGB5_A1]:st.FLOAT,[e.RGBA8]:st.FLOAT,[e.RGBA8_SNORM]:st.FLOAT,[e.RGB10_A2]:st.FLOAT,[e.RGB10_A2UI]:st.FLOAT,[e.SRGB8]:st.FLOAT,[e.SRGB8_ALPHA8]:st.FLOAT,[e.R16F]:st.FLOAT,[e.RG16F]:st.FLOAT,[e.RGB16F]:st.FLOAT,[e.RGBA16F]:st.FLOAT,[e.R32F]:st.FLOAT,[e.RG32F]:st.FLOAT,[e.RGB32F]:st.FLOAT,[e.RGBA32F]:st.FLOAT,[e.R11F_G11F_B10F]:st.FLOAT,[e.RGB9_E5]:st.FLOAT,[e.R8I]:st.INT,[e.R8UI]:st.UINT,[e.R16I]:st.INT,[e.R16UI]:st.UINT,[e.R32I]:st.INT,[e.R32UI]:st.UINT,[e.RG8I]:st.INT,[e.RG8UI]:st.UINT,[e.RG16I]:st.INT,[e.RG16UI]:st.UINT,[e.RG32I]:st.INT,[e.RG32UI]:st.UINT,[e.RGB8I]:st.INT,[e.RGB8UI]:st.UINT,[e.RGB16I]:st.INT,[e.RGB16UI]:st.UINT,[e.RGB32I]:st.INT,[e.RGB32UI]:st.UINT,[e.RGBA8I]:st.INT,[e.RGBA8UI]:st.UINT,[e.RGBA16I]:st.INT,[e.RGBA16UI]:st.UINT,[e.RGBA32I]:st.INT,[e.RGBA32UI]:st.UINT,[e.DEPTH_COMPONENT16]:st.FLOAT,[e.DEPTH_COMPONENT24]:st.FLOAT,[e.DEPTH_COMPONENT32F]:st.FLOAT,[e.DEPTH_STENCIL]:st.FLOAT,[e.DEPTH24_STENCIL8]:st.FLOAT,[e.DEPTH32F_STENCIL8]:st.FLOAT}:t={[e.RGB]:st.FLOAT,[e.RGBA]:st.FLOAT,[e.ALPHA]:st.FLOAT,[e.LUMINANCE]:st.FLOAT,[e.LUMINANCE_ALPHA]:st.FLOAT,[e.DEPTH_STENCIL]:st.FLOAT},t}function mU(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[pt.UNSIGNED_BYTE]:{[q.RGBA]:e.RGBA8,[q.RGB]:e.RGB8,[q.RG]:e.RG8,[q.RED]:e.R8,[q.RGBA_INTEGER]:e.RGBA8UI,[q.RGB_INTEGER]:e.RGB8UI,[q.RG_INTEGER]:e.RG8UI,[q.RED_INTEGER]:e.R8UI,[q.ALPHA]:e.ALPHA,[q.LUMINANCE]:e.LUMINANCE,[q.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[pt.BYTE]:{[q.RGBA]:e.RGBA8_SNORM,[q.RGB]:e.RGB8_SNORM,[q.RG]:e.RG8_SNORM,[q.RED]:e.R8_SNORM,[q.RGBA_INTEGER]:e.RGBA8I,[q.RGB_INTEGER]:e.RGB8I,[q.RG_INTEGER]:e.RG8I,[q.RED_INTEGER]:e.R8I},[pt.UNSIGNED_SHORT]:{[q.RGBA_INTEGER]:e.RGBA16UI,[q.RGB_INTEGER]:e.RGB16UI,[q.RG_INTEGER]:e.RG16UI,[q.RED_INTEGER]:e.R16UI,[q.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[pt.SHORT]:{[q.RGBA_INTEGER]:e.RGBA16I,[q.RGB_INTEGER]:e.RGB16I,[q.RG_INTEGER]:e.RG16I,[q.RED_INTEGER]:e.R16I},[pt.UNSIGNED_INT]:{[q.RGBA_INTEGER]:e.RGBA32UI,[q.RGB_INTEGER]:e.RGB32UI,[q.RG_INTEGER]:e.RG32UI,[q.RED_INTEGER]:e.R32UI,[q.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[pt.INT]:{[q.RGBA_INTEGER]:e.RGBA32I,[q.RGB_INTEGER]:e.RGB32I,[q.RG_INTEGER]:e.RG32I,[q.RED_INTEGER]:e.R32I},[pt.FLOAT]:{[q.RGBA]:e.RGBA32F,[q.RGB]:e.RGB32F,[q.RG]:e.RG32F,[q.RED]:e.R32F,[q.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[pt.HALF_FLOAT]:{[q.RGBA]:e.RGBA16F,[q.RGB]:e.RGB16F,[q.RG]:e.RG16F,[q.RED]:e.R16F},[pt.UNSIGNED_SHORT_5_6_5]:{[q.RGB]:e.RGB565},[pt.UNSIGNED_SHORT_4_4_4_4]:{[q.RGBA]:e.RGBA4},[pt.UNSIGNED_SHORT_5_5_5_1]:{[q.RGBA]:e.RGB5_A1},[pt.UNSIGNED_INT_2_10_10_10_REV]:{[q.RGBA]:e.RGB10_A2,[q.RGBA_INTEGER]:e.RGB10_A2UI},[pt.UNSIGNED_INT_10F_11F_11F_REV]:{[q.RGB]:e.R11F_G11F_B10F},[pt.UNSIGNED_INT_5_9_9_9_REV]:{[q.RGB]:e.RGB9_E5},[pt.UNSIGNED_INT_24_8]:{[q.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[pt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[q.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[pt.UNSIGNED_BYTE]:{[q.RGBA]:e.RGBA,[q.RGB]:e.RGB,[q.ALPHA]:e.ALPHA,[q.LUMINANCE]:e.LUMINANCE,[q.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[pt.UNSIGNED_SHORT_5_6_5]:{[q.RGB]:e.RGB},[pt.UNSIGNED_SHORT_4_4_4_4]:{[q.RGBA]:e.RGBA},[pt.UNSIGNED_SHORT_5_5_5_1]:{[q.RGBA]:e.RGBA}},t}class r4{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new vt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mU(t),this.samplerTypes=pU(t);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new r0(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new r0(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(t,r=0){const{gl:n}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[r]!==t&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(t)):i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[r]=t}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===t&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(t.target,this.emptyTextures[t.target].texture),n[i]=null)}ensureSamplerType(t){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=t-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==st.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const r=new r0(this.gl.createTexture());return r.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),r}initTextureType(t,r){var n;r.internalFormat=((n=this.internalFormats[t.type])==null?void 0:n[t.format])??t.format,r.samplerType=this.samplerTypes[r.internalFormat]??st.FLOAT,this.webGLVersion===2&&t.type===pt.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=t.type}updateTexture(t){var i;const r=t._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(t,r),(i=t.resource)==null?void 0:i.upload(n,t,r))r.samplerType!==st.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,o=t.realHeight,a=n.gl;(r.width!==s||r.height!==o||r.dirtyId<0)&&(r.width=s,r.height=o,a.texImage2D(t.target,0,r.internalFormat,s,o,0,t.format,r.type,null))}t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId}destroyTexture(t,r){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(t);i!==-1&&Bo(this.managedTextures,i,1)}}updateTextureStyle(t){var n;const r=t._glTextures[this.CONTEXT_UID];r&&((t.mipmap===In.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?r.mipmap=!1:r.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?r.wrapMode=ki.CLAMP:r.wrapMode=t.wrapMode,(n=t.resource)!=null&&n.style(this.renderer,t,r)||this.setStyle(t,r),r.dirtyStyleId=t.dirtyStyleId)}setStyle(t,r){const n=this.gl;if(r.mipmap&&t.mipmap!==In.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Qn.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&t.anisotropicLevel>0&&t.scaleMode===Qn.LINEAR){const s=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Qn.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Qn.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}r4.extension={type:nt.RendererSystem,name:"texture"};ct.add(r4);class n4{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();t._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,r){const n=t._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(a,r))}n&&(r||i.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}n4.extension={type:nt.RendererSystem,name:"transformFeedback"};ct.add(n4);class Dh{constructor(t){this.renderer=t}init(t){this.screen=new xt(0,0,t.width,t.height),this.element=t.view||at.ADAPTER.createCanvas(),this.resolution=t.resolution||at.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,r){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var r;t&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Dh.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Dh.extension={type:[nt.RendererSystem,nt.CanvasRendererSystem],name:"_view"};ct.add(Dh);at.PREFER_ENV=Zs.WEBGL2;at.STRICT_TEXTURE_CACHE=!1;at.RENDER_OPTIONS={...Ph.defaultOptions,...Rh.defaultOptions,...Dh.defaultOptions,...kh.defaultOptions};Object.defineProperties(at,{WRAP_MODE:{get(){return vt.defaultOptions.wrapMode},set(e){St("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),vt.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return vt.defaultOptions.scaleMode},set(e){St("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),vt.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return vt.defaultOptions.mipmap},set(e){St("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),vt.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return vt.defaultOptions.anisotropicLevel},set(e){St("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),vt.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return St("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ke.defaultResolution},set(e){Ke.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return St("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ke.defaultMultisample},set(e){Ke.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return ls.defaultMaxTextures},set(e){St("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ls.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return ls.defaultBatchSize},set(e){St("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ls.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return ls.canUploadSameBuffer},set(e){St("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ls.canUploadSameBuffer=e}},GC_MODE:{get(){return us.defaultMode},set(e){St("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),us.defaultMode=e}},GC_MAX_IDLE:{get(){return us.defaultMaxIdle},set(e){St("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),us.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return us.defaultCheckCountMax},set(e){St("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),us.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return ei.defaultVertexPrecision},set(e){St("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ei.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return ei.defaultFragmentPrecision},set(e){St("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ei.defaultFragmentPrecision=e}}});var Us=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Us||{});class n0{constructor(t,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=r,this.priority=n,this.once=i}match(t,r=null){return this.fn===t&&this.context===r}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=t?null:r,this.previous=null,r}}const i4=class lr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new n0(null,null,1/0),this.deltaMS=1/lr.targetFPMS,this.elapsedMS=1/lr.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,r,n=Us.NORMAL){return this._addListener(new n0(t,r,n))}addOnce(t,r,n=Us.NORMAL){return this._addListener(new n0(t,r,n,!0))}_addListener(t){let r=this._head.next,n=this._head;if(!r)t.connect(n);else{for(;r;){if(t.priority>r.priority){t.connect(n);break}n=r,r=r.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,r){let n=this._head.next;for(;n;)n.match(t,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,r=this._head;for(;r=r.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const s=t-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=t-s%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*lr.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,lr.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,t);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!lr._shared){const t=lr._shared=new lr;t.autoStart=!0,t._protected=!0}return lr._shared}static get system(){if(!lr._system){const t=lr._system=new lr;t.autoStart=!0,t._protected=!0}return lr._system}};i4.targetFPMS=.06;let hr=i4;Object.defineProperties(at,{TARGET_FPMS:{get(){return hr.targetFPMS},set(e){St("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),hr.targetFPMS=e}}});class s4{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Us.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?hr.shared:new hr,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}s4.extension=nt.Application;ct.add(s4);const o4=[];ct.handleByList(nt.Renderer,o4);function gU(e){for(const t of o4)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var yU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,bU=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _U=yU,a4=bU;class l4{constructor(t){this.renderer=t}contextChange(t){let r;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}r>=_e.HIGH?this.multisample=_e.HIGH:r>=_e.MEDIUM?this.multisample=_e.MEDIUM:r>=_e.LOW?this.multisample=_e.LOW:this.multisample=_e.NONE}destroy(){}}l4.extension={type:nt.RendererSystem,name:"_multisample"};ct.add(l4);class vU{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class u4{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);r.bindBuffer(t.type,i.buffer)}unbind(t){const{gl:r}=this;r.bindBuffer(t,null)}bindBufferBase(t,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==t){const s=t._glBuffers[i]||this.createGLBuffer(t);this.boundBufferBases[r]=t,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(t,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=t._glBuffers[s]||this.createGLBuffer(t);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(t){const{gl:r,CONTEXT_UID:n}=this,i=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==i.updateID)if(i.updateID=t._updateID,r.bindBuffer(t.type,i.buffer),i.byteLength>=t.data.byteLength)r.bufferSubData(t.type,0,t.data);else{const s=t.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=t.data.byteLength,r.bufferData(t.type,t.data,s)}}dispose(t,r){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],i=this.gl;t.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],t)}createGLBuffer(t){const{CONTEXT_UID:r,gl:n}=this;return t._glBuffers[r]=new vU(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[r]}}u4.extension={type:nt.RendererSystem,name:"buffer"};ct.add(u4);class c4{constructor(t){this.renderer=t}render(t,r){const n=this.renderer;let i,s,o,a;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}c4.extension={type:nt.RendererSystem,name:"objectRenderer"};ct.add(c4);const Oc=class cm extends dU{constructor(t){super(),this.type=t5.WEBGL,t=Object.assign({},at.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Xr({projectionMatrix:new Zt},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:cm.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in t&&(St("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=cm.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:VB()}render(t,r){this.objectRenderer.render(t,r)}resize(t,r){this._view.resizeView(t,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return St("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return St("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return St("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return St("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){St("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return St("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){St("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return St("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,r){return this.textureGenerator.generateTexture(t,r)}};Oc.extension={type:nt.Renderer,priority:1},Oc.__plugins={},Oc.__systems={};let jg=Oc;ct.handleByMap(nt.RendererPlugin,jg.__plugins);ct.handleByMap(nt.RendererSystem,jg.__systems);ct.add(jg);class h4 extends Gl{constructor(t,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new vt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,r){for(let n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof Gl?this.addResourceAt(t[n],n):this.addResourceAt(I5(t[n],r),n))}dispose(){for(let t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)}unbind(t){super.unbind(t);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(t).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),this.update(),Promise.resolve(this)}),this._load}}class wU extends h4{constructor(t,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=No.TEXTURE_2D_ARRAY}upload(t,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=t;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let l=0;l<i;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,r.format,n.type,u.resource.source))}return!0}}class xU extends Ui{constructor(t){super(t)}static test(t){const{OffscreenCanvas:r}=globalThis;return r&&t instanceof r?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const f4=class Ka extends h4{constructor(t,r){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=r||{};if(t&&t.length!==Ka.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<Ka.SIDES;a++)this.items[a].target=No.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,r),s!==!1&&this.load()}bind(t){super.bind(t),t.target=No.TEXTURE_CUBE_MAP}addBaseTextureAt(t,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=No.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this}upload(t,r,n){const i=this.itemDirtyIds;for(let s=0;s<Ka.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,n),i[s]=o.dirtyId):i[s]<-1&&(t.gl.texImage2D(o.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[s]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Ka.SIDES}};f4.SIDES=6;let TU=f4;class Ao extends Ui{constructor(t,r){r=r||{};let n,i,s;typeof t=="string"?(n=Ao.EMPTY,i=t,s=!0):(n=t,i=null,s=!1),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??s,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,r)=>{if(this.url===null){t(this);return}try{const n=await at.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===rr.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),t(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(t,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(t,r,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Ao._EMPTY=Ao._EMPTY??at.ADAPTER.createCanvas(0,0),Ao._EMPTY}}const hm=class Fc extends Ui{constructor(t,r){r=r||{},super(at.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Fc.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Ui.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=r=>{this._resolve&&(t.onerror=null,this.onError.emit(r))},t.onload=()=>{if(!this._resolve)return;const r=t.width,n=t.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=r*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*r,s=this._overrideHeight||this._overrideWidth/r*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${Ls()}`,o.getContext("2d").drawImage(t,0,0,r,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(t){const r=Fc.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,r){return r==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Fc.SVG_XML.test(t)}};hm.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,hm.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let fm=hm;const dm=class pm extends Ui{constructor(t,r){if(r=r||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");r.autoLoad!==!1&&n.setAttribute("preload","auto"),r.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),r.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),r.loop===!0&&n.setAttribute("loop",""),r.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const i=t[0].src||t[0];Ui.crossOrigin(n,i,r.crossorigin);for(let s=0;s<t.length;++s){const o=document.createElement("source");let{src:a,mime:l}=t[s];if(a=a||t[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),c=u.slice(u.lastIndexOf(".")+1);l=l||pm.MIME_TYPES[c]||`video/${c}`}o.src=a,l&&(o.type=l),n.appendChild(o)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const r=hr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((r,n)=>{this.valid?r(this):(this._resolve=r,this._reject=n,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(hr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(hr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(hr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||pm.TYPES.includes(r)}};dm.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],dm.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let d4=dm;tm.push(Ao,L5,xU,d4,fm,Of,TU,wU);class Nh{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?xt.EMPTY:(t=t||new xt(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,r){const{a:n,b:i,c:s,d:o,tx:a,ty:l}=t,u=n*r.x+s*r.y+a,c=i*r.x+o*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=t[0],a=t[1];r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[2],a=t[3],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[4],a=t[5],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=t[6],a=t[7],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(t,r,n,i,s){this.addFrameMatrix(t.worldTransform,r,n,i,s)}addFrameMatrix(t,r,n,i,s){const o=t.a,a=t.b,l=t.c,u=t.d,c=t.tx,h=t.ty;let f=this.minX,d=this.minY,p=this.maxX,m=this.maxY,g=o*r+l*n+c,y=a*r+u*n+h;f=g<f?g:f,d=y<d?y:d,p=g>p?g:p,m=y>m?y:m,g=o*i+l*n+c,y=a*i+u*n+h,f=g<f?g:f,d=y<d?y:d,p=g>p?g:p,m=y>m?y:m,g=o*r+l*s+c,y=a*r+u*s+h,f=g<f?g:f,d=y<d?y:d,p=g>p?g:p,m=y>m?y:m,g=o*i+l*s+c,y=a*i+u*s+h,f=g<f?g:f,d=y<d?y:d,p=g>p?g:p,m=y>m?y:m,this.minX=f,this.minY=d,this.maxX=p,this.maxY=m}addVertexData(t,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=r;l<n;l+=2){const u=t[l],c=t[l+1];i=u<i?u:i,s=c<s?c:s,o=u>o?u:o,a=c>a?c:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,r,n,i){this.addVerticesMatrix(t.worldTransform,r,n,i)}addVerticesMatrix(t,r,n,i,s=0,o=s){const a=t.a,l=t.b,u=t.c,c=t.d,h=t.tx,f=t.ty;let d=this.minX,p=this.minY,m=this.maxX,g=this.maxY;for(let y=n;y<i;y+=2){const b=r[y],_=r[y+1],v=a*b+u*_+h,w=c*_+l*b+f;d=Math.min(d,v-s),m=Math.max(m,v+s),p=Math.min(p,w-o),g=Math.max(g,w+o)}this.minX=d,this.minY=p,this.maxX=m,this.maxY=g}addBounds(t){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=t.minX<r?t.minX:r,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,r){const n=t.minX>r.minX?t.minX:r.minX,i=t.minY>r.minY?t.minY:r.minY,s=t.maxX<r.maxX?t.maxX:r.maxX,o=t.maxY<r.maxY?t.maxY:r.maxY;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}addBoundsMatrix(t,r){this.addFrameMatrix(r,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,r){const n=t.minX>r.x?t.minX:r.x,i=t.minY>r.y?t.minY:r.y,s=t.maxX<r.x+r.width?t.maxX:r.x+r.width,o=t.maxY<r.y+r.height?t.maxY:r.y+r.height;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}pad(t=0,r=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=r,this.maxY+=r)}addFramePad(t,r,n,i,s,o){t-=s,r-=o,n+=s,i+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class ue extends uu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Xg,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Nh,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const r=Object.keys(t);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(ue.prototype,i,Object.getOwnPropertyDescriptor(t,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new xt),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new xt),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Nh);const r=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)}toLocal(t,r,n,i){return r&&(t=r.toGlobal(t,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,r=0,n=1,i=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=t,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new AU),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*yL}set angle(t){this.transform.rotation=t*bL}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=t,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class AU extends ue{constructor(){super(...arguments),this.sortDirty=null}}ue.prototype.displayObjectUpdateTransform=ue.prototype.updateTransform;const EU=new Zt;function CU(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const p4=class mm extends ue{constructor(){super(),this.children=[],this.sortableChildren=mm.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let r=0;r<t.length;r++)this.addChild(t[r]);else{const r=t[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return t[0]}addChildAt(t,r){if(r<0||r>this.children.length)throw new Error(`${t}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t}swapChildren(t,r){if(t===r)return;const n=this.getChildIndex(t),i=this.getChildIndex(r);this.children[n]=r,this.children[i]=t,this.onChildrenChange(n<i?n:i)}getChildIndex(t){const r=this.children.indexOf(t);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(t,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);Bo(this.children,n,1),this.children.splice(r,0,t),this.onChildrenChange(r)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let r=0;r<t.length;r++)this.removeChild(t[r]);else{const r=t[0],n=this.children.indexOf(r);if(n===-1)return null;r.parent=null,r.transform._parentID=-1,Bo(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return t[0]}removeChildAt(t){const r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,Bo(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r}removeChildren(t=0,r=this.children.length){const n=t,i=r,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let r=0,n=this.children.length;r<n;++r){const i=this.children[r];i._lastSortedIndex=r,!t&&i.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(CU),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,r=this.children.length;t<r;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const r=this.children[t];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,r=!1){const n=super.getLocalBounds(t);if(!r)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const r=t.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==mm.prototype._render&&(n=this.getBounds(!0));const s=t.projection.transform;if(s&&(i?(i=EU.copyFrom(i),i.prepend(s)):i=s),n&&r.intersects(n,i))this._render(t);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(t),l.cullable=u}}render(t){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(r=this.filters)!=null&&r.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(t)}}renderAdvanced(t){var s,o,a;const r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<r.length;l++)r[l].enabled&&this._enabledFilters.push(r[l])}const i=r&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==xe.NONE));if(i&&t.batch.flush(),r&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(t)}i&&t.batch.flush(),n&&t.mask.pop(this),r&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const r=typeof t=="boolean"?t:t==null?void 0:t.children,n=this.removeChildren(0,this.children.length);if(r)for(let i=0;i<n.length;++i)n[i].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const r=this.getLocalBounds().width;r!==0?this.scale.x=t/r:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const r=this.getLocalBounds().height;r!==0?this.scale.y=t/r:this.scale.y=1,this._height=t}};p4.defaultSortableChildren=!1;let Xe=p4;Xe.prototype.containerUpdateTransform=Xe.prototype.updateTransform;Object.defineProperties(at,{SORTABLE_CHILDREN:{get(){return Xe.defaultSortableChildren},set(e){St("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Xe.defaultSortableChildren=e}}});const Na=new Bt,SU=new Uint16Array([0,1,2,0,2,3]);class ma extends Xe{constructor(t){super(),this._anchor=new ti(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Yt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=yt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ft.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=SU,this.pluginName="batch",this.isSprite=!0,this._roundPixels=at.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ii(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ii(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,u=this.vertexData,c=t.trim,h=t.orig,f=this._anchor;let d=0,p=0,m=0,g=0;if(c?(p=c.x-f._x*h.width,d=p+c.width,g=c.y-f._y*h.height,m=g+c.height):(p=-f._x*h.width,d=p+h.width,g=-f._y*h.height,m=g+h.height),u[0]=n*p+s*g+a,u[1]=o*g+i*p+l,u[2]=n*d+s*g+a,u[3]=o*g+i*d+l,u[4]=n*d+s*m+a,u[5]=o*m+i*d+l,u[6]=n*p+s*m+a,u[7]=o*m+i*p+l,this._roundPixels){const y=at.RESOLUTION;for(let b=0;b<u.length;++b)u[b]=Math.round(u[b]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,r=this.vertexTrimmedData,n=t.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,c=s.tx,h=s.ty,f=-i._x*n.width,d=f+n.width,p=-i._y*n.height,m=p+n.height;if(r[0]=o*f+l*p+c,r[1]=u*p+a*f+h,r[2]=o*d+l*p+c,r[3]=u*p+a*d+h,r[4]=o*d+l*m+c,r[5]=u*m+a*d+h,r[6]=o*f+l*m+c,r[7]=u*m+a*f+h,this._roundPixels){const g=at.RESOLUTION;for(let y=0;y<r.length;++y)r[y]=Math.round(r[y]*g)/g}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Nh),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new xt),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Na);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return Na.x>=i&&Na.x<i+r&&(s=-n*this.anchor.y,Na.y>=s&&Na.y<s+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(t,r){const n=t instanceof ft?t:ft.from(t,r);return new ma(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const r=Ii(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const r=Ii(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ft.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const m4=new Zt;ue.prototype._cacheAsBitmap=!1;ue.prototype._cacheData=null;ue.prototype._cacheAsBitmapResolution=null;ue.prototype._cacheAsBitmapMultisample=null;class MU{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ue.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new MU),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});ue.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};ue.prototype._initCachedDisplayObject=function(e){var f,d;if((f=this._cacheData)!=null&&f.sprite)return;const t=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(new xt,!0);if((d=this.filters)!=null&&d.length){const p=this.filters[0].padding;r.pad(p)}const n=this.cacheAsBitmapResolution||e.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);const i=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=Qs.create({width:r.width,height:r.height,resolution:n,multisample:this.cacheAsBitmapMultisample??e.multisample}),u=`cacheAsBitmap_${Ls()}`;this._cacheData.textureCacheId=u,vt.addToCache(l.baseTexture,u),ft.addToCache(l,u);const c=this.transform.localTransform.copyTo(m4).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const h=new ma(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(r.x/r.width),h.anchor.y=-(r.y/r.height),h.alpha=t,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};ue.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};ue.prototype._initCachedDisplayObjectCanvas=function(e){var c;if((c=this._cacheData)!=null&&c.sprite)return;const t=this.getLocalBounds(new xt,!0),r=this.alpha;this.alpha=1;const n=e.canvasContext.activeContext,i=e._projTransform,s=this.cacheAsBitmapResolution||e.resolution;t.ceil(s),t.width=Math.max(t.width,1/s),t.height=Math.max(t.height,1/s);const o=Qs.create({width:t.width,height:t.height,resolution:s}),a=`cacheAsBitmap_${Ls()}`;this._cacheData.textureCacheId=a,vt.addToCache(o.baseTexture,a),ft.addToCache(o,a);const l=m4;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=n,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const u=new ma(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};ue.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ue.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ue.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,vt.removeFromCache(this._cacheData.textureCacheId),ft.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ue.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};ue.prototype.name=null;Xe.prototype.getChildByName=function(e,t){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===e)return this.children[r];if(t)for(let r=0,n=this.children.length;r<n;r++){const i=this.children[r];if(!i.getChildByName)continue;const s=i.getChildByName(e,!0);if(s)return s}return null};ue.prototype.getGlobalPosition=function(e=new Bt,t=!1){return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var IU=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class RU extends Ke{constructor(t=1){super(_U,IU,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const PU={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},kU=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function DU(e){const t=PU[e],r=t.length;let n=kU,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let l=s.replace("%index%",a.toString());o=a,a>=r&&(o=e-a-1),l=l.replace("%value%",t[o].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}const NU=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function OU(e,t){const r=Math.ceil(e/2);let n=NU,i="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e.toString()),n}class gm extends Ke{constructor(t,r=8,n=4,i=Ke.defaultResolution,s=5){const o=OU(s,t),a=DU(s);super(o,a),this.horizontal=t,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(t,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,n,i);else{const s=t.getFilterTexture(),o=t.renderer;let a=r,l=s;this.state.blend=!1,t.applyFilter(this,a,l,fn.CLEAR);for(let u=1;u<this.passes-1;u++){t.bindAndClear(a,fn.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,n,i),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class FU extends Ke{constructor(t=8,r=4,n=Ke.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new gm(!0,t,r,n,i),this.blurYFilter=new gm(!1,t,r,n,i),this.resolution=n,this.quality=r,this.blur=t,this.repeatEdgePixels=!1}apply(t,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,r,a,fn.CLEAR),this.blurYFilter.apply(t,a,n,i),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,r,n,i):this.blurXFilter.apply(t,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var BU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ym extends Ke{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(a4,BU,t),this.alpha=1}_loadMatrix(t,r=!1){let n=t;r&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,r,n){return t[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],t[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],t[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],t[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],t[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],t[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],t[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],t[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],t[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],t[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],t[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],t[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],t[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],t[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],t[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],t[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],t[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],t[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],t[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],t[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],t}_colorMatrix(t){const r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(t,r){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(t,r){const[n,i,s]=Yt.shared.setValue(t).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(t,r){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(t){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)}hue(t,r){t=(t||0)/180*Math.PI;const n=Math.cos(t),i=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,u=o*(1-n)-a*i,c=o*(1-n)+a*i,h=o*(1-n)+a*i,f=n+o*(1-n),d=o*(1-n)-a*i,p=o*(1-n)-a*i,m=o*(1-n)+a*i,g=n+o*(1-n),y=[l,u,c,0,0,h,f,d,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(y,r)}contrast(t,r){const n=(t||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(t=0,r){const n=t*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(t){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)}sepia(t){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)}technicolor(t){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)}polaroid(t){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)}toBGR(t){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)}kodachrome(t){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)}browni(t){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)}vintage(t){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)}colorTone(t,r,n,i,s){t=t||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=Yt.shared,[a,l,u]=o.setValue(n).toArray(),[c,h,f]=o.setValue(i).toArray(),d=[.3,.59,.11,0,0,a,l,u,t,0,c,h,f,r,0,a-c,l-h,u-f,0,0];this._loadMatrix(d,s)}night(t,r){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(t,r){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,r)}lsd(t){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}ym.prototype.grayscale=ym.prototype.greyscale;var LU=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,UU=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class GU extends Ke{constructor(t,r){const n=new Zt;t.renderable=!1,super(UU,LU,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,r==null&&(r=20),this.scale=new Bt(r,r)}apply(t,r,n,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var HU=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,zU=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class VU extends Ke{constructor(){super(zU,HU)}}var WU=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class XU extends Ke{constructor(t=.5,r=Math.random()){super(a4,WU,{uNoise:0,uSeed:0}),this.noise=t,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const F_={AlphaFilter:RU,BlurFilter:FU,BlurFilterPass:gm,ColorMatrixFilter:ym,DisplacementFilter:GU,FXAAFilter:VU,NoiseFilter:XU};Object.entries(F_).forEach(([e,t])=>{Object.defineProperty(F_,e,{get(){return St("7.1.0",`filters.${e} has moved to ${e}`),t}})});class $U{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(hr.system.add(this.tickerUpdate,this,Us.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(hr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Si=new $U;class hu{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=hu.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Bt,this.page=new Bt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Oh extends hu{constructor(){super(...arguments),this.client=new Bt,this.movement=new Bt,this.offset=new Bt,this.global=new Bt,this.screen=new Bt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,r,n){return t.worldTransform.applyInverse(n||this.global,r)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,r,n,i,s,o,a,l,u,c,h,f,d,p,m){throw new Error("Method not implemented.")}}class Lr extends Oh{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Uo extends Oh{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Uo.DOM_DELTA_PIXEL=0,Uo.DOM_DELTA_LINE=1,Uo.DOM_DELTA_PAGE=2;const jU=2048,YU=new Bt,i0=new Bt;class qU{constructor(t){this.dispatch=new uu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,r){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:r,priority:0}),this.mappingTable[t].sort((n,i)=>n.priority-i.priority)}dispatchEvent(t,r){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,r),this.dispatch.emit(r||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const r=this.mappingTable[t.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,r){Si.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,YU.set(t,r),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(t,r){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,r),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(t.currentTarget=n[i],this.notifyTarget(t,r),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,r,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{t.currentTarget=n[s],this.notifyTarget(t,o)})}propagationPath(t){const r=[t];for(let n=0;n<jU&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(t.parent),t=t.parent}return r.reverse(),r}hitTestMoveRecursive(t,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(Si.pauseUpdate=!1),t.interactiveChildren&&t.children){const c=t.children;for(let h=c.length-1;h>=0;h--){const f=c[h],d=this.hitTestMoveRecursive(f,this._isInteractive(r)?r:f.eventMode,n,i,s,o||s(t,n));if(d){if(d.length>0&&!d[d.length-1].parent)continue;const p=t.isInteractive();(d.length>0||p)&&(p&&this._allInteractiveElements.push(t),d.push(t)),this._hitElements.length===0&&(this._hitElements=d),a=!0}}}const l=this._isInteractive(r),u=t.isInteractive();return l&&u&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(t,n)&&i(t,n)?u?[t]:[]:null}hitTestRecursive(t,r,n,i,s){if(this._interactivePrune(t)||s(t,n))return null;if((t.eventMode==="dynamic"||r==="dynamic")&&(Si.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let u=l.length-1;u>=0;u--){const c=l[u],h=this.hitTestRecursive(c,this._isInteractive(r)?r:c.eventMode,n,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const f=t.isInteractive();return(h.length>0||f)&&h.push(t),h}}}const o=this._isInteractive(r),a=t.isInteractive();return o&&i(t,n)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,r){var n;if(t.hitArea&&(t.worldTransform.applyInverse(r,i0),!t.hitArea.contains(i0.x,i0.y)))return!0;if(t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,r)))return!0}return!1}hitTestFn(t,r){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(r):!1}notifyTarget(t,r){var s,o;r=r??t.type;const n=`on${r}`;(o=(s=t.currentTarget)[n])==null||o.call(s,t);const i=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${r}capture`:r;this.notifyListeners(t,i),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,r)}mapPointerDown(t){if(!(t instanceof Lr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(t);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(t){var l,u;if(!(t instanceof Lr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==r.target){const c=t.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(t,c,s);if(this.dispatchEvent(h,"pointerout"),n&&this.dispatchEvent(h,"mouseout"),!r.composedPath().includes(s)){const f=this.createPointerEvent(t,"pointerleave",s);for(f.eventPhase=f.AT_TARGET;f.target&&!r.composedPath().includes(f.target);)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseleave"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}if(s!==r.target){const c=t.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(r,c);this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover");let f=s==null?void 0:s.parent;for(;f&&f!==this.rootTarget.parent&&f!==r.target;)f=f.parent;if(!f||f===this.rootTarget.parent){const d=this.clonePointerEvent(r,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==s&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=r.target)==null?void 0:u.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(t){var o;if(!(t instanceof Lr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.createPointerEvent(t),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof Lr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId);if(r.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(t,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Lr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[t.button]||(i.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:r});const l=i.clicksByButton[t.button];if(l.target===a.target&&r-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=r,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof Lr)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(t.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[t.button]),i=this.createPointerEvent(t);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[t.button]}this.freeEvent(i)}mapWheel(t){if(!(t instanceof Uo)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(t);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(t){if(!t)return null;let r=t[0];for(let n=1;n<t.length&&t[n].parent===r;n++)r=t[n];return r}createPointerEvent(t,r,n){const i=this.allocateEvent(Lr);return this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(t){const r=this.allocateEvent(Uo);return this.copyWheelData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(t,r){const n=this.allocateEvent(Lr);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=r??n.type,n}copyWheelData(t,r){r.deltaMode=t.deltaMode,r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ}copyPointerData(t,r){t instanceof Lr&&r instanceof Lr&&(r.pointerId=t.pointerId,r.width=t.width,r.height=t.height,r.isPrimary=t.isPrimary,r.pointerType=t.pointerType,r.pressure=t.pressure,r.tangentialPressure=t.tangentialPressure,r.tiltX=t.tiltX,r.tiltY=t.tiltY,r.twist=t.twist)}copyMouseData(t,r){t instanceof Oh&&r instanceof Oh&&(r.altKey=t.altKey,r.button=t.button,r.buttons=t.buttons,r.client.copyFrom(t.client),r.ctrlKey=t.ctrlKey,r.metaKey=t.metaKey,r.movement.copyFrom(t.movement),r.screen.copyFrom(t.screen),r.shiftKey=t.shiftKey,r.global.copyFrom(t.global))}copyData(t,r){r.isTrusted=t.isTrusted,r.srcElement=t.srcElement,r.timeStamp=performance.now(),r.type=t.type,r.detail=t.detail,r.view=t.view,r.which=t.which,r.layer.copyFrom(t.layer),r.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const r=this.eventPool.get(t).pop()||new t(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=t.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(t)}notifyListeners(t,r){const n=t.currentTarget._events[r];if(n&&t.currentTarget.isInteractive())if("fn"in n)n.once&&t.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let i=0,s=n.length;i<s&&!t.propagationImmediatelyStopped;i++)n[i].once&&t.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,t)}}const ZU=1,KU={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},bm=class _m{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new qU(null),Si.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Lr(null),this.rootWheelEvent=new Uo(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({..._m.defaultEventFeatures},{set:(r,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),r[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,_m._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":r&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":r&&Object.assign(this.domElement.style,n);break}else r&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(t);this.autoPreventDefault&&r[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,i=r.length;n<i;n++){const s=r[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Si.pointerMoved();const r=this.normalizeToPointerData(t);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=t.target;t.composedPath&&t.composedPath().length>0&&(r=t.composedPath()[0]);const n=r!==this.domElement?"outside":"",i=this.normalizeToPointerData(t);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(t);for(let n=0,i=r.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(t){this.removeEvents(),this.domElement=t,Si.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Si.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Si.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,r,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;t.x=(r-i.left)*(this.domElement.width/i.width)*s,t.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(t){const r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,i=t.changedTouches.length;n<i;n++){const s=t.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,r.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=ZU),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,r.push(n)}else r.push(t);return r}normalizeWheelEvent(t){const r=this.rootWheelEvent;return this.transferMouseData(r,t),r.deltaX=t.deltaX,r.deltaY=t.deltaY,r.deltaZ=t.deltaZ,r.deltaMode=t.deltaMode,this.mapPositionToPoint(r.screen,t.clientX,t.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=t,r.type=t.type,r}bootstrapEvent(t,r){return t.originalEvent=null,t.nativeEvent=r,t.pointerId=r.pointerId,t.width=r.width,t.height=r.height,t.isPrimary=r.isPrimary,t.pointerType=r.pointerType,t.pressure=r.pressure,t.tangentialPressure=r.tangentialPressure,t.tiltX=r.tiltX,t.tiltY=r.tiltY,t.twist=r.twist,this.transferMouseData(t,r),this.mapPositionToPoint(t.screen,r.clientX,r.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=r.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=KU[t.type]||t.type),t}transferMouseData(t,r){t.isTrusted=r.isTrusted,t.srcElement=r.srcElement,t.timeStamp=performance.now(),t.type=r.type,t.altKey=r.altKey,t.button=r.button,t.buttons=r.buttons,t.client.x=r.clientX,t.client.y=r.clientY,t.ctrlKey=r.ctrlKey,t.metaKey=r.metaKey,t.movement.x=r.movementX,t.movement.y=r.movementY,t.page.x=r.pageX,t.page.y=r.pageY,t.relatedTarget=null,t.shiftKey=r.shiftKey}};bm.extension={name:"events",type:[nt.RendererSystem,nt.CanvasRendererSystem]},bm.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let vm=bm;ct.add(vm);function B_(e){return e==="dynamic"||e==="static"}const QU={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??B_(vm.defaultEventMode)},set interactive(e){St("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??vm.defaultEventMode},set eventMode(e){this._internalInteractive=B_(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,i)},removeEventListener(e,t,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,i)},dispatchEvent(e){if(!(e instanceof hu))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};ue.mixin(QU);const JU={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ue.mixin(JU);const tG=9,rc=100,eG=0,rG=0,L_=2,U_=1,nG=-1e3,iG=-1e3,sG=2;class g4{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Jn.tablet||Jn.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${rc}px`,r.style.height=`${rc}px`,r.style.position="absolute",r.style.top=`${eG}px`,r.style.left=`${rG}px`,r.style.zIndex=L_.toString(),this.div=r,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${U_}px`,t.style.height=`${U_}px`,t.style.position="absolute",t.style.top=`${nG}px`,t.style.left=`${iG}px`,t.style.zIndex=sG.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const r=t.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const t=performance.now();if(Jn.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=i/o*l,c=s/a*l;let h=this.div;h.style.left=`${r}px`,h.style.top=`${n}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let f=0;f<this.children.length;f++){const d=this.children[f];if(d.renderId!==this.renderId)d._accessibleActive=!1,Bo(this.children,f,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,f--;else{h=d._accessibleDiv;let p=d.hitArea;const m=d.worldTransform;d.hitArea?(h.style.left=`${(m.tx+p.x*m.a)*u}px`,h.style.top=`${(m.ty+p.y*m.d)*c}px`,h.style.width=`${p.width*m.a*u}px`,h.style.height=`${p.height*m.d*c}px`):(p=d.getBounds(),this.capHitArea(p),h.style.left=`${p.x*u}px`,h.style.top=`${p.y*c}px`,h.style.width=`${p.width*u}px`,h.style.height=`${p.height*c}px`,h.title!==d.accessibleTitle&&d.accessibleTitle!==null&&(h.title=d.accessibleTitle),h.getAttribute("aria-label")!==d.accessibleHint&&d.accessibleHint!==null&&h.setAttribute("aria-label",d.accessibleHint)),(d.accessibleTitle!==h.title||d.tabIndex!==h.tabIndex)&&(h.title=d.accessibleTitle,h.tabIndex=d.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:r,height:n}=this.renderer;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${rc}px`,r.style.height=`${rc}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=L_.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=t.accessiblePointerEvents,r.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?r.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(r.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&r.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(r),t._accessibleActive=!0,t._accessibleDiv=r,r.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,r){const{displayObject:n}=t.target,i=this.renderer.events.rootBoundary,s=Object.assign(new hu(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===tG&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}g4.extension={name:"accessibility",type:[nt.RendererPlugin,nt.CanvasRendererPlugin]};ct.add(g4);const y4=class wm{constructor(t){this.stage=new Xe,t=Object.assign({forceCanvas:!1},t),this.renderer=gU(t),wm._plugins.forEach(r=>{r.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,r){const n=wm._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null}};y4._plugins=[];let b4=y4;ct.handleByList(nt.Application,b4._plugins);class _4{static init(t){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}_4.extension=nt.Application;ct.add(_4);const G_={loader:nt.LoadParser,resolver:nt.ResolveParser,cache:nt.CacheParser,detection:nt.DetectionParser};ct.handle(nt.Asset,e=>{const t=e.ref;Object.entries(G_).filter(([r])=>!!t[r]).forEach(([r,n])=>ct.add(Object.assign(t[r],{extension:t[r].extension??n})))},e=>{const t=e.ref;Object.keys(G_).filter(r=>!!t[r]).forEach(r=>ct.remove(t[r]))});class oG{constructor(t,r=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(t){t.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function ga(e,t){if(Array.isArray(t)){for(const r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}function $i(e,t){const r=e.split("?")[0],n=Ce.extname(r).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const zr=(e,t,r=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(n=>typeof n=="string"||r?t(n):n):e),xm=(e,t)=>{const r=t.split("?")[1];return r&&(e+=`?${r}`),e};function v4(e,t,r,n,i){const s=t[r];for(let o=0;o<s.length;o++){const a=s[o];r<t.length-1?v4(e.replace(n[r],a),t,r+1,n,i):i.push(e.replace(n[r],a))}}function aG(e){const t=/\{(.*?)\}/g,r=e.match(t),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),v4(e,i,0,r,n)}else n.push(e);return n}const Fh=e=>!Array.isArray(e);class lG{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const r=this._cache.get(t);return r||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),r}set(t,r){const n=zr(t);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(r)){i=l.getCacheableAssets(n,r);break}}i||(i={},n.forEach(a=>{i[a]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==r&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),r instanceof ft){const a=r;n.forEach(l=>{a.baseTexture!==ft.EMPTY.baseTexture&&vt.addToCache(a.baseTexture,l),ft.addToCache(a,l)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const r=this._cacheMap.get(t);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const fs=new lG;let uG=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,r,n)=>(this._parsersValidated=!1,t[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${t}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,t,r,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(t,r,this),n.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,i,r,this))&&(i=await u.parse(i,r,this)||i,n.parser=u)}return i})(),n}async load(t,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=Fh(t),o=zr(t,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const c=Ce.toAbsolute(u.src);if(!i[u.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,u)),i[u.src]=await this.promiseCache[c].promise,r&&r(++n/a)}catch(h){throw delete this.promiseCache[c],delete i[u.src],new Error(`[Loader.load] Failed to load ${c}.
${h}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(t){const r=zr(t,n=>({alias:[n],src:n})).map(async n=>{var o,a;const i=Ce.toAbsolute(n.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,n,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,r)=>(t[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...t,[r.name]:r}),{})}};var Jr=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Jr||{});const cG=".json",hG="application/json",fG={extension:{type:nt.LoadParser,priority:Jr.Low},name:"loadJson",test(e){return ga(e,hG)||$i(e,cG)},async load(e){return await(await at.ADAPTER.fetch(e)).json()}};ct.add(fG);const dG=".txt",pG="text/plain",mG={name:"loadTxt",extension:{type:nt.LoadParser,priority:Jr.Low},test(e){return ga(e,pG)||$i(e,dG)},async load(e){return await(await at.ADAPTER.fetch(e)).text()}};ct.add(mG);const gG=["normal","bold","100","200","300","400","500","600","700","800","900"],yG=[".ttf",".otf",".woff",".woff2"],bG=["font/ttf","font/otf","font/woff","font/woff2"],_G=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function vG(e){const t=Ce.extname(e),r=Ce.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=r.length>0;for(const s of r)if(!s.match(_G)){n=!1;break}let i=r.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const wG=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function xG(e){return wG.test(e)?e:encodeURI(e)}const TG={extension:{type:nt.LoadParser,priority:Jr.Low},name:"loadWebFont",test(e){return ga(e,bG)||$i(e,yG)},async load(e,t){var n,i,s;const r=at.ADAPTER.getFontFaceSet();if(r){const o=[],a=((n=t.data)==null?void 0:n.family)??vG(e),l=((s=(i=t.data)==null?void 0:i.weights)==null?void 0:s.filter(c=>gG.includes(c)))??["normal"],u=t.data??{};for(let c=0;c<l.length;c++){const h=l[c],f=new FontFace(a,`url(${xG(e)})`,{...u,weight:h});await f.load(),r.add(f),o.push(f)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>at.ADAPTER.getFontFaceSet().delete(t))}};ct.add(TG);let H_=0,s0;const AG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",EG={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${AG}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},CG={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let o0;class SG{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const r=URL.createObjectURL(new Blob([EG.code],{type:"application/javascript"})),n=new Worker(r);n.addEventListener("message",i=>{n.terminate(),URL.revokeObjectURL(r),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){s0===void 0&&(s0=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<s0&&(o0||(o0=URL.createObjectURL(new Blob([CG.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(o0),t.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:t,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const r=this.queue.pop(),n=r.id;this.resolveHash[H_]={resolve:r.resolve,reject:r.reject},t.postMessage({data:r.arguments,uuid:H_++,id:n})}}const z_=new SG;function fu(e,t,r){e.resource.internal=!0;const n=new ft(e),i=()=>{delete t.promiseCache[r],fs.has(r)&&fs.remove(r)};return n.baseTexture.once("destroyed",()=>{r in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const MG=[".jpeg",".jpg",".png",".webp",".avif"],IG=["image/jpeg","image/png","image/webp","image/avif"];async function RG(e){const t=await at.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const r=await t.blob();return await createImageBitmap(r)}const Gf={name:"loadTextures",extension:{type:nt.LoadParser,priority:Jr.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return ga(e,IG)||$i(e,MG)},async load(e,t,r){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await z_.isImageBitmapSupported()?i=await z_.loadImageBitmap(e):i=await RG(e):i=await new Promise((l,u)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=e,c.complete?l(c):(c.onload=()=>l(c),c.onerror=h=>u(h))});const s={...t.data};s.resolution??(s.resolution=li(e)),n&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new vt(i,s);return o.resource.src=e,fu(o,r,e)},unload(e){e.destroy(!0)}};ct.add(Gf);const PG=".svg",kG="image/svg+xml",DG={extension:{type:nt.LoadParser,priority:Jr.High},name:"loadSVG",test(e){return ga(e,kG)||$i(e,PG)},async testParse(e){return fm.test(e)},async parse(e,t,r){var s;const n=new fm(e,(s=t==null?void 0:t.data)==null?void 0:s.resourceOptions);await n.load();const i=new vt(n,{resolution:li(e),...t==null?void 0:t.data});return i.resource.src=t.src,fu(i,r,t.src)},async load(e,t){return(await at.ADAPTER.fetch(e)).text()},unload:Gf.unload};ct.add(DG);const NG=[".mp4",".m4v",".webm",".ogv"],OG=["video/mp4","video/webm","video/ogg"],FG={name:"loadVideo",extension:{type:nt.LoadParser,priority:Jr.High},config:{defaultAutoPlay:!0},test(e){return ga(e,OG)||$i(e,NG)},async load(e,t,r){var o;let n;const i=await(await at.ADAPTER.fetch(e)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions},l=new d4(s,a);await l.load();const u=new vt(l,{alphaMode:await zB(),resolution:li(e),...t==null?void 0:t.data});u.resource.src=e,n=fu(u,r,e),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return n},unload(e){e.destroy(!0)}};ct.add(FG);class BG{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,r)=>`${t}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(t,r)=>r.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const r=t;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(t){const{alias:r,name:n,src:i,srcs:s}=t;return zr(r||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(t,r){const n=[];Array.isArray(r)?r.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(t,o);n.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(t,u));n.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(r).forEach(i=>{const s=[i,this._createBundleAssetId(t,i)];if(typeof r[i]=="string")this.add({alias:s,src:r[i]});else if(Array.isArray(r[i]))this.add({alias:s,src:r[i]});else{const o=r[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[t]=n}add(t,r,n,i,s){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(St("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:r,data:n,format:i,loadParser:s})):Array.isArray(t)?o.push(...t):o.push(t);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},zr(o).forEach(l=>{const{src:u,srcs:c}=l;let{data:h,format:f,loadParser:d}=l;const p=zr(u||c).map(y=>typeof y=="string"?aG(y):Array.isArray(y)?y:[y]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);const g=[];p.forEach(y=>{y.forEach(b=>{let _={};if(typeof b!="object"){_.src=b;for(let v=0;v<this._parsers.length;v++){const w=this._parsers[v];if(w.test(b)){_=w.parse(b);break}}}else h=b.data??h,f=b.format??f,d=b.loadParser??d,_={..._,...b};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:m,data:h,format:f,loadParser:d}),g.push(_)})}),m.forEach(y=>{this._assetMap[y]=g})})}resolveBundle(t){const r=Fh(t);t=zr(t);const n={};return t.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(i,l)]=u}n[i]=a}}),r?n[t[0]]:n}resolveUrl(t){const r=this.resolve(t);if(typeof t!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(t){const r=Fh(t);t=zr(t);const n={};return t.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const c=s.filter(h=>h[l]?h[l]===u:!1);c.length&&(s=c)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),r?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let r=0;r<t.length;r++){const n=t[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const r=/\?/.test(t)?"&":"?";return`${t}${r}${this._defaultSearchParams}`}buildResolvedAsset(t,r){const{aliases:n,data:i,loadParser:s,format:o}=r;return(this._basePath||this._rootPath)&&(t.src=Ce.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=n??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...i||{},...t.data},t.loadParser=s??t.loadParser,t.format=o??Ce.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class LG{constructor(){this._detections=[],this._initialized=!1,this.resolver=new BG,this.loader=new uG,this.cache=fs,this._backgroundLoader=new oG(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((s=t.texturePreference)==null?void 0:s.resolution)??1,n=typeof r=="number"?[r]:r,i=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t,r,n,i,s){this.resolver.add(t,r,n,i,s)}async load(t,r){this._initialized||await this.init();const n=Fh(t),i=zr(t).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(t,r){this.resolver.addBundle(t,r)}async loadBundle(t,r){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const i=this.resolver.resolveBundle(t),s={},o=Object.keys(i);let a=0,l=0;const u=()=>{r==null||r(++a/l)},c=o.map(h=>{const f=i[h];return l+=Object.keys(f).length,this._mapLoadToResolve(f,u).then(d=>{s[h]=d})});return await Promise.all(c),n?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const r=this.resolver.resolveBundle(t);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return fs.get(t);const r={};for(let n=0;n<t.length;n++)r[n]=fs.get(t[n]);return r}async _mapLoadToResolve(t,r){const n=Object.values(t),i=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const u=s[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[i[l]]=u,fs.set(c,u)}),o}async unload(t){this._initialized||await this.init();const r=zr(t).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=zr(t);const r=this.resolver.resolveBundle(t),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(t){const r=Object.values(t);r.forEach(n=>{fs.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(t){let r=[];t.preferredFormats&&(r=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const n of t.detections)t.skipDetections||await n.test()?r=await n.add(r):t.skipDetections||(r=await n.remove(r));return r=r.filter((n,i)=>r.indexOf(n)===i),r}get detections(){return this._detections}get preferWorkers(){return Gf.config.preferWorkers}set preferWorkers(t){St("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in t).forEach(n=>{r.config[n]=t[n]})})}}const nc=new LG;ct.handleByList(nt.LoadParser,nc.loader.parsers).handleByList(nt.ResolveParser,nc.resolver.parsers).handleByList(nt.CacheParser,nc.cache.parsers).handleByList(nt.DetectionParser,nc.detections);const UG={extension:nt.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof ft),getCacheableAssets:(e,t)=>{const r={};return e.forEach(n=>{t.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};ct.add(UG);async function w4(e){if("Image"in globalThis)return new Promise(t=>{const r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(e)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const GG={extension:{type:nt.DetectionParser,priority:1},test:async()=>w4("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};ct.add(GG);const HG={extension:{type:nt.DetectionParser,priority:0},test:async()=>w4("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};ct.add(HG);const V_=["png","jpg","jpeg"],zG={extension:{type:nt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...V_],remove:async e=>e.filter(t=>!V_.includes(t))};ct.add(zG);const VG="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Yg(e){return VG?!1:document.createElement("video").canPlayType(e)!==""}const WG={extension:{type:nt.DetectionParser,priority:0},test:async()=>Yg("video/webm"),add:async e=>[...e,"webm"],remove:async e=>e.filter(t=>t!=="webm")};ct.add(WG);const XG={extension:{type:nt.DetectionParser,priority:0},test:async()=>Yg("video/mp4"),add:async e=>[...e,"mp4","m4v"],remove:async e=>e.filter(t=>t!=="mp4"&&t!=="m4v")};ct.add(XG);const $G={extension:{type:nt.DetectionParser,priority:0},test:async()=>Yg("video/ogg"),add:async e=>[...e,"ogv"],remove:async e=>e.filter(t=>t!=="ogv")};ct.add($G);const jG={extension:nt.ResolveParser,test:Gf.test,parse:e=>{var t;return{resolution:parseFloat(((t=at.RETINA_PREFIX.exec(e))==null?void 0:t[1])??"1"),format:Ce.extname(e).slice(1),src:e}}};ct.add(jG);var ur=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(ur||{});const Bh={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let Vn,_o;function W_(){_o={s3tc:Vn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Vn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Vn.getExtension("WEBGL_compressed_texture_etc"),etc1:Vn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Vn.getExtension("WEBGL_compressed_texture_pvrtc")||Vn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Vn.getExtension("WEBGL_compressed_texture_atc"),astc:Vn.getExtension("WEBGL_compressed_texture_astc")}}const YG={extension:{type:nt.DetectionParser,priority:2},test:async()=>{const e=at.ADAPTER.createCanvas().getContext("webgl");return e?(Vn=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{_o||W_();const t=[];for(const r in _o)_o[r]&&t.push(r);return[...t,...e]},remove:async e=>(_o||W_(),e.filter(t=>!(t in _o)))};ct.add(YG);class qG extends Of{constructor(t,r={width:1,height:1,autoLoad:!0}){let n,i;typeof t=="string"?(n=t,i=new Uint8Array):(n=null,i=t),super(i,r),this.origin=n,this.buffer=i?new Jp(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Jp(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class xs extends qG{constructor(t,r){super(t,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=xs._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||xs._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,r,n){const i=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:c}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,u,0,c)}return!0}onBlobLoaded(){this._levelBuffers=xs._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,r,n,i,s,o,a){const l=new Array(n);let u=t.byteOffset,c=o,h=a,f=c+i-1&~(i-1),d=h+s-1&~(s-1),p=f*d*Bh[r];for(let m=0;m<n;m++)l[m]={levelID:m,levelWidth:n>1?c:f,levelHeight:n>1?h:d,levelBuffer:new Uint8Array(t.buffer,u,p)},u+=p,c=c>>1||1,h=h>>1||1,f=c+i-1&~(i-1),d=h+s-1&~(s-1),p=f*d*Bh[r];return l}}const a0=4,ic=124,ZG=32,X_=20,KG=542327876,sc={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},QG={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},oc={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},JG=1,tH=2,eH=4,rH=64,nH=512,iH=131072,sH=827611204,oH=861165636,aH=894720068,lH=808540228,uH=4,cH={[sH]:ur.COMPRESSED_RGBA_S3TC_DXT1_EXT,[oH]:ur.COMPRESSED_RGBA_S3TC_DXT3_EXT,[aH]:ur.COMPRESSED_RGBA_S3TC_DXT5_EXT},hH={70:ur.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:ur.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:ur.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:ur.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:ur.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:ur.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:ur.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:ur.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:ur.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function fH(e){const t=new Uint32Array(e);if(t[0]!==KG)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(e,0,ic/Uint32Array.BYTES_PER_ELEMENT),n=r[sc.HEIGHT],i=r[sc.WIDTH],s=r[sc.MIPMAP_COUNT],o=new Uint32Array(e,sc.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,ZG/Uint32Array.BYTES_PER_ELEMENT),a=o[JG];if(a&eH){const l=o[QG.FOURCC];if(l!==lH){const b=cH[l],_=a0+ic,v=new Uint8Array(e,_);return[new xs(v,{format:b,width:i,height:n,levels:s})]}const u=a0+ic,c=new Uint32Array(t.buffer,u,X_/Uint32Array.BYTES_PER_ELEMENT),h=c[oc.DXGI_FORMAT],f=c[oc.RESOURCE_DIMENSION],d=c[oc.MISC_FLAG],p=c[oc.ARRAY_SIZE],m=hH[h];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(d===uH)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,y=a0+ic+X_;if(p===1)g.push(new Uint8Array(e,y));else{const b=Bh[m];let _=0,v=i,w=n;for(let x=0;x<s;x++){const E=Math.max(1,v+3&-4),T=Math.max(1,w+3&-4),M=E*T*b;_+=M,v=v>>>1,w=w>>>1}let A=y;for(let x=0;x<p;x++)g.push(new Uint8Array(e,A,_)),A+=_}return g.map(b=>new xs(b,{format:m,width:i,height:n,levels:s}))}throw a&rH?new Error("DDSParser does not support uncompressed texture data."):a&nH?new Error("DDSParser does not supported YUV uncompressed texture data."):a&iH?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&tH?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const $_=[171,75,84,88,32,49,49,187,13,10,26,10],dH=67305985,Or={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Tm=64,j_={[pt.UNSIGNED_BYTE]:1,[pt.UNSIGNED_SHORT]:2,[pt.INT]:4,[pt.UNSIGNED_INT]:4,[pt.FLOAT]:4,[pt.HALF_FLOAT]:8},pH={[q.RGBA]:4,[q.RGB]:3,[q.RG]:2,[q.RED]:1,[q.LUMINANCE]:1,[q.LUMINANCE_ALPHA]:2,[q.ALPHA]:1},mH={[pt.UNSIGNED_SHORT_4_4_4_4]:2,[pt.UNSIGNED_SHORT_5_5_5_1]:2,[pt.UNSIGNED_SHORT_5_6_5]:2};function gH(e,t,r=!1){const n=new DataView(t);if(!yH(e,n))return null;const i=n.getUint32(Or.ENDIANNESS,!0)===dH,s=n.getUint32(Or.GL_TYPE,i),o=n.getUint32(Or.GL_FORMAT,i),a=n.getUint32(Or.GL_INTERNAL_FORMAT,i),l=n.getUint32(Or.PIXEL_WIDTH,i),u=n.getUint32(Or.PIXEL_HEIGHT,i)||1,c=n.getUint32(Or.PIXEL_DEPTH,i)||1,h=n.getUint32(Or.NUMBER_OF_ARRAY_ELEMENTS,i)||1,f=n.getUint32(Or.NUMBER_OF_FACES,i),d=n.getUint32(Or.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(Or.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(f!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const m=4,g=4,y=l+3&-4,b=u+3&-4,_=new Array(h);let v=l*u;s===0&&(v=y*b);let w;if(s!==0?j_[s]?w=j_[s]*pH[o]:w=mH[s]:w=Bh[a],w===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const A=r?_H(n,p,i):null;let x=v*w,E=l,T=u,M=y,P=b,R=Tm+p;for(let S=0;S<d;S++){const C=n.getUint32(R,i);let I=R+4;for(let F=0;F<h;F++){let H=_[F];H||(H=_[F]=new Array(d)),H[S]={levelID:S,levelWidth:d>1||s!==0?E:M,levelHeight:d>1||s!==0?T:P,levelBuffer:new Uint8Array(t,I,x)},I+=x}R+=C+4,R=R%4!==0?R+4-R%4:R,E=E>>1||1,T=T>>1||1,M=E+m-1&~(m-1),P=T+g-1&~(g-1),x=M*P*w}return s!==0?{uncompressed:_.map(S=>{let C=S[0].levelBuffer,I=!1;return s===pt.FLOAT?C=new Float32Array(S[0].levelBuffer.buffer,S[0].levelBuffer.byteOffset,S[0].levelBuffer.byteLength/4):s===pt.UNSIGNED_INT?(I=!0,C=new Uint32Array(S[0].levelBuffer.buffer,S[0].levelBuffer.byteOffset,S[0].levelBuffer.byteLength/4)):s===pt.INT&&(I=!0,C=new Int32Array(S[0].levelBuffer.buffer,S[0].levelBuffer.byteOffset,S[0].levelBuffer.byteLength/4)),{resource:new Of(C,{width:S[0].levelWidth,height:S[0].levelHeight}),type:s,format:I?bH(o):o}}),kvData:A}:{compressed:_.map(S=>new xs(null,{format:a,width:l,height:u,levels:d,levelBuffers:S})),kvData:A}}function yH(e,t){for(let r=0;r<$_.length;r++)if(t.getUint8(r)!==$_[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function bH(e){switch(e){case q.RGBA:return q.RGBA_INTEGER;case q.RGB:return q.RGB_INTEGER;case q.RG:return q.RG_INTEGER;case q.RED:return q.RED_INTEGER;default:return e}}function _H(e,t,r){const n=new Map;let i=0;for(;i<t;){const s=e.getUint32(Tm+i,r),o=Tm+i+4,a=3-(s+3)%4;if(s===0||s>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&e.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(e.buffer,o,l)),c=new DataView(e.buffer,o+l+1,s-l-1);n.set(u,c),i+=4+s+a}return n}const vH={extension:{type:nt.LoadParser,priority:Jr.High},name:"loadDDS",test(e){return $i(e,".dds")},async load(e,t,r){const n=await(await at.ADAPTER.fetch(e)).arrayBuffer(),i=fH(n).map(s=>{const o=new vt(s,{mipmap:In.OFF,alphaMode:rr.NO_PREMULTIPLIED_ALPHA,resolution:li(e),...t.data});return fu(o,r,e)});return i.length===1?i[0]:i},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};ct.add(vH);const wH={extension:{type:nt.LoadParser,priority:Jr.High},name:"loadKTX",test(e){return $i(e,".ktx")},async load(e,t,r){const n=await(await at.ADAPTER.fetch(e)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=gH(e,n),a=i??s,l={mipmap:In.OFF,alphaMode:rr.NO_PREMULTIPLIED_ALPHA,resolution:li(e),...t.data},u=a.map(c=>{a===s&&Object.assign(l,{type:c.type,format:c.format});const h=c.resource??c,f=new vt(h,l);return f.ktxKeyValueData=o,fu(f,r,e)});return u.length===1?u[0]:u},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};ct.add(wH);const xH={extension:nt.ResolveParser,test:e=>{const t=Ce.extname(e).slice(1);return["basis","ktx","dds"].includes(t)},parse:e=>{var r,n;const t=Ce.extname(e).slice(1);if(t==="ktx"){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(i.some(s=>e.endsWith(s)))return{resolution:parseFloat(((r=at.RETINA_PREFIX.exec(e))==null?void 0:r[1])??"1"),format:i.find(s=>e.endsWith(s)),src:e}}return{resolution:parseFloat(((n=at.RETINA_PREFIX.exec(e))==null?void 0:n[1])??"1"),format:t,src:e}}};ct.add(xH);const ac=new xt,TH=4,x4=class Qa{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var r;const t=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,r,n,i){const s=new Image;return s.src=await this.base64(t,r,n,i),s}async base64(t,r,n,i){const s=this.canvas(t,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},r,n)});if(s.toDataURL!==void 0)return s.toDataURL(r,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:r,quality:n});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,r);o&&Qa._flipY(n,i,s),a&&Qa._unpremultiplyAlpha(n);const l=new iL(i,s,1),u=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return l.context.putImageData(u,0,0),l.canvas}pixels(t,r){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,r);return o&&Qa._flipY(n,i,s),a&&Qa._unpremultiplyAlpha(n),n}_rawPixels(t,r){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;t&&(t instanceof Qs?a=t:(a=n.generateTexture(t,{region:r,resolution:n.resolution,multisample:n.multisample}),l=!0,r&&(ac.width=r.width,ac.height=r.height,r=ac)));const u=n.gl;if(a){if(i=a.baseTexture.resolution,r=r??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===q.RGBA,!l){n.renderTexture.bind(a);const d=a.framebuffer.glFramebuffers[n.CONTEXT_UID];d.blitFramebuffer&&n.framebuffer.bind(d.blitFramebuffer)}}else i=n.resolution,r||(r=ac,r.width=n.width/i,r.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const c=Math.max(Math.round(r.width*i),1),h=Math.max(Math.round(r.height*i),1),f=new Uint8Array(TH*c*h);return u.readPixels(Math.round(r.x*i),Math.round(r.y*i),c,h,u.RGBA,u.UNSIGNED_BYTE,f),l&&(a==null||a.destroy(!0)),{pixels:f,width:c,height:h,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,r,n){const i=r<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,u=(n-a-1)*i;o.set(t.subarray(l,l+i)),t.copyWithin(l,u,u+i),t.set(o,u)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const r=t.length;for(let n=0;n<r;n+=4){const i=t[n+3];if(i!==0){const s=255.001/i;t[n]=t[n]*s+.5,t[n+1]=t[n+1]*s+.5,t[n+2]=t[n+2]*s+.5}}}};x4.extension={name:"extract",type:nt.RendererSystem};let AH=x4;ct.add(AH);const Lh={build(e){const t=e.points;let r,n,i,s,o,a;if(e.type===Ge.CIRC){const p=e.shape;r=p.x,n=p.y,o=a=p.radius,i=s=0}else if(e.type===Ge.ELIP){const p=e.shape;r=p.x,n=p.y,o=p.width,a=p.height,i=s=0}else{const p=e.shape,m=p.width/2,g=p.height/2;r=p.x+m,n=p.y+g,o=a=Math.max(0,Math.min(p.radius,Math.min(m,g))),i=m-o,s=g-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(i?4:0)+(s?4:0);if(t.length=u,u===0)return;if(l===0){t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+s,t[2]=t[4]=r-i,t[5]=t[7]=n-s;return}let c=0,h=l*4+(i?2:0)+2,f=h,d=u;{const p=i+o,m=s,g=r+p,y=r-p,b=n+m;if(t[c++]=g,t[c++]=b,t[--h]=b,t[--h]=y,s){const _=n-m;t[f++]=y,t[f++]=_,t[--d]=_,t[--d]=g}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),g=i+Math.cos(m)*o,y=s+Math.sin(m)*a,b=r+g,_=r-g,v=n+y,w=n-y;t[c++]=b,t[c++]=v,t[--h]=v,t[--h]=_,t[f++]=_,t[f++]=w,t[--d]=w,t[--d]=b}{const p=i,m=s+a,g=r+p,y=r-p,b=n+m,_=n-m;t[c++]=g,t[c++]=b,t[--d]=_,t[--d]=g,i&&(t[c++]=y,t[c++]=b,t[--d]=_,t[--d]=y)}},triangulate(e,t){const r=e.points,n=t.points,i=t.indices;if(r.length===0)return;let s=n.length/2;const o=s;let a,l;if(e.type!==Ge.RREC){const c=e.shape;a=c.x,l=c.y}else{const c=e.shape;a=c.x+c.width/2,l=c.y+c.height/2}const u=e.matrix;n.push(e.matrix?u.a*a+u.c*l+u.tx:a,e.matrix?u.b*a+u.d*l+u.ty:l),s++,n.push(r[0],r[1]);for(let c=2;c<r.length;c+=2)n.push(r[c],r[c+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function Y_(e,t=!1){const r=e.length;if(r<6)return;let n=0;for(let i=0,s=e[r-2],o=e[r-1];i<r;i+=2){const a=e[i],l=e[i+1];n+=(a-s)*(l+o),s=a,o=l}if(!t&&n>0||t&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,a=r-s-1,l=s,u=s+1;[e[o],e[l]]=[e[l],e[o]],[e[a],e[u]]=[e[u],e[a]]}}}const T4={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points;const n=e.holes,i=t.points,s=t.indices;if(r.length>=6){Y_(r,!1);const o=[];for(let u=0;u<n.length;u++){const c=n[u];Y_(c.points,!0),o.push(r.length/2),r=r.concat(c.points)}const a=_O(r,o,2);if(!a)return;const l=i.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<r.length;u++)i.push(r[u])}}},EH={build(e){const t=e.shape,r=t.x,n=t.y,i=t.width,s=t.height,o=e.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(e,t){const r=e.points,n=t.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},CH={build(e){Lh.build(e)},triangulate(e,t){Lh.triangulate(e,t)}};var Ar=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Ar||{}),Ri=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(Ri||{});const na={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class q_{static curveTo(t,r,n,i,s,o){const a=o[o.length-2],l=o[o.length-1]-r,u=a-t,c=i-r,h=n-t,f=Math.abs(l*h-u*c);if(f<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==r)&&o.push(t,r),null;const d=l*l+u*u,p=c*c+h*h,m=l*c+u*h,g=s*Math.sqrt(d)/f,y=s*Math.sqrt(p)/f,b=g*m/d,_=y*m/p,v=g*h+y*u,w=g*c+y*l,A=u*(y+b),x=l*(y+b),E=h*(g+_),T=c*(g+_),M=Math.atan2(x-w,A-v),P=Math.atan2(T-w,E-v);return{cx:v+t,cy:w+r,radius:s,startAngle:M,endAngle:P,anticlockwise:u*c>h*l}}static arc(t,r,n,i,s,o,a,l,u){const c=a-o,h=na._segmentsCount(Math.abs(c)*s,Math.ceil(Math.abs(c)/Ih)*40),f=c/(h*2),d=f*2,p=Math.cos(f),m=Math.sin(f),g=h-1,y=g%1/g;for(let b=0;b<=g;++b){const _=b+y*b,v=f+o+d*_,w=Math.cos(v),A=-Math.sin(v);u.push((p*w+m*A)*s+n,(p*-A+m*w)*s+i)}}}class SH{constructor(){this.reset()}begin(t,r,n){this.reset(),this.style=t,this.start=r,this.attribStart=n}end(t,r){this.attribSize=r-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class qg{static curveLength(t,r,n,i,s,o,a,l){let u=0,c=0,h=0,f=0,d=0,p=0,m=0,g=0,y=0,b=0,_=0,v=t,w=r;for(let A=1;A<=10;++A)c=A/10,h=c*c,f=h*c,d=1-c,p=d*d,m=p*d,g=m*t+3*p*c*n+3*d*h*s+f*a,y=m*r+3*p*c*i+3*d*h*o+f*l,b=v-g,_=w-y,v=g,w=y,u+=Math.sqrt(b*b+_*_);return u}static curveTo(t,r,n,i,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const c=na._segmentsCount(qg.curveLength(l,u,t,r,n,i,s,o));let h=0,f=0,d=0,p=0,m=0;a.push(l,u);for(let g=1,y=0;g<=c;++g)y=g/c,h=1-y,f=h*h,d=f*h,p=y*y,m=p*y,a.push(d*l+3*f*y*t+3*h*p*n+m*s,d*u+3*f*y*r+3*h*p*i+m*o)}}function Z_(e,t,r,n,i,s,o,a){const l=e-r*i,u=t-n*i,c=e+r*s,h=t+n*s;let f,d;o?(f=n,d=-r):(f=-n,d=r);const p=l+f,m=u+d,g=c+f,y=h+d;return a.push(p,m,g,y),2}function es(e,t,r,n,i,s,o,a){const l=r-e,u=n-t;let c=Math.atan2(l,u),h=Math.atan2(i-e,s-t);a&&c<h?c+=Math.PI*2:!a&&c>h&&(h+=Math.PI*2);let f=c;const d=h-c,p=Math.abs(d),m=Math.sqrt(l*l+u*u),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=d/g;if(f+=y,a){o.push(e,t,r,n);for(let b=1,_=f;b<g;b++,_+=y)o.push(e,t,e+Math.sin(_)*m,t+Math.cos(_)*m);o.push(e,t,i,s)}else{o.push(r,n,e,t);for(let b=1,_=f;b<g;b++,_+=y)o.push(e+Math.sin(_)*m,t+Math.cos(_)*m,e,t);o.push(i,s,e,t)}return g*2}function MH(e,t){const r=e.shape;let n=e.points||r.points.slice();const i=t.closePointEps;if(n.length===0)return;const s=e.lineStyle,o=new Bt(n[0],n[1]),a=new Bt(n[n.length-2],n[n.length-1]),l=r.type!==Ge.POLY||r.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const H=(o.x+a.x)*.5,X=(a.y+o.y)*.5;n.unshift(H,X),n.push(H,X)}const c=t.points,h=n.length/2;let f=n.length;const d=c.length/2,p=s.width/2,m=p*p,g=s.miterLimit*s.miterLimit;let y=n[0],b=n[1],_=n[2],v=n[3],w=0,A=0,x=-(b-v),E=y-_,T=0,M=0,P=Math.sqrt(x*x+E*E);x/=P,E/=P,x*=p,E*=p;const R=s.alignment,S=(1-R)*2,C=R*2;l||(s.cap===Ri.ROUND?f+=es(y-x*(S-C)*.5,b-E*(S-C)*.5,y-x*S,b-E*S,y+x*C,b+E*C,c,!0)+2:s.cap===Ri.SQUARE&&(f+=Z_(y,b,x,E,S,C,!0,c))),c.push(y-x*S,b-E*S,y+x*C,b+E*C);for(let H=1;H<h-1;++H){y=n[(H-1)*2],b=n[(H-1)*2+1],_=n[H*2],v=n[H*2+1],w=n[(H+1)*2],A=n[(H+1)*2+1],x=-(b-v),E=y-_,P=Math.sqrt(x*x+E*E),x/=P,E/=P,x*=p,E*=p,T=-(v-A),M=_-w,P=Math.sqrt(T*T+M*M),T/=P,M/=P,T*=p,M*=p;const X=_-y,Z=b-v,D=_-w,O=A-v,z=X*D+Z*O,k=Z*D-O*X,Y=k<0;if(Math.abs(k)<.001*Math.abs(z)){c.push(_-x*S,v-E*S,_+x*C,v+E*C),z>=0&&(s.join===Ar.ROUND?f+=es(_,v,_-x*S,v-E*S,_-T*S,v-M*S,c,!1)+4:f+=2,c.push(_-T*C,v-M*C,_+T*S,v+M*S));continue}const B=(-x+y)*(-E+v)-(-x+_)*(-E+b),rt=(-T+w)*(-M+v)-(-T+_)*(-M+A),Q=(X*rt-D*B)/k,et=(O*B-Z*rt)/k,U=(Q-_)*(Q-_)+(et-v)*(et-v),j=_+(Q-_)*S,K=v+(et-v)*S,L=_-(Q-_)*C,dt=v-(et-v)*C,lt=Math.min(X*X+Z*Z,D*D+O*O),bt=Y?S:C,Nt=lt+bt*bt*m,Jt=U<=Nt;let ye=s.join;if(ye===Ar.MITER&&U/m>g&&(ye=Ar.BEVEL),Jt)switch(ye){case Ar.MITER:{c.push(j,K,L,dt);break}case Ar.BEVEL:{Y?c.push(j,K,_+x*C,v+E*C,j,K,_+T*C,v+M*C):c.push(_-x*S,v-E*S,L,dt,_-T*S,v-M*S,L,dt),f+=2;break}case Ar.ROUND:{Y?(c.push(j,K,_+x*C,v+E*C),f+=es(_,v,_+x*C,v+E*C,_+T*C,v+M*C,c,!0)+4,c.push(j,K,_+T*C,v+M*C)):(c.push(_-x*S,v-E*S,L,dt),f+=es(_,v,_-x*S,v-E*S,_-T*S,v-M*S,c,!1)+4,c.push(_-T*S,v-M*S,L,dt));break}}else{switch(c.push(_-x*S,v-E*S,_+x*C,v+E*C),ye){case Ar.MITER:{Y?c.push(L,dt,L,dt):c.push(j,K,j,K),f+=2;break}case Ar.ROUND:{Y?f+=es(_,v,_+x*C,v+E*C,_+T*C,v+M*C,c,!0)+2:f+=es(_,v,_-x*S,v-E*S,_-T*S,v-M*S,c,!1)+2;break}}c.push(_-T*S,v-M*S,_+T*C,v+M*C),f+=2}}y=n[(h-2)*2],b=n[(h-2)*2+1],_=n[(h-1)*2],v=n[(h-1)*2+1],x=-(b-v),E=y-_,P=Math.sqrt(x*x+E*E),x/=P,E/=P,x*=p,E*=p,c.push(_-x*S,v-E*S,_+x*C,v+E*C),l||(s.cap===Ri.ROUND?f+=es(_-x*(S-C)*.5,v-E*(S-C)*.5,_-x*S,v-E*S,_+x*C,v+E*C,c,!1)+2:s.cap===Ri.SQUARE&&(f+=Z_(_,v,x,E,S,C,!1,c)));const I=t.indices,F=na.epsilon*na.epsilon;for(let H=d;H<f+d-2;++H)y=c[H*2],b=c[H*2+1],_=c[(H+1)*2],v=c[(H+1)*2+1],w=c[(H+2)*2],A=c[(H+2)*2+1],!(Math.abs(y*(v-A)+_*(A-b)+w*(b-v))<F)&&I.push(H,H+1,H+2)}function IH(e,t){let r=0;const n=e.shape,i=e.points||n.points,s=n.type!==Ge.POLY||n.closeStroke;if(i.length===0)return;const o=t.points,a=t.indices,l=i.length/2,u=o.length/2;let c=u;for(o.push(i[0],i[1]),r=1;r<l;r++)o.push(i[r*2],i[r*2+1]),a.push(c,c+1),c++;s&&a.push(c,u)}function K_(e,t){e.lineStyle.native?IH(e,t):MH(e,t)}class Zg{static curveLength(t,r,n,i,s,o){const a=t-2*n+s,l=r-2*i+o,u=2*n-2*t,c=2*i-2*r,h=4*(a*a+l*l),f=4*(a*u+l*c),d=u*u+c*c,p=2*Math.sqrt(h+f+d),m=Math.sqrt(h),g=2*h*m,y=2*Math.sqrt(d),b=f/m;return(g*p+m*f*(p-y)+(4*d*h-f*f)*Math.log((2*m+b+p)/(b+y)))/(4*g)}static curveTo(t,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],l=na._segmentsCount(Zg.curveLength(o,a,t,r,n,i));let u=0,c=0;for(let h=1;h<=l;++h){const f=h/l;u=o+(t-o)*f,c=a+(r-a)*f,s.push(u+(t+(n-t)*f-u)*f,c+(r+(i-r)*f-c)*f)}}}const l0={[Ge.POLY]:T4,[Ge.CIRC]:Lh,[Ge.ELIP]:Lh,[Ge.RECT]:EH,[Ge.RREC]:CH},Q_=[],lc=[];class Uh{constructor(t,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=t.type}clone(){return new Uh(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const co=new Bt,A4=class E4 extends R5{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Nh,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),lc.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const r=this.batches[t];r.reset(),Q_.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,r=null,n=null,i=null){const s=new Uh(t,r,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(t,r=null){if(!this.graphicsData.length)return null;const n=new Uh(t,null,null,r),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const r=this.graphicsData;for(let n=0;n<r.length;++n){const i=r[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(t,co):co.copyFrom(t),i.shape.contains(co.x,co.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(co.x,co.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,r=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let l=this.shapeIndex;l<r.length;l++){this.shapeIndex++;const u=r[l],c=u.fillStyle,h=u.lineStyle;l0[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(c.visible||h.visible)&&this.processHoles(u.holes);for(let f=0;f<2;f++){const d=f===0?c:h;if(!d.visible)continue;const p=d.texture.baseTexture,m=this.indices.length,g=this.points.length/2;p.wrapMode=ki.REPEAT,f===0?this.processFill(u):this.processLine(u);const y=this.points.length/2-g;y!==0&&(n&&!this._compareStyles(i,d)&&(n.end(m,g),n=null),n||(n=Q_.pop()||new SH,n.begin(d,m,g),this.batches.push(n),i=d),this.addUvs(this.points,t,d.texture,g,y,d.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,r=this.graphicsData.length;t<r;t++){const n=this.graphicsData[t],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let r=0,n=t.length;r<n;r++){const i=t[r];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<E4.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++vt._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),lc.push(this.drawCalls[h]);this.drawCalls.length=0;const r=this.colors,n=this.textureIds;let i=lc.pop();i||(i=new rm,i.texArray=new om),i.texArray.count=0,i.start=0,i.size=0,i.type=yn.TRIANGLES;let s=0,o=null,a=0,l=!1,u=yn.TRIANGLES,c=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){const f=this.batches[h],d=8,p=f.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?yn.LINES:yn.TRIANGLES,o=null,s=d,t++),o!==m&&(o=m,m._batchEnabled!==t&&(s===d&&(t++,s=0,i.size>0&&(i=lc.pop(),i||(i=new rm,i.texArray=new om),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=u),m.touched=1,m._batchEnabled=t,m._batchLocation=s,m.wrapMode=ki.REPEAT,i.texArray.elements[i.texArray.count++]=m,s++)),i.size+=f.size,c+=f.size,a=m._batchLocation,this.addColors(r,p.color,p.alpha,f.attribSize,f.attribStart),this.addTextureIds(n,a,f.attribSize,f.attribStart)}vt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,r=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(t.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let u=0;u<t.length/2;u++)o[l++]=t[u*2],o[l++]=t[u*2+1],o[l++]=r[u*2],o[l++]=r[u*2+1],a[l++]=n[u],o[l++]=i[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?T4.triangulate(t,this):l0[t.type].triangulate(t,this)}processLine(t){K_(t,this);for(let r=0;r<t.holes.length;r++)K_(t.holes[r],this)}processHoles(t){for(let r=0;r<t.length;r++){const n=t[r];l0[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,r){for(let n=0;n<t.length/2;n++){const i=t[n*2],s=t[n*2+1];t[n*2]=r.a*i+r.c*s+r.tx,t[n*2+1]=r.b*i+r.d*s+r.ty}}addColors(t,r,n,i,s=0){const o=Yt.shared.setValue(r).toLittleEndianNumber(),a=Yt.shared.setValue(o).toPremultiplied(n);t.length=Math.max(t.length,s+i);for(let l=0;l<i;l++)t[s+l]=a}addTextureIds(t,r,n,i=0){t.length=Math.max(t.length,i+n);for(let s=0;s<n;s++)t[i+s]=r}addUvs(t,r,n,i,s,o=null){let a=0;const l=r.length,u=n.frame;for(;a<s;){let h=t[(i+a)*2],f=t[(i+a)*2+1];if(o){const d=o.a*h+o.c*f+o.tx;f=o.b*h+o.d*f+o.ty,h=d}a++,r.push(h/u.width,f/u.height)}const c=n.baseTexture;(u.width<c.width||u.height<c.height)&&this.adjustUvs(r,n,l,s)}adjustUvs(t,r,n,i){const s=r.baseTexture,o=1e-6,a=n+i*2,l=r.frame,u=l.width/s.width,c=l.height/s.height;let h=l.x/l.width,f=l.y/l.height,d=Math.floor(t[n]+o),p=Math.floor(t[n+1]+o);for(let m=n+2;m<a;m+=2)d=Math.min(d,Math.floor(t[m]+o)),p=Math.min(p,Math.floor(t[m+1]+o));h-=d,f-=p;for(let m=n;m<a;m+=2)t[m]=(t[m]+h)*u,t[m+1]=(t[m+1]+f)*c}};A4.BATCHABLE_SIZE=100;let RH=A4;class Hf{constructor(){this.color=16777215,this.alpha=1,this.texture=ft.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Hf;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ft.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Kg extends Hf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ri.BUTT,this.join=Ar.MITER,this.miterLimit=10}clone(){const t=new Kg;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=Ri.BUTT,this.join=Ar.MITER,this.miterLimit=10}}const u0={},Am=class Bc extends Xe{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Hf,this._lineStyle=new Kg,this._matrix=null,this._holeMode=!1,this.state=Nn.for2d(),this._geometry=t||new RH,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Yt(16777215),this.blendMode=yt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Bc(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,r=0,n,i=.5,s=!1){return typeof t=="number"&&(t={width:t,color:r,alpha:n,alignment:i,native:s}),this.lineTextureStyle(t)}lineTextureStyle(t){const r={width:0,texture:ft.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:Ri.BUTT,join:Ar.MITER,miterLimit:10};t=Object.assign(r,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new ws,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new ws,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this}lineTo(t,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==t||s!==r)&&n.push(t,r),this}_initCurve(t=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,r]):this.moveTo(t,r)}quadraticCurveTo(t,r,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),Zg.curveTo(t,r,n,i,s),this}bezierCurveTo(t,r,n,i,s,o){return this._initCurve(),qg.curveTo(t,r,n,i,s,o,this.currentPath.points),this}arcTo(t,r,n,i,s){this._initCurve(t,r);const o=this.currentPath.points,a=q_.curveTo(t,r,n,i,s,o);if(a){const{cx:l,cy:u,radius:c,startAngle:h,endAngle:f,anticlockwise:d}=a;this.arc(l,u,c,h,f,d)}return this}arc(t,r,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=Ih:o&&i<=s&&(i+=Ih),s-i===0)return this;const a=t+Math.cos(i)*n,l=r+Math.sin(i)*n,u=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const h=Math.abs(c[c.length-2]-a),f=Math.abs(c[c.length-1]-l);h<u&&f<u||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return q_.arc(a,l,t,r,n,i,s,o,c),this}beginFill(t=0,r){return this.beginTextureFill({texture:ft.WHITE,color:t,alpha:r})}normalizeColor(t){const r=Yt.shared.setValue(t.color??0);t.color=r.toNumber(),t.alpha??(t.alpha=r.alpha)}beginTextureFill(t){const r={texture:ft.WHITE,color:16777215,matrix:null};t=Object.assign(r,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,r,n,i){return this.drawShape(new xt(t,r,n,i))}drawRoundedRect(t,r,n,i,s){return this.drawShape(new Lf(t,r,n,i,s))}drawCircle(t,r,n){return this.drawShape(new Ff(t,r,n))}drawEllipse(t,r,n,i){return this.drawShape(new Bf(t,r,n,i))}drawPolygon(...t){let r,n=!0;const i=t[0];i.points?(n=i.closeStroke,r=i.points):Array.isArray(t[0])?r=t[0]:r=t;const s=new ws(r);return s.closeStroke=n,this.drawShape(s),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Ge.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,r=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let i=0;i<n;i++){const s=t.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),c={vertexData:a,blendMode:r,indices:u,uvs:l,_batchRGB:Yt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=c}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const i=this.batches[r];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}}_renderDirect(t){const r=this._resolveDirectShader(t),n=this._geometry,i=this.worldAlpha,s=r.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,Yt.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),t.shader.bind(r),t.geometry.bind(n,r),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,n.drawCalls[a])}_renderDrawCallDirect(t,r){const{texArray:n,type:i,size:s,start:o}=r,a=n.count;for(let l=0;l<a;l++)t.texture.bind(n.elements[l],l);t.geometry.draw(i,s,o)}_resolveDirectShader(t){let r=this.shader;const n=this.pluginName;if(!r){if(!u0[n]){const{maxTextures:i}=t.plugins[n],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Zt,default:Xr.from({uSamplers:s},!0)},a=t.plugins[n]._shader.program;u0[n]=new En(a,o)}r=u0[n]}return r}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:r,minY:n,maxX:i,maxY:s}=t.bounds;this._bounds.addFrame(this.transform,r,n,i,s)}containsPoint(t){return this.worldTransform.applyInverse(t,Bc._TEMP_POINT),this._geometry.containsPoint(Bc._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const r=this.batches[t];r._tintRGB=Yt.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,u=this._geometry.points,c=this.vertexData;let h=0;for(let f=0;f<u.length;f+=2){const d=u[f],p=u[f+1];c[h++]=n*d+s*p+a,c[h++]=o*p+i*d+l}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Am.curves=na,Am._TEMP_POINT=new Bt;let Eo=Am;class PH{constructor(t,r){this.uvBuffer=t,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const c0=new Bt,J_=new ws,C4=class S4 extends Xe{constructor(t,r,n,i=yn.TRIANGLES){super(),this.geometry=t,this.shader=r,this.state=n||Nn.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=at.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===yn.TRIANGLES&&r.length<S4.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)}calculateVertices(){const t=this.geometry.buffers[0],r=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=this.vertexData;for(let f=0;f<h.length/2;f++){const d=r[f*2],p=r[f*2+1];h[f*2]=s*d+a*p+u,h[f*2+1]=o*d+l*p+c}if(this._roundPixels){const f=at.RESOLUTION;for(let d=0;d<h.length;++d)h[d]=Math.round(h[d]*f)/f}this.vertexDirty=n}calculateUvs(){const t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new PH(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,c0);const r=this.geometry.getBuffer("aVertexPosition").data,n=J_.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,u=i[a+1]*2,c=i[a+2]*2;if(n[0]=r[l],n[1]=r[l+1],n[2]=r[u],n[3]=r[u+1],n[4]=r[c],n[5]=r[c+1],J_.contains(c0.x,c0.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};C4.BATCHABLE_SIZE=100;let tv=C4;class kH extends Li{constructor(t,r,n){super();const i=new ge(t),s=new ge(r,!0),o=new ge(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,pt.FLOAT).addAttribute("aTextureCoord",s,2,!1,pt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var DH=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,NH=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class ev extends En{constructor(t,r){const n={uSampler:t,alpha:1,uTextureMatrix:Zt.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||ei.from(NH,DH),n),this._colorDirty=!1,this.uvMatrix=new W5(t),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new Yt(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Yt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class rv{constructor(t,r,n){this.geometry=new Li,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<t.length;++i){let s=t[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||pt.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let r=0;this.indexBuffer=new ge(rL(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new ge(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ge(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===pt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===pt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(t,r,n,s.type===pt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(t,r,n,s.type===pt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var OH=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,FH=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class M4 extends Uf{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Zt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:pt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=En.from(FH,OH,{}),this.state=Nn.for2d()}render(t){const r=t.children,n=t._maxSize,i=t._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!t.autoResize&&(o=n);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=r[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=S5(t.blendMode,u),s.state.set(this.state);const c=s.gl,h=t.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=Yt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let f=!1;for(let d=0,p=0;d<o;d+=i,p+=1){let m=o-d;m>i&&(m=i),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const g=a[p];g.uploadDynamic(r,d,m);const y=t._bufferUpdateIDs[p]||0;f=f||g._updateID<y,f&&(g._updateID=t._updateID,g.uploadStatic(r,d,m)),s.geometry.bind(g.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(t){const r=[],n=t._maxSize,i=t._batchSize,s=t._properties;for(let o=0;o<n;o+=i)r.push(new rv(this.properties,s,i));return r}_generateOneMoreBuffer(t){const r=t._batchSize,n=t._properties;return new rv(this.properties,n,r)}uploadVertices(t,r,n,i,s,o){let a=0,l=0,u=0,c=0;for(let h=0;h<n;++h){const f=t[r+h],d=f._texture,p=f.scale.x,m=f.scale.y,g=d.trim,y=d.orig;g?(l=g.x-f.anchor.x*y.width,a=l+g.width,c=g.y-f.anchor.y*y.height,u=c+g.height):(a=y.width*(1-f.anchor.x),l=y.width*-f.anchor.x,u=y.height*(1-f.anchor.y),c=y.height*-f.anchor.y),i[o]=l*p,i[o+1]=c*m,i[o+s]=a*p,i[o+s+1]=c*m,i[o+s*2]=a*p,i[o+s*2+1]=u*m,i[o+s*3]=l*p,i[o+s*3+1]=u*m,o+=s*4}}uploadPosition(t,r,n,i,s,o){for(let a=0;a<n;a++){const l=t[r+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(t,r,n,i,s,o){for(let a=0;a<n;a++){const l=t[r+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(t,r,n,i,s,o){for(let a=0;a<n;++a){const l=t[r+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(t,r,n,i,s,o){for(let a=0;a<n;++a){const l=t[r+a],u=Yt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}M4.extension={name:"particle",type:nt.RendererPlugin};ct.add(M4);var zf=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(zf||{});const uc={willReadFrequently:!0},un=class ht{static get experimentalLetterSpacingSupported(){let t=ht._experimentalLetterSpacingSupported;if(t!==void 0){const r=at.ADAPTER.getCanvasRenderingContext2D().prototype;t=ht._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return t}constructor(t,r,n,i,s,o,a,l,u){this.text=t,this.style=r,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(t,r,n,i=ht._canvas){n=n??r.wordWrap;const s=r.toFontString(),o=ht.measureFont(s);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=i.getContext("2d",uc);a.font=s;const l=(n?ht.wordWrap(t,r,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const m=ht._measureText(l[p],r.letterSpacing,a);u[p]=m,c=Math.max(c,m)}let h=c+r.strokeThickness;r.dropShadow&&(h+=r.dropShadowDistance);const f=r.lineHeight||o.fontSize+r.strokeThickness;let d=Math.max(f,o.fontSize+r.strokeThickness*2)+r.leading+(l.length-1)*(f+r.leading);return r.dropShadow&&(d+=r.dropShadowDistance),new ht(t,r,h,d,l,u,f+r.leading,c,o)}static _measureText(t,r,n){let i=!1;ht.experimentalLetterSpacingSupported&&(ht.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(t).width;return s>0&&(i?s-=r:s+=(ht.graphemeSegmenter(t).length-1)*r),s}static wordWrap(t,r,n=ht._canvas){const i=n.getContext("2d",uc);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:c}=r,h=ht.collapseSpaces(c),f=ht.collapseNewlines(c);let d=!h;const p=r.wordWrapWidth+u,m=ht.tokenize(t);for(let g=0;g<m.length;g++){let y=m[g];if(ht.isNewline(y)){if(!f){a+=ht.addLine(o),d=!h,o="",s=0;continue}y=" "}if(h){const _=ht.isBreakingSpace(y),v=ht.isBreakingSpace(o[o.length-1]);if(_&&v)continue}const b=ht.getFromCache(y,u,l,i);if(b>p)if(o!==""&&(a+=ht.addLine(o),o="",s=0),ht.canBreakWords(y,r.breakWords)){const _=ht.wordWrapSplit(y);for(let v=0;v<_.length;v++){let w=_[v],A=w,x=1;for(;_[v+x];){const T=_[v+x];if(!ht.canBreakChars(A,T,y,v,r.breakWords))w+=T;else break;A=T,x++}v+=x-1;const E=ht.getFromCache(w,u,l,i);E+s>p&&(a+=ht.addLine(o),d=!1,o="",s=0),o+=w,s+=E}}else{o.length>0&&(a+=ht.addLine(o),o="",s=0);const _=g===m.length-1;a+=ht.addLine(y,!_),d=!1,o="",s=0}else b+s>p&&(d=!1,a+=ht.addLine(o),o="",s=0),(o.length>0||!ht.isBreakingSpace(y)||d)&&(o+=y,s+=b)}return a+=ht.addLine(o,!1),a}static addLine(t,r=!0){return t=ht.trimRight(t),t=r?`${t}
`:t,t}static getFromCache(t,r,n,i){let s=n[t];return typeof s!="number"&&(s=ht._measureText(t,r,i)+r,n[t]=s),s}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let r=t.length-1;r>=0;r--){const n=t[r];if(!ht.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:ht._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,r){return typeof t!="string"?!1:ht._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const r=[];let n="";if(typeof t!="string")return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[i+1];if(ht.isBreakingSpace(s,o)||ht.isNewline(s)){n!==""&&(r.push(n),n=""),r.push(s);continue}n+=s}return n!==""&&r.push(n),r}static canBreakWords(t,r){return r}static canBreakChars(t,r,n,i,s){return!0}static wordWrapSplit(t){return ht.graphemeSegmenter(t)}static measureFont(t){if(ht._fonts[t])return ht._fonts[t];const r={ascent:0,descent:0,fontSize:0},n=ht._canvas,i=ht._context;i.font=t;const s=ht.METRICS_STRING+ht.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(ht.BASELINE_SYMBOL).width);const l=Math.ceil(ht.HEIGHT_MULTIPLIER*a);if(a=a*ht.BASELINE_MULTIPLIER|0,o===0||l===0)return ht._fonts[t]=r,r;n.width=o,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const u=i.getImageData(0,0,o,l).data,c=u.length,h=o*4;let f=0,d=0,p=!1;for(f=0;f<a;++f){for(let m=0;m<h;m+=4)if(u[d+m]!==255){p=!0;break}if(!p)d+=h;else break}for(r.ascent=a-f,d=c-h,p=!1,f=l;f>a;--f){for(let m=0;m<h;m+=4)if(u[d+m]!==255){p=!0;break}if(!p)d-=h;else break}return r.descent=f-a,r.fontSize=r.ascent+r.descent,ht._fonts[t]=r,r}static clearMetrics(t=""){t?delete ht._fonts[t]:ht._fonts={}}static get _canvas(){var t;if(!ht.__canvas){let r;try{const n=new OffscreenCanvas(0,0);if((t=n.getContext("2d",uc))!=null&&t.measureText)return ht.__canvas=n,n;r=at.ADAPTER.createCanvas()}catch{r=at.ADAPTER.createCanvas()}r.width=r.height=10,ht.__canvas=r}return ht.__canvas}static get _context(){return ht.__context||(ht.__context=ht._canvas.getContext("2d",uc)),ht.__context}};un.METRICS_STRING="|q",un.BASELINE_SYMBOL="M",un.BASELINE_MULTIPLIER=1.4,un.HEIGHT_MULTIPLIER=2,un.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(r=>r.segment)}return e=>[...e]})(),un.experimentalLetterSpacing=!1,un._fonts={},un._newlines=[10,13],un._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Ei=un;const BH=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],I4=class Ja{constructor(t){this.styleID=0,this.reset(),f0(this,t,t)}clone(){const t={};return f0(t,this,Ja.defaultStyle),new Ja(t)}reset(){f0(this,Ja.defaultStyle,Ja.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const r=h0(t);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const r=h0(t);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){LH(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const r=h0(t);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!BH.includes(i)&&(i=`"${i}"`),r[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${r.join(",")}`}};I4.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:zf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Gi=I4;function h0(e){const t=Yt.shared,r=n=>{const i=t.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(e)?e.map(r):r(e)}function LH(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function f0(e,t,r){for(const n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const UH={texture:!0,children:!1,baseTexture:!0},R4=class Em extends ma{constructor(t,r,n){let i=!1;n||(n=at.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=ft.from(n);s.orig=new xt,s.trim=new xt,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=Em.defaultResolution??at.RESOLUTION,this._autoResolution=Em.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return Ei.experimentalLetterSpacing}static set experimentalLetterSpacing(t){St("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Ei.experimentalLetterSpacing=t}updateText(t){const r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,i=Ei.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,u=i.lineWidths,c=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;let f,d;const p=r.dropShadow?2:1;for(let m=0;m<p;++m){const g=r.dropShadow&&m===0,y=g?Math.ceil(Math.max(1,o)+r.padding*2):0,b=y*this._resolution;if(g){n.fillStyle="black",n.strokeStyle="black";const v=r.dropShadowColor,w=r.dropShadowBlur*this._resolution,A=r.dropShadowDistance*this._resolution;n.shadowColor=Yt.shared.setValue(v).setAlpha(r.dropShadowAlpha).toRgbaString(),n.shadowBlur=w,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*A,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*A+b}else n.fillStyle=this._generateFillStyle(r,a,i),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let _=(l-h.fontSize)/2;l-h.fontSize<0&&(_=0);for(let v=0;v<a.length;v++)f=r.strokeThickness/2,d=r.strokeThickness/2+v*l+h.ascent+_,r.align==="right"?f+=c-u[v]:r.align==="center"&&(f+=(c-u[v])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(a[v],f+r.padding,d+r.padding-y,!0),r.fill&&this.drawLetterSpacing(a[v],f+r.padding,d+r.padding-y)}this.updateTexture()}drawLetterSpacing(t,r,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(Ei.experimentalLetterSpacingSupported&&(Ei.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(t,r,n):this.context.fillText(t,r,n);return}let a=r;const l=Ei.graphemeSegmenter(t);let u=this.context.measureText(t).width,c=0;for(let h=0;h<l.length;++h){const f=l[h];i?this.context.strokeText(f,a,n):this.context.fillText(f,a,n);let d="";for(let p=h+1;p<l.length;++p)d+=l[p];c=this.context.measureText(d).width,a+=u-c+s,u=c}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=oL(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const r=this._texture,n=this._style,i=n.trim?0:n.padding,s=r.baseTexture;r.trim.width=r._frame.width=t.width/this._resolution,r.trim.height=r._frame.height=t.height/this._resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-i*2,r.orig.height=r._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),r.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,r){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,r)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,r,n){const i=t.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,c=i.slice(),h=t.fillGradientStops.slice();if(!h.length){const f=c.length+1;for(let d=1;d<f;++d)h.push(d/f)}if(c.unshift(i[0]),h.unshift(0),c.push(i[i.length-1]),h.push(1),t.fillGradientType===zf.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);const f=n.fontProperties.fontSize+t.strokeThickness;for(let d=0;d<r.length;d++){const p=n.lineHeight*(d-1)+f,m=n.lineHeight*d;let g=m;d>0&&p>m&&(g=(m+p)/2);const y=m+f,b=n.lineHeight*(d+1);let _=y;d+1<r.length&&b<y&&(_=(y+b)/2);const v=(_-g)/u;for(let w=0;w<c.length;w++){let A=0;typeof h[w]=="number"?A=h[w]:A=w/c.length;let x=Math.min(1,Math.max(0,g/u+A*v));x=Number(x.toFixed(5)),s.addColorStop(x,c[w])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);const f=c.length+1;let d=1;for(let p=0;p<c.length;p++){let m;typeof h[p]=="number"?m=h[p]:m=d/f,s.addColorStop(m,c[p]),d++}}return s}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},UH,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const r=Ii(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const r=Ii(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof Gi?this._style=t:this._style=new Gi(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};R4.defaultAutoResolution=!0;let P4=R4;class GH{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function HH(e,t){var n;let r=!1;if((n=e==null?void 0:e._textures)!=null&&n.length){for(let i=0;i<e._textures.length;i++)if(e._textures[i]instanceof ft){const s=e._textures[i].baseTexture;t.includes(s)||(t.push(s),r=!0)}}return r}function zH(e,t){if(e.baseTexture instanceof vt){const r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function VH(e,t){if(e._texture&&e._texture instanceof ft){const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function WH(e,t){return t instanceof P4?(t.updateText(!0),!0):!1}function XH(e,t){if(t instanceof Gi){const r=t.toFontString();return Ei.measureFont(r),!0}return!1}function $H(e,t){if(e instanceof P4){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function jH(e,t){return e instanceof Gi?(t.includes(e)||t.push(e),!0):!1}const k4=class D4{constructor(t){this.limiter=new GH(D4.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook($H),this.registerFindHook(jH),this.registerFindHook(HH),this.registerFindHook(zH),this.registerFindHook(VH),this.registerUploadHook(WH),this.registerUploadHook(XH)}upload(t){return new Promise(r=>{t&&this.add(t),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,hr.system.addOnce(this.tick,this,Us.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let r=!1;if(t&&!t._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)hr.system.addOnce(this.tick,this,Us.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let r=0,n=t.length;r<n;r++)t[r]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](t,this.queue);r++);if(t instanceof Xe)for(let r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this}destroy(){this.ticking&&hr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};k4.uploadsPerFrame=4;let Cm=k4;Object.defineProperties(at,{UPLOADS_PER_FRAME:{get(){return Cm.uploadsPerFrame},set(e){St("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Cm.uploadsPerFrame=e}}});function N4(e,t){return t instanceof vt?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function YH(e,t){if(!(t instanceof Eo))return!1;const{geometry:r}=t;t.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&N4(e,s.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function qH(e,t){return e instanceof Eo?(t.push(e),!0):!1}class O4 extends Cm{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(qH),this.registerUploadHook(N4),this.registerUploadHook(YH)}}O4.extension={name:"prepare",type:nt.RendererSystem};ct.add(O4);var ZH=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,KH=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,QH=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,nv=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,JH=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const cc=new Zt;class F4 extends Uf{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new G5,this.state=Nn.for2d()}contextChange(){const t=this.renderer,r={globals:t.globalUniforms};this.simpleShader=En.from(nv,JH,r),this.shader=t.context.webGLVersion>1?En.from(KH,ZH,r):En.from(nv,QH,r)}render(t){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=t._texture,l=a.baseTexture,u=l.alphaMode>0,c=t.tileTransform.localTransform,h=t.uvMatrix;let f=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;f&&(l._glTextures[r.CONTEXT_UID]?f=l.wrapMode!==ki.CLAMP:l.wrapMode===ki.CLAMP&&(l.wrapMode=ki.REPEAT));const d=f?this.simpleShader:this.shader,p=a.width,m=a.height,g=t._width,y=t._height;cc.set(c.a*p/g,c.b*p/y,c.c*m/g,c.d*m/y,c.tx/g,c.ty/y),cc.invert(),f?cc.prepend(h.mapCoord):(d.uniforms.uMapCoord=h.mapCoord.toArray(!0),d.uniforms.uClampFrame=h.uClampFrame,d.uniforms.uClampOffset=h.uClampOffset),d.uniforms.uTransform=cc.toArray(!0),d.uniforms.uColor=Yt.shared.setValue(t.tint).premultiply(t.worldAlpha,u).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,r.shader.bind(d),r.geometry.bind(n),this.state.blendMode=S5(t.blendMode,u),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}F4.extension={name:"tilingSprite",type:nt.RendererPlugin};ct.add(F4);const B4=class tl{constructor(t,r,n=null){this.linkedSheets=[],this._texture=t instanceof ft?t:null,this.baseTexture=t instanceof vt?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;const i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:r}=this.data.meta;let n=li(t,null);return n===null&&(n=parseFloat(r??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=tl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let r=t;const n=tl.BATCH_SIZE;for(;r-t<n&&r<this._frameKeys.length;){const i=this._frameKeys[r],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new xt(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new xt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new xt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new ft(this.baseTexture,a,c,l,s.rotated?2:0,s.anchor,s.borders),ft.addToCache(this.textures[i],i.toString())}r++}}_processAnimations(){const t=this.data.animations||{};for(const r in t){this.animations[r]=[];for(let n=0;n<t[r].length;n++){const i=t[r][n];this.animations[r].push(this.textures[i])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*tl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*tl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var r;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((r=this._texture)==null||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};B4.BATCH_SIZE=1e3;let iv=B4;const tz=["jpg","png","jpeg","avif","webp"];function L4(e,t,r){const n={};if(e.forEach(i=>{n[i]=t}),Object.keys(t.textures).forEach(i=>{n[i]=t.textures[i]}),!r){const i=Ce.dirname(e[0]);t.linkedSheets.forEach((s,o)=>{const a=L4([`${i}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const ez={extension:nt.Asset,cache:{test:e=>e instanceof iv,getCacheableAssets:(e,t)=>L4(e,t,!1)},resolver:{test:e=>{const t=e.split("?")[0].split("."),r=t.pop(),n=t.pop();return r==="json"&&tz.includes(n)},parse:e=>{var r;const t=e.split(".");return{resolution:parseFloat(((r=at.RETINA_PREFIX.exec(e))==null?void 0:r[1])??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:nt.LoadParser,priority:Jr.Normal},async testParse(e,t){return Ce.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,r){var l,u;let n=Ce.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+e.meta.image;i=xm(i,t.src);const s=(await r.load([i]))[i],o=new iv(s.baseTexture,e,t.src);await o.parse();const a=(l=e==null?void 0:e.meta)==null?void 0:l.related_multi_packs;if(Array.isArray(a)){const c=[];for(const f of a){if(typeof f!="string")continue;let d=n+f;(u=t.data)!=null&&u.ignoreMultiPack||(d=xm(d,t.src),c.push(r.load({src:d,data:{ignoreMultiPack:!0}})))}const h=await Promise.all(c);o.linkedSheets=h,h.forEach(f=>{f.linkedSheets=[o].concat(o.linkedSheets.filter(d=>d!==f))})}return o},unload(e){e.destroy(!0)}}};ct.add(ez);class Gh{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Lc{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const r=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const c=a[u].split("="),h=c[0],f=c[1].replace(/"/gm,""),d=parseFloat(f),p=isNaN(d)?f:d;l[h]=p}n[o].push(l)}const i=new Gh;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class Sm{static test(t){const r=t;return typeof t!="string"&&"getElementsByTagName"in t&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const r=new Gh,n=t.getElementsByTagName("info"),i=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let u=0;u<n.length;u++)r.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)r.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)r.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const c=o[u];r.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)r.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)r.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return r}}class Mm{static test(t){return typeof t=="string"&&t.includes("<font>")?Sm.test(at.ADAPTER.parseXML(t)):!1}static parse(t){return Sm.parse(at.ADAPTER.parseXML(t))}}const d0=[Lc,Sm,Mm];function rz(e){for(let t=0;t<d0.length;t++)if(d0[t].test(e))return d0[t];return null}function nz(e,t,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=e.width/n-l-u*2,h=e.height/n-l-u*2,f=o.slice(),d=r.fillGradientStops.slice();if(!d.length){const p=f.length+1;for(let m=1;m<p;++m)d.push(m/p)}if(f.unshift(o[0]),d.unshift(0),f.push(o[o.length-1]),d.push(1),r.fillGradientType===zf.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,u,c/2,h+u);let p=0;const m=(s.fontProperties.fontSize+r.strokeThickness)/h;for(let g=0;g<i.length;g++){const y=s.lineHeight*g;for(let b=0;b<f.length;b++){let _=0;typeof d[b]=="number"?_=d[b]:_=b/f.length;const v=y/h+_*m;let w=Math.max(p,v);w=Math.min(w,1),a.addColorStop(w,f[b]),p=w}}}else{a=t.createLinearGradient(u,h/2,c+u,h/2);const p=f.length+1;let m=1;for(let g=0;g<f.length;g++){let y;typeof d[g]=="number"?y=d[g]:y=m/p,a.addColorStop(y,f[g]),m++}}return a}function iz(e,t,r,n,i,s,o){const a=r.text,l=r.fontProperties;t.translate(n,i),t.scale(s,s);const u=o.strokeThickness/2,c=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=nz(e,t,o,s,[a],r),t.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,f=o.dropShadowBlur*s,d=o.dropShadowDistance*s;t.shadowColor=Yt.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*d,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*d}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,u,c+r.lineHeight-l.descent),o.fill&&t.fillText(a,u,c+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Uc(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function U4(e){return Array.from?Array.from(e):e.split("")}function sz(e){typeof e=="string"&&(e=[e]);const t=[];for(let r=0,n=e.length;r<n;r++){const i=e[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...U4(i))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const wi=class cn{constructor(t,r,n){var c;const[i]=t.info,[s]=t.common,[o]=t.page,[a]=t.distanceField,l=li(o.file),u={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let h=0;h<t.page.length;h++){const{id:f,file:d}=t.page[h];u[f]=r instanceof Array?r[h]:r[d],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[f].baseTexture.alphaMode=rr.NO_PREMULTIPLIED_ALPHA,u[f].baseTexture.mipmap=In.OFF)}for(let h=0;h<t.char.length;h++){const{id:f,page:d}=t.char[h];let{x:p,y:m,width:g,height:y,xoffset:b,yoffset:_,xadvance:v}=t.char[h];p/=l,m/=l,g/=l,y/=l,b/=l,_/=l,v/=l;const w=new xt(p+u[d].frame.x/l,m+u[d].frame.y/l,g,y);this.chars[f]={xOffset:b,yOffset:_,xAdvance:v,kerning:{},texture:new ft(u[d].baseTexture,w),page:d}}for(let h=0;h<t.kerning.length;h++){let{first:f,second:d,amount:p}=t.kerning[h];f/=l,d/=l,p/=l,this.chars[d]&&(this.chars[d].kerning[f]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((c=a==null?void 0:a.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,r,n){let i;if(t instanceof Gh)i=t;else{const o=rz(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}r instanceof ft&&(r=[r]);const s=new cn(i,r,n);return cn.available[s.font]=s,s}static uninstall(t){const r=cn.available[t];if(!r)throw new Error(`No font found named '${t}'`);r.destroy(),delete cn.available[t]}static from(t,r,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},cn.defaultOptions,n),c=sz(i),h=r instanceof Gi?r:new Gi(r),f=a,d=new Gh;d.info[0]={face:h.fontFamily,size:h.fontSize},d.common[0]={lineHeight:h.fontSize};let p=0,m=0,g,y,b,_=0;const v=[];for(let A=0;A<c.length;A++){g||(g=at.ADAPTER.createCanvas(),g.width=a,g.height=l,y=g.getContext("2d"),b=new vt(g,{resolution:o,...u}),v.push(new ft(b)),d.page.push({id:v.length-1,file:""}));const x=c[A],E=Ei.measureText(x,h,!1,g),T=E.width,M=Math.ceil(E.height),P=Math.ceil((h.fontStyle==="italic"?2:1)*T);if(m>=l-M*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${x}')`);--A,g=null,y=null,b=null,m=0,p=0,_=0;continue}if(_=Math.max(M+E.fontProperties.descent,_),P*o+p>=f){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${x}')`);--A,m+=_*o,m=Math.ceil(m),p=0,_=0;continue}iz(g,y,E,p,m,o,h);const R=Uc(E.text);d.char.push({id:R,page:v.length-1,x:p/o,y:m/o,width:P,height:M,xoffset:0,yoffset:0,xadvance:T-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),p+=(P+2*s)*o,p=Math.ceil(p)}if(!(n!=null&&n.skipKerning))for(let A=0,x=c.length;A<x;A++){const E=c[A];for(let T=0;T<x;T++){const M=c[T],P=y.measureText(E).width,R=y.measureText(M).width,S=y.measureText(E+M).width-(P+R);S&&d.kerning.push({first:Uc(E),second:Uc(M),amount:S})}}const w=new cn(d,v,!0);return cn.available[t]!==void 0&&cn.uninstall(t),cn.available[t]=w,w}};wi.ALPHA=[["a","z"],["A","Z"]," "],wi.NUMERIC=[["0","9"]],wi.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],wi.ASCII=[[" ","~"]],wi.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:wi.ALPHANUMERIC},wi.available={};let xi=wi;var oz=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,az=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const sv=[],ov=[],av=[],lz=class G4 extends Xe{constructor(t,r={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},G4.styleDefaults,r);if(!xi.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new Yt(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new ti(()=>{this.dirty=!0},this,0,0),this._roundPixels=at.ROUND_PIXELS,this.dirty=!0,this._resolution=at.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var P;const t=xi.available[this._fontName],r=this.fontSize,n=r/t.size,i=new Bt,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=U4(l),c=this._maxWidth*t.size/r,h=t.distanceFieldType==="none"?sv:ov;let f=null,d=0,p=0,m=0,g=-1,y=0,b=0,_=0,v=0;for(let R=0;R<u.length;R++){const S=u[R],C=Uc(S);if(/(?:\s)/.test(S)&&(g=R,y=d,v++),S==="\r"||S===`
`){o.push(d),a.push(-1),p=Math.max(p,d),++m,++b,i.x=0,i.y+=t.lineHeight,f=null,v=0;continue}const I=t.chars[C];if(!I)continue;f&&I.kerning[f]&&(i.x+=I.kerning[f]);const F=av.pop()||{texture:ft.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Bt};F.texture=I.texture,F.line=m,F.charCode=C,F.position.x=Math.round(i.x+I.xOffset+this._letterSpacing/2),F.position.y=Math.round(i.y+I.yOffset),F.prevSpaces=v,s.push(F),d=F.position.x+Math.max(I.xAdvance-I.xOffset,I.texture.orig.width),i.x+=I.xAdvance+this._letterSpacing,_=Math.max(_,I.yOffset+I.texture.height),f=C,g!==-1&&c>0&&i.x>c&&(++b,Bo(s,1+g-b,1+R-g),R=g,g=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,y),m++,i.x=0,i.y+=t.lineHeight,f=null,v=0)}const w=u[u.length-1];w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(d=y),o.push(d),p=Math.max(p,d),a.push(-1));const A=[];for(let R=0;R<=m;R++){let S=0;this._align==="right"?S=p-o[R]:this._align==="center"?S=(p-o[R])/2:this._align==="justify"&&(S=a[R]<0?0:(p-o[R])/a[R]),A.push(S)}const x=s.length,E={},T=[],M=this._activePagesMeshData;h.push(...M);for(let R=0;R<x;R++){const S=s[R].texture,C=S.baseTexture.uid;if(!E[C]){let I=h.pop();if(!I){const H=new kH;let X,Z;t.distanceFieldType==="none"?(X=new ev(ft.EMPTY),Z=yt.NORMAL):(X=new ev(ft.EMPTY,{program:ei.from(az,oz),uniforms:{uFWidth:0}}),Z=yt.NORMAL_NPM);const D=new tv(H,X);D.blendMode=Z,I={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:D,vertices:null,uvs:null,indices:null}}I.index=0,I.indexCount=0,I.vertexCount=0,I.uvsCount=0,I.total=0;const{_textureCache:F}=this;F[C]=F[C]||new ft(S.baseTexture),I.mesh.texture=F[C],I.mesh.tint=this._tintColor.value,T.push(I),E[C]=I}E[C].total++}for(let R=0;R<M.length;R++)T.includes(M[R])||this.removeChild(M[R].mesh);for(let R=0;R<T.length;R++)T[R].mesh.parent!==this&&this.addChild(T[R].mesh);this._activePagesMeshData=T;for(const R in E){const S=E[R],C=S.total;if(!(((P=S.indices)==null?void 0:P.length)>6*C)||S.vertices.length<tv.BATCHABLE_SIZE*2)S.vertices=new Float32Array(4*2*C),S.uvs=new Float32Array(4*2*C),S.indices=new Uint16Array(6*C);else{const I=S.total,F=S.vertices;for(let H=I*4*2;H<F.length;H++)F[H]=0}S.mesh.size=6*C}for(let R=0;R<x;R++){const S=s[R];let C=S.position.x+A[S.line]*(this._align==="justify"?S.prevSpaces:1);this._roundPixels&&(C=Math.round(C));const I=C*n,F=S.position.y*n,H=S.texture,X=E[H.baseTexture.uid],Z=H.frame,D=H._uvs,O=X.index++;X.indices[O*6+0]=0+O*4,X.indices[O*6+1]=1+O*4,X.indices[O*6+2]=2+O*4,X.indices[O*6+3]=0+O*4,X.indices[O*6+4]=2+O*4,X.indices[O*6+5]=3+O*4,X.vertices[O*8+0]=I,X.vertices[O*8+1]=F,X.vertices[O*8+2]=I+Z.width*n,X.vertices[O*8+3]=F,X.vertices[O*8+4]=I+Z.width*n,X.vertices[O*8+5]=F+Z.height*n,X.vertices[O*8+6]=I,X.vertices[O*8+7]=F+Z.height*n,X.uvs[O*8+0]=D.x0,X.uvs[O*8+1]=D.y0,X.uvs[O*8+2]=D.x1,X.uvs[O*8+3]=D.y1,X.uvs[O*8+4]=D.x2,X.uvs[O*8+5]=D.y2,X.uvs[O*8+6]=D.x3,X.uvs[O*8+7]=D.y3}this._textWidth=p*n,this._textHeight=(i.y+t.lineHeight)*n;for(const R in E){const S=E[R];if(this.anchor.x!==0||this.anchor.y!==0){let H=0;const X=this._textWidth*this.anchor.x,Z=this._textHeight*this.anchor.y;for(let D=0;D<S.total;D++)S.vertices[H++]-=X,S.vertices[H++]-=Z,S.vertices[H++]-=X,S.vertices[H++]-=Z,S.vertices[H++]-=X,S.vertices[H++]-=Z,S.vertices[H++]-=X,S.vertices[H++]-=Z}this._maxLineHeight=_*n;const C=S.mesh.geometry.getBuffer("aVertexPosition"),I=S.mesh.geometry.getBuffer("aTextureCoord"),F=S.mesh.geometry.getIndex();C.data=S.vertices,I.data=S.uvs,F.data=S.indices,C.update(),I.update(),F.update()}for(let R=0;R<s.length;R++)av.push(s[R]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:r,distanceFieldType:n,size:i}=xi.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),c=Math.sqrt(a*a+l*l),h=(Math.abs(u)+Math.abs(c))/2,f=this.fontSize/i,d=t._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=h*r*f*d}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=xi.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!xi.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??xi.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:r}=this,n=xi.available[this._fontName].distanceFieldType==="none"?sv:ov;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>r[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=ft.EMPTY});for(const i in r)r[i].destroy(),delete r[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};lz.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const uz=[".xml",".fnt"],cz={extension:{type:nt.LoadParser,priority:Jr.Normal},name:"loadBitmapFont",test(e){return uz.includes(Ce.extname(e).toLowerCase())},async testParse(e){return Lc.test(e)||Mm.test(e)},async parse(e,t,r){const n=Lc.test(e)?Lc.parse(e):Mm.parse(e),{src:i}=t,{page:s}=n,o=[];for(let u=0;u<s.length;++u){const c=s[u].file;let h=Ce.join(Ce.dirname(i),c);h=xm(h,i),o.push(h)}const a=await r.load(o),l=o.map(u=>a[u]);return xi.install(n,l,!0)},async load(e,t){return(await at.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};ct.add(cz);const Im=class vo extends Gi{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new vo(Object.keys(vo.defaultOptions).reduce((r,n)=>({...r,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete vo.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,r={}){const{availableFonts:n}=vo;if(n[t]){const i=n[t];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return at.ADAPTER.fetch(t).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Ce.basename(t,Ce.extname(t)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:t,fontFace:null},r);n[t]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const r=t.filter(n=>!this._overrides.includes(n));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(...t){const r=t.filter(n=>this._overrides.includes(n));r.length>0&&(this._overrides=this._overrides.filter(n=>!r.includes(n)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,r)=>`${t}
            @font-face {
                font-family: "${r.family}";
                src: url('${r.dataSrc}');
                font-weight: ${r.weight};
                font-style: ${r.style};
                font-display: ${r.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=tL(t)),typeof t=="number"?JB(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const r=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&r<1&&(t+=(r*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${s} ${t}`}reset(){Object.assign(this,vo.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(r=>setTimeout(r,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=at.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Im.availableFonts={},Im.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let p0=Im;const hc=class wo extends ma{constructor(t="",r={}){super(ft.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=ft.from(n,{scaleMode:at.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new xt,i.trim=new xt,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),c=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=wo.defaultMaxWidth,this.maxHeight=wo.defaultMaxHeight,this._domElement=u,this._styleElement=c,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=wo.defaultAutoResolution,this._resolution=wo.defaultResolution??at.RESOLUTION,this.text=t,this.style=r}measureText(t){var c,h;const{text:r,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:r,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(c=this._style)==null?void 0:c.toCSS(i)}),this._styleElement.textContent=(h=this._style)==null?void 0:h.toGlobalCSS()),{width:l+n.padding*2,height:u+n.padding*2}}async updateText(t=!0){const{style:r,_image:n,_loadImage:i}=this;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&t)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await r.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:r,_image:n,resolution:i}=this,{padding:s}=t,{baseTexture:o}=r;r.trim.width=r._frame.width=n.width/i,r.trim.height=r._frame.height=n.height/i,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var n,i,s,o,a;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},wo.defaultDestroyOptions,t),super.destroy(t);const r=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=r,(i=this._svgRoot)==null||i.remove(),this._svgRoot=r,(s=this._domElement)==null||s.remove(),this._domElement=r,(o=this._foreignObject)==null||o.remove(),this._foreignObject=r,(a=this._styleElement)==null||a.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const r=Ii(this.scale.x)||1;this.scale.x=r*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const r=Ii(this.scale.y)||1;this.scale.y=r*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof p0?(this.ownsStyle=!1,this._style=t):t instanceof Gi?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=p0.from(t)):(this.ownsStyle=!0,this._style=new p0(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};hc.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},hc.defaultMaxWidth=2024,hc.defaultMaxHeight=2024,hc.defaultAutoResolution=!0;function hz(e){let t,r,n,i;const s=e[4].default,o=re(s,e,e[3],null);return{c(){t=V("div"),r=V("canvas"),n=ot(),o&&o.c(),G(t,"class","w-full h-full")},m(a,l){tt(a,t,l),N(t,r),e[5](r),N(t,n),o&&o.m(t,null),e[6](t),i=!0},p(a,[l]){o&&o.p&&(!i||l&8)&&ie(o,s,a,a[3],i?ne(s,a[3],l,null):se(a[3]),null)},i(a){i||(W(o,a),i=!0)},o(a){$(o,a),i=!1},d(a){a&&J(t),e[5](null),o&&o.d(a),e[6](null)}}}function fz(e,t,r){let n,{$$slots:i={},$$scope:s}=t,o,a;const l=Ie();_t(e,l,h=>r(7,n=h)),zo("pixiApp",l),Q2(()=>{Ue(l,n=new b4({background:"#000",backgroundAlpha:1,resizeTo:a,autoDensity:!0,antialias:!0,resolution:2,view:o,autoStart:!1}),n)});function u(h){zt[h?"unshift":"push"](()=>{o=h,r(0,o)})}function c(h){zt[h?"unshift":"push"](()=>{a=h,r(1,a)})}return e.$$set=h=>{"$$scope"in h&&r(3,s=h.$$scope)},[o,a,l,s,i,u,c]}class dz extends Qt{constructor(t){super(),Kt(this,t,fz,hz,Gt,{})}}function pz(e,t,r){let n,i,s,{nodes:o=[]}=t,{edges:a=[]}=t,{width:l}=t,{height:u}=t;const c=$r("pixiApp");_t(e,c,v=>r(11,s=v));const h=Xm();let f,d,p=new Xe,m=new Xe,g=new Xe,y=new Xe,b=new Xe,_=nu();return PA(()=>{try{s&&(s.stage.removeChild(p),s.stage.removeChild(m),s.stage.removeChild(g),s.stage.removeChild(y),s.stage.removeChild(b))}catch(v){console.log("error",v)}r(7,p=void 0),r(8,y=void 0),b=void 0,s&&s.render()}),e.$$set=v=>{"nodes"in v&&r(1,o=v.nodes),"edges"in v&&r(2,a=v.edges),"width"in v&&r(3,l=v.width),"height"in v&&r(4,u=v.height)},e.$$.update=()=>{if(e.$$.dirty&2&&r(10,n=_l(o,"id")),e.$$.dirty&4&&r(9,i=_l(a,"id")),e.$$.dirty&4094&&s){r(5,f=s.stage),r(6,d=s.renderer),d.resize(l,u);let v=!1,w=!1;if(p.children.length===0){const x=Ee(o,M=>M.size),E=Math.min(x[0]/5,.5),T=Math.min(x[1]/20,2);_.domain(x).range([E,T]),o.forEach((M,P)=>{let R=new Eo;R.beginFill(M.color),R.lineStyle(_(M.size)*M.seed?4:.5,M.borderColor,.5),R.drawCircle(0,0,M.size),R.endFill(),R.position.set(M.x,M.y),R.cursor="pointer",R.eventMode="static",R.alpha=0,R.on("mouseover",()=>{h("node-mouseover",M.id)}).on("mouseout",()=>{h("node-mouseout",M.id)}).on("click",()=>{h("node-click",M.id)}),R.id=M.id,p.addChild(R);let S=new Eo;S.beginFill("rgba(255,255,255,0.2)"),S.drawCircle(M.x,M.y,M.size*1.15),S.endFill(),S.id=M.id,m.addChild(S)}),v=!0}Ua(g.children,x=>{g.removeChild(x)}),!Pi(n)&&p.children.length>0&&Ua(p.children,x=>{const E=n[x.id];if(E.hidden?(x.alpha=0,x.eventMode="none"):E.marked?(x.alpha=.1,x.tint=11184810,x.eventMode="none"):(x.alpha=1,x.tint=16777215,x.eventMode="static"),E.selected){let T=new Eo;T.lineStyle(1,"#fff",.5),T.beginFill("transparent"),T.drawCircle(E.x,E.y,Math.max(E.size*1.5,E.size+2)),T.endFill(),T.id=E.id,T.eventMode="none",g.addChild(T)}}),!Pi(n)&&m.children.length>0&&Ua(m.children,x=>{n[x.id].hidden?(x.tint=0,x.alpha=0):(x.tint=0,x.alpha=1)}),y.children.length===0&&(a.forEach(x=>{let E=new Eo;E.lineStyle(x.size,x.color,x.opacity),E.moveTo(x.source.x,x.source.y),E.lineTo(x.target.x,x.target.y),E.id=x.id,E.alpha=0,y.addChild(E)}),w=!0),!Pi(i)&&y.children.length>0&&Ua(y.children,x=>{const E=i[x.id];E.hidden?(x.alpha=0,x.tint=16777215):E.marked?(x.alpha=.1,x.tint=11184810):(x.alpha=1,x.tint=16777215)}),v&&w&&f.addChild(y,m,g,p);let A=Math.min(l/p.width,u/p.height);f.scale.set(A,A),r(5,f.x=(l-p.width*A)/2,f),r(5,f.y=(u-p.height*A)/2,f),s.render()}},[c,o,a,l,u,f,d,p,y,i,n,s]}class mz extends Qt{constructor(t){super(),Kt(this,t,pz,null,Gt,{nodes:1,edges:2,width:3,height:4})}}function lv(e,t,r){const n=e.slice();return n[23]=t[r],n}function gz(e){let t,r;return t=new mz({props:{nodes:e[0],edges:e[3],width:e[2],height:e[1]}}),t.$on("node-mouseover",e[14]),t.$on("node-mouseout",e[15]),t.$on("node-click",e[16]),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,i){const s={};i&1&&(s.nodes=n[0]),i&8&&(s.edges=n[3]),i&4&&(s.width=n[2]),i&2&&(s.height=n[1]),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function uv(e){let t,r,n,i,s=e[23].label+"",o,a;return{c(){t=V("div"),r=V("span"),n=V("span"),i=ot(),o=Ht(s),a=ot(),G(n,"class","w-2 h-2 inline-block rounded-md"),AA(n,"background-color",e[23].color),G(t,"class","space-x-3")},m(l,u){tt(l,t,u),N(t,r),N(r,n),N(r,i),N(r,o),N(t,a)},p:qt,d(l){l&&J(t)}}}function yz(e){let t,r,n,i,s,o,a,l,u,c,h,f,d,p;r=new dz({props:{$$slots:{default:[gz]},$$scope:{ctx:e}}});let m=Vc(e[4]),g=[];for(let y=0;y<m.length;y+=1)g[y]=uv(lv(e,m,y));return{c(){t=V("div"),Ft(r.$$.fragment),n=ot(),i=V("div"),s=V("div"),o=V("ul"),a=V("li"),a.innerHTML="<strong>Circle Size</strong><br/> Global Score",l=ot(),u=V("li"),c=V("strong"),c.textContent="Circle Color",h=V("br");for(let y=0;y<g.length;y+=1)g[y].c();f=ot(),d=V("li"),d.innerHTML="<strong>Line Color</strong><br/> Target node type",G(o,"class","space-y-2"),G(i,"class","bg-black text-white border border-gray-800 px-4 py-2 rounded-md shadow-md | absolute bottom-4 left-4 | text-sm"),G(t,"class","network h-full w-full absolute bg-black")},m(y,b){tt(y,t,b),kt(r,t,null),N(t,n),N(t,i),N(i,s),N(s,o),N(o,a),N(o,l),N(o,u),N(u,c),N(u,h);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(u,null);N(o,f),N(o,d),p=!0},p(y,[b]){const _={};if(b&67108879&&(_.$$scope={dirty:b,ctx:y}),r.$set(_),b&16){m=Vc(y[4]);let v;for(v=0;v<m.length;v+=1){const w=lv(y,m,v);g[v]?g[v].p(w,b):(g[v]=uv(w),g[v].c(),g[v].m(u,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=m.length}},i(y){p||(W(r.$$.fragment,y),p=!0)},o(y){$(r.$$.fragment,y),p=!1},d(y){y&&J(t),Dt(r),Z2(g,y)}}}const cv=20;function bz(e,t,r){let n,i,s,o,a,l,u,{nodes:c=[]}=t,{edges:h=[]}=t,{width:f=800}=t,{height:d=600}=t,{hoveredNode:p=""}=t,{selectedNode:m=""}=t,g=$r("theme");const y={top:30,right:30,bottom:30,left:30},b=db(),_=nu(),v=db(),w=wn(g.colors.scale.nodes,(T,M)=>({label:M=="true"?"Curated Nodes":"Interactions Node",color:T}));function A(T){ut.call(this,e,T)}function x(T){ut.call(this,e,T)}function E(T){ut.call(this,e,T)}return e.$$set=T=>{"nodes"in T&&r(5,c=T.nodes),"edges"in T&&r(6,h=T.edges),"width"in T&&r(7,f=T.width),"height"in T&&r(8,d=T.height),"hoveredNode"in T&&r(9,p=T.hoveredNode),"selectedNode"in T&&r(10,m=T.selectedNode)},e.$$.update=()=>{e.$$.dirty&32&&r(12,n=Ee(c,T=>T.score)),e.$$.dirty&64&&r(13,i=Ee(h,T=>T.weight)),e.$$.dirty&128&&r(2,s=f-y.left-y.right),e.$$.dirty&256&&r(1,o=d-y.top-y.bottom),e.$$.dirty&12384&&c.length!==0&&h.length!==0&&(b.range([.5,cv]).domain(i),_.range([.2,.9]).domain(i),v.range([1,cv]).domain(n)),e.$$.dirty&38&&r(0,a=eg(wn(c,T=>({...T,x:T.x*s+y.left,y:T.y*o+y.top,size:v(T.score),color:g.colors.scale.nodes[T.curated],borderColor:T.seed?"#F3FF7A":"#000",seed:T.seed})),["selected","size"])),e.$$.dirty&1&&r(11,l=_l(a,"id")),e.$$.dirty&2112&&r(3,u=Pi(l)?[]:wn(h,T=>({...T,source:l[T.source],target:l[T.target],size:b(T.weight)/2,color:g.colors.scale.edge,opacity:_(T.weight)})))},[a,o,s,u,w,c,h,f,d,p,m,l,n,i,A,x,E]}class _z extends Qt{constructor(t){super(),Kt(this,t,bz,yz,Gt,{nodes:5,edges:6,width:7,height:8,hoveredNode:9,selectedNode:10})}}function vz(e){let t;return{c(){t=V("div"),t.innerHTML='<div class="spinner svelte-50mhat"><div class="spinner__bounce1 svelte-50mhat"></div> <div class="spinner__bounce2 svelte-50mhat"></div> <div class="spinner__bounce3 svelte-50mhat"></div></div>',G(t,"class","loader svelte-50mhat")},m(r,n){tt(r,t,n)},p:qt,i:qt,o:qt,d(r){r&&J(t)}}}class wz extends Qt{constructor(t){super(),Kt(this,t,null,vz,Gt,{})}}function xz(e){let t,r,n,i,s,o,a,l,u,c,h,f,d,p;return{c(){t=He("svg"),r=He("path"),n=He("path"),i=He("path"),s=He("path"),o=He("path"),a=He("path"),l=He("path"),u=He("path"),c=He("path"),h=He("path"),f=He("path"),d=He("path"),p=He("path"),G(r,"d","M8.26167 18.2391C7.77144 18.3925 7.24964 18.4767 6.70979 18.4767C3.84964 18.4767 1.53235 16.1579 1.53235 13.2993C1.53235 10.4406 3.85114 8.12181 6.70979 8.12181C6.95791 8.12181 7.20302 8.13985 7.44212 8.17444C7.45866 8.17745 7.4752 8.17895 7.49174 8.18045C7.60753 8.1985 7.72182 8.21955 7.8346 8.24511C7.85866 8.25113 7.88272 8.25715 7.90828 8.26316C7.99701 8.28421 8.08422 8.30677 8.16994 8.33233C8.20152 8.34136 8.23159 8.35038 8.26317 8.3609C8.35189 8.38947 8.43911 8.41955 8.52633 8.45113C8.54588 8.45865 8.56543 8.46466 8.58498 8.47218C8.69024 8.51278 8.7955 8.5579 8.89776 8.60602C8.91731 8.61504 8.93535 8.62406 8.9534 8.63308C9.0361 8.67218 9.11731 8.71429 9.19851 8.7594C9.22558 8.77444 9.25415 8.78948 9.28122 8.80602C9.35791 8.84963 9.4331 8.89624 9.50828 8.94436C10.0842 9.31429 10.582 9.79399 10.9714 10.3564C12.9338 10.209 14.4797 8.56993 14.4797 6.56993C14.4797 4.56993 12.779 2.77293 10.6827 2.77293C8.58648 2.77293 6.88573 4.47369 6.88573 6.56993C6.88573 6.62857 6.88723 6.68722 6.89024 6.74587C6.83159 6.74436 6.77295 6.74286 6.7128 6.74286C3.08723 6.73985 0.150391 9.67519 0.150391 13.2977C0.150391 16.9203 3.08723 19.8571 6.70979 19.8571C7.63159 19.8571 8.50979 19.6662 9.30678 19.3233C8.92483 18.9955 8.57595 18.6331 8.26317 18.2391H8.26167Z"),G(r,"fill","white"),G(n,"d","M18.4707 8.09474C18.3729 8.58947 18.2301 9.07369 18.0406 9.54135C19.0346 10.4842 19.6541 11.8196 19.6541 13.2977C19.6541 16.1579 17.3353 18.4752 14.4767 18.4752C12.3819 18.4752 10.5789 17.2316 9.7639 15.4421C9.73984 15.3895 9.71578 15.3353 9.69323 15.2827C9.67969 15.2496 9.66766 15.2165 9.65413 15.185C9.63458 15.1353 9.61503 15.0842 9.59699 15.0331C9.58496 14.9985 9.57293 14.9624 9.5609 14.9278C9.54435 14.8782 9.52781 14.8271 9.51278 14.7774C9.50225 14.7414 9.49172 14.7038 9.4812 14.6677C9.46766 14.6165 9.45413 14.5669 9.4421 14.5158C9.43308 14.4782 9.42405 14.4406 9.41653 14.403C9.4045 14.3504 9.39548 14.2977 9.38496 14.2451C9.37744 14.2075 9.37142 14.1699 9.36541 14.1323C9.35638 14.0767 9.34887 14.0226 9.34135 13.9669C9.33684 13.9308 9.33082 13.8947 9.32781 13.8586C9.3218 13.797 9.31729 13.7353 9.31278 13.6722C9.31127 13.6421 9.30676 13.612 9.30526 13.5805C9.30075 13.4872 9.29774 13.394 9.29774 13.2992C9.29774 13.2105 9.30075 13.1218 9.30526 13.0346C9.30526 13.009 9.30826 12.9835 9.30977 12.9579C9.31428 12.8917 9.32029 12.8256 9.32631 12.7594C9.32932 12.7353 9.33082 12.7113 9.33383 12.6887C9.34435 12.603 9.35638 12.5173 9.36992 12.4331C9.37142 12.4226 9.37443 12.412 9.37593 12.4015C9.38947 12.3263 9.403 12.2526 9.41954 12.1789C9.42556 12.1534 9.43157 12.1293 9.43608 12.1038C9.45112 12.0406 9.46766 11.9774 9.4842 11.9143C9.49022 11.8932 9.49473 11.8722 9.50075 11.8526C9.57744 11.5865 9.67518 11.3308 9.79097 11.0842C9.10225 10.1263 7.97593 9.50075 6.70526 9.50075C4.60751 9.50075 2.90826 11.2015 2.90826 13.2977C2.90826 15.394 4.60902 17.0947 6.70526 17.0947C7.45714 17.0947 8.15789 16.8752 8.74736 16.4977C9.86917 18.5023 12.012 19.8571 14.4722 19.8571C18.0947 19.8571 21.0316 16.9203 21.0316 13.2977C21.0316 11.1789 20.0271 9.29323 18.4662 8.09474H18.4707Z"),G(n,"fill","white"),G(i,"d","M6.13234 4.08722C6.62707 3.18045 7.38046 2.4421 8.29775 1.96692C9.21504 1.49173 10.2526 1.30225 11.2782 1.42255C12.3038 1.54286 13.2707 1.96541 14.0541 2.6391C14.8376 3.31278 15.4015 4.20451 15.6737 5.2C15.9459 6.19549 15.9143 7.25113 15.582 8.22857C15.418 8.70977 15.1865 9.1609 14.8947 9.56992C14.8797 9.59098 14.8647 9.61053 14.8496 9.63158C14.7955 9.70526 14.7383 9.77744 14.6812 9.84812C14.6602 9.87368 14.6406 9.89774 14.6196 9.92331C14.5519 10.003 14.4812 10.0812 14.409 10.1564C14.4015 10.1639 14.394 10.1729 14.3865 10.1804C14.3068 10.2632 14.2226 10.3414 14.1368 10.418C14.1128 10.4391 14.0887 10.4586 14.0662 10.4797C13.9985 10.5383 13.9278 10.597 13.8556 10.6526C13.8331 10.6707 13.8105 10.6887 13.7865 10.7053C13.594 10.8496 13.3925 10.9804 13.1835 11.0962C13.1699 11.1038 13.1549 11.1113 13.1399 11.1188C13.0421 11.1714 12.9429 11.2211 12.8421 11.2677C12.8316 11.2722 12.8211 11.2767 12.812 11.2827C12.585 11.385 12.3519 11.4707 12.1143 11.5398C12.1053 11.5429 12.0977 11.5444 12.0887 11.5474C11.982 11.5774 11.8737 11.6045 11.7654 11.6271C11.7459 11.6316 11.7278 11.6361 11.7083 11.6391C11.5985 11.6617 11.4887 11.6797 11.3774 11.6947C11.3684 11.6947 11.3579 11.6977 11.3489 11.6992C11.2241 11.7158 11.0977 11.7278 10.9714 11.7338L10.9774 11.8301C10.788 12.2812 10.6827 12.7759 10.6827 13.2947C10.6827 15.3925 12.3835 17.0917 14.4797 17.0917C16.5759 17.0917 18.2767 15.391 18.2767 13.2947C18.2767 11.8541 17.4737 10.6015 16.2917 9.95789C16.5368 9.55338 16.7383 9.12331 16.8932 8.67068C17.3143 7.43158 17.3534 6.09624 17.009 4.83459C16.6647 3.57293 15.9504 2.4421 14.9579 1.58947C13.9654 0.73684 12.7414 0.199998 11.4421 0.0481186C10.1429 -0.103761 8.82707 0.13684 7.66617 0.738344C6.50376 1.33985 5.54888 2.27519 4.92331 3.42406C4.54437 4.1188 4.29474 4.87669 4.18497 5.66165C4.66016 5.52631 5.14587 5.43458 5.6376 5.38947C5.74286 4.93383 5.91128 4.49624 6.13384 4.08571L6.13234 4.08722Z"),G(i,"fill","white"),G(s,"d","M39.8722 16.3654C39.8722 16.782 39.5549 17.0992 39.1173 17.0992H35.0286C34.5925 17.0992 34.2947 16.782 34.2947 16.3654C34.2947 15.9489 34.5925 15.591 35.0286 15.591H35.7428C34.3338 13.8842 32.9037 12.2165 31.4556 10.4496L30.185 11.9383V15.591H31.5744C32.0316 15.591 32.3293 15.9684 32.3293 16.3654C32.3293 16.782 32.0316 17.0992 31.5744 17.0992H27.2872C26.8707 17.0992 26.5534 16.782 26.5534 16.3654C26.5534 15.9489 26.8707 15.591 27.2872 15.591H28.6767V4.27669H27.2872C26.8707 4.27669 26.5534 3.89925 26.5534 3.50225C26.5534 3.10526 26.8707 2.76842 27.2872 2.76842H29.4511C29.8481 2.76842 30.185 3.10526 30.185 3.50225V9.57594L34.5323 4.27519H33.5594C33.1233 4.27519 32.8256 3.89774 32.8256 3.5203C32.8256 3.10376 33.1233 2.76541 33.5594 2.76541H37.6677C38.0647 2.76541 38.4225 3.10225 38.4225 3.5203C38.4225 3.89774 38.0647 4.27519 37.6677 4.27519H36.4962L32.4075 9.25714L37.6872 15.5895H39.1158C39.5519 15.5895 39.8707 15.9669 39.8707 16.3639L39.8722 16.3654Z"),G(s,"fill","white"),G(o,"d","M50.5474 16.3654C50.5474 16.7624 50.1895 17.0992 49.7925 17.0992H47.6692C47.2331 17.0992 46.9143 16.7624 46.9143 16.3654V16.2662C46.1203 16.9804 45.0286 17.3188 44.0165 17.3188C43.6993 17.3188 43.3218 17.2992 43.0241 17.2195C41.5158 16.8617 40.4632 15.7699 40.4632 14.3804C40.4632 11.2241 43.9173 11.2241 45.406 11.2241H46.9143V11.0451C46.9143 9.43759 46.2993 8.68271 44.8105 8.68271C43.1233 8.68271 42.0316 9.47669 42.012 9.51579C41.7143 9.77444 41.179 9.63459 40.9399 9.31729C40.7414 8.98045 40.8406 8.54286 41.1384 8.32481C41.2181 8.26466 42.6466 7.23308 44.8105 7.23308C47.1925 7.23308 48.3835 8.48421 48.3835 11.0436V15.609H49.7925C50.1895 15.609 50.5474 15.9669 50.5474 16.3639V16.3654ZM43.997 15.8301C45.1489 15.8301 46.597 15.215 46.9143 14.1038V12.6346H45.3865C43.3023 12.6346 41.9323 12.9925 41.9323 14.382C41.9323 15.394 43.0045 15.6917 43.3414 15.7714C43.5399 15.8105 43.7579 15.8316 43.997 15.8316V15.8301Z"),G(o,"fill","white"),G(a,"d","M60.6902 9.45864C60.6902 10.412 60.1143 11.0075 59.3008 11.0075C58.4872 11.0075 57.9308 10.4722 57.9308 9.73684C57.9308 9.37895 58.1293 8.9624 58.388 8.72481C58.1293 8.64511 57.8526 8.62556 57.594 8.62556C56.3233 8.62556 55.0135 10.0346 54.815 12V15.612H56.403C56.7609 15.612 57.1368 15.9699 57.1368 16.3669C57.1368 16.7639 56.7594 17.1007 56.403 17.1007H51.9564C51.579 17.1007 51.2421 16.7639 51.2421 16.3669C51.2421 15.9699 51.579 15.612 51.9564 15.612H53.3263V8.94286H51.9564C51.5594 8.94286 51.2015 8.56541 51.2015 8.16842C51.2015 7.77143 51.5594 7.45413 51.9564 7.45413H54.0602C54.4571 7.45413 54.815 7.79098 54.815 8.16842V8.58496C55.4707 7.79098 56.5218 7.23458 57.7323 7.23458C59.1218 7.23458 60.6902 7.86917 60.6902 9.45714V9.45864Z"),G(a,"fill","white"),G(l,"d","M77.2616 16.3654C77.2616 16.8015 76.9639 17.0992 76.5278 17.0992H74.6812C74.2451 17.0992 73.9474 16.8015 73.9263 16.385V10.5098C73.9263 9.25864 73.3504 8.66316 72.2195 8.66316C70.9684 8.66316 70.0556 9.93383 70.0556 11.4226V15.6105H71.1278C71.5248 15.6105 71.8616 15.9684 71.8616 16.3654C71.8616 16.7624 71.5248 17.0992 71.1278 17.0992H67.5353C67.0992 17.0992 66.7804 16.7624 66.7804 16.3654C66.7804 15.9684 67.0977 15.6105 67.5353 15.6105H68.588V10.5098C68.588 9.25864 68.0722 8.66316 66.9007 8.66316C65.6707 8.66316 64.7774 9.95338 64.7774 11.4226V15.6105H65.7895C66.206 15.6105 66.5639 15.9684 66.5639 16.3654C66.5639 16.7624 66.206 17.0992 65.7895 17.0992H61.8992C61.5022 17.0992 61.1443 16.7624 61.1443 16.3654C61.1443 15.9684 61.5022 15.6105 61.8992 15.6105H63.2887V8.94135H61.9985C61.6015 8.94135 61.2436 8.56391 61.2436 8.16692C61.2436 7.76992 61.6015 7.45263 61.9985 7.45263H64.003C64.4 7.45263 64.7774 7.78947 64.7774 8.16692C65.2932 7.57143 66.0075 7.23458 66.9007 7.23458C68.191 7.23458 69.1443 7.73083 69.6406 8.62406C70.2361 7.76992 71.1098 7.23458 72.221 7.23458C74.2256 7.23458 75.4165 8.42556 75.4165 10.5098V15.6105H76.5278C76.9639 15.6105 77.2616 15.9684 77.2616 16.3654Z"),G(l,"fill","white"),G(u,"d","M88.1654 16.3654C88.1654 16.7624 87.8075 17.0992 87.4105 17.0992H85.2872C84.8511 17.0992 84.5323 16.7624 84.5323 16.3654V16.2662C83.7384 16.9804 82.6466 17.3188 81.6346 17.3188C81.3173 17.3188 80.9399 17.2992 80.6421 17.2195C79.1338 16.8617 78.0812 15.7699 78.0812 14.3804C78.0812 11.2241 81.5353 11.2241 83.0241 11.2241H84.5323V11.0451C84.5323 9.43759 83.9173 8.68271 82.4286 8.68271C80.7414 8.68271 79.6496 9.47669 79.6301 9.51579C79.3323 9.77444 78.797 9.63459 78.5579 9.31729C78.3594 8.98045 78.4586 8.54286 78.7564 8.32481C78.8361 8.26466 80.2647 7.23308 82.4286 7.23308C84.8105 7.23308 86.0015 8.48421 86.0015 11.0436V15.609H87.4105C87.8075 15.609 88.1654 15.9669 88.1654 16.3639V16.3654ZM81.615 15.8301C82.7669 15.8301 84.215 15.215 84.5323 14.1038V12.6346H83.0045C80.9203 12.6346 79.5504 12.9925 79.5504 14.382C79.5504 15.394 80.6226 15.6917 80.9594 15.7714C81.1579 15.8105 81.3759 15.8316 81.615 15.8316V15.8301Z"),G(u,"fill","white"),G(c,"d","M93.6917 8.74285C95.9158 8.98045 97.5023 10.7278 97.5023 12.991V13.0902C97.4827 15.412 95.4571 17.3188 92.997 17.3188C90.9925 17.3188 88.9083 16.1278 88.9083 14.1038C88.9083 13.0917 89.5639 12.5549 90.2977 12.5549C91.0316 12.5549 91.6075 13.2105 91.6075 13.9444C91.6075 14.5203 91.2902 14.997 90.8331 15.1955C91.3293 15.6722 92.1835 15.8902 93.0165 15.8902C94.6647 15.8902 96.0541 14.6 96.0737 13.0917V12.9925C96.0737 11.5429 95.021 10.1143 93.1158 10.1143C92.997 10.1143 92.7383 10.1338 92.6 10.1534C92.4812 10.1729 92.382 10.2135 92.2226 10.2135C91.8256 10.2135 91.3895 10.0346 91.3895 9.45864C91.3895 9.3203 91.4496 9.0812 91.5489 8.9624C92.6015 7.67218 94.6782 5.58496 95.7308 4.27519H90.2286C89.7925 4.27519 89.4947 3.93834 89.4947 3.50075C89.4947 3.06316 89.8316 2.76691 90.2496 2.76691H97.3594C97.6571 2.76691 98.0932 3.04511 98.0932 3.46165C98.0932 3.69925 97.994 3.87819 97.9143 3.99699L93.6932 8.74436L93.6917 8.74285Z"),G(c,"fill","white"),G(h,"d","M109.332 13.1895V16.5835C109.332 16.8812 109.074 17.0993 108.776 17.0993H99.3669C99.0692 17.0993 98.8511 16.8812 98.8511 16.5835C98.8511 16.2857 99.0692 16.0271 99.3669 16.0271H100.955V3.82106H99.3669C99.0692 3.82106 98.8511 3.58346 98.8511 3.28572C98.8511 3.00752 99.0692 2.76993 99.3669 2.76993H103.913C104.211 2.76993 104.429 3.00752 104.429 3.28572C104.429 3.58346 104.211 3.82106 103.913 3.82106H102.008V16.0286H108.26V13.1895C108.26 12.9113 108.498 12.6541 108.776 12.6541C109.074 12.6541 109.332 12.9128 109.332 13.1895Z"),G(h,"fill","white"),G(f,"d","M120.767 16.585C120.767 16.8632 120.529 17.1008 120.232 17.1008H117.988C117.69 17.1008 117.472 16.8632 117.472 16.585V15.8301C116.678 16.8226 115.368 17.3188 114.177 17.3188C113.82 17.3188 113.502 17.2992 113.185 17.2195C111.636 16.8827 110.665 15.8301 110.665 14.4797C110.665 11.4226 114.138 11.4226 115.627 11.4226H117.474V11.006C117.474 9.1203 116.719 8.26616 114.992 8.26616C113.146 8.26616 111.935 9.1594 111.916 9.17895C111.698 9.35789 111.34 9.27819 111.161 9.06015C111.023 8.82255 111.062 8.48421 111.299 8.32631C111.359 8.26616 112.808 7.23458 114.991 7.23458C117.313 7.23458 118.504 8.48571 118.504 11.006V16.0286H120.23C120.528 16.0286 120.765 16.2872 120.765 16.585H120.767ZM117.472 14.2827V12.4165H115.586C113.244 12.4165 111.716 12.8331 111.716 14.4812C111.716 15.7323 113.006 16.1083 113.403 16.188C114.812 16.5053 117.056 15.8301 117.472 14.2827Z"),G(f,"fill","white"),G(d,"d","M131.8 12.2571C131.8 15.0752 129.815 17.3188 127.394 17.3188C125.886 17.3188 124.695 16.4857 124 15.1744V16.5835C124 16.8617 123.741 17.0993 123.444 17.0993H121.817C121.519 17.0993 121.281 16.8617 121.281 16.5835C121.281 16.2857 121.519 16.0271 121.817 16.0271H122.928V3.82106H121.241C120.943 3.82106 120.684 3.58346 120.684 3.28572C120.684 3.00752 120.943 2.76993 121.241 2.76993H123.444C123.741 2.76993 124 3.00752 124 3.28572V9.33985C124.695 8.04963 125.886 7.23609 127.394 7.23609C129.815 7.23609 131.8 9.4797 131.8 12.2587V12.2571ZM130.768 12.2571C130.768 10.0737 129.26 8.24662 127.394 8.24662C125.528 8.24662 124 10.0526 124 12.2361C124 14.4196 125.549 16.3053 127.394 16.3053C129.239 16.3053 130.768 14.4797 130.768 12.2556V12.2571Z"),G(d,"fill","white"),G(p,"d","M141.37 14.4015C141.37 15.2752 141.033 16.009 140.377 16.5053C139.743 17.0617 138.789 17.3188 137.678 17.3188C135.574 17.3188 134.522 16.3654 134.086 15.7699V16.7233C134.086 17.0601 133.808 17.2992 133.51 17.2992C133.192 17.2992 132.934 17.0617 132.934 16.7233V14.0241C132.934 13.6872 133.132 13.4887 133.51 13.4887C133.689 13.4887 133.887 13.5278 134.006 13.8857C134.284 14.6195 135.197 16.406 137.678 16.406C139.544 16.406 140.198 15.3338 140.198 14.4406C140.198 13.0316 138.71 12.8135 137.161 12.594C136.427 12.4556 135.672 12.3564 135.038 12.1173C134.283 11.8391 133.389 11.2241 133.389 9.85413C133.389 9.06015 133.707 8.42556 134.343 7.94887C135.038 7.47218 136.069 7.23458 137.359 7.23458C138.809 7.23458 140.078 7.67067 140.734 8.44511C140.932 8.64361 141.032 8.9218 141.032 9.21955C141.032 9.85413 140.496 10.3714 139.841 10.3714C139.185 10.3714 138.669 9.85564 138.669 9.21955C138.669 8.9218 138.788 8.62406 138.967 8.42556C138.51 8.24661 137.994 8.12782 137.399 8.12782C136.605 8.12782 135.89 8.26616 135.374 8.56391C134.818 8.8812 134.52 9.3188 134.52 9.77443C134.52 10.4301 134.818 10.8662 135.433 11.1248C135.91 11.3233 136.585 11.4226 137.299 11.5414C138.272 11.6601 139.265 11.8195 140.039 12.2165C140.932 12.6526 141.368 13.388 141.368 14.4L141.37 14.4015Z"),G(p,"fill","white"),G(t,"width","142"),G(t,"height","20"),G(t,"viewBox","0 0 142 20"),G(t,"fill","none"),G(t,"xmlns","http://www.w3.org/2000/svg")},m(m,g){tt(m,t,g),N(t,r),N(t,n),N(t,i),N(t,s),N(t,o),N(t,a),N(t,l),N(t,u),N(t,c),N(t,h),N(t,f),N(t,d),N(t,p)},p:qt,i:qt,o:qt,d(m){m&&J(t)}}}class Tz extends Qt{constructor(t){super(),Kt(this,t,null,xz,Gt,{})}}function H4(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=z4(t))&&(n&&(n+=" "),n+=r);return n}function z4(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=z4(e[n]))&&(r&&(r+=" "),r+=t);return r}var Qg="-";function Az(e){var t=Cz(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,i=n===void 0?{}:n;function s(a){var l=a.split(Qg);return l[0]===""&&l.length!==1&&l.shift(),V4(l,t)||Ez(a)}function o(a,l){var u=r[a]||[];return l&&i[a]?[].concat(u,i[a]):u}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function V4(e,t){var o;if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),i=n?V4(e.slice(1),n):void 0;if(i)return i;if(t.validators.length!==0){var s=e.join(Qg);return(o=t.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var hv=/^\[(.+)\]$/;function Ez(e){if(hv.test(e)){var t=hv.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function Cz(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},i=Mz(Object.entries(e.classGroups),r);return i.forEach(function(s){var o=s[0],a=s[1];Rm(a,n,o,t)}),n}function Rm(e,t,r,n){e.forEach(function(i){if(typeof i=="string"){var s=i===""?t:fv(t,i);s.classGroupId=r;return}if(typeof i=="function"){if(Sz(i)){Rm(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];Rm(l,fv(t,a),r,n)})})}function fv(e,t){var r=e;return t.split(Qg).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function Sz(e){return e.isThemeGetter}function Mz(e,t){return t?e.map(function(r){var n=r[0],i=r[1],s=i.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],u=a[1];return[t+l,u]})):o});return[n,s]}):e}function Iz(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function i(s,o){r.set(s,o),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(o){var a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set:function(o,a){r.has(o)?r.set(o,a):i(o,a)}}}var W4="!";function Rz(e){var t=e.separator||":",r=t.length===1,n=t[0],i=t.length;return function(o){for(var a=[],l=0,u=0,c,h=0;h<o.length;h++){var f=o[h];if(l===0){if(f===n&&(r||o.slice(h,h+i)===t)){a.push(o.slice(u,h)),u=h+i;continue}if(f==="/"){c=h;continue}}f==="["?l++:f==="]"&&l--}var d=a.length===0?o:o.substring(u),p=d.startsWith(W4),m=p?d.substring(1):d,g=c&&c>u?c-u:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}}}function Pz(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var i=n[0]==="[";i?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function kz(e){return{cache:Iz(e.cacheSize),splitModifiers:Rz(e),...Az(e)}}var Dz=/\s+/;function Nz(e,t){var r=t.splitModifiers,n=t.getClassGroupId,i=t.getConflictingClassGroupIds,s=new Set;return e.trim().split(Dz).map(function(o){var a=r(o),l=a.modifiers,u=a.hasImportantModifier,c=a.baseClassName,h=a.maybePostfixModifierPosition,f=n(h?c.substring(0,h):c),d=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=n(c),!f)return{isTailwindClass:!1,originalClassName:o};d=!1}var p=Pz(l).join(":"),m=u?p+W4:p;return{isTailwindClass:!0,modifierId:m,classGroupId:f,originalClassName:o,hasPostfixModifier:d}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,u=o.hasPostfixModifier,c=a+l;return s.has(c)?!1:(s.add(c),i(l,u).forEach(function(h){return s.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Oz(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,s,o=a;function a(u){var c=t[0],h=t.slice(1),f=h.reduce(function(d,p){return p(d)},c());return n=kz(f),i=n.cache.get,s=n.cache.set,o=l,l(u)}function l(u){var c=i(u);if(c)return c;var h=Nz(u,n);return s(u,h),h}return function(){return o(H4.apply(null,arguments))}}function $t(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var X4=/^\[(?:([a-z-]+):)?(.+)\]$/i,Fz=/^\d+\/\d+$/,Bz=new Set(["px","full","screen"]),Lz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Uz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Gz=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Fr(e){return ps(e)||Bz.has(e)||Fz.test(e)||Pm(e)}function Pm(e){return Js(e,"length",$z)}function Hz(e){return Js(e,"size",$4)}function zz(e){return Js(e,"position",$4)}function Vz(e){return Js(e,"url",jz)}function fc(e){return Js(e,"number",ps)}function ps(e){return!Number.isNaN(Number(e))}function Wz(e){return e.endsWith("%")&&ps(e.slice(0,-1))}function Oa(e){return dv(e)||Js(e,"number",dv)}function Rt(e){return X4.test(e)}function Fa(){return!0}function _i(e){return Lz.test(e)}function Xz(e){return Js(e,"",Yz)}function Js(e,t,r){var n=X4.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function $z(e){return Uz.test(e)}function $4(){return!1}function jz(e){return e.startsWith("url(")}function dv(e){return Number.isInteger(Number(e))}function Yz(e){return Gz.test(e)}function qz(){var e=$t("colors"),t=$t("spacing"),r=$t("blur"),n=$t("brightness"),i=$t("borderColor"),s=$t("borderRadius"),o=$t("borderSpacing"),a=$t("borderWidth"),l=$t("contrast"),u=$t("grayscale"),c=$t("hueRotate"),h=$t("invert"),f=$t("gap"),d=$t("gradientColorStops"),p=$t("gradientColorStopPositions"),m=$t("inset"),g=$t("margin"),y=$t("opacity"),b=$t("padding"),_=$t("saturate"),v=$t("scale"),w=$t("sepia"),A=$t("skew"),x=$t("space"),E=$t("translate"),T=function(){return["auto","contain","none"]},M=function(){return["auto","hidden","clip","visible","scroll"]},P=function(){return["auto",Rt,t]},R=function(){return[Rt,t]},S=function(){return["",Fr]},C=function(){return["auto",ps,Rt]},I=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},F=function(){return["solid","dashed","dotted","double","none"]},H=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},X=function(){return["start","end","center","between","around","evenly","stretch"]},Z=function(){return["","0",Rt]},D=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},O=function(){return[ps,fc]},z=function(){return[ps,Rt]};return{cacheSize:500,theme:{colors:[Fa],spacing:[Fr],blur:["none","",_i,Rt],brightness:O(),borderColor:[e],borderRadius:["none","","full",_i,Rt],borderSpacing:R(),borderWidth:S(),contrast:O(),grayscale:Z(),hueRotate:z(),invert:Z(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[Wz,Pm],inset:P(),margin:P(),opacity:O(),padding:R(),saturate:O(),scale:O(),sepia:Z(),skew:z(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Rt]}],container:["container"],columns:[{columns:[_i]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(I(),[Rt])}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oa]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Rt]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",Oa]}],"grid-cols":[{"grid-cols":[Fa]}],"col-start-end":[{col:["auto",{span:["full",Oa]},Rt]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[Fa]}],"row-start-end":[{row:["auto",{span:[Oa]},Rt]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Rt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(X())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(X(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(X(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Rt,t]}],"min-w":[{"min-w":["min","max","fit",Rt,Fr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[_i]},_i,Rt]}],h:[{h:[Rt,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Rt,Fr]}],"max-h":[{"max-h":[Rt,t,"min","max","fit"]}],"font-size":[{text:["base",_i,Pm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fc]}],"font-family":[{font:[Fa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Rt]}],"line-clamp":[{"line-clamp":["none",ps,fc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rt,Fr]}],"list-image":[{"list-image":["none",Rt]}],"list-style-type":[{list:["none","disc","decimal",Rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(F(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Fr]}],"underline-offset":[{"underline-offset":["auto",Rt,Fr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(I(),[zz])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Hz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Vz]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[].concat(F(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:F()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(F())}],"outline-offset":[{"outline-offset":[Rt,Fr]}],"outline-w":[{outline:[Fr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Fr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",_i,Xz]}],"shadow-color":[{shadow:[Fa]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":H()}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",_i,Rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Rt]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Rt]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[Oa,Rt]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Rt]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Rt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Rt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Fr,fc]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Ae=Oz(qz);function m0(e){let t,r,n,i,s,o;const a=e[14].default,l=re(a,e,e[13],null);let u=[e[8],{class:e[7]},{role:e[6]}],c={};for(let h=0;h<u.length;h+=1)c=It(c,u[h]);return{c(){t=V(e[1]),l&&l.c(),Di(e[1])(t,c)},m(h,f){tt(h,t,f),l&&l.m(t,null),e[20](t),i=!0,s||(o=[ua(r=e[4].call(null,t,e[5])),gt(t,"click",e[15]),gt(t,"mouseenter",e[16]),gt(t,"mouseleave",e[17]),gt(t,"focusin",e[18]),gt(t,"focusout",e[19])],s=!0)},p(h,f){e=h,l&&l.p&&(!i||f&8192)&&ie(l,a,e,e[13],i?ne(a,e[13],f,null):se(e[13]),null),Di(e[1])(t,c=Dr(u,[f&256&&e[8],(!i||f&128)&&{class:e[7]},(!i||f&64)&&{role:e[6]}])),r&&Vr(r.update)&&f&32&&r.update.call(null,e[5])},i(h){i||(W(l,h),h&&Cs(()=>{i&&(n||(n=L1(t,e[2],e[3],!0)),n.run(1))}),i=!0)},o(h){$(l,h),h&&(n||(n=L1(t,e[2],e[3],!1)),n.run(0)),i=!1},d(h){h&&J(t),l&&l.d(h),e[20](null),h&&n&&n.end(),s=!1,vr(o)}}}function Zz(e){let t=e[1],r,n=!1,i,s=e[1]&&m0(e);return{c(){s&&s.c(),r=or()},m(o,a){s&&s.m(o,a),tt(o,r,a),i=!0},p(o,[a]){o[1]?t?Gt(t,o[1])?(s.d(1),s=m0(o),t=o[1],s.c(),n&&(n=!1,W(s)),s.m(r.parentNode,r)):(n&&(n=!1,W(s)),s.p(o,a)):(s=m0(o),t=o[1],s.c(),W(s),s.m(r.parentNode,r)):t&&(n=!0,ve(),$(s,1,1,()=>{s=null,t=o[1],n=!1}),we())},i(o){i||(W(s,o),i=!0)},o(o){$(s,o),i=!1},d(o){o&&J(r),s&&s.d(o)}}}function Kz(e,t,r){const n=["tag","color","rounded","border","shadow","transition","params","node","use","options","role"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t;const a=()=>({duration:0}),l=()=>{};zo("background",!0);let{tag:u=i.href?"a":"div"}=t,{color:c="default"}=t,{rounded:h=!1}=t,{border:f=!1}=t,{shadow:d=!1}=t,{transition:p=a}=t,{params:m={}}=t,{node:g=void 0}=t,{use:y=l}=t,{options:b={}}=t,{role:_=void 0}=t;const v={gray:"bg-gray-50 dark:bg-gray-800",red:"bg-red-50 dark:bg-gray-800",yellow:"bg-yellow-50 dark:bg-gray-800 ",green:"bg-green-50 dark:bg-gray-800 ",indigo:"bg-indigo-50 dark:bg-gray-800 ",purple:"bg-purple-50 dark:bg-gray-800 ",pink:"bg-pink-50 dark:bg-gray-800 ",blue:"bg-blue-50 dark:bg-gray-800 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-50 dark:bg-gray-800",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-50 dark:bg-gray-800 ",orange:"bg-orange-50 dark:bg-orange-800",none:""},w={gray:"text-gray-800 dark:text-gray-300",red:"text-red-800 dark:text-red-400",yellow:"text-yellow-800 dark:text-yellow-300",green:"text-green-800 dark:text-green-400",indigo:"text-indigo-800 dark:text-indigo-400",purple:"text-purple-800 dark:text-purple-400",pink:"text-pink-800 dark:text-pink-400",blue:"text-blue-800 dark:text-blue-400",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-800 dark:text-primary-400",orange:"text-orange-800 dark:text-orange-400",none:""},A={gray:"border-gray-300 dark:border-gray-800 divide-gray-300 dark:divide-gray-800",red:"border-red-300 dark:border-red-800 divide-red-300 dark:divide-red-800",yellow:"border-yellow-300 dark:border-yellow-800 divide-yellow-300 dark:divide-yellow-800",green:"border-green-300 dark:border-green-800 divide-green-300 dark:divide-green-800",indigo:"border-indigo-300 dark:border-indigo-800 divide-indigo-300 dark:divide-indigo-800",purple:"border-purple-300 dark:border-purple-800 divide-purple-300 dark:divide-purple-800",pink:"border-pink-300 dark:border-pink-800 divide-pink-300 dark:divide-pink-800",blue:"border-blue-300 dark:border-blue-800 divide-blue-300 dark:divide-blue-800",light:"border-gray-500 divide-gray-500",dark:"border-gray-500 divide-gray-500",default:"border-gray-200 dark:border-gray-700 divide-gray-200 dark:divide-gray-700",dropdown:"border-gray-100 dark:border-gray-600 divide-gray-100 dark:divide-gray-600",navbar:"border-gray-100 dark:border-gray-700 divide-gray-100 dark:divide-gray-700",navbarUl:"border-gray-100 dark:border-gray-700 divide-gray-100 dark:divide-gray-700",form:"border-gray-300 dark:border-gray-700 divide-gray-300 dark:divide-gray-700",primary:"border-primary-500 dark:border-primary-200  divide-primary-500 dark:divide-primary-200 ",orange:"border-orange-300 dark:border-orange-800 divide-orange-300 dark:divide-orange-800",none:""};let x;function E(C){ut.call(this,e,C)}function T(C){ut.call(this,e,C)}function M(C){ut.call(this,e,C)}function P(C){ut.call(this,e,C)}function R(C){ut.call(this,e,C)}function S(C){zt[C?"unshift":"push"](()=>{g=C,r(0,g)})}return e.$$set=C=>{r(26,t=It(It({},t),de(C))),r(8,i=ee(t,n)),"tag"in C&&r(1,u=C.tag),"color"in C&&r(9,c=C.color),"rounded"in C&&r(10,h=C.rounded),"border"in C&&r(11,f=C.border),"shadow"in C&&r(12,d=C.shadow),"transition"in C&&r(2,p=C.transition),"params"in C&&r(3,m=C.params),"node"in C&&r(0,g=C.node),"use"in C&&r(4,y=C.use),"options"in C&&r(5,b=C.options),"role"in C&&r(6,_=C.role),"$$scope"in C&&r(13,o=C.$$scope)},e.$$.update=()=>{e.$$.dirty&512&&r(9,c=c??"default"),e.$$.dirty&512&&zo("color",c),r(7,x=Ae(v[c],w[c],h&&"rounded-lg",f&&"border",A[c],d&&"shadow-md",t.class))},t=de(t),[g,u,p,m,y,b,_,x,i,c,h,f,d,o,s,E,T,M,P,R,S]}let Qz=class extends Qt{constructor(t){super(),Kt(this,t,Kz,Zz,Gt,{tag:1,color:9,rounded:10,border:11,shadow:12,transition:2,params:3,node:0,use:4,options:5,role:6})}};function g0(e){let t,r,n,i,s,o;const a=e[10].default,l=re(a,e,e[9],null);let u=[{type:r=e[0]?void 0:e[1]},{href:e[0]},{role:n=e[0]?"link":"button"},e[3],{class:e[2]}],c={};for(let h=0;h<u.length;h+=1)c=It(c,u[h]);return{c(){t=V(e[0]?"a":"button"),l&&l.c(),Di(e[0]?"a":"button")(t,c)},m(h,f){tt(h,t,f),l&&l.m(t,null),i=!0,s||(o=[gt(t,"click",e[11]),gt(t,"change",e[12]),gt(t,"keydown",e[13]),gt(t,"keyup",e[14]),gt(t,"touchstart",e[15],{passive:!0}),gt(t,"touchend",e[16]),gt(t,"touchcancel",e[17]),gt(t,"mouseenter",e[18]),gt(t,"mouseleave",e[19])],s=!0)},p(h,f){l&&l.p&&(!i||f&512)&&ie(l,a,h,h[9],i?ne(a,h[9],f,null):se(h[9]),null),Di(h[0]?"a":"button")(t,c=Dr(u,[(!i||f&3&&r!==(r=h[0]?void 0:h[1]))&&{type:r},(!i||f&1)&&{href:h[0]},(!i||f&1&&n!==(n=h[0]?"link":"button"))&&{role:n},f&8&&h[3],(!i||f&4)&&{class:h[2]}]))},i(h){i||(W(l,h),i=!0)},o(h){$(l,h),i=!1},d(h){h&&J(t),l&&l.d(h),s=!1,vr(o)}}}function Jz(e){let t=e[0]?"a":"button",r,n,i=(e[0]?"a":"button")&&g0(e);return{c(){i&&i.c(),r=or()},m(s,o){i&&i.m(s,o),tt(s,r,o),n=!0},p(s,[o]){s[0],t?Gt(t,s[0]?"a":"button")?(i.d(1),i=g0(s),t=s[0]?"a":"button",i.c(),i.m(r.parentNode,r)):i.p(s,o):(i=g0(s),t=s[0]?"a":"button",i.c(),i.m(r.parentNode,r))},i(s){n||(W(i,s),n=!0)},o(s){$(i,s),n=!1},d(s){s&&J(r),i&&i.d(s)}}}function tV(e,t,r){const n=["pill","outline","size","href","type","color","shadow"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t;const a=$r("group");let{pill:l=!1}=t,{outline:u=!1}=t,{size:c=a?"sm":"md"}=t,{href:h=void 0}=t,{type:f="button"}=t,{color:d=a?u?"dark":"alternative":"primary"}=t,{shadow:p=!1}=t;const m={alternative:"text-gray-900 bg-white border border-gray-200 hover:bg-gray-100 dark:bg-gray-800 dark:text-gray-400 hover:text-primary-700 focus:text-primary-700 dark:focus:text-white dark:hover:text-white",blue:"text-white bg-blue-700 hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700",dark:"text-white bg-gray-800 hover:bg-gray-900 dark:bg-gray-800 dark:hover:bg-gray-700",green:"text-white bg-green-700 hover:bg-green-800 dark:bg-green-600 dark:hover:bg-green-700",light:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600",primary:"text-white bg-primary-700 hover:bg-primary-800 dark:bg-primary-600 dark:hover:bg-primary-700",purple:"text-white bg-purple-700 hover:bg-purple-800 dark:bg-purple-600 dark:hover:bg-purple-700",red:"text-white bg-red-700 hover:bg-red-800 dark:bg-red-600 dark:hover:bg-red-700",yellow:"text-white bg-yellow-400 hover:bg-yellow-500 ",none:""},g={alternative:"focus:ring-gray-200 dark:focus:ring-gray-700",blue:"focus:ring-blue-300 dark:focus:ring-blue-800",dark:"focus:ring-gray-300 dark:focus:ring-gray-700",green:"focus:ring-green-300 dark:focus:ring-green-800",light:"focus:ring-gray-200 dark:focus:ring-gray-700",primary:"focus:ring-primary-300 dark:focus:ring-primary-800",purple:"focus:ring-purple-300 dark:focus:ring-purple-900",red:"focus:ring-red-300 dark:focus:ring-red-900",yellow:"focus:ring-yellow-300 dark:focus:ring-yellow-900",none:""},y={alternative:"shadow-gray-500/50 dark:shadow-gray-800/80",blue:"shadow-blue-500/50 dark:shadow-blue-800/80",dark:"shadow-gray-500/50 dark:shadow-gray-800/80",green:"shadow-green-500/50 dark:shadow-green-800/80",light:"shadow-gray-500/50 dark:shadow-gray-800/80",primary:"shadow-primary-500/50 dark:shadow-primary-800/80",purple:"shadow-purple-500/50 dark:shadow-purple-800/80",red:"shadow-red-500/50 dark:shadow-red-800/80 ",yellow:"shadow-yellow-500/50 dark:shadow-yellow-800/80 ",none:""},b={alternative:"text-gray-900 hover:text-white border border-gray-800 hover:bg-gray-900 focus:bg-gray-900 focus:text-white focus:ring-gray-300 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-800",blue:"text-blue-700 hover:text-white border border-blue-700 hover:bg-blue-800 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-600",dark:"text-gray-900 hover:text-white border border-gray-800 hover:bg-gray-900 focus:bg-gray-900 focus:text-white dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-600",green:"text-green-700 hover:text-white border border-green-700 hover:bg-green-800 dark:border-green-500 dark:text-green-500 dark:hover:text-white dark:hover:bg-green-600",light:"text-gray-500 hover:text-gray-900 bg-white border border-gray-200 dark:border-gray-600 dark:hover:text-white dark:text-gray-400 hover:bg-gray-50 dark:bg-gray-700 dark:hover:bg-gray-600",primary:"text-primary-700 hover:text-white border border-primary-700 hover:bg-primary-700 dark:border-primary-500 dark:text-primary-500 dark:hover:text-white dark:hover:bg-primary-600",purple:"text-purple-700 hover:text-white border border-purple-700 hover:bg-purple-800 dark:border-purple-400 dark:text-purple-400 dark:hover:text-white dark:hover:bg-purple-500",red:"text-red-700 hover:text-white border border-red-700 hover:bg-red-800 dark:border-red-500 dark:text-red-500 dark:hover:text-white dark:hover:bg-red-600",yellow:"text-yellow-400 hover:text-white border border-yellow-400 hover:bg-yellow-500 dark:border-yellow-300 dark:text-yellow-300 dark:hover:text-white dark:hover:bg-yellow-400",none:""},_={xs:"px-3 py-2 text-xs",sm:"px-4 py-2 text-sm",md:"px-5 py-2.5 text-sm",lg:"px-5 py-3 text-base",xl:"px-6 py-3.5 text-base"},v=()=>u||d==="alternative"||d==="light";let w;function A(I){ut.call(this,e,I)}function x(I){ut.call(this,e,I)}function E(I){ut.call(this,e,I)}function T(I){ut.call(this,e,I)}function M(I){ut.call(this,e,I)}function P(I){ut.call(this,e,I)}function R(I){ut.call(this,e,I)}function S(I){ut.call(this,e,I)}function C(I){ut.call(this,e,I)}return e.$$set=I=>{r(27,t=It(It({},t),de(I))),r(3,i=ee(t,n)),"pill"in I&&r(4,l=I.pill),"outline"in I&&r(5,u=I.outline),"size"in I&&r(6,c=I.size),"href"in I&&r(0,h=I.href),"type"in I&&r(1,f=I.type),"color"in I&&r(7,d=I.color),"shadow"in I&&r(8,p=I.shadow),"$$scope"in I&&r(9,o=I.$$scope)},e.$$.update=()=>{r(2,w=Ae("text-center font-medium",a?"focus:ring-2":"focus:ring-4",a&&"focus:z-10",a||"focus:outline-none","inline-flex items-center justify-center "+_[c],u?b[d]:m[d],d==="alternative"&&(a?"dark:bg-gray-700 dark:text-white dark:border-gray-700 dark:hover:border-gray-600 dark:hover:bg-gray-600":"dark:bg-transparent dark:border-gray-600 dark:hover:border-gray-700"),u&&d==="dark"&&(a?"dark:text-white dark:border-white":"dark:text-gray-400 dark:border-gray-700"),g[d],v()&&a&&"border-l-0 first:border-l",a?l&&"first:rounded-l-full last:rounded-r-full"||"first:rounded-l-lg last:rounded-r-lg":l&&"rounded-full"||"rounded-lg",p&&"shadow-lg",p&&y[d],t.disabled&&"cursor-not-allowed opacity-50",t.class))},t=de(t),[h,f,w,i,l,u,c,d,p,o,s,A,x,E,T,M,P,R,S,C]}class j4 extends Qt{constructor(t){super(),Kt(this,t,tV,Jz,Gt,{pill:4,outline:5,size:6,href:0,type:1,color:7,shadow:8})}}const ia=Math.min,Ts=Math.max,Hh=Math.round,dc=Math.floor,Hi=e=>({x:e,y:e}),eV={left:"right",right:"left",bottom:"top",top:"bottom"},rV={start:"end",end:"start"};function km(e,t,r){return Ts(e,ia(t,r))}function du(e,t){return typeof e=="function"?e(t):e}function Gs(e){return e.split("-")[0]}function pu(e){return e.split("-")[1]}function Y4(e){return e==="x"?"y":"x"}function Jg(e){return e==="y"?"height":"width"}function Vf(e){return["top","bottom"].includes(Gs(e))?"y":"x"}function t1(e){return Y4(Vf(e))}function nV(e,t,r){r===void 0&&(r=!1);const n=pu(e),i=t1(e),s=Jg(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=zh(o)),[o,zh(o)]}function iV(e){const t=zh(e);return[Dm(e),t,Dm(t)]}function Dm(e){return e.replace(/start|end/g,t=>rV[t])}function sV(e,t,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?s:o;default:return[]}}function oV(e,t,r,n){const i=pu(e);let s=sV(Gs(e),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(Dm)))),s}function zh(e){return e.replace(/left|right|bottom|top/g,t=>eV[t])}function aV(e){return{top:0,right:0,bottom:0,left:0,...e}}function q4(e){return typeof e!="number"?aV(e):{top:e,right:e,bottom:e,left:e}}function Vh(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function pv(e,t,r){let{reference:n,floating:i}=e;const s=Vf(t),o=t1(t),a=Jg(o),l=Gs(t),u=s==="y",c=n.x+n.width/2-i.width/2,h=n.y+n.height/2-i.height/2,f=n[a]/2-i[a]/2;let d;switch(l){case"top":d={x:c,y:n.y-i.height};break;case"bottom":d={x:c,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:h};break;case"left":d={x:n.x-i.width,y:h};break;default:d={x:n.x,y:n.y}}switch(pu(t)){case"start":d[o]-=f*(r&&u?-1:1);break;case"end":d[o]+=f*(r&&u?-1:1);break}return d}const lV=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:h}=pv(u,n,l),f=n,d={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:b,y:_,data:v,reset:w}=await y({x:c,y:h,initialPlacement:n,placement:f,strategy:i,middlewareData:d,rects:u,platform:o,elements:{reference:e,floating:t}});if(c=b??c,h=_??h,d={...d,[g]:{...d[g],...v}},w&&p<=50){p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(u=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:c,y:h}=pv(u,f,l)),m=-1;continue}}return{x:c,y:h,placement:f,strategy:i,middlewareData:d}};async function Z4(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:f=!1,padding:d=0}=du(t,e),p=q4(d),g=a[f?h==="floating"?"reference":"floating":h],y=Vh(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),b=h==="floating"?{...o.floating,x:n,y:i}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),v=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},w=Vh(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:b,offsetParent:_,strategy:l}):b);return{top:(y.top-w.top+p.top)/v.y,bottom:(w.bottom-y.bottom+p.bottom)/v.y,left:(y.left-w.left+p.left)/v.x,right:(w.right-y.right+p.right)/v.x}}const uV=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=du(e,t)||{};if(u==null)return{};const h=q4(c),f={x:r,y:n},d=t1(i),p=Jg(d),m=await o.getDimensions(u),g=d==="y",y=g?"top":"left",b=g?"bottom":"right",_=g?"clientHeight":"clientWidth",v=s.reference[p]+s.reference[d]-f[d]-s.floating[p],w=f[d]-s.reference[d],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let x=A?A[_]:0;(!x||!await(o.isElement==null?void 0:o.isElement(A)))&&(x=a.floating[_]||s.floating[p]);const E=v/2-w/2,T=x/2-m[p]/2-1,M=ia(h[y],T),P=ia(h[b],T),R=M,S=x-m[p]-P,C=x/2-m[p]/2+E,I=km(R,C,S),F=!l.arrow&&pu(i)!=null&&C!=I&&s.reference[p]/2-(C<R?M:P)-m[p]/2<0,H=F?C<R?C-R:C-S:0;return{[d]:f[d]+H,data:{[d]:I,centerOffset:C-I-H,...F&&{alignmentOffset:H}},reset:F}}}),cV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=du(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const y=Gs(i),b=Gs(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),v=f||(b||!m?[zh(a)]:iV(a));!f&&p!=="none"&&v.push(...oV(a,m,p,_));const w=[a,...v],A=await Z4(t,g),x=[];let E=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&x.push(A[y]),h){const R=nV(i,o,_);x.push(A[R[0]],A[R[1]])}if(E=[...E,{placement:i,overflows:x}],!x.every(R=>R<=0)){var T,M;const R=(((T=s.flip)==null?void 0:T.index)||0)+1,S=w[R];if(S)return{data:{index:R,overflows:E},reset:{placement:S}};let C=(M=E.filter(I=>I.overflows[0]<=0).sort((I,F)=>I.overflows[1]-F.overflows[1])[0])==null?void 0:M.placement;if(!C)switch(d){case"bestFit":{var P;const I=(P=E.map(F=>[F.placement,F.overflows.filter(H=>H>0).reduce((H,X)=>H+X,0)]).sort((F,H)=>F[1]-H[1])[0])==null?void 0:P[0];I&&(C=I);break}case"initialPlacement":C=a;break}if(i!==C)return{reset:{placement:C}}}return{}}}};async function hV(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Gs(r),a=pu(r),l=Vf(r)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,h=du(t,e);let{mainAxis:f,crossAxis:d,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return a&&typeof p=="number"&&(d=a==="end"?p*-1:p),l?{x:d*c,y:f*u}:{x:f*u,y:d*c}}const fV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:r,y:n}=t,i=await hV(t,e);return{x:r+i.x,y:n+i.y,data:i}}}},dV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...l}=du(e,t),u={x:r,y:n},c=await Z4(t,l),h=Vf(Gs(i)),f=Y4(h);let d=u[f],p=u[h];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=d+c[g],_=d-c[y];d=km(b,d,_)}if(o){const g=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=p+c[g],_=p-c[y];p=km(b,p,_)}const m=a.fn({...t,[f]:d,[h]:p});return{...m,data:{x:m.x-r,y:m.y-n}}}}};function zi(e){return K4(e)?(e.nodeName||"").toLowerCase():"#document"}function gr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function pi(e){var t;return(t=(K4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function K4(e){return e instanceof Node||e instanceof gr(e).Node}function ui(e){return e instanceof Element||e instanceof gr(e).Element}function Rn(e){return e instanceof HTMLElement||e instanceof gr(e).HTMLElement}function mv(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof gr(e).ShadowRoot}function mu(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function pV(e){return["table","td","th"].includes(zi(e))}function e1(e){const t=r1(),r=kr(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function mV(e){let t=sa(e);for(;Rn(t)&&!Wf(t);){if(e1(t))return t;t=sa(t)}return null}function r1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wf(e){return["html","body","#document"].includes(zi(e))}function kr(e){return gr(e).getComputedStyle(e)}function Xf(e){return ui(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function sa(e){if(zi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||mv(e)&&e.host||pi(e);return mv(t)?t.host:t}function Q4(e){const t=sa(e);return Wf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Rn(t)&&mu(t)?t:Q4(t)}function Hl(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Q4(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),o=gr(i);return s?t.concat(o,o.visualViewport||[],mu(i)?i:[],o.frameElement&&r?Hl(o.frameElement):[]):t.concat(i,Hl(i,[],r))}function J4(e){const t=kr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=Rn(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=Hh(r)!==s||Hh(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function n1(e){return ui(e)?e:e.contextElement}function Go(e){const t=n1(e);if(!Rn(t))return Hi(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=J4(t);let o=(s?Hh(r.width):r.width)/n,a=(s?Hh(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gV=Hi(0);function t6(e){const t=gr(e);return!r1()||!t.visualViewport?gV:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function yV(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==gr(e)?!1:t}function Hs(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=n1(e);let o=Hi(1);t&&(n?ui(n)&&(o=Go(n)):o=Go(e));const a=yV(s,r,n)?t6(s):Hi(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,h=i.height/o.y;if(s){const f=gr(s),d=n&&ui(n)?gr(n):n;let p=f.frameElement;for(;p&&n&&d!==f;){const m=Go(p),g=p.getBoundingClientRect(),y=kr(p),b=g.left+(p.clientLeft+parseFloat(y.paddingLeft))*m.x,_=g.top+(p.clientTop+parseFloat(y.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,h*=m.y,l+=b,u+=_,p=gr(p).frameElement}}return Vh({width:c,height:h,x:l,y:u})}function bV(e){let{rect:t,offsetParent:r,strategy:n}=e;const i=Rn(r),s=pi(r);if(r===s)return t;let o={scrollLeft:0,scrollTop:0},a=Hi(1);const l=Hi(0);if((i||!i&&n!=="fixed")&&((zi(r)!=="body"||mu(s))&&(o=Xf(r)),Rn(r))){const u=Hs(r);a=Go(r),l.x=u.x+r.clientLeft,l.y=u.y+r.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}}function _V(e){return Array.from(e.getClientRects())}function e6(e){return Hs(pi(e)).left+Xf(e).scrollLeft}function vV(e){const t=pi(e),r=Xf(e),n=e.ownerDocument.body,i=Ts(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=Ts(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+e6(e);const a=-r.scrollTop;return kr(n).direction==="rtl"&&(o+=Ts(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function wV(e,t){const r=gr(e),n=pi(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=r1();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function xV(e,t){const r=Hs(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=Rn(e)?Go(e):Hi(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=n*s.y;return{width:o,height:a,x:l,y:u}}function gv(e,t,r){let n;if(t==="viewport")n=wV(e,r);else if(t==="document")n=vV(pi(e));else if(ui(t))n=xV(t,r);else{const i=t6(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return Vh(n)}function r6(e,t){const r=sa(e);return r===t||!ui(r)||Wf(r)?!1:kr(r).position==="fixed"||r6(r,t)}function TV(e,t){const r=t.get(e);if(r)return r;let n=Hl(e,[],!1).filter(a=>ui(a)&&zi(a)!=="body"),i=null;const s=kr(e).position==="fixed";let o=s?sa(e):e;for(;ui(o)&&!Wf(o);){const a=kr(o),l=e1(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||mu(o)&&!l&&r6(e,o))?n=n.filter(c=>c!==o):i=a,o=sa(o)}return t.set(e,n),n}function AV(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?TV(t,this._c):[].concat(r),n],a=o[0],l=o.reduce((u,c)=>{const h=gv(t,c,i);return u.top=Ts(h.top,u.top),u.right=ia(h.right,u.right),u.bottom=ia(h.bottom,u.bottom),u.left=Ts(h.left,u.left),u},gv(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function EV(e){return J4(e)}function CV(e,t,r){const n=Rn(t),i=pi(t),s=r==="fixed",o=Hs(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Hi(0);if(n||!n&&!s)if((zi(t)!=="body"||mu(i))&&(a=Xf(t)),n){const u=Hs(t,!0,s,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else i&&(l.x=e6(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function yv(e,t){return!Rn(e)||kr(e).position==="fixed"?null:t?t(e):e.offsetParent}function n6(e,t){const r=gr(e);if(!Rn(e))return r;let n=yv(e,t);for(;n&&pV(n)&&kr(n).position==="static";)n=yv(n,t);return n&&(zi(n)==="html"||zi(n)==="body"&&kr(n).position==="static"&&!e1(n))?r:n||mV(e)||r}const SV=async function(e){let{reference:t,floating:r,strategy:n}=e;const i=this.getOffsetParent||n6,s=this.getDimensions;return{reference:CV(t,await i(r),n),floating:{x:0,y:0,...await s(r)}}};function MV(e){return kr(e).direction==="rtl"}const IV={convertOffsetParentRelativeRectToViewportRelativeRect:bV,getDocumentElement:pi,getClippingRect:AV,getOffsetParent:n6,getElementRects:SV,getClientRects:_V,getDimensions:EV,getScale:Go,isElement:ui,isRTL:MV};function RV(e,t){let r=null,n;const i=pi(e);function s(){clearTimeout(n),r&&r.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:h,height:f}=e.getBoundingClientRect();if(a||t(),!h||!f)return;const d=dc(c),p=dc(i.clientWidth-(u+h)),m=dc(i.clientHeight-(c+f)),g=dc(u),b={rootMargin:-d+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Ts(0,ia(1,l))||1};let _=!0;function v(w){const A=w[0].intersectionRatio;if(A!==l){if(!_)return o();A?o(!1,A):n=setTimeout(()=>{o(!1,1e-7)},100)}_=!1}try{r=new IntersectionObserver(v,{...b,root:i.ownerDocument})}catch{r=new IntersectionObserver(v,b)}r.observe(e)}return o(!0),s}function bv(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=n1(e),c=i||s?[...u?Hl(u):[],...Hl(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",r,{passive:!0}),s&&y.addEventListener("resize",r)});const h=u&&a?RV(u,r):null;let f=-1,d=null;o&&(d=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&d&&(d.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{d&&d.observe(t)})),r()}),u&&!l&&d.observe(u),d.observe(t));let p,m=l?Hs(e):null;l&&g();function g(){const y=Hs(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&r(),m=y,p=requestAnimationFrame(g)}return r(),()=>{c.forEach(y=>{i&&y.removeEventListener("scroll",r),s&&y.removeEventListener("resize",r)}),h&&h(),d&&d.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const PV=(e,t,r)=>{const n=new Map,i={platform:IV,...r},s={...i.platform,_c:n};return lV(e,t,{...i,platform:s})};function kV(){const e=ca();return(t,r,n)=>{const i=e.$$.callbacks[t];if(i){const s=new CustomEvent(t,{detail:n});r.dispatchEvent(s),i.slice().forEach(o=>{o.call(e,s)})}}}function _v(e){let t;return{c(){t=V("div")},m(r,n){tt(r,t,n),e[22](t)},p:qt,d(r){r&&J(t),e[22](null)}}}function vv(e){let t,r;const n=[{use:e[9]},{options:e[3]},{role:"tooltip"},{tabindex:e[1]?-1:void 0},e[11]];let i={$$slots:{default:[DV]},$$scope:{ctx:e}};for(let s=0;s<n.length;s+=1)i=It(i,n[s]);return t=new Qz({props:i}),t.$on("focusin",function(){Vr(vi(e[1],e[7]))&&vi(e[1],e[7]).apply(this,arguments)}),t.$on("focusout",function(){Vr(vi(e[1],e[8]))&&vi(e[1],e[8]).apply(this,arguments)}),t.$on("mouseenter",function(){Vr(vi(e[1]&&!e[4],e[7]))&&vi(e[1]&&!e[4],e[7]).apply(this,arguments)}),t.$on("mouseleave",function(){Vr(vi(e[1]&&!e[4],e[8]))&&vi(e[1]&&!e[4],e[8]).apply(this,arguments)}),{c(){Ft(t.$$.fragment)},m(s,o){kt(t,s,o),r=!0},p(s,o){e=s;const a=o[0]&2570?Dr(n,[o[0]&512&&{use:e[9]},o[0]&8&&{options:e[3]},n[2],o[0]&2&&{tabindex:e[1]?-1:void 0},o[0]&2048&&Jh(e[11])]):{};o[0]&8388676&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(W(t.$$.fragment,s),r=!0)},o(s){$(t.$$.fragment,s),r=!1},d(s){Dt(t,s)}}}function wv(e){let t,r,n;return{c(){t=V("div"),G(t,"class",e[6])},m(i,s){tt(i,t,s),r||(n=ua(e[10].call(null,t)),r=!0)},p(i,s){s[0]&64&&G(t,"class",i[6])},d(i){i&&J(t),r=!1,n()}}}function DV(e){let t,r,n;const i=e[21].default,s=re(i,e,e[23],null);let o=e[2]&&wv(e);return{c(){s&&s.c(),t=ot(),o&&o.c(),r=or()},m(a,l){s&&s.m(a,l),tt(a,t,l),o&&o.m(a,l),tt(a,r,l),n=!0},p(a,l){s&&s.p&&(!n||l[0]&8388608)&&ie(s,i,a,a[23],n?ne(i,a[23],l,null):se(a[23]),null),a[2]?o?o.p(a,l):(o=wv(a),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i(a){n||(W(s,a),n=!0)},o(a){$(s,a),n=!1},d(a){a&&(J(t),J(r)),s&&s.d(a),o&&o.d(a)}}}function NV(e){let t,r,n,i=!e[3]&&_v(e),s=e[0]&&e[3]&&vv(e);return{c(){i&&i.c(),t=ot(),s&&s.c(),r=or()},m(o,a){i&&i.m(o,a),tt(o,t,a),s&&s.m(o,a),tt(o,r,a),n=!0},p(o,a){o[3]?i&&(i.d(1),i=null):i?i.p(o,a):(i=_v(o),i.c(),i.m(t.parentNode,t)),o[0]&&o[3]?s?(s.p(o,a),a[0]&9&&W(s,1)):(s=vv(o),s.c(),W(s,1),s.m(r.parentNode,r)):s&&(ve(),$(s,1,1,()=>{s=null}),we())},i(o){n||(W(s),n=!0)},o(o){$(s),n=!1},d(o){o&&(J(t),J(r)),i&&i.d(o),s&&s.d(o)}}}function vi(e,t){return e?t:()=>{}}function OV(e,t,r){const n=["activeContent","arrow","offset","placement","trigger","triggeredBy","reference","strategy","open","yOnly"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t,{activeContent:a=!1}=t,{arrow:l=!0}=t,{offset:u=8}=t,{placement:c="top"}=t,{trigger:h="hover"}=t,{triggeredBy:f=void 0}=t,{reference:d=void 0}=t,{strategy:p="absolute"}=t,{open:m=!1}=t,{yOnly:g=!1}=t;const y=kV();let b,_,v,w,A,x=[],E=!1;const T=()=>(E=!0,setTimeout(()=>E=!1,250)),M=k=>{_===void 0&&console.error("trigger undefined"),!d&&x.includes(k.target)&&_!==k.target&&(r(3,_=k.target),T()),b&&k.type==="focusin"&&!m&&T(),r(0,m=b&&k.type==="click"&&!E?!m:!0)},P=k=>k.matches(":hover"),R=k=>k.contains(document.activeElement),S=k=>k!=null?`${k}px`:"",C=k=>{a?setTimeout(()=>{const Y=[_,v,...x].filter(Boolean);k.type==="mouseleave"&&Y.some(P)||k.type==="focusout"&&Y.some(R)||r(0,m=!1)},100):r(0,m=!1)};let I;const F={left:"right",right:"left",bottom:"top",top:"bottom"};let H;function X(){PV(_,v,{placement:c,strategy:p,middleware:H}).then(({x:k,y:Y,middlewareData:B,placement:rt,strategy:Q})=>{v.style.position=Q,v.style.left=g?"0":S(k),v.style.top=S(Y),B.arrow&&w instanceof HTMLDivElement&&(r(19,w.style.left=S(B.arrow.x),w),r(19,w.style.top=S(B.arrow.y),w),r(20,I=F[rt.split("-")[0]]),r(19,w.style[I]=S(-w.offsetWidth/2-(t.border?1:0)),w))})}function Z(k,Y){v=k;let B=bv(Y,v,X);return{update(rt){B(),B=bv(rt,v,X)},destroy(){B()}}}Q2(()=>{const k=[["focusin",M,!0],["focusout",C,!0],["click",M,b],["mouseenter",M,!b],["mouseleave",C,!b]];return f?x=[...document.querySelectorAll(f)]:x=A.previousElementSibling?[A.previousElementSibling]:[],x.length||console.error("No triggers found."),x.forEach(Y=>{Y.tabIndex<0&&(Y.tabIndex=0);for(const[B,rt,Q]of k)Q&&Y.addEventListener(B,rt)}),d?(r(3,_=document.querySelector(d)??document.body),_===document.body?console.error(`Popup reference not found: '${d}'`):(_.addEventListener("focusout",C),b||_.addEventListener("mouseleave",C))):r(3,_=x[0]),()=>{x.forEach(Y=>{if(Y)for(const[B,rt]of k)Y.removeEventListener(B,rt)}),_&&(_.removeEventListener("focusout",C),_.removeEventListener("mouseleave",C))}});let D;function O(k){return r(19,w=k),{destroy(){r(19,w=null)}}}function z(k){zt[k?"unshift":"push"](()=>{A=k,r(5,A)})}return e.$$set=k=>{r(35,t=It(It({},t),de(k))),r(11,i=ee(t,n)),"activeContent"in k&&r(1,a=k.activeContent),"arrow"in k&&r(2,l=k.arrow),"offset"in k&&r(12,u=k.offset),"placement"in k&&r(13,c=k.placement),"trigger"in k&&r(14,h=k.trigger),"triggeredBy"in k&&r(15,f=k.triggeredBy),"reference"in k&&r(16,d=k.reference),"strategy"in k&&r(17,p=k.strategy),"open"in k&&r(0,m=k.open),"yOnly"in k&&r(18,g=k.yOnly),"$$scope"in k&&r(23,o=k.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&16384&&r(4,b=h==="click"),e.$$.dirty[0]&8200&&c&&(r(3,_),r(13,c)),e.$$.dirty[0]&9&&y("show",_,m),e.$$.dirty[0]&528384&&(H=[cV(),dV(),fV(+u),w&&uV({element:w,padding:10})]),r(6,D=H4("absolute pointer-events-none block w-[10px] h-[10px] rotate-45 bg-inherit border-inherit",t.border&&I==="bottom"&&"border-b border-r",t.border&&I==="top"&&"border-t border-l ",t.border&&I==="right"&&"border-t border-r ",t.border&&I==="left"&&"border-b border-l "))},t=de(t),[m,a,l,_,b,A,D,M,C,Z,O,i,u,c,h,f,d,p,g,w,I,s,z,o]}class FV extends Qt{constructor(t){super(),Kt(this,t,OV,NV,Gt,{activeContent:1,arrow:2,offset:12,placement:13,trigger:14,triggeredBy:15,reference:16,strategy:17,open:0,yOnly:18},null,[-1,-1])}}const BV=e=>({}),xv=e=>({}),LV=e=>({}),Tv=e=>({});function Av(e){let t,r;const n=e[12].header,i=re(n,e,e[15],Tv);return{c(){t=V("div"),i&&i.c(),G(t,"class",e[2])},m(s,o){tt(s,t,o),i&&i.m(t,null),r=!0},p(s,o){i&&i.p&&(!r||o&32768)&&ie(i,n,s,s[15],r?ne(n,s[15],o,LV):se(s[15]),Tv)},i(s){r||(W(i,s),r=!0)},o(s){$(i,s),r=!1},d(s){s&&J(t),i&&i.d(s)}}}function Ev(e){let t,r;const n=e[12].footer,i=re(n,e,e[15],xv);return{c(){t=V("div"),i&&i.c(),G(t,"class",e[4])},m(s,o){tt(s,t,o),i&&i.m(t,null),r=!0},p(s,o){i&&i.p&&(!r||o&32768)&&ie(i,n,s,s[15],r?ne(n,s[15],o,BV):se(s[15]),xv)},i(s){r||(W(i,s),r=!0)},o(s){$(i,s),r=!1},d(s){s&&J(t),i&&i.d(s)}}}function UV(e){let t,r,n,i,s,o=e[6].header&&Av(e);const a=e[12].default,l=re(a,e,e[15],null);let u=e[6].footer&&Ev(e);return{c(){o&&o.c(),t=ot(),r=V("ul"),l&&l.c(),n=ot(),u&&u.c(),i=or(),G(r,"class",e[3])},m(c,h){o&&o.m(c,h),tt(c,t,h),tt(c,r,h),l&&l.m(r,null),tt(c,n,h),u&&u.m(c,h),tt(c,i,h),s=!0},p(c,h){c[6].header?o?(o.p(c,h),h&64&&W(o,1)):(o=Av(c),o.c(),W(o,1),o.m(t.parentNode,t)):o&&(ve(),$(o,1,1,()=>{o=null}),we()),l&&l.p&&(!s||h&32768)&&ie(l,a,c,c[15],s?ne(a,c[15],h,null):se(c[15]),null),c[6].footer?u?(u.p(c,h),h&64&&W(u,1)):(u=Ev(c),u.c(),W(u,1),u.m(i.parentNode,i)):u&&(ve(),$(u,1,1,()=>{u=null}),we())},i(c){s||(W(o),W(l,c),W(u),s=!0)},o(c){$(o),$(l,c),$(u),s=!1},d(c){c&&(J(t),J(r),J(n),J(i)),o&&o.d(c),l&&l.d(c),u&&u.d(c)}}}function GV(e){let t,r,n;const i=[{activeContent:!0},e[5],{class:e[1]}];function s(a){e[13](a)}let o={$$slots:{default:[UV]},$$scope:{ctx:e}};for(let a=0;a<i.length;a+=1)o=It(o,i[a]);return e[0]!==void 0&&(o.open=e[0]),t=new FV({props:o}),zt.push(()=>me(t,"open",s)),t.$on("show",e[14]),{c(){Ft(t.$$.fragment)},m(a,l){kt(t,a,l),n=!0},p(a,[l]){const u=l&34?Dr(i,[i[0],l&32&&Jh(a[5]),l&2&&{class:a[1]}]):{};l&32832&&(u.$$scope={dirty:l,ctx:a}),!r&&l&1&&(r=!0,u.open=a[0],pe(()=>r=!1)),t.$set(u)},i(a){n||(W(t.$$.fragment,a),n=!0)},o(a){$(t.$$.fragment,a),n=!1},d(a){Dt(t,a)}}}function HV(e,t,r){const n=["activeUrl","open","containerClass","headerClass","footerClass","activeClass"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t;const a=Qh(s),l=Ie("");let{activeUrl:u=""}=t,{open:c=!1}=t,{containerClass:h="divide-y z-50"}=t,{headerClass:f="py-1 overflow-hidden rounded-t-lg"}=t,{footerClass:d="py-1 overflow-hidden rounded-b-lg"}=t,{activeClass:p="text-primary-700 dark:text-primary-700 hover:text-primary-900 dark:hover:text-primary-900"}=t,m=Ae(p,t.classActive);zo("DropdownType",{activeClass:m}),zo("activeUrl",l);let g=Ae(h,t.classContainer),y=Ae(f,t.classHeader),b=Ae("py-1",t.class),_=Ae(d,t.classFooter);function v(A){c=A,r(0,c)}function w(A){ut.call(this,e,A)}return e.$$set=A=>{r(18,t=It(It({},t),de(A))),r(5,i=ee(t,n)),"activeUrl"in A&&r(7,u=A.activeUrl),"open"in A&&r(0,c=A.open),"containerClass"in A&&r(8,h=A.containerClass),"headerClass"in A&&r(9,f=A.headerClass),"footerClass"in A&&r(10,d=A.footerClass),"activeClass"in A&&r(11,p=A.activeClass),"$$scope"in A&&r(15,o=A.$$scope)},e.$$.update=()=>{e.$$.dirty&128&&l.set(u),r(5,i.arrow=i.arrow??!1,i),r(5,i.trigger=i.trigger??"click",i),r(5,i.placement=i.placement??"bottom",i),r(5,i.color=i.color??"dropdown",i),r(5,i.shadow=i.shadow??!0,i),r(5,i.rounded=i.rounded??!0,i)},t=de(t),[c,g,y,b,_,i,a,u,h,f,d,p,s,v,w,o]}class zV extends Qt{constructor(t){super(),Kt(this,t,HV,GV,Gt,{activeUrl:7,open:0,containerClass:8,headerClass:9,footerClass:10,activeClass:11})}}function VV(e){let t;const r=e[5].default,n=re(r,e,e[4],null);return{c(){n&&n.c()},m(i,s){n&&n.m(i,s),t=!0},p(i,s){n&&n.p&&(!t||s&16)&&ie(n,r,i,i[4],t?ne(r,i[4],s,null):se(i[4]),null)},i(i){t||(W(n,i),t=!0)},o(i){$(n,i),t=!1},d(i){n&&n.d(i)}}}function WV(e){let t=e[0],r,n,i=e[0]&&y0(e);return{c(){i&&i.c(),r=or()},m(s,o){i&&i.m(s,o),tt(s,r,o),n=!0},p(s,o){s[0]?t?Gt(t,s[0])?(i.d(1),i=y0(s),t=s[0],i.c(),i.m(r.parentNode,r)):i.p(s,o):(i=y0(s),t=s[0],i.c(),i.m(r.parentNode,r)):t&&(i.d(1),i=null,t=s[0])},i(s){n||(W(i,s),n=!0)},o(s){$(i,s),n=!1},d(s){s&&J(r),i&&i.d(s)}}}function y0(e){let t,r,n,i;const s=e[5].default,o=re(s,e,e[4],null);let a=[e[3]],l={};for(let u=0;u<a.length;u+=1)l=It(l,a[u]);return{c(){t=V(e[0]),o&&o.c(),Di(e[0])(t,l)},m(u,c){tt(u,t,c),o&&o.m(t,null),r=!0,n||(i=ua(e[2].call(null,t)),n=!0)},p(u,c){o&&o.p&&(!r||c&16)&&ie(o,s,u,u[4],r?ne(s,u[4],c,null):se(u[4]),null),Di(u[0])(t,l=Dr(a,[c&8&&u[3]]))},i(u){r||(W(o,u),r=!0)},o(u){$(o,u),r=!1},d(u){u&&J(t),o&&o.d(u),n=!1,i()}}}function XV(e){let t,r,n,i;const s=[WV,VV],o=[];function a(l,u){return l[1]?0:1}return t=a(e),r=o[t]=s[t](e),{c(){r.c(),n=or()},m(l,u){o[t].m(l,u),tt(l,n,u),i=!0},p(l,[u]){let c=t;t=a(l),t===c?o[t].p(l,u):(ve(),$(o[c],1,1,()=>{o[c]=null}),we(),r=o[t],r?r.p(l,u):(r=o[t]=s[t](l),r.c()),W(r,1),r.m(n.parentNode,n))},i(l){i||(W(r),i=!0)},o(l){$(r),i=!1},d(l){l&&J(n),o[t].d(l)}}}function $V(e,t,r){const n=["tag","show","use"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t,{tag:a="div"}=t,{show:l}=t,{use:u=()=>{}}=t;return e.$$set=c=>{t=It(It({},t),de(c)),r(3,i=ee(t,n)),"tag"in c&&r(0,a=c.tag),"show"in c&&r(1,l=c.show),"use"in c&&r(2,u=c.use),"$$scope"in c&&r(4,o=c.$$scope)},[a,l,u,i,o,s]}class i1 extends Qt{constructor(t){super(),Kt(this,t,$V,XV,Gt,{tag:0,show:1,use:2})}}function b0(e){let t,r,n,i,s,o;const a=e[9].default,l=re(a,e,e[18],null);let u=[{href:e[0]},{type:r=e[0]?void 0:"button"},{role:n=e[0]?"link":"button"},e[4],{class:e[2]}],c={};for(let h=0;h<u.length;h+=1)c=It(c,u[h]);return{c(){t=V(e[0]?"a":"button"),l&&l.c(),Di(e[0]?"a":"button")(t,c)},m(h,f){tt(h,t,f),l&&l.m(t,null),i=!0,s||(o=[gt(t,"click",e[10]),gt(t,"change",e[11]),gt(t,"keydown",e[12]),gt(t,"keyup",e[13]),gt(t,"focus",e[14]),gt(t,"blur",e[15]),gt(t,"mouseenter",e[16]),gt(t,"mouseleave",e[17])],s=!0)},p(h,f){l&&l.p&&(!i||f&262144)&&ie(l,a,h,h[18],i?ne(a,h[18],f,null):se(h[18]),null),Di(h[0]?"a":"button")(t,c=Dr(u,[(!i||f&1)&&{href:h[0]},(!i||f&1&&r!==(r=h[0]?void 0:"button"))&&{type:r},(!i||f&1&&n!==(n=h[0]?"link":"button"))&&{role:n},f&16&&h[4],(!i||f&4)&&{class:h[2]}]))},i(h){i||(W(l,h),i=!0)},o(h){$(l,h),i=!1},d(h){h&&J(t),l&&l.d(h),s=!1,vr(o)}}}function jV(e){let t=e[0]?"a":"button",r,n,i=(e[0]?"a":"button")&&b0(e);return{c(){i&&i.c(),r=or()},m(s,o){i&&i.m(s,o),tt(s,r,o),n=!0},p(s,o){s[0],t?Gt(t,s[0]?"a":"button")?(i.d(1),i=b0(s),t=s[0]?"a":"button",i.c(),i.m(r.parentNode,r)):i.p(s,o):(i=b0(s),t=s[0]?"a":"button",i.c(),i.m(r.parentNode,r))},i(s){n||(W(i,s),n=!0)},o(s){$(i,s),n=!1},d(s){s&&J(r),i&&i.d(s)}}}function YV(e){let t,r;return t=new i1({props:{tag:"li",show:e[1],use:e[3],$$slots:{default:[jV]},$$scope:{ctx:e}}}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,[i]){const s={};i&2&&(s.show=n[1]),i&262165&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function qV(e,t,r){let n,i;const s=["defaultClass","href","activeClass"];let o=ee(t,s),{$$slots:a={},$$scope:l}=t,{defaultClass:u="font-medium py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-600"}=t,{href:c=void 0}=t,{activeClass:h=void 0}=t;const f=$r("DropdownType")??{},d=$r("activeUrl");let p="";d.subscribe(T=>{r(7,p=T)});let m=!0;function g(T){var M;r(1,m=((M=T.parentElement)==null?void 0:M.tagName)==="UL")}function y(T){ut.call(this,e,T)}function b(T){ut.call(this,e,T)}function _(T){ut.call(this,e,T)}function v(T){ut.call(this,e,T)}function w(T){ut.call(this,e,T)}function A(T){ut.call(this,e,T)}function x(T){ut.call(this,e,T)}function E(T){ut.call(this,e,T)}return e.$$set=T=>{r(21,t=It(It({},t),de(T))),r(4,o=ee(t,s)),"defaultClass"in T&&r(5,u=T.defaultClass),"href"in T&&r(0,c=T.href),"activeClass"in T&&r(6,h=T.activeClass),"$$scope"in T&&r(18,l=T.$$scope)},e.$$.update=()=>{e.$$.dirty&129&&r(8,n=p?c===p:!1),r(2,i=Ae(u,c?"block":"w-full text-left",n&&(h??f.activeClass),t.class))},t=de(t),[c,m,i,g,o,u,h,p,n,a,y,b,_,v,w,A,x,E,l]}class ZV extends Qt{constructor(t){super(),Kt(this,t,qV,YV,Gt,{defaultClass:5,href:0,activeClass:6})}}function KV(e){let t;const r=e[7].default,n=re(r,e,e[6],null);return{c(){n&&n.c()},m(i,s){n&&n.m(i,s),t=!0},p(i,s){n&&n.p&&(!t||s&64)&&ie(n,r,i,i[6],t?ne(r,i[6],s,null):se(i[6]),null)},i(i){t||(W(n,i),t=!0)},o(i){$(n,i),t=!1},d(i){n&&n.d(i)}}}function QV(e){let t,r;const n=e[7].default,i=re(n,e,e[6],null);let s=[e[3],{class:e[2]}],o={};for(let a=0;a<s.length;a+=1)o=It(o,s[a]);return{c(){t=V("label"),i&&i.c(),ni(t,o)},m(a,l){tt(a,t,l),i&&i.m(t,null),e[8](t),r=!0},p(a,l){i&&i.p&&(!r||l&64)&&ie(i,n,a,a[6],r?ne(n,a[6],l,null):se(a[6]),null),ni(t,o=Dr(s,[l&8&&a[3],(!r||l&4)&&{class:a[2]}]))},i(a){r||(W(i,a),r=!0)},o(a){$(i,a),r=!1},d(a){a&&J(t),i&&i.d(a),e[8](null)}}}function JV(e){let t,r,n,i;const s=[QV,KV],o=[];function a(l,u){return l[0]?0:1}return t=a(e),r=o[t]=s[t](e),{c(){r.c(),n=or()},m(l,u){o[t].m(l,u),tt(l,n,u),i=!0},p(l,[u]){let c=t;t=a(l),t===c?o[t].p(l,u):(ve(),$(o[c],1,1,()=>{o[c]=null}),we(),r=o[t],r?r.p(l,u):(r=o[t]=s[t](l),r.c()),W(r,1),r.m(n.parentNode,n))},i(l){i||(W(r),i=!0)},o(l){$(r),i=!1},d(l){l&&J(n),o[t].d(l)}}}function tW(e,t,r){let n;const i=["color","defaultClass","show"];let s=ee(t,i),{$$slots:o={},$$scope:a}=t,{color:l="gray"}=t,{defaultClass:u="text-sm font-medium block"}=t,{show:c=!0}=t,h;const f={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function d(p){zt[p?"unshift":"push"](()=>{h=p,r(1,h)})}return e.$$set=p=>{r(10,t=It(It({},t),de(p))),r(3,s=ee(t,i)),"color"in p&&r(4,l=p.color),"defaultClass"in p&&r(5,u=p.defaultClass),"show"in p&&r(0,c=p.show),"$$scope"in p&&r(6,a=p.$$scope)},e.$$.update=()=>{if(e.$$.dirty&18){const p=h==null?void 0:h.control;r(4,l=p!=null&&p.disabled?"disabled":l)}r(2,n=Ae(u,f[l],t.class))},t=de(t),[c,h,n,s,l,u,a,o,d]}class eW extends Qt{constructor(t){super(),Kt(this,t,tW,JV,Gt,{color:4,defaultClass:5,show:0})}}const rW={primary:"text-primary-600 focus:ring-primary-500 dark:focus:ring-primary-600",secondary:"text-secondary-600 focus:ring-secondary-500 dark:focus:ring-secondary-600",red:"text-red-600 focus:ring-red-500 dark:focus:ring-red-600",green:"text-green-600 focus:ring-green-500 dark:focus:ring-green-600",purple:"text-purple-600 focus:ring-purple-500 dark:focus:ring-purple-600",teal:"text-teal-600 focus:ring-teal-500 dark:focus:ring-teal-600",yellow:"text-yellow-400 focus:ring-yellow-500 dark:focus:ring-yellow-600",orange:"text-orange-500 focus:ring-orange-500 dark:focus:ring-orange-600",blue:"text-blue-600 focus:ring-blue-500 dark:focus:ring-blue-600"},Cv=(e,t)=>Ae(e?"inline-flex":"flex","items-center",t);let nW="mr-2";const Sv=(e,t,r,n,i)=>Ae("w-4 h-4 bg-gray-100 border-gray-300 dark:ring-offset-gray-800 focus:ring-2",nW,n?"dark:bg-gray-600 dark:border-gray-500":"dark:bg-gray-700 dark:border-gray-600",e&&"sr-only peer",r&&"rounded",rW[t],i);function iW(e){let t,r,n,i,s,o,a,l=[{type:"checkbox"},{__value:e[5]},e[12],{class:r=Ae(e[6],Sv(e[3],e[2],!0,e[7],e[11].default||e[10].class))}],u={};for(let f=0;f<l.length;f+=1)u=It(u,l[f]);const c=e[13].default,h=re(c,e,e[26],null);return{c(){t=V("input"),i=ot(),h&&h.c(),ni(t,u)},m(f,d){tt(f,t,d),t.autofocus&&t.focus(),t.checked=e[1],tt(f,i,d),h&&h.m(f,d),s=!0,o||(a=[ua(n=e[8].call(null,t,e[0])),gt(t,"change",e[25]),gt(t,"keyup",e[14]),gt(t,"keydown",e[15]),gt(t,"keypress",e[16]),gt(t,"focus",e[17]),gt(t,"blur",e[18]),gt(t,"click",e[19]),gt(t,"mouseover",e[20]),gt(t,"mouseenter",e[21]),gt(t,"mouseleave",e[22]),gt(t,"paste",e[23]),gt(t,"change",e[9]),gt(t,"change",e[24])],o=!0)},p(f,d){ni(t,u=Dr(l,[{type:"checkbox"},(!s||d&32)&&{__value:f[5]},d&4096&&f[12],(!s||d&3148&&r!==(r=Ae(f[6],Sv(f[3],f[2],!0,f[7],f[11].default||f[10].class))))&&{class:r}])),n&&Vr(n.update)&&d&1&&n.update.call(null,f[0]),d&2&&(t.checked=f[1]),h&&h.p&&(!s||d&67108864)&&ie(h,c,f,f[26],s?ne(c,f[26],d,null):se(f[26]),null)},i(f){s||(W(h,f),s=!0)},o(f){$(h,f),s=!1},d(f){f&&(J(t),J(i)),h&&h.d(f),o=!1,vr(a)}}}function sW(e){let t,r;return t=new eW({props:{class:Cv(e[4],e[10].class),show:e[11].default,$$slots:{default:[iW]},$$scope:{ctx:e}}}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,[i]){const s={};i&1040&&(s.class=Cv(n[4],n[10].class)),i&2048&&(s.show=n[11].default),i&67116143&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function oW(e,t,r){const n=["color","custom","inline","group","value","checked","spacing"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t;const a=Qh(s);let{color:l="primary"}=t,{custom:u=!1}=t,{inline:c=!1}=t,{group:h=[]}=t,{value:f="on"}=t,{checked:d=void 0}=t,{spacing:p="mr-2"}=t,m=$r("background");function g(C,I){return d===void 0&&r(1,d=I.includes(f)),y(),{update(F){r(1,d=F.includes(f))}}}function y(){const C=h.indexOf(f);d===void 0&&r(1,d=C>=0),d?C<0&&(h.push(f),r(0,h)):C>=0&&(h.splice(C,1),r(0,h))}function b(C){ut.call(this,e,C)}function _(C){ut.call(this,e,C)}function v(C){ut.call(this,e,C)}function w(C){ut.call(this,e,C)}function A(C){ut.call(this,e,C)}function x(C){ut.call(this,e,C)}function E(C){ut.call(this,e,C)}function T(C){ut.call(this,e,C)}function M(C){ut.call(this,e,C)}function P(C){ut.call(this,e,C)}function R(C){ut.call(this,e,C)}function S(){d=this.checked,r(1,d)}return e.$$set=C=>{r(10,t=It(It({},t),de(C))),r(12,i=ee(t,n)),"color"in C&&r(2,l=C.color),"custom"in C&&r(3,u=C.custom),"inline"in C&&r(4,c=C.inline),"group"in C&&r(0,h=C.group),"value"in C&&r(5,f=C.value),"checked"in C&&r(1,d=C.checked),"spacing"in C&&r(6,p=C.spacing),"$$scope"in C&&r(26,o=C.$$scope)},t=de(t),[h,d,l,u,c,f,p,m,g,y,t,a,i,s,b,_,v,w,A,x,E,T,M,P,R,S,o]}class aW extends Qt{constructor(t){super(),Kt(this,t,oW,sW,Gt,{color:2,custom:3,inline:4,group:0,value:5,checked:1,spacing:6})}}const lW=e=>({}),Mv=e=>({}),uW=e=>({props:e[0]&72}),Iv=e=>({props:{...e[6],class:e[3]}}),cW=e=>({}),Rv=e=>({});function Pv(e){let t,r,n;const i=e[11].left,s=re(i,e,e[26],Rv);return{c(){t=V("div"),s&&s.c(),G(t,"class",r=Ae(e[2],e[4].classLeft)+" left-0 pl-2.5 pointer-events-none")},m(o,a){tt(o,t,a),s&&s.m(t,null),n=!0},p(o,a){s&&s.p&&(!n||a[0]&67108864)&&ie(s,i,o,o[26],n?ne(i,o[26],a,cW):se(o[26]),Rv),(!n||a[0]&20&&r!==(r=Ae(o[2],o[4].classLeft)+" left-0 pl-2.5 pointer-events-none"))&&G(t,"class",r)},i(o){n||(W(s,o),n=!0)},o(o){$(s,o),n=!1},d(o){o&&J(t),s&&s.d(o)}}}function hW(e){let t,r,n,i=[e[6],{type:e[1]},{class:e[3]}],s={};for(let o=0;o<i.length;o+=1)s=It(s,i[o]);return{c(){t=V("input"),ni(t,s)},m(o,a){tt(o,t,a),t.autofocus&&t.focus(),O1(t,e[0]),r||(n=[gt(t,"input",e[25]),gt(t,"blur",e[12]),gt(t,"change",e[13]),gt(t,"click",e[14]),gt(t,"contextmenu",e[15]),gt(t,"focus",e[16]),gt(t,"keydown",e[17]),gt(t,"keypress",e[18]),gt(t,"keyup",e[19]),gt(t,"mouseover",e[20]),gt(t,"mouseenter",e[21]),gt(t,"mouseleave",e[22]),gt(t,"paste",e[23]),gt(t,"input",e[24])],r=!0)},p(o,a){ni(t,s=Dr(i,[a[0]&64&&o[6],a[0]&2&&{type:o[1]},a[0]&8&&{class:o[3]}])),a[0]&1&&t.value!==o[0]&&O1(t,o[0])},d(o){o&&J(t),r=!1,vr(n)}}}function kv(e){let t,r,n;const i=e[11].right,s=re(i,e,e[26],Mv);return{c(){t=V("div"),s&&s.c(),G(t,"class",r=Ae(e[2],e[4].classRight)+" right-0 pr-2.5")},m(o,a){tt(o,t,a),s&&s.m(t,null),n=!0},p(o,a){s&&s.p&&(!n||a[0]&67108864)&&ie(s,i,o,o[26],n?ne(i,o[26],a,lW):se(o[26]),Mv),(!n||a[0]&20&&r!==(r=Ae(o[2],o[4].classRight)+" right-0 pr-2.5"))&&G(t,"class",r)},i(o){n||(W(s,o),n=!0)},o(o){$(s,o),n=!1},d(o){o&&J(t),s&&s.d(o)}}}function fW(e){let t,r,n,i,s=e[5].left&&Pv(e);const o=e[11].default,a=re(o,e,e[26],Iv),l=a||hW(e);let u=e[5].right&&kv(e);return{c(){s&&s.c(),t=ot(),l&&l.c(),r=ot(),u&&u.c(),n=or()},m(c,h){s&&s.m(c,h),tt(c,t,h),l&&l.m(c,h),tt(c,r,h),u&&u.m(c,h),tt(c,n,h),i=!0},p(c,h){c[5].left?s?(s.p(c,h),h[0]&32&&W(s,1)):(s=Pv(c),s.c(),W(s,1),s.m(t.parentNode,t)):s&&(ve(),$(s,1,1,()=>{s=null}),we()),a?a.p&&(!i||h[0]&67108936)&&ie(a,o,c,c[26],i?ne(o,c[26],h,uW):se(c[26]),Iv):l&&l.p&&(!i||h[0]&75)&&l.p(c,i?h:[-1,-1]),c[5].right?u?(u.p(c,h),h[0]&32&&W(u,1)):(u=kv(c),u.c(),W(u,1),u.m(n.parentNode,n)):u&&(ve(),$(u,1,1,()=>{u=null}),we())},i(c){i||(W(s),W(l,c),W(u),i=!0)},o(c){$(s),$(l,c),$(u),i=!1},d(c){c&&(J(t),J(r),J(n)),s&&s.d(c),l&&l.d(c),u&&u.d(c)}}}function dW(e){let t,r;return t=new i1({props:{class:"relative w-full",show:e[5].left||e[5].right,$$slots:{default:[fW]},$$scope:{ctx:e}}}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,i){const s={};i[0]&32&&(s.show=n[5].left||n[5].right),i[0]&67108991&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function pW(e){return e&&e==="xs"?"sm":e==="xl"?"lg":e}function mW(e,t,r){let n;const i=["type","value","size","defaultClass","color","floatClass"];let s=ee(t,i),{$$slots:o={},$$scope:a}=t;const l=Qh(o);let{type:u="text"}=t,{value:c=void 0}=t,{size:h=void 0}=t,{defaultClass:f="block w-full disabled:cursor-not-allowed disabled:opacity-50"}=t,{color:d="base"}=t,{floatClass:p="flex absolute inset-y-0 items-center text-gray-500 dark:text-gray-400"}=t;const m={base:"border-gray-300 dark:border-gray-600",tinted:"border-gray-300 dark:border-gray-500",green:"border-green-500 dark:border-green-400",red:"border-red-500 dark:border-red-400"},g={base:"focus:border-primary-500 focus:ring-primary-500 dark:focus:border-primary-500 dark:focus:ring-primary-500",green:"focus:ring-green-500 focus:border-green-500 dark:focus:border-green-500 dark:focus:ring-green-500",red:"focus:ring-red-500 focus:border-red-500 dark:focus:ring-red-500 dark:focus:border-red-500"},y={base:"bg-gray-50 text-gray-900 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400",tinted:"bg-gray-50 text-gray-900 dark:bg-gray-600 dark:text-white dark:placeholder-gray-400",green:"bg-green-50 text-green-900 placeholder-green-700 dark:text-green-400 dark:placeholder-green-500 dark:bg-gray-700",red:"bg-red-50 text-red-900 placeholder-red-700 dark:text-red-500 dark:placeholder-red-500 dark:bg-gray-700"};let b=$r("background"),_=$r("group");const v={sm:"sm:text-xs",md:"text-sm",lg:"sm:text-base"},w={sm:"pl-9",md:"pl-10",lg:"pl-11"},A={sm:"pr-9",md:"pr-10",lg:"pr-11"},x={sm:"p-2",md:"p-2.5",lg:"p-3"};let E;function T(k){ut.call(this,e,k)}function M(k){ut.call(this,e,k)}function P(k){ut.call(this,e,k)}function R(k){ut.call(this,e,k)}function S(k){ut.call(this,e,k)}function C(k){ut.call(this,e,k)}function I(k){ut.call(this,e,k)}function F(k){ut.call(this,e,k)}function H(k){ut.call(this,e,k)}function X(k){ut.call(this,e,k)}function Z(k){ut.call(this,e,k)}function D(k){ut.call(this,e,k)}function O(k){ut.call(this,e,k)}function z(){c=this.value,r(0,c)}return e.$$set=k=>{r(4,t=It(It({},t),de(k))),r(6,s=ee(t,i)),"type"in k&&r(1,u=k.type),"value"in k&&r(0,c=k.value),"size"in k&&r(7,h=k.size),"defaultClass"in k&&r(8,f=k.defaultClass),"color"in k&&r(9,d=k.color),"floatClass"in k&&r(2,p=k.floatClass),"$$scope"in k&&r(26,a=k.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&128&&r(10,n=h||pW(_==null?void 0:_.size)||"md");{const k=d==="base"&&b?"tinted":d;r(3,E=Ae([f,l.left&&w[n]||l.right&&A[n]||x[n],g[d],y[k],m[k],v[n],_||"rounded-lg",_&&"first:rounded-l-lg last:rounded-r-lg",_&&"border-l-0 first:border-l last:border-r",t.class]))}},t=de(t),[c,u,p,E,t,l,s,h,f,d,n,o,T,M,P,R,S,C,I,F,H,X,Z,D,O,z,a]}class gW extends Qt{constructor(t){super(),Kt(this,t,mW,dW,Gt,{type:1,value:0,size:7,defaultClass:8,color:9,floatClass:2},null,[-1,-1])}}function yW(e){let t,r,n;return{c(){t=He("svg"),r=He("path"),G(r,"fill-rule","evenodd"),G(r,"d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"),G(r,"clip-rule","evenodd"),G(t,"slot","left"),G(t,"class",n=e[3][e[1]]),G(t,"fill","currentColor"),G(t,"viewBox","0 0 20 20"),G(t,"xmlns","http://www.w3.org/2000/svg")},m(i,s){tt(i,t,s),N(t,r)},p(i,s){s&2&&n!==(n=i[3][i[1]])&&G(t,"class",n)},d(i){i&&J(t)}}}function Dv(e){let t,r;const n=e[7].default,i=re(n,e,e[21],null);return{c(){t=V("div"),i&&i.c(),G(t,"class","flex absolute inset-y-0 right-0 items-center text-gray-500 dark:text-gray-400")},m(s,o){tt(s,t,o),i&&i.m(t,null),r=!0},p(s,o){i&&i.p&&(!r||o&2097152)&&ie(i,n,s,s[21],r?ne(n,s[21],o,null):se(s[21]),null)},i(s){r||(W(i,s),r=!0)},o(s){$(i,s),r=!1},d(s){s&&J(t),i&&i.d(s)}}}function bW(e){let t,r,n,i,s;const o=[{type:"search"},{placeholder:e[2]},{size:e[1]},e[5],{class:e[6].class}];function a(c){e[8](c)}let l={$$slots:{left:[yW]},$$scope:{ctx:e}};for(let c=0;c<o.length;c+=1)l=It(l,o[c]);e[0]!==void 0&&(l.value=e[0]),t=new gW({props:l}),zt.push(()=>me(t,"value",a)),t.$on("blur",e[9]),t.$on("change",e[10]),t.$on("input",e[11]),t.$on("click",e[12]),t.$on("focus",e[13]),t.$on("keydown",e[14]),t.$on("keypress",e[15]),t.$on("keyup",e[16]),t.$on("mouseenter",e[17]),t.$on("mouseleave",e[18]),t.$on("mouseover",e[19]),t.$on("paste",e[20]);let u=e[4].default&&Dv(e);return{c(){Ft(t.$$.fragment),n=ot(),u&&u.c(),i=or()},m(c,h){kt(t,c,h),tt(c,n,h),u&&u.m(c,h),tt(c,i,h),s=!0},p(c,h){const f=h&102?Dr(o,[o[0],h&4&&{placeholder:c[2]},h&2&&{size:c[1]},h&32&&Jh(c[5]),h&64&&{class:c[6].class}]):{};h&2097154&&(f.$$scope={dirty:h,ctx:c}),!r&&h&1&&(r=!0,f.value=c[0],pe(()=>r=!1)),t.$set(f),c[4].default?u?(u.p(c,h),h&16&&W(u,1)):(u=Dv(c),u.c(),W(u,1),u.m(i.parentNode,i)):u&&(ve(),$(u,1,1,()=>{u=null}),we())},i(c){s||(W(t.$$.fragment,c),W(u),s=!0)},o(c){$(t.$$.fragment,c),$(u),s=!1},d(c){c&&(J(n),J(i)),Dt(t,c),u&&u.d(c)}}}function _W(e){let t,r;return t=new i1({props:{class:"relative w-full",show:e[4].default,$$slots:{default:[bW]},$$scope:{ctx:e}}}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,[i]){const s={};i&16&&(s.show=n[4].default),i&2097271&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function vW(e,t,r){const n=["size","placeholder","value"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t;const a=Qh(s);let{size:l="lg"}=t,{placeholder:u="Search"}=t,{value:c=void 0}=t;const h={sm:"w-3.5 h-3.5",md:"w-5 h-5",lg:"w-6 h-6"};function f(T){c=T,r(0,c)}function d(T){ut.call(this,e,T)}function p(T){ut.call(this,e,T)}function m(T){ut.call(this,e,T)}function g(T){ut.call(this,e,T)}function y(T){ut.call(this,e,T)}function b(T){ut.call(this,e,T)}function _(T){ut.call(this,e,T)}function v(T){ut.call(this,e,T)}function w(T){ut.call(this,e,T)}function A(T){ut.call(this,e,T)}function x(T){ut.call(this,e,T)}function E(T){ut.call(this,e,T)}return e.$$set=T=>{r(6,t=It(It({},t),de(T))),r(5,i=ee(t,n)),"size"in T&&r(1,l=T.size),"placeholder"in T&&r(2,u=T.placeholder),"value"in T&&r(0,c=T.value),"$$scope"in T&&r(21,o=T.$$scope)},t=de(t),[c,l,u,h,a,i,t,s,f,d,p,m,g,y,b,_,v,w,A,x,E,o]}class wW extends Qt{constructor(t){super(),Kt(this,t,vW,_W,Gt,{size:1,placeholder:2,value:0})}}function xW(e){let t,r,n;const i=e[8].default,s=re(i,e,e[13],null);return{c(){t=V("span"),r=ot(),s&&s.c(),G(t,"class",e[3])},m(o,a){tt(o,t,a),tt(o,r,a),s&&s.m(o,a),n=!0},p(o,a){(!n||a&8)&&G(t,"class",o[3]),s&&s.p&&(!n||a&8192)&&ie(s,i,o,o[13],n?ne(i,o[13],a,null):se(o[13]),null)},i(o){n||(W(s,o),n=!0)},o(o){$(s,o),n=!1},d(o){o&&(J(t),J(r)),s&&s.d(o)}}}function TW(e){let t,r,n,i;const s=[{custom:!0},e[5],{class:e[4].class},{value:e[2]}];function o(u){e[9](u)}function a(u){e[10](u)}let l={$$slots:{default:[xW]},$$scope:{ctx:e}};for(let u=0;u<s.length;u+=1)l=It(l,s[u]);return e[1]!==void 0&&(l.checked=e[1]),e[0]!==void 0&&(l.group=e[0]),t=new aW({props:l}),zt.push(()=>me(t,"checked",o)),zt.push(()=>me(t,"group",a)),t.$on("click",e[11]),t.$on("change",e[12]),{c(){Ft(t.$$.fragment)},m(u,c){kt(t,u,c),i=!0},p(u,[c]){const h=c&52?Dr(s,[s[0],c&32&&Jh(u[5]),c&16&&{class:u[4].class},c&4&&{value:u[2]}]):{};c&8200&&(h.$$scope={dirty:c,ctx:u}),!r&&c&2&&(r=!0,h.checked=u[1],pe(()=>r=!1)),!n&&c&1&&(n=!0,h.group=u[0],pe(()=>n=!1)),t.$set(h)},i(u){i||(W(t.$$.fragment,u),i=!0)},o(u){$(t.$$.fragment,u),i=!1},d(u){Dt(t,u)}}}const AW="mr-3 shrink-0 bg-gray-200 rounded-full peer-focus:ring-4 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:bg-white after:border-gray-300 after:border after:rounded-full after:transition-all";function EW(e,t,r){const n=["size","group","value","checked","customSize"];let i=ee(t,n),{$$slots:s={},$$scope:o}=t,{size:a="default"}=t,{group:l=[]}=t,{value:u=""}=t,{checked:c=void 0}=t,{customSize:h=""}=t,f=$r("background");const d={primary:"peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 peer-checked:bg-primary-600",secondary:"peer-focus:ring-secondary-300 dark:peer-focus:ring-secondary-800 peer-checked:bg-secondary-600",red:"peer-focus:ring-red-300 dark:peer-focus:ring-red-800 peer-checked:bg-red-600",green:"peer-focus:ring-green-300 dark:peer-focus:ring-green-800 peer-checked:bg-green-600",purple:"peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 peer-checked:bg-purple-600",yellow:"peer-focus:ring-yellow-300 dark:peer-focus:ring-yellow-800 peer-checked:bg-yellow-400",teal:"peer-focus:ring-teal-300 dark:peer-focus:ring-teal-800 peer-checked:bg-teal-600",orange:"peer-focus:ring-orange-300 dark:peer-focus:ring-orange-800 peer-checked:bg-orange-500",blue:"peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},p={small:"w-9 h-5 after:top-[2px] after:left-[2px] after:h-4 after:w-4",default:"w-11 h-6 after:top-0.5 after:left-[2px] after:h-5 after:w-5",large:"w-14 h-7 after:top-0.5 after:left-[4px]  after:h-6 after:w-6",custom:h};let m;function g(v){c=v,r(1,c)}function y(v){l=v,r(0,l)}function b(v){ut.call(this,e,v)}function _(v){ut.call(this,e,v)}return e.$$set=v=>{r(4,t=It(It({},t),de(v))),r(5,i=ee(t,n)),"size"in v&&r(6,a=v.size),"group"in v&&r(0,l=v.group),"value"in v&&r(2,u=v.value),"checked"in v&&r(1,c=v.checked),"customSize"in v&&r(7,h=v.customSize),"$$scope"in v&&r(13,o=v.$$scope)},e.$$.update=()=>{r(3,m=Ae(AW,f?"dark:bg-gray-600 dark:border-gray-500":"dark:bg-gray-700 dark:border-gray-600",d[i.color??"primary"],p[a],"relative",t.classDiv))},t=de(t),[l,c,u,m,t,i,a,h,s,g,y,b,_,o]}class pc extends Qt{constructor(t){super(),Kt(this,t,EW,TW,Gt,{size:6,group:0,value:2,checked:1,customSize:7})}}var i6={};(function(e){e.__esModule=!0;var t=function(){function r(n,i,s){i===void 0&&(i=1e3),s===void 0&&(s=!1),this.callback=n,this.delay=i,this.debounce_first=s,this.timer=null,this.is_first_debounce=!0}return r.prototype.debounce=function(){for(var n=this,i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(this.is_first_debounce&&!this.debounce_first){this.is_first_debounce=!1;return}window.clearTimeout(this.timer),this.timer=window.setTimeout(function(){n.callback.apply(n,i)},this.delay)},r}();e.default=t})(i6);const CW=Og(i6);function SW(e){const t=MW(e);return e.addEventListener("touchstart",t),e.addEventListener("mousedown",t),{destroy(){e.removeEventListener("touchstart",t),e.removeEventListener("mousedown",t)}}}function MW(e){const t=IW(e);return function(r){r.preventDefault(),e.dispatchEvent(new CustomEvent("dragstart"));const n="touches"in r?"touchmove":"mousemove",i="touches"in r?"touchend":"mouseup";document.addEventListener(n,t),document.addEventListener(i,s);function s(o){o.stopPropagation(),document.removeEventListener(n,t),document.removeEventListener(i,s),e.dispatchEvent(new CustomEvent("dragend"))}}}function IW(e){const t=e.parentNode;return function(r){const{left:n,width:i}=t.getBoundingClientRect(),s="touches"in r?r.touches[0].clientX:r.clientX,o=Math.min(Math.max((s-n)/i,0),1)||0;e.dispatchEvent(new CustomEvent("drag",{detail:o}))}}function RW(e){let t,r,n,i,s,o;const a=e[4].default,l=re(a,e,e[3],null);return{c(){t=V("div"),r=V("div"),l&&l.c(),G(r,"class","thumb-content svelte-8w8x88"),F1(r,"active",e[1]),G(t,"class","thumb svelte-8w8x88"),G(t,"style",n=`left: ${e[0]*100}%;`)},m(u,c){tt(u,t,c),N(t,r),l&&l.m(r,null),i=!0,s||(o=[ua(SW.call(null,t)),gt(t,"dragstart",e[5]),gt(t,"drag",e[6]),gt(t,"dragend",e[7])],s=!0)},p(u,[c]){l&&l.p&&(!i||c&8)&&ie(l,a,u,u[3],i?ne(a,u[3],c,null):se(u[3]),null),(!i||c&2)&&F1(r,"active",u[1]),(!i||c&1&&n!==(n=`left: ${u[0]*100}%;`))&&G(t,"style",n)},i(u){i||(W(l,u),i=!0)},o(u){$(l,u),i=!1},d(u){u&&J(t),l&&l.d(u),s=!1,vr(o)}}}function PW(e,t,r){let{$$slots:n={},$$scope:i}=t;const s=Xm();let o,{pos:a}=t;const l=()=>(r(1,o=!0),s("active",!0)),u=({detail:h})=>r(0,a=h),c=()=>(r(1,o=!1),s("active",!1));return e.$$set=h=>{"pos"in h&&r(0,a=h.pos),"$$scope"in h&&r(3,i=h.$$scope)},[a,o,s,i,n,l,u,c]}class s6 extends Qt{constructor(t){super(),Kt(this,t,PW,RW,Gt,{pos:0})}}const kW=e=>({}),Nv=e=>({}),DW=e=>({}),Ov=e=>({});function Fv(e){let t,r,n;return{c(){t=V("input"),G(t,"type","number"),t.value=r=e[0][1],G(t,"name",n=e[1][1]),G(t,"class","svelte-1q9yxz9")},m(i,s){tt(i,t,s)},p(i,s){s&1&&r!==(r=i[0][1])&&t.value!==r&&(t.value=r),s&2&&n!==(n=i[1][1])&&G(t,"name",n)},d(i){i&&J(t)}}}function NW(e){let t;return{c(){t=V("div"),G(t,"class","thumb svelte-1q9yxz9")},m(r,n){tt(r,t,n)},p:qt,d(r){r&&J(t)}}}function OW(e){let t;const r=e[10].default,n=re(r,e,e[15],null),i=n||NW();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),t=!0},p(s,o){n&&n.p&&(!t||o&32768)&&ie(n,r,s,s[15],t?ne(r,s[15],o,null):se(s[15]),null)},i(s){t||(W(i,s),t=!0)},o(s){$(i,s),t=!1},d(s){i&&i.d(s)}}}function FW(e){let t;const r=e[10].left,n=re(r,e,e[15],Ov),i=n||OW(e);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),t=!0},p(s,o){n?n.p&&(!t||o&32768)&&ie(n,r,s,s[15],t?ne(r,s[15],o,DW):se(s[15]),Ov):i&&i.p&&(!t||o&32768)&&i.p(s,t?o:-1)},i(s){t||(W(i,s),t=!0)},o(s){$(i,s),t=!1},d(s){i&&i.d(s)}}}function Bv(e){let t,r,n;function i(o){e[13](o)}let s={$$slots:{default:[UW]},$$scope:{ctx:e}};return e[3][1]!==void 0&&(s.pos=e[3][1]),t=new s6({props:s}),zt.push(()=>me(t,"pos",i)),t.$on("active",e[14]),{c(){Ft(t.$$.fragment)},m(o,a){kt(t,o,a),n=!0},p(o,a){const l={};a&32768&&(l.$$scope={dirty:a,ctx:o}),!r&&a&8&&(r=!0,l.pos=o[3][1],pe(()=>r=!1)),t.$set(l)},i(o){n||(W(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){Dt(t,o)}}}function BW(e){let t;return{c(){t=V("div"),G(t,"class","thumb svelte-1q9yxz9")},m(r,n){tt(r,t,n)},p:qt,d(r){r&&J(t)}}}function LW(e){let t;const r=e[10].default,n=re(r,e,e[15],null),i=n||BW();return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),t=!0},p(s,o){n&&n.p&&(!t||o&32768)&&ie(n,r,s,s[15],t?ne(r,s[15],o,null):se(s[15]),null)},i(s){t||(W(i,s),t=!0)},o(s){$(i,s),t=!1},d(s){i&&i.d(s)}}}function UW(e){let t;const r=e[10].right,n=re(r,e,e[15],Nv),i=n||LW(e);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),t=!0},p(s,o){n?n.p&&(!t||o&32768)&&ie(n,r,s,s[15],t?ne(r,s[15],o,kW):se(s[15]),Nv):i&&i.p&&(!t||o&32768)&&i.p(s,t?o:-1)},i(s){t||(W(i,s),t=!0)},o(s){$(i,s),t=!1},d(s){i&&i.d(s)}}}function GW(e){let t,r,n,i,s,o,a,l,u,c,h,f,d=e[2]&&Fv(e);function p(y){e[11](y)}let m={$$slots:{default:[FW]},$$scope:{ctx:e}};e[3][0]!==void 0&&(m.pos=e[3][0]),u=new s6({props:m}),zt.push(()=>me(u,"pos",p)),u.$on("active",e[12]);let g=e[2]&&Bv(e);return{c(){t=V("input"),i=ot(),d&&d.c(),s=ot(),o=V("div"),a=V("div"),l=ot(),Ft(u.$$.fragment),h=ot(),g&&g.c(),G(t,"type","number"),t.value=r=e[0][0],G(t,"name",n=e[1][0]),G(t,"class","svelte-1q9yxz9"),G(a,"class","progress svelte-1q9yxz9"),G(a,"style",e[5]),G(o,"class","track svelte-1q9yxz9")},m(y,b){tt(y,t,b),tt(y,i,b),d&&d.m(y,b),tt(y,s,b),tt(y,o,b),N(o,a),N(o,l),kt(u,o,null),N(o,h),g&&g.m(o,null),f=!0},p(y,[b]){(!f||b&1&&r!==(r=y[0][0])&&t.value!==r)&&(t.value=r),(!f||b&2&&n!==(n=y[1][0]))&&G(t,"name",n),y[2]?d?d.p(y,b):(d=Fv(y),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null),(!f||b&32)&&G(a,"style",y[5]);const _={};b&32768&&(_.$$scope={dirty:b,ctx:y}),!c&&b&8&&(c=!0,_.pos=y[3][0],pe(()=>c=!1)),u.$set(_),y[2]?g?(g.p(y,b),b&4&&W(g,1)):(g=Bv(y),g.c(),W(g,1),g.m(o,null)):g&&(ve(),$(g,1,1,()=>{g=null}),we())},i(y){f||(W(u.$$.fragment,y),W(g),f=!0)},o(y){$(u.$$.fragment,y),$(g),f=!1},d(y){y&&(J(t),J(i),J(s),J(o)),d&&d.d(y),Dt(u),g&&g.d()}}}function HW(e){return[Math.min(...e),Math.max(...e)]}function zW(e,t,r){let n,{$$slots:i={},$$scope:s}=t;const o=Xm();let{name:a=[]}=t,{range:l=!1}=t,{min:u=0}=t,{max:c=100}=t,{step:h=1}=t,{value:f=[u,c]}=t,d,p=!1,{order:m=!1}=t;function g(x){const E=u%h,T=c-u;r(0,f=x.map(M=>u+M*T).map(M=>Math.round((M-E)/h)*h+E)),o("input",f)}function y(x){r(3,d=x.map(E=>Math.min(Math.max(E,u),c)).map(E=>(E-u)/(c-u)))}function b(){y(f),g(d)}function _(x){e.$$.not_equal(d[0],x)&&(d[0]=x,r(3,d),r(2,l),r(9,m),r(4,p))}const v=({detail:x})=>r(4,p=x);function w(x){e.$$.not_equal(d[1],x)&&(d[1]=x,r(3,d),r(2,l),r(9,m),r(4,p))}const A=({detail:x})=>r(4,p=x);return e.$$set=x=>{"name"in x&&r(1,a=x.name),"range"in x&&r(2,l=x.range),"min"in x&&r(6,u=x.min),"max"in x&&r(7,c=x.max),"step"in x&&r(8,h=x.step),"value"in x&&r(0,f=x.value),"order"in x&&r(9,m=x.order),"$$scope"in x&&r(15,s=x.$$scope)},e.$$.update=()=>{e.$$.dirty&540&&l&&m&&p&&r(3,d=HW(d)),e.$$.dirty&24&&p&&g(d),e.$$.dirty&17&&(p||y(f)),e.$$.dirty&192&&b(),e.$$.dirty&12&&r(5,n=`
    left: ${l?Math.min(d[0],d[1])*100:0}%;
    right: ${100-Math.max(d[0],l?d[1]:d[0])*100}%;
  `)},[f,a,l,d,p,n,u,c,h,m,i,_,v,w,A,s]}class VW extends Qt{constructor(t){super(),Kt(this,t,zW,GW,Gt,{name:1,range:2,min:6,max:7,step:8,value:0,order:9})}}function Lv(e){let t,r,n,i,s,o=e[7]&&Uv(e);return{c(){t=V("div"),r=V("span"),n=Ht(e[2]),i=ot(),o&&o.c(),G(r,"class","text-sm font-medium"),G(t,"class","mt-6 mb-1 | flex flex-row items-center space-x-3")},m(a,l){tt(a,t,l),N(t,r),N(r,n),N(t,i),o&&o.m(t,null),s=!0},p(a,l){(!s||l&4)&&Ve(n,a[2]),a[7]?o?(o.p(a,l),l&128&&W(o,1)):(o=Uv(a),o.c(),W(o,1),o.m(t,null)):o&&(ve(),$(o,1,1,()=>{o=null}),we())},i(a){s||(W(o),s=!0)},o(a){$(o),s=!1},d(a){a&&J(t),o&&o.d()}}}function Uv(e){let t,r;return t=new j4({props:{class:"h-2 px-4 ",size:"xs",color:"alternative",$$slots:{default:[WW]},$$scope:{ctx:e}}}),t.$on("click",e[9]),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,i){const s={};i&4096&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function WW(e){let t;return{c(){t=Ht("Reset")},m(r,n){tt(r,t,n)},d(r){r&&J(t)}}}function XW(e){let t,r,n,i,s=e[4](e[0])+"",o,a,l,u=e[4](e[1])+"",c,h,f,d,p,m=e[2]&&Lv(e);function g(b){e[10](b)}let y={min:e[3][0],max:e[3][1],step:e[6],range:!0};return e[5]!==void 0&&(y.value=e[5]),f=new VW({props:y}),zt.push(()=>me(f,"value",g)),{c(){t=V("div"),m&&m.c(),r=ot(),n=V("div"),i=V("span"),o=Ht(s),a=ot(),l=V("span"),c=Ht(u),h=ot(),Ft(f.$$.fragment),G(i,"class","text-xs text-gray-500"),G(l,"class","text-xs text-gray-500"),G(n,"class","flex flex-row justify-between")},m(b,_){tt(b,t,_),m&&m.m(t,null),N(t,r),N(t,n),N(n,i),N(i,o),N(n,a),N(n,l),N(l,c),N(t,h),kt(f,t,null),p=!0},p(b,[_]){b[2]?m?(m.p(b,_),_&4&&W(m,1)):(m=Lv(b),m.c(),W(m,1),m.m(t,r)):m&&(ve(),$(m,1,1,()=>{m=null}),we()),(!p||_&17)&&s!==(s=b[4](b[0])+"")&&Ve(o,s),(!p||_&18)&&u!==(u=b[4](b[1])+"")&&Ve(c,u);const v={};_&8&&(v.min=b[3][0]),_&8&&(v.max=b[3][1]),_&64&&(v.step=b[6]),!d&&_&32&&(d=!0,v.value=b[5],pe(()=>d=!1)),f.$set(v)},i(b){p||(W(m),W(f.$$.fragment,b),p=!0)},o(b){$(m),$(f.$$.fragment,b),p=!1},d(b){b&&J(t),m&&m.d(),Dt(f)}}}function $W(e,t,r){let n,i,s,{start:o}=t,{end:a}=t,{label:l}=t,{domain:u}=t,{format:c}=t,{step:h=void 0}=t;const f=new CW(m=>{r(0,o=m[0]),r(1,a=m[1])},150),d=()=>{r(0,o=u[0]),r(1,a=u[1])};function p(m){n=m,r(5,n),r(0,o),r(1,a)}return e.$$set=m=>{"start"in m&&r(0,o=m.start),"end"in m&&r(1,a=m.end),"label"in m&&r(2,l=m.label),"domain"in m&&r(3,u=m.domain),"format"in m&&r(4,c=m.format),"step"in m&&r(8,h=m.step)},e.$$.update=()=>{e.$$.dirty&3&&r(5,n=[o,a]),e.$$.dirty&40&&r(7,i=u[0]!==n[0]||u[1]!==n[1]),e.$$.dirty&264&&r(6,s=h||Math.abs(u[1]-u[0])/1e3),e.$$.dirty&32&&f.debounce(n)},[o,a,l,u,c,n,s,i,h,d,p]}class mc extends Qt{constructor(t){super(),Kt(this,t,$W,XW,Gt,{start:0,end:1,label:2,domain:3,format:4,step:8})}}function Gv(e,t,r){const n=e.slice();return n[38]=t[r],n}function Hv(e){let t,r;return t=new zV({props:{open:e[1],class:"max-h-[50vh] space-y-1 overflow-y-auto p-3",$$slots:{default:[YW]},$$scope:{ctx:e}}}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,i){const s={};i[0]&2&&(s.open=n[1]),i[0]&13|i[1]&1024&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function jW(e){let t=e[38].label+"",r;return{c(){r=Ht(t)},m(n,i){tt(n,r,i)},p(n,i){i[0]&4&&t!==(t=n[38].label+"")&&Ve(r,t)},d(n){n&&J(r)}}}function zv(e){let t,r;function n(){return e[25](e[38])}return t=new ZV({props:{$$slots:{default:[jW]},$$scope:{ctx:e}}}),t.$on("click",n),{c(){Ft(t.$$.fragment)},m(i,s){kt(t,i,s),r=!0},p(i,s){e=i;const o={};s[0]&4|s[1]&1024&&(o.$$scope={dirty:s,ctx:e}),t.$set(o)},i(i){r||(W(t.$$.fragment,i),r=!0)},o(i){$(t.$$.fragment,i),r=!1},d(i){Dt(t,i)}}}function YW(e){let t,r,n=Vc(e[2]),i=[];for(let o=0;o<n.length;o+=1)i[o]=zv(Gv(e,n,o));const s=o=>$(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=or()},m(o,a){for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(o,a);tt(o,t,a),r=!0},p(o,a){if(a[0]&13){n=Vc(o[2]);let l;for(l=0;l<n.length;l+=1){const u=Gv(o,n,l);i[l]?(i[l].p(u,a),W(i[l],1)):(i[l]=zv(u),i[l].c(),W(i[l],1),i[l].m(t.parentNode,t))}for(ve(),l=n.length;l<i.length;l+=1)s(l);we()}},i(o){if(!r){for(let a=0;a<n.length;a+=1)W(i[a]);r=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)$(i[a]);r=!1},d(o){o&&J(t),Z2(i,o)}}}function qW(e){let t,r,n,i,s,o,a,l,u,c,h,f,d,p,m,g;function y(S){e[26](S)}function b(S){e[27](S)}let _={label:"Score",domain:e[6],format:e[20]};e[4]!==void 0&&(_.start=e[4]),e[5]!==void 0&&(_.end=e[5]),t=new mc({props:_}),zt.push(()=>me(t,"start",y)),zt.push(()=>me(t,"end",b));function v(S){e[28](S)}function w(S){e[29](S)}let A={label:"Interacted Days",domain:e[9],format:e[21],step:1};e[7]!==void 0&&(A.start=e[7]),e[8]!==void 0&&(A.end=e[8]),s=new mc({props:A}),zt.push(()=>me(s,"start",v)),zt.push(()=>me(s,"end",w));function x(S){e[30](S)}function E(S){e[31](S)}let T={label:"Incoming Engagements",domain:e[12],format:e[21],step:1};e[10]!==void 0&&(T.start=e[10]),e[11]!==void 0&&(T.end=e[11]),u=new mc({props:T}),zt.push(()=>me(u,"start",x)),zt.push(()=>me(u,"end",E));function M(S){e[32](S)}function P(S){e[33](S)}let R={label:"Outgoing Engagements",domain:e[15],format:e[21],step:1};return e[13]!==void 0&&(R.start=e[13]),e[14]!==void 0&&(R.end=e[14]),d=new mc({props:R}),zt.push(()=>me(d,"start",M)),zt.push(()=>me(d,"end",P)),{c(){Ft(t.$$.fragment),i=ot(),Ft(s.$$.fragment),l=ot(),Ft(u.$$.fragment),f=ot(),Ft(d.$$.fragment)},m(S,C){kt(t,S,C),tt(S,i,C),kt(s,S,C),tt(S,l,C),kt(u,S,C),tt(S,f,C),kt(d,S,C),g=!0},p(S,C){const I={};C[0]&64&&(I.domain=S[6]),!r&&C[0]&16&&(r=!0,I.start=S[4],pe(()=>r=!1)),!n&&C[0]&32&&(n=!0,I.end=S[5],pe(()=>n=!1)),t.$set(I);const F={};C[0]&512&&(F.domain=S[9]),!o&&C[0]&128&&(o=!0,F.start=S[7],pe(()=>o=!1)),!a&&C[0]&256&&(a=!0,F.end=S[8],pe(()=>a=!1)),s.$set(F);const H={};C[0]&4096&&(H.domain=S[12]),!c&&C[0]&1024&&(c=!0,H.start=S[10],pe(()=>c=!1)),!h&&C[0]&2048&&(h=!0,H.end=S[11],pe(()=>h=!1)),u.$set(H);const X={};C[0]&32768&&(X.domain=S[15]),!p&&C[0]&8192&&(p=!0,X.start=S[13],pe(()=>p=!1)),!m&&C[0]&16384&&(m=!0,X.end=S[14],pe(()=>m=!1)),d.$set(X)},i(S){g||(W(t.$$.fragment,S),W(s.$$.fragment,S),W(u.$$.fragment,S),W(d.$$.fragment,S),g=!0)},o(S){$(t.$$.fragment,S),$(s.$$.fragment,S),$(u.$$.fragment,S),$(d.$$.fragment,S),g=!1},d(S){S&&(J(i),J(l),J(f)),Dt(t,S),Dt(s,S),Dt(u,S),Dt(d,S)}}}function ZW(e){let t;return{c(){t=Ht("Curated Profiles")},m(r,n){tt(r,t,n)},d(r){r&&J(t)}}}function KW(e){let t;return{c(){t=Ht("Interacting Profiles")},m(r,n){tt(r,t,n)},d(r){r&&J(t)}}}function QW(e){let t;return{c(){t=Ht("Incoming")},m(r,n){tt(r,t,n)},d(r){r&&J(t)}}}function JW(e){let t,r,n,i,s,o,a,l,u,c,h,f,d,p,m,g,y,b,_,v,w,A,x,E,T,M,P,R,S,C,I,F,H,X,Z,D,O,z,k,Y,B,rt;function Q(mt){e[23](mt)}let et={placeholder:"Search profile handle"};e[0]!==void 0&&(et.value=e[0]),s=new wW({props:et}),zt.push(()=>me(s,"value",Q)),s.$on("input",e[24]);let U=e[2].length>0&&Hv(e),j=Dp&&qW(e);function K(mt){e[34](mt)}let L={};e[16]!==void 0&&(L.checked=e[16]),_=new pc({props:L}),zt.push(()=>me(_,"checked",K));function dt(mt){e[35](mt)}let lt={outline:!0,$$slots:{default:[ZW]},$$scope:{ctx:e}};e[17]!==void 0&&(lt.checked=e[17]),R=new pc({props:lt}),zt.push(()=>me(R,"checked",dt));function bt(mt){e[36](mt)}let Nt={$$slots:{default:[KW]},$$scope:{ctx:e}};e[18]!==void 0&&(Nt.checked=e[18]),I=new pc({props:Nt}),zt.push(()=>me(I,"checked",bt));function Jt(mt){e[37](mt)}let ye={$$slots:{default:[QW]},$$scope:{ctx:e}};return e[19]!==void 0&&(ye.checked=e[19]),Y=new pc({props:ye}),zt.push(()=>me(Y,"checked",Jt)),{c(){t=V("div"),r=V("h2"),r.textContent="Profiles",n=ot(),i=V("div"),Ft(s.$$.fragment),a=ot(),U&&U.c(),l=ot(),u=V("hr"),c=ot(),h=V("div"),f=V("h2"),f.textContent="Filters",d=ot(),p=V("div"),j&&j.c(),m=ot(),g=V("div"),y=V("span"),y.textContent="Mark",b=ot(),Ft(_.$$.fragment),w=V("span"),w.textContent="Filter",A=ot(),x=V("hr"),E=ot(),T=V("h2"),T.textContent="Profiles",M=ot(),P=V("div"),Ft(R.$$.fragment),C=ot(),Ft(I.$$.fragment),H=ot(),X=V("hr"),Z=ot(),D=V("div"),O=V("h2"),O.textContent="Engagements",z=ot(),k=V("div"),Ft(Y.$$.fragment),G(r,"class","text-md font-bold | mb-4"),G(i,"class","space-y-2"),G(t,"class","p-6"),G(f,"class","text-md font-bold | mb-2"),G(y,"class","text-sm pr-3"),G(w,"class","text-sm"),G(g,"class","flex flex-row my-4 justify-center items-center"),G(T,"class","text-md font-bold | my-4"),G(P,"class","space-y-2"),G(h,"class","p-6"),G(O,"class","text-md font-bold | mb-4"),G(k,"class","space-y-2"),G(D,"class","p-6")},m(mt,Ut){tt(mt,t,Ut),N(t,r),N(t,n),N(t,i),kt(s,i,null),N(i,a),U&&U.m(i,null),tt(mt,l,Ut),tt(mt,u,Ut),tt(mt,c,Ut),tt(mt,h,Ut),N(h,f),N(h,d),N(h,p),j&&j.m(p,null),N(p,m),N(p,g),N(g,y),N(g,b),kt(_,g,null),N(g,w),N(h,A),N(h,x),N(h,E),N(h,T),N(h,M),N(h,P),kt(R,P,null),N(P,C),kt(I,P,null),tt(mt,H,Ut),tt(mt,X,Ut),tt(mt,Z,Ut),tt(mt,D,Ut),N(D,O),N(D,z),N(D,k),kt(Y,k,null),rt=!0},p(mt,Ut){const wr={};!o&&Ut[0]&1&&(o=!0,wr.value=mt[0],pe(()=>o=!1)),s.$set(wr),mt[2].length>0?U?(U.p(mt,Ut),Ut[0]&4&&W(U,1)):(U=Hv(mt),U.c(),W(U,1),U.m(i,null)):U&&(ve(),$(U,1,1,()=>{U=null}),we()),Dp&&j.p(mt,Ut);const rn={};!v&&Ut[0]&65536&&(v=!0,rn.checked=mt[16],pe(()=>v=!1)),_.$set(rn);const yi={};Ut[1]&1024&&(yi.$$scope={dirty:Ut,ctx:mt}),!S&&Ut[0]&131072&&(S=!0,yi.checked=mt[17],pe(()=>S=!1)),R.$set(yi);const nn={};Ut[1]&1024&&(nn.$$scope={dirty:Ut,ctx:mt}),!F&&Ut[0]&262144&&(F=!0,nn.checked=mt[18],pe(()=>F=!1)),I.$set(nn);const sn={};Ut[1]&1024&&(sn.$$scope={dirty:Ut,ctx:mt}),!B&&Ut[0]&524288&&(B=!0,sn.checked=mt[19],pe(()=>B=!1)),Y.$set(sn)},i(mt){rt||(W(s.$$.fragment,mt),W(U),W(j),W(_.$$.fragment,mt),W(R.$$.fragment,mt),W(I.$$.fragment,mt),W(Y.$$.fragment,mt),rt=!0)},o(mt){$(s.$$.fragment,mt),$(U),$(j),$(_.$$.fragment,mt),$(R.$$.fragment,mt),$(I.$$.fragment,mt),$(Y.$$.fragment,mt),rt=!1},d(mt){mt&&(J(t),J(l),J(u),J(c),J(h),J(H),J(X),J(Z),J(D)),Dt(s),U&&U.d(),j&&j.d(),Dt(_),Dt(R),Dt(I),Dt(Y)}}}function tX(e,t,r){let n,i,s,o,a,l,u,c,h,f,d,p,m,g,y,b,_,v,w;_t(e,YN,B=>r(22,i=B)),_t(e,cr,B=>r(3,s=B)),_t(e,Il,B=>r(4,o=B)),_t(e,Rl,B=>r(5,a=B)),_t(e,Ig,B=>r(6,l=B)),_t(e,Pl,B=>r(7,u=B)),_t(e,kl,B=>r(8,c=B)),_t(e,QT,B=>r(9,h=B)),_t(e,Dl,B=>r(10,f=B)),_t(e,Nl,B=>r(11,d=B)),_t(e,Rg,B=>r(12,p=B)),_t(e,Ol,B=>r(13,m=B)),_t(e,Fl,B=>r(14,g=B)),_t(e,Pg,B=>r(15,y=B)),_t(e,Pp,B=>r(16,b=B)),_t(e,Ip,B=>r(17,_=B)),_t(e,Rp,B=>r(18,v=B)),_t(e,kp,B=>r(19,w=B));const A=Mn(".6f"),x=Mn("d");let E="",T=!1;function M(B){E=B,r(0,E)}const P=()=>{r(1,T=!0)},R=B=>{Ue(cr,s=B.id,s),r(0,E="")};function S(B){o=B,Il.set(o)}function C(B){a=B,Rl.set(a)}function I(B){u=B,Pl.set(u)}function F(B){c=B,kl.set(c)}function H(B){f=B,Dl.set(f)}function X(B){d=B,Nl.set(d)}function Z(B){m=B,Ol.set(m)}function D(B){g=B,Fl.set(g)}function O(B){b=B,Pp.set(b)}function z(B){_=B,Ip.set(_)}function k(B){v=B,Rp.set(v)}function Y(B){w=B,kp.set(w)}return e.$$.update=()=>{e.$$.dirty[0]&4194305&&r(2,n=eg(i.filter(B=>E.length>2&&B.label.toLowerCase().includes(E.toLowerCase())),"label","asc"))},[E,T,n,s,o,a,l,u,c,h,f,d,p,m,g,y,b,_,v,w,A,x,i,M,P,R,S,C,I,F,H,X,Z,D,O,z,k,Y]}class eX extends Qt{constructor(t){super(),Kt(this,t,tX,JW,Gt,{},null,[-1,-1])}}const rX=function(){const{subscribe:e,set:t}=Ie({x:0,y:0});return document.onmousemove=r=>{t({x:r.pageX,y:r.pageY})},{subscribe:e}}();function nX(e){let t,r,n,i,s,o;Cs(e[8]);const a=e[7].default,l=re(a,e,e[6],null);return{c(){t=V("div"),r=V("div"),l&&l.c(),G(r,"class","tooltip absolute bg-white shadow-md rounded-md svelte-6esobm"),G(t,"class","tooltip__wrapper svelte-6esobm"),G(t,"style",n=`top: ${e[2]}px; left: ${e[1]}px;`)},m(u,c){tt(u,t,c),N(t,r),l&&l.m(r,null),i=!0,s||(o=gt(window,"resize",e[8]),s=!0)},p(u,[c]){l&&l.p&&(!i||c&64)&&ie(l,a,u,u[6],i?ne(a,u[6],c,null):se(u[6]),null),(!i||c&6&&n!==(n=`top: ${u[2]}px; left: ${u[1]}px;`))&&G(t,"style",n)},i(u){i||(W(l,u),i=!0)},o(u){$(l,u),i=!1},d(u){u&&J(t),l&&l.d(u),s=!1,o()}}}function iX(e,t,r){let n,i,s,o;_t(e,rX,f=>r(5,o=f));let{$$slots:a={},$$scope:l}=t,{width:u=300}=t,c=0;function h(){r(0,c=window.innerWidth)}return e.$$set=f=>{"width"in f&&r(3,u=f.width),"$$scope"in f&&r(6,l=f.$$scope)},e.$$.update=()=>{e.$$.dirty&8&&r(4,n=(u+20)/2),e.$$.dirty&32&&r(2,i=o.y),e.$$.dirty&49&&r(1,s=o.x-n<0?n:o.x+n>c?c-n:o.x)},[c,s,i,u,n,o,l,a,h]}class sX extends Qt{constructor(t){super(),Kt(this,t,iX,nX,Gt,{width:3})}}function Vv(e){let t,r;return t=new sX({props:{$$slots:{default:[oX]},$$scope:{ctx:e}}}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p(n,i){const s={};i&10&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function oX(e){let t,r,n,i=e[1].label+"",s,o,a=e[1].id+"",l,u,c,h,f,d,p,m,g,y,b,_,v=e[1].rank+"",w,A,x,E,T,M,P=e[2](e[1].score)+"",R;return{c(){t=V("div"),r=V("div"),n=V("strong"),s=Ht(i),o=Ht(`
          (`),l=Ht(a),u=Ht(")"),c=ot(),h=V("hr"),f=ot(),d=V("div"),p=V("table"),m=V("tr"),g=V("td"),g.innerHTML="<strong>Rank</strong>",y=ot(),b=V("td"),_=Ht("#"),w=Ht(v),A=ot(),x=V("tr"),E=V("td"),E.innerHTML="<strong>Score</strong>",T=ot(),M=V("td"),R=Ht(P),G(r,"class","py-2 px-4 whitespace-nowrap"),G(g,"class","pr-4"),G(d,"class","py-2 px-4 text-gray-500 text-sm"),G(t,"class","text-sm")},m(S,C){tt(S,t,C),N(t,r),N(r,n),N(n,s),N(r,o),N(r,l),N(r,u),N(t,c),N(t,h),N(t,f),N(t,d),N(d,p),N(p,m),N(m,g),N(m,y),N(m,b),N(b,_),N(b,w),N(p,A),N(p,x),N(x,E),N(x,T),N(x,M),N(M,R)},p(S,C){C&2&&i!==(i=S[1].label+"")&&Ve(s,i),C&2&&a!==(a=S[1].id+"")&&Ve(l,a),C&2&&v!==(v=S[1].rank+"")&&Ve(w,v),C&2&&P!==(P=S[2](S[1].score)+"")&&Ve(R,P)},d(S){S&&J(t)}}}function aX(e){let t,r,n=e[0]!==""&&e[1]&&Vv(e);return{c(){t=V("div"),n&&n.c(),G(t,"class","tooltip-view")},m(i,s){tt(i,t,s),n&&n.m(t,null),r=!0},p(i,[s]){i[0]!==""&&i[1]?n?(n.p(i,s),s&3&&W(n,1)):(n=Vv(i),n.c(),W(n,1),n.m(t,null)):n&&(ve(),$(n,1,1,()=>{n=null}),we())},i(i){r||(W(n),r=!0)},o(i){$(n),r=!1},d(i){i&&J(t),n&&n.d()}}}function lX(e,t,r){let n,i;_t(e,ll,o=>r(0,n=o)),_t(e,qN,o=>r(1,i=o));const s=Mn(".8f");return[n,i,s]}class uX extends Qt{constructor(t){super(),Kt(this,t,lX,aX,Gt,{})}}function zs(e){return e!=null&&!Number.isNaN(e)}function Kr(e,t){return+zs(t)-+zs(e)||nr(e,t)}function Wh(e,t){return+zs(t)-+zs(e)||Zl(e,t)}function o6(e){return e!=null&&`${e}`!=""}function a6(e){return isFinite(e)?e:NaN}function s1(e){return e>0&&isFinite(e)?e:NaN}function l6(e){return e<0&&isFinite(e)?e:NaN}function cX(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const r=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),s=e.getUTCMilliseconds();return`${hX(e.getUTCFullYear())}-${jn(e.getUTCMonth()+1,2)}-${jn(e.getUTCDate(),2)}${r||n||i||s?`T${jn(r,2)}:${jn(n,2)}${i||s?`:${jn(i,2)}${s?`.${jn(s,3)}`:""}`:""}Z`:""}`}function hX(e){return e<0?`-${jn(-e,6)}`:e>9999?`+${jn(e,6)}`:jn(e,4)}function jn(e,t){return`${e}`.padStart(t,"0")}const fX=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function u6(e,t){return fX.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Co=1e3,ms=Co*60,gs=ms*60,ci=gs*24,hn=ci*7,As=ci*30,Ti=ci*365,_0=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Co],["5 seconds",5*Co],["15 seconds",15*Co],["30 seconds",30*Co],["minute",ms],["5 minutes",5*ms],["15 minutes",15*ms],["30 minutes",30*ms],["hour",gs],["3 hours",3*gs],["6 hours",6*gs],["12 hours",12*gs],["day",ci],["2 days",2*ci],["week",hn],["2 weeks",2*hn],["month",As],["3 months",3*As],["6 months",6*As],["year",Ti],["2 years",2*Ti],["5 years",5*Ti],["10 years",10*Ti],["20 years",20*Ti],["50 years",50*Ti],["100 years",100*Ti]],o1=new Map([["second",Co],["minute",ms],["hour",gs],["day",ci],["monday",hn],["tuesday",hn],["wednesday",hn],["thursday",hn],["friday",hn],["saturday",hn],["sunday",hn],["week",hn],["month",As],["year",Ti]]),c6=new Map([["second",gn],["minute",Af],["hour",Ef],["day",js],["monday",Sl],["tuesday",f3],["wednesday",d3],["thursday",Os],["friday",p3],["saturday",m3],["sunday",Qo],["week",Qo],["month",ou],["year",qr]]),h6=new Map([["second",gn],["minute",iu],["hour",su],["day",Sf],["monday",Ml],["tuesday",g3],["wednesday",y3],["thursday",Fs],["friday",b3],["saturday",_3],["sunday",Jo],["week",Jo],["month",au],["year",Zr]]),gu=Symbol("intervalDuration"),$f=Symbol("intervalType");for(const[e,t]of c6)t[gu]=o1.get(e),t[$f]="time";for(const[e,t]of h6)t[gu]=o1.get(e),t[$f]="utc";const dX=[["year",Zr,"utc"],["year",qr,"time"],["month",au,"utc"],["month",ou,"time"],["day",Sf,"utc",6*As],["day",js,"time",6*As],["hour",su,"utc",3*ci],["minute",iu,"utc",6*gs],["second",gn,"utc",30*ms]];function f6(e,t,r){let n=`${e}`.toLowerCase();n.endsWith("s")&&(n=n.slice(0,-1));let i=1;const s=/^(?:(\d+)\s+)/.exec(n);switch(s&&(n=n.slice(s[0].length),i=+s[1]),n){case"quarter":n="month",i*=3;break;case"half":n="month",i*=6;break}let o=t.get(n);if(!o)throw new Error(`unknown interval: ${e}`);if(i>1){if(!o.every)throw new Error(`non-periodic interval: ${n}`);o=o.every(i),o[gu]=o1.get(n)*i,o[$f]=r}return o}function d6(e){return f6(e,c6,"time")}function a1(e){return f6(e,h6,"utc")}function Wv(e,t){if(!(t>1))return;const r=e[gu];if(!_0.some(([,i])=>i===r)||r%ci===0&&ci<r&&r<As)return;const[n]=_0[uf(([,i])=>Math.log(i)).center(_0,Math.log(r*t))];return(e[$f]==="time"?d6:a1)(n)}function Xv(e,t,r){const n=t==="time"?Eg:lu;if(r==null)return n(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=pX(r);switch(e){case"millisecond":return ho(n(".%L"),n(":%M:%S"),i);case"second":return ho(n(":%S"),n("%-I:%M"),i);case"minute":return ho(n("%-I:%M"),n("%p"),i);case"hour":return ho(n("%-I %p"),n("%b %-d"),i);case"day":return ho(n("%-d"),n("%b"),i);case"month":return ho(n("%b"),n("%Y"),i);case"year":return n("%Y")}throw new Error("unable to format time ticks")}function pX(e){return e==="left"||e==="right"?(t,r)=>`
${t}
${r}`:e==="top"?(t,r)=>`${r}
${t}`:(t,r)=>`${t}
${r}`}function mX(e,t){const r=jr(J9(e,(n,i)=>Math.abs(i-n)));if(r<1e3)return Xv("millisecond","utc",t);for(const[n,i,s,o]of dX){if(r>o||n==="hour"&&!r)break;if(e.every(a=>i.floor(a)>=a))return Xv(n,s,t)}}function ho(e,t,r){return(n,i,s)=>{const o=e(n,i),a=t(n,i),l=i-oa(s);return i!==l&&s[l]!==void 0&&a===t(s[l],l)?o:r(o,a)}}const zl=Object.getPrototypeOf(Uint8Array),gX=Object.prototype.toString,p6=Symbol("reindex");function Be(e,t,r){const n=typeof t;return n==="string"?$v(e,m6(t),r):n==="function"?$v(e,t,r):n==="number"||t instanceof Date||n==="boolean"?Me(e,yu(t),r):typeof(t==null?void 0:t.transform)=="function"?jv(t.transform(e),r):yX(jv(t,r),e==null?void 0:e[p6])}function yX(e,t){return t?f1(e,t):e}function $v(e,t,r){return Me(e,(r==null?void 0:r.prototype)instanceof zl?bX(t):t,r)}function jv(e,t){return t===void 0?_r(e):e instanceof t?e:t.prototype instanceof zl&&!(e instanceof zl)?t.from(e,c1):t.from(e)}function bX(e){return(t,r)=>c1(e(t,r))}const Gc=[null],m6=e=>t=>t[e],l1={transform:mi},Ye={transform:e=>e},_X=()=>1,vX=()=>!0,Ze=e=>e==null?e:`${e}`,Xt=e=>e==null?e:+e,u1=e=>e?e[0]:void 0,Nm=e=>e?e[1]:void 0,yu=e=>()=>e;function wX(e){const t=+`${e}`.slice(1)/100;return(r,n)=>Wo(r,t,n)}function Xh(e){return e instanceof zl?e:Me(e,c1,Float64Array)}function c1(e){return e==null?NaN:Number(e)}function xX(e){return Me(e,g6)}function g6(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?u6(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function hi(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:jf(e)?[void 0,e]:[e,void 0]}function fr(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function y6(e,t,r){if(e!=null)return tn(e,t,r)}function tn(e,t,r){const n=`${e}`.toLowerCase();if(!r.includes(n))throw new Error(`invalid ${t}: ${e}`);return n}function _r(e){return e==null||e instanceof Array||e instanceof zl?e:Array.from(e)}function Me(e,t,r=Array){return e==null?e:e instanceof r?e.map(t):r.from(e,t)}function Vl(e,t=Array){return e instanceof t?e.slice():t.from(e)}function b6({x:e,x1:t,x2:r}){return e!==void 0||t!==void 0||r!==void 0}function _6({y:e,y1:t,y2:r}){return e!==void 0||t!==void 0||r!==void 0}function v6(e){return b6(e)||_6(e)||e.interval!==void 0}function ji(e){return(e==null?void 0:e.toString)===gX}function Om(e){return ji(e)&&(e.type!==void 0||e.domain!==void 0)}function h1(e){return ji(e)&&typeof e.transform!="function"}function Wl(e){return h1(e)&&e.value===void 0&&e.channel===void 0}function w6(e,t,r,n=Ye){return t===void 0&&r===void 0?(t=0,r=e===void 0?n:e):t===void 0?t=e===void 0?0:e:r===void 0&&(r=e===void 0?0:e),[t,r]}function x6(e,t){return e===void 0&&t===void 0?[u1,Nm]:[e,t]}function TX({z:e,fill:t,stroke:r}={}){return e===void 0&&([e]=hi(t)),e===void 0&&([e]=hi(r)),e}function mi(e){const t=e.length,r=new Uint32Array(t);for(let n=0;n<t;++n)r[n]=n;return r}function f1(e,t){return Me(t,r=>e[r],e.constructor)}function AX(e,t,r){return e.subarray?e.subarray(t,r):e.slice(t,r)}function gc(e){return e!==null&&typeof e=="object"?e.valueOf():e}function EX(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function $h(e){let t;return[{transform:()=>t,label:to(e)},r=>t=r]}function Wn(e){return e==null?[e]:$h(e)}function to(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function jh(e,t){return{transform(r){const n=e.transform(r),i=t.transform(r);return sr(n)||sr(i)?Me(n,(s,o)=>new Date((+n[o]+ +i[o])/2)):Me(n,(s,o)=>(+n[o]+ +i[o])/2,Float64Array)},label:e.label}}function T6(e,t){const r=A6(t==null?void 0:t.interval,t==null?void 0:t.type);return r?Me(e,r):e}function A6(e,t){const r=d1(e,t);return r&&(n=>zs(n)?r.floor(n):n)}function d1(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const r=Math.abs(e);return e<0?{floor:n=>Math.floor(n*r)/r,offset:n=>(n*r+1)/r,range:(n,i)=>j0(Math.ceil(n*r),i*r).map(s=>s/r)}:{floor:n=>Math.floor(n/r)*r,offset:n=>n+r,range:(n,i)=>j0(Math.ceil(n/r),i/r).map(s=>s*r)}}if(typeof e=="string")return(t==="time"?d6:a1)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function ya(e,t){if(e=d1(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function CX(e,t){if(e=ya(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function SX(e){return So(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function So(e){return typeof(e==null?void 0:e.range)=="function"}function bu(e){return e===void 0||h1(e)?e:{value:e}}function MX(e){return e==null?null:{transform:t=>Be(t,e,Float64Array),label:to(e)}}function Yi(e){return e&&typeof e[Symbol.iterator]=="function"}function E6(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Yv(e){for(const t of e){if(t==null)continue;const r=typeof t;return r==="string"||r==="boolean"}}function sr(e){for(const t of e)if(t!=null)return t instanceof Date}function IX(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&u6(t)}function RX(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function PX(e){for(const t of e)if(t!=null)return typeof t=="number"}function v0(e,t){let r;for(const n of e)if(n!=null){if(!t(n))return!1;r=!0}return r}const kX=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function jf(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||kX.has(e))}function DX(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function er(e){return e==null||Xl(e)}function Xl(e){return/^\s*none\s*$/i.test(e)}function NX(e){return/^\s*round\s*$/i.test(e)}function C6(e,t){return y6(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function p1(e="middle"){return C6(e,"frameAnchor")}function oa(e){if(e==null)return;const t=e[0],r=e[e.length-1];return Zl(t,r)}function OX(e={},...t){let r=e;for(const n of t)for(const i in n)if(r[i]===void 0){const s=n[i];r===e?r={...r,[i]:s}:r[i]=s}return r}function FX(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,r=>{const{name:n}=r;if(n==null)throw new Error("missing name");const i=`${n}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[n,r]}))}function S6(e){return Yi(e)?FX(e):e}const bn=Symbol("position"),gi=Symbol("color"),_u=Symbol("radius"),vu=Symbol("length"),wu=Symbol("opacity"),Yf=Symbol("symbol"),M6=Symbol("projection"),fe=new Map([["x",bn],["y",bn],["fx",bn],["fy",bn],["r",_u],["color",gi],["opacity",wu],["symbol",Yf],["length",vu],["projection",M6]]);function BX(e){return e===bn||e===M6}function LX(e){return e===bn||e===_u||e===vu||e===wu}const UX=Math.sqrt(3),GX=2/UX,HX={draw(e,t){const r=Math.sqrt(t/Math.PI),n=r*GX,i=n/2;e.moveTo(0,n),e.lineTo(r,i),e.lineTo(r,-i),e.lineTo(0,-n),e.lineTo(-r,-i),e.lineTo(-r,i),e.closePath()}},I6=new Map([["asterisk",LT],["circle",Mg],["cross",UT],["diamond",HT],["diamond2",zT],["hexagon",HX],["plus",VT],["square",WT],["square2",XT],["star",jT],["times",KT],["triangle",YT],["triangle2",qT],["wye",ZT]]);function R6(e){return e&&typeof e.draw=="function"}function zX(e){return R6(e)?!0:typeof e!="string"?!1:I6.has(e.toLowerCase())}function m1(e){if(e==null||R6(e))return e;const t=I6.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function g1({filter:e,sort:t,reverse:r,transform:n,initializer:i,...s}={},o){if(n===void 0&&(e!=null&&(n=P6(e)),t!=null&&!Wl(t)&&(n=w0(n,D6(t))),r&&(n=w0(n,k6))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...s,...(t===null||Wl(t))&&{sort:t},transform:w0(n,o)}}function Yh({filter:e,sort:t,reverse:r,initializer:n,...i}={},s){return n===void 0&&(e!=null&&(n=P6(e)),t!=null&&!Wl(t)&&(n=x0(n,D6(t))),r&&(n=x0(n,k6))),{...i,...(t===null||Wl(t))&&{sort:t},initializer:x0(n,s)}}function w0(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(r,n,i){return{data:r,facets:n}=e.call(this,r,n,i),t.call(this,_r(r),n,i)}}function x0(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(r,n,i,...s){let o,a,l,u,c,h;return{data:a=r,facets:l=n,channels:o}=e.call(this,r,n,i,...s),{data:c=a,facets:h=l,channels:u}=t.call(this,a,l,{...i,...o},...s),{data:c,facets:h,channels:{...o,...u}}}}function P6(e){return(t,r)=>{const n=Be(t,e);return{data:t,facets:r.map(i=>i.filter(s=>n[s]))}}}function k6(e,t){return{data:e,facets:t.map(r=>r.slice().reverse())}}function D6(e){return(typeof e=="function"&&e.length!==1?VX:WX)(e)}function VX(e){return(t,r)=>{const n=(i,s)=>e(t[i],t[s]);return{data:t,facets:r.map(i=>i.slice().sort(n))}}}function WX(e){let t,r;({channel:t,value:e,order:r}={...bu(e)});const n=t==null?void 0:t.startsWith("-");if(n&&(t=t.slice(1)),r===void 0&&(r=n?Wh:Kr),typeof r!="function")switch(`${r}`.toLowerCase()){case"ascending":r=Kr;break;case"descending":r=Wh;break;default:throw new Error(`invalid order: ${r}`)}return(i,s,o)=>{let a;if(t===void 0)a=Be(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(a=o[t],!a)return{};a=a.value}const l=(u,c)=>r(a[u],a[c]);return{data:i,facets:s.map(u=>u.slice().sort(l))}}}function yc(e,...t){for(const{name:r}of e)if(t.includes(r))return!0;return!1}function XX(e,t,r=N6){const n=Object.entries(e);return t.title!=null&&e.title===void 0&&n.push(["title",QX]),t.href!=null&&e.href===void 0&&n.push(["href",B6]),n.filter(([,i])=>i!==void 0).map(([i,s])=>s===null?$X(i):r(i,s,t))}function N6(e,t,r,n=O6){let i;ji(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const s=n(e,t,r),[o,a]=$h(s.label);let l;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(u){s.initialize(u),l=a([])},scope(u,c){s.scope(u,c)},reduce(u,c){l.push(s.reduce(u,c))}}}function $X(e){return{name:e,initialize(){},scope(){},reduce(){}}}function O6(e,t,r,n=y1){const i=EX(e,r),s=n(t,i);let o,a;return{label:to(s===qh?null:i,s.label),initialize(l){o=i===void 0?l:Be(l,i),s.scope==="data"&&(a=s.reduceIndex(mi(l),o))},scope(l,u){s.scope===l&&(a=s.reduceIndex(u,o))},reduce(l,u){return s.scope==null?s.reduceIndex(l,o,u):s.reduceIndex(l,o,a,u)}}}function qv(e,t){return t?vl(ng(e,r=>t[r]),u1):[[,e]]}function y1(e,t,r=jX){if(e==null)return r(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&ji(e))return ZX(e);if(typeof e=="function")return KX(e);if(/^p\d{2}$/i.test(e))return Xn(wX(e));switch(`${e}`.toLowerCase()){case"first":return B6;case"last":return JX;case"identity":return F6;case"count":return qh;case"distinct":return t$;case"sum":return t==null?qh:e$;case"proportion":return Kv(t,"data");case"proportion-facet":return Kv(t,"facet");case"deviation":return Xn(Cw);case"min":return Xn(ii);case"min-index":return Xn(j9);case"max":return Xn(jr);case"max-index":return Xn($9);case"mean":return Zv(Z9);case"median":return Zv($0);case"variance":return Xn(Ew);case"mode":return Xn(Q9)}return r(e)}function jX(e){throw new Error(`invalid reduce: ${e}`)}function YX(e,t){for(const r in t){const n=t[r];if(n!==void 0&&!e.some(i=>i.name===r))return n}}function qX(e,t,r){if(t){const n=t.output.transform(),i=(s,o)=>Kr(n[s],n[o]);e.forEach(s=>s.sort(i))}r&&e.forEach(n=>n.reverse())}function ZX(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function KX(e){return{reduceIndex(t,r,n){return e(f1(r,t),n)}}}function Xn(e){return{reduceIndex(t,r){return e(t,n=>r[n])}}}function Zv(e){return{reduceIndex(t,r){const n=e(t,i=>r[i]);return sr(r)?new Date(n):n}}}const F6={reduceIndex(e,t){return f1(t,e)}},B6={reduceIndex(e,t){return t[e[0]]}},QX={reduceIndex(e,t){const n=vl(Ro(e,s=>s.length,s=>t[s]),Nm),i=n.slice(-5).reverse();if(i.length<n.length){const s=n.slice(0,-4);i[5-1]=[` ${s.length.toLocaleString("en-US")} more`,Fi(s,Nm)]}return i.map(([s,o])=>`${s} (${o.toLocaleString("en-US")})`).join(`
`)}},JX={reduceIndex(e,t){return t[e[e.length-1]]}},qh={label:"Frequency",reduceIndex(e){return e.length}},t$={label:"Distinct",reduceIndex(e,t){const r=new hf;for(const n of e)r.add(t[n]);return r.size}},e$=Xn(Fi);function Kv(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(r,n,i=1)=>r.length/i}:{scope:t,reduceIndex:(r,n,i=1)=>Fi(r,s=>n[s])/i}}function $l(e,{scale:t,type:r,value:n,filter:i,hint:s,label:o=to(n)},a){return s===void 0&&typeof(n==null?void 0:n.transform)=="function"&&(s=n.hint),L6(a,{scale:t,type:r,value:Be(e,n),label:o,filter:i,hint:s})}function r$(e,t){return Object.fromEntries(Object.entries(e).map(([r,n])=>[r,$l(t,n,r)]))}function n$(e,t){const r=Object.fromEntries(Object.entries(e).map(([n,{scale:i,value:s}])=>{const o=i==null?null:t[i];return[n,o==null?s:Me(s,o)]}));return r.channels=e,r}function L6(e,t){const{scale:r,value:n}=t;if(r===!0||r==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=r!==!0&&v0(n,jf)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=r!==!0&&v0(n,DX)?null:"opacity";break;case"symbol":r!==!0&&v0(n,zX)?(t.scale=null,t.value=Me(n,m1)):t.scale="symbol";break;default:t.scale=fe.has(e)?e:null;break}else if(r===!1)t.scale=null;else if(r!=null&&!fe.has(r))throw new Error(`unknown scale: ${r}`);return t}function i$(e,t,r,n,i){const{order:s,reverse:o,reduce:a=!0,limit:l}=i;for(const u in i){if(!fe.has(u))continue;let{value:c,order:h=s,reverse:f=o,reduce:d=a,limit:p=l}=bu(i[u]);const m=c==null?void 0:c.startsWith("-");if(m&&(c=c.slice(1)),h=h===void 0?m!==(c==="width"||c==="height")?G6:U6:a$(h),d==null||d===!1)continue;const g=u==="fx"||u==="fy"?o$(t,n[u]):s$(r,u);if(!g)throw new Error(`missing channel for scale: ${u}`);const y=g.value,[b=0,_=1/0]=Yi(p)?p:p<0?[p]:[0,p];if(c==null)g.domain=()=>{let v=Array.from(new hf(y));return f&&(v=v.reverse()),(b!==0||_!==1/0)&&(v=v.slice(b,_)),v};else{const v=c==="data"?e:c==="height"?Qv(r,"y1","y2"):c==="width"?Qv(r,"x1","x2"):Fm(r,c,c==="y"?"y2":c==="x"?"x2":void 0),w=y1(d===!0?"max":d,v);g.domain=()=>{let A=G9(mi(y),x=>w.reduceIndex(x,v),x=>y[x]);return h&&A.sort(h),f&&A.reverse(),(b!==0||_!==1/0)&&(A=A.slice(b,_)),A.map(u1)}}}}function s$(e,t){for(const r in e){const n=e[r];if(n.scale===t)return n}}function o$(e,t){const r=e.original;if(r===e)return t;const n=t.value,i=t.value=[];for(let s=0;s<r.length;++s){const o=n[r[s][0]];for(const a of e[s])i[a]=o}return t}function Qv(e,t,r){const n=Fm(e,t),i=Fm(e,r);return Me(i,(s,o)=>Math.abs(s-n[o]),Float64Array)}function Fm(e,t,r){let n=e[t];if(!n&&r!==void 0&&(n=e[r]),n)return n.value;throw new Error(`missing channel: ${t}`)}function a$(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return U6;case"descending":return G6}throw new Error(`invalid order: ${e}`)}function U6([e,t],[r,n]){return Kr(t,n)||Kr(e,r)}function G6([e,t],[r,n]){return Wh(t,n)||Kr(e,r)}function Jv(e,t){let r=e[t];if(r){for(;r.source;)r=r.source;return r.source===null?null:r}}function l$(e){let t,r;return(...n)=>(((r==null?void 0:r.length)!==n.length||r.some((i,s)=>i!==n[s]))&&(r=n,t=e(...n)),t)}const u$=l$(e=>new Intl.NumberFormat(e));function c$(e="en-US"){const t=u$(e);return r=>r!=null&&!isNaN(r)?t.format(r):void 0}function h$(e){return cX(e,"Invalid Date")}function f$(e="en-US"){const t=c$(e);return r=>(r instanceof Date?h$:typeof r=="number"?t:Ze)(r)}const aa=f$();let Bm=0,Lm;function d$(){const e=Bm;return Bm=0,Lm=void 0,e}function Es(e){e!==Lm&&(Lm=e,console.warn(e),++Bm)}const dr=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let p$=0;function t2(){return`plot-clip-${++p$}`}function m$(e,{title:t,href:r,ariaLabel:n,ariaDescription:i,ariaHidden:s,target:o,fill:a,fillOpacity:l,stroke:u,strokeWidth:c,strokeOpacity:h,strokeLinejoin:f,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:y,mixBlendMode:b,imageFilter:_,paintOrder:v,pointerEvents:w,shapeRendering:A,channels:x},{ariaLabel:E,fill:T="currentColor",fillOpacity:M,stroke:P="none",strokeOpacity:R,strokeWidth:S,strokeLinecap:C,strokeLinejoin:I,strokeMiterlimit:F,paintOrder:H}){T===null&&(a=null,l=null),P===null&&(u=null,h=null),er(T)?!er(P)&&(!er(a)||x!=null&&x.fill)&&(P="none"):er(P)&&(!er(u)||x!=null&&x.stroke)&&(T="none");const[X,Z]=hi(a,T),[D,O]=fr(l,M),[z,k]=hi(u,P),[Y,B]=fr(h,R),[rt,Q]=fr(y);Xl(k)||(c===void 0&&(c=S),d===void 0&&(d=C),f===void 0&&(f=I),p===void 0&&!NX(f)&&(p=F),!Xl(Z)&&v===void 0&&(v=H));const[et,U]=fr(c);return T!==null&&(e.fill=Te(Z,"currentColor"),e.fillOpacity=Ba(O,1)),P!==null&&(e.stroke=Te(k,"none"),e.strokeWidth=Ba(U,1),e.strokeOpacity=Ba(B,1),e.strokeLinejoin=Te(f,"miter"),e.strokeLinecap=Te(d,"butt"),e.strokeMiterlimit=Ba(p,4),e.strokeDasharray=Te(m,"none"),e.strokeDashoffset=Te(g,"0")),e.target=Ze(o),e.ariaLabel=Ze(E),e.ariaDescription=Ze(i),e.ariaHidden=Ze(s),e.opacity=Ba(Q,1),e.mixBlendMode=Te(b,"normal"),e.imageFilter=Te(_,"none"),e.paintOrder=Te(v,"normal"),e.pointerEvents=Te(w,"auto"),e.shapeRendering=Te(A,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:r,optional:!0,filter:null},ariaLabel:{value:n,optional:!0,filter:null},fill:{value:X,scale:"auto",optional:!0},fillOpacity:{value:D,scale:"auto",optional:!0},stroke:{value:z,scale:"auto",optional:!0},strokeOpacity:{value:Y,scale:"auto",optional:!0},strokeWidth:{value:et,optional:!0},opacity:{value:rt,scale:"auto",optional:!0}}}function g$(e,t){t&&e.filter(r=>o6(t[r])).append("title").call(y$,t)}function y$(e,t){t&&e.text(r=>aa(t[r]))}function eo(e,{target:t,tip:r},{ariaLabel:n,title:i,fill:s,fillOpacity:o,stroke:a,strokeOpacity:l,strokeWidth:u,opacity:c,href:h}){n&&Mt(e,"aria-label",f=>n[f]),s&&Mt(e,"fill",f=>s[f]),o&&Mt(e,"fill-opacity",f=>o[f]),a&&Mt(e,"stroke",f=>a[f]),l&&Mt(e,"stroke-opacity",f=>l[f]),u&&Mt(e,"stroke-width",f=>u[f]),c&&Mt(e,"opacity",f=>c[f]),h&&_$(e,f=>h[f],t),r||g$(e,i)}function H6(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=tn(e,"clip",["frame","sphere"])),e}function b$(e,t,r,n){let i;const{clip:s=n.clip}=t;switch(s){case"frame":{const{width:o,height:a,marginLeft:l,marginRight:u,marginTop:c,marginBottom:h}=r,f=t2();i=`url(#${f})`,e=Qe("svg:g",n).call(d=>d.append("svg:clipPath").attr("id",f).append("rect").attr("x",l).attr("y",c).attr("width",o-u-l).attr("height",a-c-h)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=n;if(!o)throw new Error('the "sphere" clip option requires a projection');const a=t2();i=`url(#${a})`,e.append("clipPath").attr("id",a).append("path").attr("d",Gx(o)({type:"Sphere"}));break}}Mt(e,"aria-label",t.ariaLabel),Mt(e,"aria-description",t.ariaDescription),Mt(e,"aria-hidden",t.ariaHidden),Mt(e,"clip-path",i)}function qi(e,t,r,n){b$(e,t,r,n),Mt(e,"fill",t.fill),Mt(e,"fill-opacity",t.fillOpacity),Mt(e,"stroke",t.stroke),Mt(e,"stroke-width",t.strokeWidth),Mt(e,"stroke-opacity",t.strokeOpacity),Mt(e,"stroke-linejoin",t.strokeLinejoin),Mt(e,"stroke-linecap",t.strokeLinecap),Mt(e,"stroke-miterlimit",t.strokeMiterlimit),Mt(e,"stroke-dasharray",t.strokeDasharray),Mt(e,"stroke-dashoffset",t.strokeDashoffset),Mt(e,"shape-rendering",t.shapeRendering),Mt(e,"filter",t.imageFilter),Mt(e,"paint-order",t.paintOrder);const{pointerEvents:i=n.pointerSticky===!1?"none":void 0}=t;Mt(e,"pointer-events",i)}function Zi(e,t){v$(e,"mix-blend-mode",t.mixBlendMode),Mt(e,"opacity",t.opacity)}function _$(e,t,r){e.each(function(n){const i=t(n);if(i!=null){const s=this.ownerDocument.createElementNS(Xo.svg,"a");s.setAttribute("fill","inherit"),s.setAttributeNS(Xo.xlink,"href",i),r!=null&&s.setAttribute("target",r),this.parentNode.insertBefore(s,this).appendChild(this)}})}function Mt(e,t,r){r!=null&&e.attr(t,r)}function v$(e,t,r){r!=null&&e.style(t,r)}function Ki(e,t,{x:r,y:n},i=dr,s=dr){i+=t.dx,s+=t.dy,r!=null&&r.bandwidth&&(i+=r.bandwidth()/2),n!=null&&n.bandwidth&&(s+=n.bandwidth()/2),(i||s)&&e.attr("transform",`translate(${i},${s})`)}function Te(e,t){if((e=Ze(e))!==t)return e}function Ba(e,t){if((e=Xt(e))!==t)return e}const w$=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function b1(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!w$.test(e))throw new Error(`invalid class name: ${e}`);return e}function _1(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const r of e)Object.assign(r.style,t)}function qf({frameAnchor:e},{width:t,height:r,marginTop:n,marginRight:i,marginBottom:s,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?n:/^bottom/.test(e)?r-s:(n+r-s)/2]}function v1(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:r}=e;return{document:t,clip:H6(r)}}function Qe(e,{document:t}){return Po(df(e).call(t.documentElement))}const z6=Math.PI,Gn=2*z6,e2=.618;function x$({projection:e,inset:t=0,insetTop:r=t,insetRight:n=t,insetBottom:i=t,insetLeft:s=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let a,l,u="frame";if(ji(e)){let w;if({type:e,domain:l,inset:w,insetTop:r=w!==void 0?w:r,insetRight:n=w!==void 0?w:n,insetBottom:i=w!==void 0?w:i,insetLeft:s=w!==void 0?w:s,clip:u=u,...a}=e,e==null)return}typeof e!="function"&&({type:e}=V6(e));const{width:c,height:h,marginLeft:f,marginRight:d,marginTop:p,marginBottom:m}=o,g=c-f-d-s-n,y=h-p-m-r-i;if(e=e==null?void 0:e({width:g,height:y,clip:u,...a}),e==null)return;u=T$(u,f,p,c-d,h-m);let b=f+s,_=p+r,v;if(l!=null){const[[w,A],[x,E]]=Gx(e).bounds(l),T=Math.min(g/(x-w),y/(E-A));T>0?(b-=(T*(w+x)-g)/2,_-=(T*(A+E)-y)/2,v=wp({point(M,P){this.stream.point(M*T+b,P*T+_)}})):Es("Warning: the projection could not be fit to the specified domain; using the default scale.")}return v??(v=b===0&&_===0?W6():wp({point(w,A){this.stream.point(w+b,A+_)}})),{stream:w=>e.stream(v.stream(u(w)))}}function V6(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Ur(Uk,.7463,.4673);case"albers":return bc(Xx,.7463,.4673);case"azimuthal-equal-area":return Ur(Gk,4,4);case"azimuthal-equidistant":return Ur(Hk,Gn,Gn);case"conic-conformal":return bc(Wk,Gn,Gn);case"conic-equal-area":return bc(ph,6.1702,2.9781);case"conic-equidistant":return bc(jk,7.312,3.6282);case"equal-earth":return Ur(qk,5.4133,2.6347);case"equirectangular":return Ur(Xk,Gn,z6);case"gnomonic":return Ur(Zk,3.4641,3.4641);case"identity":return{type:W6};case"reflect-y":return{type:A$};case"mercator":return Ur(zk,Gn,Gn);case"orthographic":return Ur(Kk,2,2);case"stereographic":return Ur(Qk,2,2);case"transverse-mercator":return Ur(Jk,Gn,Gn);default:throw new Error(`unknown projection type: ${e}`)}}function T$(e,t,r,n,i){if(e===!1||e==null||typeof e=="number")return s=>s;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return Mx(t,r,n,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Ur(e,t,r){return{type:({width:n,height:i,rotate:s,precision:o=.15,clip:a})=>{var u,c,h;const l=e();return o!=null&&((u=l.precision)==null||u.call(l,o)),s!=null&&((c=l.rotate)==null||c.call(l,s)),typeof a=="number"&&((h=l.clipAngle)==null||h.call(l,a)),l.scale(Math.min(n/t,i/r)),l.translate([n/2,i/2]),l},aspectRatio:r/t}}function bc(e,t,r){const{type:n,aspectRatio:i}=Ur(e,t,r);return{type:s=>{const{parallels:o,domain:a,width:l,height:u}=s,c=n(s);return o!=null&&(c.parallels(o),a===void 0&&c.fitSize([l,u],{type:"Sphere"})),c},aspectRatio:i}}const W6=yu({stream:e=>e}),A$=yu(wp({point(e,t){this.stream.point(e,-t)}}));function E$(e,t,r,n){const i=r[e],s=r[t],o=i.length,a=r[e]=new Float64Array(o).fill(NaN),l=r[t]=new Float64Array(o).fill(NaN);let u;const c=n.stream({point(h,f){a[u]=h,l[u]=f}});for(u=0;u<o;++u)c.point(i[u],s[u])}function C$({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(ji(e)&&(e=e.type),e!=null)}function S$(e){if(typeof(e==null?void 0:e.stream)=="function")return e2;if(ji(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=V6(e);if(t)return t}return e2}}function M$(e){const t=[],r=[],n={scale:"x",value:t},i={scale:"y",value:r},s={point(o,a){t.push(o),r.push(a)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)cs(o,s);return[n,i]}const X6=new Map([["accent",xN],["category10",wN],["dark2",TN],["paired",AN],["pastel1",EN],["pastel2",CN],["set1",SN],["set2",MN],["set3",IN],["tableau10",RN]]);function I$(e){return e!=null&&X6.has(`${e}`.toLowerCase())}const r2=new Map([...X6,["brbg",Hn(R3,P3)],["prgn",Hn(k3,D3)],["piyg",Hn(N3,O3)],["puor",Hn(F3,B3)],["rdbu",Hn(Cp,bh)],["rdgy",Hn(L3,U3)],["rdylbu",Hn(Sp,_h)],["rdylgn",Hn(G3,H3)],["spectral",Hn(z3,V3)],["burd",n2(Cp,bh)],["buylrd",n2(Sp,_h)],["blues",ke(pT,mT)],["greens",ke(gT,yT)],["greys",ke(bT,_T)],["oranges",ke(AT,ET)],["purples",ke(vT,wT)],["reds",ke(xT,TT)],["turbo",zn(kT)],["viridis",zn(DT)],["magma",zn(NT)],["inferno",zn(OT)],["plasma",zn(FT)],["cividis",zn(CT)],["cubehelix",zn(ST)],["warm",zn(MT)],["cool",zn(IT)],["bugn",ke(W3,X3)],["bupu",ke($3,j3)],["gnbu",ke(Y3,q3)],["orrd",ke(Z3,K3)],["pubu",ke(tT,eT)],["pubugn",ke(Q3,J3)],["purd",ke(rT,nT)],["rdpu",ke(iT,sT)],["ylgn",ke(lT,uT)],["ylgnbu",ke(oT,aT)],["ylorbr",ke(cT,hT)],["ylorrd",ke(fT,dT)],["rainbow",i2(RT)],["sinebow",i2(PT)]]);function ke(e,t){return({length:r})=>r===1?[e[3][1]]:r===2?[e[3][1],e[3][2]]:(r=Math.max(3,Math.floor(r)),r>9?Yr(t,r):e[r])}function Hn(e,t){return({length:r})=>r===2?[e[3][0],e[3][2]]:(r=Math.max(3,Math.floor(r)),r>11?Yr(t,r):e[r])}function n2(e,t){return({length:r})=>r===2?[e[3][2],e[3][0]]:(r=Math.max(3,Math.floor(r)),r>11?Yr(n=>t(1-n),r):e[r].slice().reverse())}function zn(e){return({length:t})=>Yr(e,Math.max(2,Math.floor(t)))}function i2(e){return({length:t})=>Yr(e,Math.floor(t)+1).slice(0,-1)}function $6(e){const t=`${e}`.toLowerCase();if(!r2.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return r2.get(t)}function Zf(e,t){const r=$6(e),n=typeof r=="function"?r({length:t}):r;return n.length!==t?n.slice(0,t):n}function R$(e,t="greys"){const r=new Set,[n,i]=Zf(t,2);for(const s of e)if(s!=null)if(s===!0)r.add(i);else if(s===!1)r.add(n);else return;return[...r]}const s2=new Map([["brbg",P3],["prgn",D3],["piyg",O3],["puor",B3],["rdbu",bh],["rdgy",U3],["rdylbu",_h],["rdylgn",H3],["spectral",V3],["burd",e=>bh(1-e)],["buylrd",e=>_h(1-e)],["blues",mT],["greens",yT],["greys",_T],["purples",wT],["reds",TT],["oranges",ET],["turbo",kT],["viridis",DT],["magma",NT],["inferno",OT],["plasma",FT],["cividis",CT],["cubehelix",ST],["warm",MT],["cool",IT],["bugn",X3],["bupu",j3],["gnbu",q3],["orrd",K3],["pubugn",J3],["pubu",eT],["purd",nT],["rdpu",sT],["ylgnbu",aT],["ylgn",uT],["ylorbr",hT],["ylorrd",dT],["rainbow",RT],["sinebow",PT]]);function w1(e){const t=`${e}`.toLowerCase();if(!s2.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return s2.get(t)}const P$=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function k$(e){return e!=null&&P$.has(`${e}`.toLowerCase())}const j6=e=>t=>e(1-t),T0=[0,1],o2=new Map([["number",We],["rgb",ks],["hsl",TR],["hcl",CR],["lab",AR]]);function Y6(e){const t=`${e}`.toLowerCase();if(!o2.has(t))throw new Error(`unknown interpolator: ${t}`);return o2.get(t)}function xu(e,t,r,{type:n,nice:i,clamp:s,zero:o,domain:a=Z6(e,r),unknown:l,round:u,scheme:c,interval:h,range:f=fe.get(e)===_u?V$(r,a):fe.get(e)===vu?W$(r,a):fe.get(e)===wu?T0:void 0,interpolate:d=fe.get(e)===gi?c==null&&f!==void 0?ks:w1(c!==void 0?c:n==="cyclical"?"rainbow":"turbo"):u?fg:We,reverse:p}){if(h=ya(h,n),(n==="cyclical"||n==="sequential")&&(n="linear"),typeof d!="function"&&(d=Y6(d)),p=!!p,f!==void 0){const m=(a=_r(a)).length,g=(f=_r(f)).length;if(m!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=gf(d,f),f=void 0}}if(d.length===1?(p&&(d=j6(d),p=!1),f===void 0&&(f=Float64Array.from(a,(m,g)=>g/(a.length-1)),f.length===2&&(f=T0)),t.interpolate((f===T0?yu:T1)(d))):t.interpolate(d),o){const[m,g]=Ee(a);(m>0||g<0)&&(a=Vl(a),oa(a)!==Math.sign(m)?a[a.length-1]=0:a[0]=0)}return p&&(a=Zc(a)),t.domain(a).unknown(l),i&&(t.nice(D$(i,n)),a=t.domain()),f!==void 0&&t.range(f),s&&t.clamp(s),{type:n,domain:a,range:f,scale:t,interpolate:d,interval:h}}function D$(e,t){return e===!0?void 0:typeof e=="number"?e:CX(e,t)}function N$(e,t,r){return xu(e,nu(),t,r)}function O$(e,t,r){return q6(e,t,{...r,exponent:.5})}function q6(e,t,{exponent:r=1,...n}){return xu(e,Tg().exponent(r),t,{...n,type:"pow"})}function F$(e,t,{base:r=10,domain:n=X$(t),...i}){return xu(e,o3().base(r),t,{...i,domain:n})}function B$(e,t,{constant:r=1,...n}){return xu(e,l3().constant(r),t,n)}function L$(e,t,{range:r,quantiles:n=r===void 0?5:(r=[...r]).length,n:i=n,scheme:s="rdylbu",domain:o=$$(t),unknown:a,interpolate:l,reverse:u}){return r===void 0&&(r=l!==void 0?Yr(l,i):fe.get(e)===gi?Zf(s,i):void 0),o.length>0&&(o=c3(o,r===void 0?{length:i}:r).quantiles()),x1(e,t,{domain:o,range:r,reverse:u,unknown:a})}function U$(e,t,{range:r,n=r===void 0?5:(r=[...r]).length,scheme:i="rdylbu",domain:s=Z6(e,t),unknown:o,interpolate:a,reverse:l}){const[u,c]=Ee(s);let h;return r===void 0?(h=wl(u,c,n),h[0]<=u&&h.splice(0,1),h[h.length-1]>=c&&h.pop(),n=h.length+1,r=a!==void 0?Yr(a,n):fe.get(e)===gi?Zf(i,n):void 0):(h=Yr(We(u,c),n+1).slice(1,-1),u instanceof Date&&(h=h.map(f=>new Date(f)))),oa(_r(s))<0&&h.reverse(),x1(e,t,{domain:h,range:r,reverse:l,unknown:o})}function x1(e,t,{domain:r=[0],unknown:n,scheme:i="rdylbu",interpolate:s,range:o=s!==void 0?Yr(s,r.length+1):fe.get(e)===gi?Zf(i,r.length+1):void 0,reverse:a}){r=_r(r);const l=oa(r);if(!isNaN(l)&&!G$(r,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return a&&(o=Zc(o)),{type:"threshold",scale:h3(l<0?Zc(r):r,o===void 0?[]:o).unknown(n),domain:r,range:o}}function G$(e,t){for(let r=1,n=e.length,i=e[0];r<n;++r){const s=Zl(i,i=e[r]);if(s!==0&&s!==t)return!1}return!0}function H$(e){return{type:"identity",scale:LX(fe.get(e))?n3():t=>t}}function jl(e,t=a6){return e.length?[ii(e,({value:r})=>r===void 0?r:ii(r,t)),jr(e,({value:r})=>r===void 0?r:jr(r,t))]:[0,1]}function Z6(e,t){const r=fe.get(e);return(r===_u||r===wu||r===vu?z$:jl)(t)}function z$(e){return[0,e.length?jr(e,({value:t})=>t===void 0?t:jr(t,a6)):1]}function V$(e,t){const r=e.find(({radius:o})=>o!==void 0);if(r!==void 0)return[0,r.radius];const n=Wo(e,.5,({value:o})=>o===void 0?NaN:Wo(o,.25,s1)),i=t.map(o=>3*Math.sqrt(o/n)),s=30/jr(i);return s<1?i.map(o=>o*s):i}function W$(e,t){const r=$0(e,({value:s})=>s===void 0?NaN:$0(s,Math.abs)),n=t.map(s=>12*s/r),i=60/jr(n);return i<1?n.map(s=>s*i):n}function X$(e){for(const{value:t}of e)if(t!==void 0)for(let r of t){if(r>0)return jl(e,s1);if(r<0)return jl(e,l6)}return[1,10]}function $$(e){const t=[];for(const{value:r}of e)if(r!==void 0)for(const n of r)t.push(n);return t}function T1(e){return(t,r)=>n=>e(t+n*(r-t))}function Kf(e,t,r,n,{type:i,nice:s,clamp:o,domain:a=jl(n),unknown:l,pivot:u=0,scheme:c,range:h,symmetric:f=!0,interpolate:d=fe.get(e)===gi?c==null&&h!==void 0?ks:w1(c!==void 0?c:"rdbu"):We,reverse:p}){u=+u,a=_r(a);let[m,g]=a;if(a.length>2&&Es(`Warning: the diverging ${e} scale domain contains extra elements.`),Zl(m,g)<0&&([m,g]=[g,m],p=!p),m=Math.min(m,u),g=Math.max(g,u),typeof d!="function"&&(d=Y6(d)),h!==void 0&&(d=d.length===1?T1(d)(...h):gf(d,h)),p&&(d=j6(d)),f){const y=r.apply(u),b=y-r.apply(m),_=r.apply(g)-y;b<_?m=r.invert(y-_):b>_&&(g=r.invert(y+b))}return t.domain([m,u,g]).unknown(l).interpolator(d),o&&t.clamp(o),s&&t.nice(s),{type:i,domain:[m,g],pivot:u,interpolate:d,scale:t}}function j$(e,t,r){return Kf(e,C3(),K$,t,r)}function Y$(e,t,r){return K6(e,t,{...r,exponent:.5})}function K6(e,t,{exponent:r=1,...n}){return Kf(e,I3().exponent(r=+r),tj(r),t,{...n,type:"diverging-pow"})}function q$(e,t,{base:r=10,pivot:n=1,domain:i=jl(t,n<0?l6:s1),...s}){return Kf(e,S3().base(r=+r),Q$,t,{domain:i,pivot:n,...s})}function Z$(e,t,{constant:r=1,...n}){return Kf(e,M3().constant(r=+r),ej(r),t,n)}const K$={apply(e){return e},invert(e){return e}},Q$={apply:Math.log,invert:Math.exp},J$={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function tj(e){return e===.5?J$:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function ej(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Q6(e,t,r,n){return xu(e,t,r,n)}function rj(e,t,r){return Q6(e,_N(),t,r)}function nj(e,t,r){return Q6(e,vN(),t,r)}const Tu=Symbol("ordinal");function J6(e,t,r,{type:n,interval:i,domain:s,range:o,reverse:a,hint:l}){return i=ya(i,n),s===void 0&&(s=e8(r,i,e)),(n==="categorical"||n===Tu)&&(n="ordinal"),a&&(s=Zc(s)),s=t.domain(s).domain(),o!==void 0&&(typeof o=="function"&&(o=o(s)),t.range(o)),{type:n,domain:s,range:o,scale:t,hint:l,interval:i}}function ij(e,t,{type:r,interval:n,domain:i,range:s,scheme:o,unknown:a,...l}){n=ya(n,r),i===void 0&&(i=e8(t,n,e));let u;if(fe.get(e)===Yf)u=aj(t),s=s===void 0?lj(u):Me(s,m1);else if(fe.get(e)===gi&&(s===void 0&&(r==="ordinal"||r===Tu)&&(s=R$(i,o),s!==void 0&&(o=void 0)),o===void 0&&s===void 0&&(o=r==="ordinal"?"turbo":"tableau10"),o!==void 0))if(s!==void 0){const c=w1(o),h=s[0],f=s[1]-s[0];s=({length:d})=>Yr(p=>c(h+f*p),d)}else s=$6(o);if(a===Tp)throw new Error(`implicit unknown on ${e} scale is not supported`);return J6(e,xg().unknown(a),t,{...l,type:r,domain:i,range:s,hint:u})}function sj(e,t,{align:r=.5,padding:n=.5,...i}){return t8(tD().align(r).padding(n),t,i,e)}function oj(e,t,{align:r=.5,padding:n=.1,paddingInner:i=n,paddingOuter:s=e==="fx"||e==="fy"?0:n,...o}){return t8(xf().align(r).paddingInner(i).paddingOuter(s),t,o,e)}function t8(e,t,r,n){let{round:i}=r;return i!==void 0&&e.round(i=!!i),e=J6(n,e,t,r),e.round=i,e}function e8(e,t,r){const n=new hf;for(const{value:i,domain:s}of e){if(s!==void 0)return s();if(i!==void 0)for(const o of i)n.add(o)}if(t!==void 0){const[i,s]=Ee(n).map(t.floor,t);return t.range(i,t.offset(s))}if(n.size>1e4&&fe.get(r)===bn)throw new Error(`implicit ordinal domain of ${r} scale has more than 10,000 values`);return vl(n,Kr)}function a2(e,t){let r;for(const{hint:n}of e){const i=n==null?void 0:n[t];if(i!==void 0){if(r===void 0)r=i;else if(r!==i)return}}return r}function aj(e){return{fill:a2(e,"fill"),stroke:a2(e,"stroke")}}function lj(e){return er(e.fill)?HN:GN}function Um(e,{label:t,inset:r=0,insetTop:n=r,insetRight:i=r,insetBottom:s=r,insetLeft:o=r,round:a,nice:l,clamp:u,zero:c,align:h,padding:f,projection:d,facet:{label:p=t}={},...m}={}){const g={};for(const[y,b]of e){const _=m[y],v=fj(y,b,{round:fe.get(y)===bn?a:void 0,nice:l,clamp:u,zero:c,align:h,padding:f,projection:d,..._});if(v){let{label:w=y==="fx"||y==="fy"?p:t,percent:A,transform:x,inset:E,insetTop:T=E!==void 0?E:y==="y"?n:0,insetRight:M=E!==void 0?E:y==="x"?i:0,insetBottom:P=E!==void 0?E:y==="y"?s:0,insetLeft:R=E!==void 0?E:y==="x"?o:0}=_||{};if(x==null)x=void 0;else if(typeof x!="function")throw new Error("invalid scale transform; not a function");v.percent=!!A,v.label=w===void 0?cj(b,v):w,v.transform=x,y==="x"||y==="fx"?(v.insetLeft=+R,v.insetRight=+M):(y==="y"||y==="fy")&&(v.insetTop=+T,v.insetBottom=+P),g[y]=v}}return g}function l2(e){const t={},r={scales:t};for(const[n,i]of Object.entries(e)){const{scale:s,type:o,interval:a,label:l}=i;t[n]=yj(i),r[n]=s,s.type=o,a!=null&&(s.interval=a),l!=null&&(s.label=l)}return r}function uj(e,t){const{x:r,y:n,fx:i,fy:s}=e,o=i||s?A1(t):t;i&&u2(i,o),s&&c2(s,o);const a=i||s?r8(e,t):t;r&&u2(r,a),n&&c2(n,a)}function cj(e=[],t){let r;for(const{label:n}of e)if(n!==void 0){if(r===void 0)r=n;else if(r!==n)return}if(r!==void 0)return!ro(t)&&t.percent&&(r=`${r} (%)`),{inferred:!0,toString:()=>r}}function A1(e){const{marginTop:t,marginRight:r,marginBottom:n,marginLeft:i,width:s,height:o,facet:{marginTop:a,marginRight:l,marginBottom:u,marginLeft:c}}=e;return{marginTop:Math.max(t,a),marginRight:Math.max(r,l),marginBottom:Math.max(n,u),marginLeft:Math.max(i,c),width:s,height:o}}function r8({fx:e,fy:t},r){const{marginTop:n,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=A1(r);return{marginTop:n,marginRight:i,marginBottom:s,marginLeft:o,width:e?e.scale.bandwidth()+o+i:a,height:t?t.scale.bandwidth()+n+s:l,facet:{width:a,height:l}}}function u2(e,t){if(e.range===void 0){const{insetLeft:r,insetRight:n}=e,{width:i,marginLeft:s=0,marginRight:o=0}=t,a=s+r,l=i-o-n;e.range=[a,Math.max(a,l)],ro(e)||(e.range=i8(e)),e.scale.range(e.range)}n8(e)}function c2(e,t){if(e.range===void 0){const{insetTop:r,insetBottom:n}=e,{height:i,marginTop:s=0,marginBottom:o=0}=t,a=s+r,l=i-o-n;e.range=[Math.max(a,l),a],ro(e)?e.range.reverse():e.range=i8(e),e.scale.range(e.range)}n8(e)}function n8(e){e.round===void 0&&pj(e)&&hj(e)<=30&&e.scale.round(!0)}function hj({scale:e}){const t=e.domain().length,[r,n]=e.range(),i=e.paddingInner?e.paddingInner():1,s=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,a=Math.abs(n-r)/Math.max(1,o+s*2);return(a-Math.floor(a))*o}function i8(e){const t=e.scale.domain().length+s8(e);if(!(t>2))return e.range;const[r,n]=e.range;return Array.from({length:t},(i,s)=>r+s/(t-1)*(n-r))}function fj(e,t=[],r={}){const n=dj(e,t,r);if(r.type===void 0&&r.domain===void 0&&r.range===void 0&&r.interval==null&&e!=="fx"&&e!=="fy"&&ro({type:n})){const i=t.map(({value:s})=>s).filter(s=>s!==void 0);i.some(sr)?Es(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${fo(n)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${fo(n)}".`):i.some(IX)?Es(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${fo(n)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${fo(n)}".`):i.some(RX)&&Es(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${fo(n)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${fo(n)}".`)}switch(r.type=n,n){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":r=_c(t,r,Xh);break;case"identity":switch(fe.get(e)){case bn:r=_c(t,r,Xh);break;case Yf:r=_c(t,r,mj);break}break;case"utc":case"time":r=_c(t,r,xX);break}switch(n){case"diverging":return j$(e,t,r);case"diverging-sqrt":return Y$(e,t,r);case"diverging-pow":return K6(e,t,r);case"diverging-log":return q$(e,t,r);case"diverging-symlog":return Z$(e,t,r);case"categorical":case"ordinal":case Tu:return ij(e,t,r);case"cyclical":case"sequential":case"linear":return N$(e,t,r);case"sqrt":return O$(e,t,r);case"threshold":return x1(e,t,r);case"quantile":return L$(e,t,r);case"quantize":return U$(e,t,r);case"pow":return q6(e,t,r);case"log":return F$(e,t,r);case"symlog":return B$(e,t,r);case"utc":return nj(e,t,r);case"time":return rj(e,t,r);case"point":return sj(e,t,r);case"band":return oj(e,t,r);case"identity":return H$(e);case void 0:return;default:throw new Error(`unknown scale type: ${n}`)}}function fo(e){return typeof e=="symbol"?e.description:e}const h2={toString:()=>"projection"};function dj(e,t,{type:r,domain:n,range:i,scheme:s,pivot:o,projection:a}){if(e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&a!=null&&(r=h2);for(const{type:u}of t)if(u!==void 0){if(r===void 0)r=u;else if(r!==u)throw new Error(`scale incompatible with channel: ${r} !== ${u}`)}if(r===h2)return;if(r!==void 0)return r;if(n===void 0&&!t.some(({value:u})=>u!==void 0))return;const l=fe.get(e);if(l===_u)return"sqrt";if(l===wu||l===vu)return"linear";if(l===Yf)return"ordinal";if((n||i||[]).length>2)return A0(l);if(n!==void 0){if(Yv(n))return A0(l);if(sr(n))return"utc"}else{const u=t.map(({value:c})=>c).filter(c=>c!==void 0);if(u.some(Yv))return A0(l);if(u.some(sr))return"utc"}if(l===gi){if(o!=null||k$(s))return"diverging";if(I$(s))return"categorical"}return"linear"}function A0(e){switch(e){case bn:return"point";case gi:return Tu;default:return"ordinal"}}function ro({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===Tu}function s8({type:e}){return e==="threshold"}function pj({type:e}){return e==="point"||e==="band"}function _n(e){if(e===void 0)return!0;const t=e.domain(),r=e(t[0]);for(let n=1,i=t.length;n<i;++n)if(e(t[n])-r)return!1;return!0}function _c(e,{domain:t,...r},n){for(const i of e)i.value!==void 0&&(i.value=n(i.value));return{domain:t===void 0?t:n(t),...r}}function mj(e){return Me(e,m1)}function gj(e){return t=>{if(!fe.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function yj({scale:e,type:t,domain:r,range:n,interpolate:i,interval:s,transform:o,percent:a,pivot:l}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const u=e.unknown?e.unknown():void 0;return{type:t,domain:Vl(r),...n!==void 0&&{range:Vl(n)},...o!==void 0&&{transform:o},...a&&{percent:a},...u!==void 0&&{unknown:u},...s!==void 0&&{interval:s},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function bj(e,t,r={}){let n=.5-dr,i=.5+dr,s=.5+dr,o=.5-dr;for(const{marginTop:m,marginRight:g,marginBottom:y,marginLeft:b}of t)m>n&&(n=m),g>i&&(i=g),y>s&&(s=y),b>o&&(o=b);let{margin:a,marginTop:l=a!==void 0?a:n,marginRight:u=a!==void 0?a:i,marginBottom:c=a!==void 0?a:s,marginLeft:h=a!==void 0?a:o}=r;l=+l,u=+u,c=+c,h=+h;let{width:f=640,height:d=_j(e,r,{width:f,marginTopDefault:n,marginRightDefault:i,marginBottomDefault:s,marginLeftDefault:o})+Math.max(0,l-n+c-s)}=r;f=+f,d=+d;const p={width:f,height:d,marginTop:l,marginRight:u,marginBottom:c,marginLeft:h};if(e.fx||e.fy){let{margin:m,marginTop:g=m!==void 0?m:l,marginRight:y=m!==void 0?m:u,marginBottom:b=m!==void 0?m:c,marginLeft:_=m!==void 0?m:h}=r.facet??{};g=+g,y=+y,b=+b,_=+_,p.facet={marginTop:g,marginRight:y,marginBottom:b,marginLeft:_}}return p}function _j({x:e,y:t,fy:r,fx:n},{projection:i,aspectRatio:s},{width:o,marginTopDefault:a,marginRightDefault:l,marginBottomDefault:u,marginLeftDefault:c}){const h=r?r.scale.domain().length:1,f=S$(i);if(f){const p=n?n.scale.domain().length:1,m=(1.1*h-.1)/(1.1*p-.1)*f,g=Math.max(.1,Math.min(10,m));return Math.round((o-c-l)*g+a+u)}const d=t?ro(t)?t.scale.domain().length:Math.max(7,17/h):1;if(s!=null){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const p=f2("y",t)/(f2("x",e)*s),m=n?n.scale.bandwidth():1,g=r?r.scale.bandwidth():1,y=m*(o-c-l)-e.insetLeft-e.insetRight;return(p*y+t.insetTop+t.insetBottom)/g+a+u}return!!(t||r)*Math.max(1,Math.min(60,d*h))*20+!!n*30+60}function f2(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:r,domain:n}=t;let i;switch(r){case"linear":case"utc":case"time":i=Number;break;case"pow":{const a=t.scale.exponent();i=l=>Math.pow(l,a);break}case"log":i=Math.log;break;case"point":case"band":return n.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${r}`)}const[s,o]=Ee(n);return Math.abs(i(o)-i(s))}function vj(e,t){const{fx:r,fy:n}=Um(e,t),i=r==null?void 0:r.scale.domain(),s=n==null?void 0:n.scale.domain();return i&&s?L9(i,s).map(([o,a],l)=>({x:o,y:a,i:l})):i?i.map((o,a)=>({x:o,i:a})):s?s.map((o,a)=>({y:o,i:a})):void 0}function wj(e,{x:t,y:r}){return t&&(t=Gm(t)),r&&(r=Gm(r)),e.filter(t&&r?n=>t.has(n.x)&&r.has(n.y):t?n=>t.has(n.x):n=>r.has(n.y)).sort(t&&r?(n,i)=>t.get(n.x)-t.get(i.x)||r.get(n.y)-r.get(i.y):t?(n,i)=>t.get(n.x)-t.get(i.x):(n,i)=>r.get(n.y)-r.get(i.y))}function E1(e,{fx:t,fy:r}){const n=mi(e),i=t==null?void 0:t.value,s=r==null?void 0:r.value;return t&&r?Ro(n,o=>(o.fx=i[o[0]],o.fy=s[o[0]],o),o=>i[o],o=>s[o]):t?Ro(n,o=>(o.fx=i[o[0]],o),o=>i[o]):Ro(n,o=>(o.fy=s[o[0]],o),o=>s[o])}function xj(e,t,{marginTop:r,marginLeft:n}){return e&&t?({x:i,y:s})=>`translate(${e(i)-n},${t(s)-r})`:e?({x:i})=>`translate(${e(i)-n},0)`:({y:i})=>`translate(0,${t(i)-r})`}function Tj(e){const t=[],r=new Uint32Array(Fi(e,n=>n.length));for(const n of e){let i=0;for(const s of e)n!==s&&(r.set(s,i),i+=s.length);t.push(r.slice(0,i))}return t}const Aj=new Map([["top",E0],["right",M0],["bottom",C0],["left",S0],["top-left",vc(E0,S0)],["top-right",vc(E0,M0)],["bottom-left",vc(C0,S0)],["bottom-right",vc(C0,M0)],["top-empty",Sj],["right-empty",Rj],["bottom-empty",Mj],["left-empty",Ij],["empty",Pj]]);function Ej(e){if(e==null)return null;const t=Aj.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const d2=new WeakMap;function Gm(e){let t=d2.get(e);return t||d2.set(e,t=new Is(Me(e,(r,n)=>[r,n]))),t}function Qi(e,t){return Gm(e).get(t)}function Cj(e,t,r){return t=gc(t),r=gc(r),e.find(n=>Object.is(gc(n.x),t)&&Object.is(gc(n.y),r))}function Qf(e,t,r){var n;return(n=Cj(e,t,r))==null?void 0:n.empty}function E0(e,{y:t},{y:r}){return t?Qi(t,r)===0:!0}function C0(e,{y:t},{y:r}){return t?Qi(t,r)===t.length-1:!0}function S0(e,{x:t},{x:r}){return t?Qi(t,r)===0:!0}function M0(e,{x:t},{x:r}){return t?Qi(t,r)===t.length-1:!0}function Sj(e,{y:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;const s=Qi(t,n);if(s>0)return Qf(e,r,t[s-1])}function Mj(e,{y:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;const s=Qi(t,n);if(s<t.length-1)return Qf(e,r,t[s+1])}function Ij(e,{x:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;const s=Qi(t,r);if(s>0)return Qf(e,t[s-1],n)}function Rj(e,{x:t},{x:r,y:n,empty:i}){if(i)return!1;if(!t)return;const s=Qi(t,r);if(s<t.length-1)return Qf(e,t[s+1],n)}function Pj(e,t,{empty:r}){return r}function vc(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function I0(e,{channels:{fx:t,fy:r},groups:n}){return t&&r?e.map(({x:i,y:s})=>{var o;return((o=n.get(i))==null?void 0:o.get(s))??[]}):t?e.map(({x:i})=>n.get(i)??[]):e.map(({y:i})=>n.get(i)??[])}class en{constructor(t,r={},n={},i){const{facet:s="auto",facetAnchor:o,fx:a,fy:l,sort:u,dx:c=0,dy:h=0,margin:f=0,marginTop:d=f,marginRight:p=f,marginBottom:m=f,marginLeft:g=f,clip:y=i==null?void 0:i.clip,channels:b,tip:_,render:v}=n;if(this.data=t,this.sort=Wl(u)?u:null,this.initializer=Yh(n).initializer,this.transform=this.initializer?n.transform:g1(n).transform,s===null||s===!1?this.facet=null:(this.facet=tn(s===!0?"include":s,"facet",["auto","include","exclude","super"]),this.fx=t===Gc&&typeof a=="string"?[a]:a,this.fy=t===Gc&&typeof l=="string"?[l]:l),this.facetAnchor=Ej(o),r=S6(r),b!==void 0&&(r={...kj(b),...r}),i!==void 0&&(r={...m$(this,n,i),...r}),this.channels=Object.fromEntries(Object.entries(r).map(([w,A])=>{if(h1(A.value)){const{value:x,label:E=A.label,scale:T=A.scale}=A.value;A={...A,label:E,scale:T,value:x}}if(t===Gc&&typeof A.value=="string"){const{value:x}=A;A={...A,value:[x]}}return[w,A]}).filter(([w,{value:A,optional:x}])=>{if(A!=null)return!0;if(x)return!1;throw new Error(`missing channel value: ${w}`)})),this.dx=+c,this.dy=+h,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+g,this.clip=H6(y),this.tip=Dj(_),this.facet==="super"){if(a||l)throw new Error("super-faceting cannot use fx or fy");for(const w in this.channels){const{scale:A}=r[w];if(!(A!=="x"&&A!=="y"))throw new Error("super-faceting cannot use x or y")}}v!=null&&(this.render=a8(v,this.render))}initialize(t,r,n){let i=_r(this.data);t===void 0&&i!=null&&(t=[mi(i)]);const s=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,n),i=_r(i)),t!==void 0&&(t.original=s);const o=r$(this.channels,i);return this.sort!=null&&i$(i,t,o,r,this.sort),{data:i,facets:t,channels:o}}filter(t,r,n){for(const i in r){const{filter:s=zs}=r[i];if(s!==null){const o=n[i];t=t.filter(a=>s(o[a]))}}return t}project(t,r,n){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const s=i.replace(/^x|x$/,"y");s in t&&t[s].scale==="y"&&E$(i,s,r,n.projection)}}scale(t,r,n){const i=n$(t,r);return n.projection&&this.project(t,i,n),i}}function o8(...e){return e.plot=en.prototype.plot,e}function a8(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(r,n,i,s,o,a){return e.call(this,r,n,i,s,o,(l,u,c,h,f)=>t.call(this,l,u,c,h,f,a))}}function kj(e){return Object.fromEntries(Object.entries(S6(e)).map(([t,r])=>(r=typeof r=="string"?{value:r,label:t}:bu(r),r.filter===void 0&&r.scale==null&&(r={...r,filter:null}),[t,r])))}function Dj(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?tn(e,"tip",["x","y","xy"]):e}function Jf(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:ji(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const p2=new WeakMap;function C1(e,t,{x:r,y:n,px:i,py:s,maxRadius:o=40,channels:a,render:l,...u}={}){return o=+o,i!=null&&(r??(r=null),a={...a,px:{value:i,scale:"x"}}),s!=null&&(n??(n=null),a={...a,py:{value:s,scale:"y"}}),{x:r,y:n,channels:a,...u,render:a8(function(c,h,f,d,p,m){p={...p,pointerSticky:!1};const g=p.ownerSVGElement,{data:y}=p.getMarkState(this);let b=p2.get(g);b||p2.set(g,b={sticky:!1,roots:[],renders:[]});let _=b.renders.push(k)-1;const{x:v,y:w,fx:A,fy:x}=h;let E=A?A(c.fx)-d.marginLeft:0,T=x?x(c.fy)-d.marginTop:0;v!=null&&v.bandwidth&&(E+=v.bandwidth()/2),w!=null&&w.bandwidth&&(T+=w.bandwidth()/2);const M=c.fi!=null;let P;if(M){let Q=b.facetStates;Q||(b.facetStates=Q=new Map),P=Q.get(this),P||Q.set(this,P=new Map)}const[R,S]=qf(this,d),{px:C,py:I}=f,F=C?Q=>C[Q]:l8(f,R),H=I?Q=>I[Q]:u8(f,S);let X,Z,D,O;function z(Q,et){if(M)if(O&&(O=cancelAnimationFrame(O)),Q==null)P.delete(c.fi);else{P.set(c.fi,et),O=requestAnimationFrame(()=>{O=null;for(const[U,j]of P)if(j<et||j===et&&U<c.fi){Q=null;break}k(Q)});return}k(Q)}function k(Q){if(X===Q&&D===b.sticky)return;X=Q,D=p.pointerSticky=b.sticky;const et=X==null?[]:[X];M&&(et.fx=c.fx,et.fy=c.fy,et.fi=c.fi);const U=m(et,h,f,d,p);if(Z){if(M){const j=Z.parentNode,K=Z.getAttribute("transform"),L=U.getAttribute("transform");K?U.setAttribute("transform",K):U.removeAttribute("transform"),L?j.setAttribute("transform",L):j.removeAttribute("transform"),U.removeAttribute("aria-label"),U.removeAttribute("aria-description"),U.removeAttribute("aria-hidden")}Z.replaceWith(U)}return b.roots[_]=Z=U,X==null&&(P==null?void 0:P.size)>1||p.dispatchValue(X==null?null:y[X]),U}function Y(Q){if(b.sticky||Q.pointerType==="mouse"&&Q.buttons===1)return;let[et,U]=XI(Q);et-=E,U-=T;const j=et<d.marginLeft||et>d.width-d.marginRight?1:e,K=U<d.marginTop||U>d.height-d.marginBottom?1:t;let L=null,dt=o*o;for(const lt of c){const bt=j*(F(lt)-et),Nt=K*(H(lt)-U),Jt=bt*bt+Nt*Nt;Jt<=dt&&(L=lt,dt=Jt)}if(L!=null&&(e!==1||t!==1)){const lt=F(L)-et,bt=H(L)-U;dt=lt*lt+bt*bt}z(L,dt)}function B(Q){Q.pointerType==="mouse"&&X!=null&&(b.sticky&&b.roots.some(et=>et==null?void 0:et.contains(Q.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(et=>et(null))):(b.sticky=!0,k(X)),Q.stopImmediatePropagation()))}function rt(Q){Q.pointerType==="mouse"&&(b.sticky||z(null))}return g.addEventListener("pointerenter",Y),g.addEventListener("pointermove",Y),g.addEventListener("pointerdown",B),g.addEventListener("pointerleave",rt),k(null)},l)}}function Nj(e){return C1(1,1,e)}function Oj(e){return C1(1,.01,e)}function Fj(e){return C1(.01,1,e)}function l8({x1:e,x2:t,x:r=e},n){return e&&t?i=>(e[i]+t[i])/2:r?i=>r[i]:()=>n}function u8({y1:e,y2:t,y:r=e},n){return e&&t?i=>(e[i]+t[i])/2:r?i=>r[i]:()=>n}function c8(e){return ro(e)&&e.interval===void 0?void 0:"tabular-nums"}function Bj(e,t){let{label:r=e.label,tickSize:n=6,width:i=240,height:s=44+n,marginTop:o=18,marginRight:a=0,marginBottom:l=16+n,marginLeft:u=0,style:c,ticks:h=(i-u-a)/64,tickFormat:f,fontVariant:d=c8(e),round:p=!0,opacity:m,className:g}=t;const y=v1(t);g=b1(g),m=fr(m)[1],f===null&&(f=()=>null);const b=Qe("svg",y).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).call(R=>R.append("style").text(`.${g}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${g}-ramp text {
  white-space: pre;
}`)).call(_1,c);let _=R=>R.selectAll(".tick line").attr("y1",o+l-s),v;const w=p?(R,S)=>R.rangeRound(S):(R,S)=>R.range(S),{type:A,domain:x,range:E,interpolate:T,scale:M,pivot:P}=e;if(T){const R=E===void 0?T:gf(T.length===1?T1(T):T,E);v=w(M.copy(),Yr(We(u,i-a),Math.min(x.length+(P!==void 0),E===void 0?1/0:E.length)));const S=256,C=y.document.createElement("canvas");C.width=S,C.height=1;const I=C.getContext("2d");for(let F=0,H=S-1;F<S;++F)I.fillStyle=R(F/H),I.fillRect(F,0,1,1);b.append("image").attr("opacity",m).attr("x",u).attr("y",o).attr("width",i-u-a).attr("height",s-o-l).attr("preserveAspectRatio","none").attr("xlink:href",C.toDataURL())}else if(A==="threshold"){const R=x,S=f===void 0?C=>C:typeof f=="string"?Mn(f):f;v=w(nu().domain([-1,E.length-1]),[u,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(E).enter().append("rect").attr("x",(C,I)=>v(I-1)).attr("y",o).attr("width",(C,I)=>v(I)-v(I-1)).attr("height",s-o-l).attr("fill",C=>C),h=Me(R,(C,I)=>I),f=C=>S(R[C],C)}else v=w(xf().domain(x),[u,i-a]),b.append("g").attr("fill-opacity",m).selectAll().data(x).enter().append("rect").attr("x",v).attr("y",o).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",s-o-l).attr("fill",M),_=()=>{};return b.append("g").attr("transform",`translate(0,${s-l})`).call(lM(v).ticks(Array.isArray(h)?null:h,typeof f=="string"?f:void 0).tickFormat(typeof f=="function"?f:void 0).tickSize(n).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Te(d,"normal")).call(_).call(R=>R.select(".domain").remove()),r!==void 0&&b.append("text").attr("x",u).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(r),b.node()}const h8=Math.PI/180;function f8(e,{marker:t,markerStart:r=t,markerMid:n=t,markerEnd:i=t}={}){e.markerStart=R0(r),e.markerMid=R0(n),e.markerEnd=R0(i)}function R0(e){if(e==null||e===!1)return null;if(e===!0)return g2;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return m2("auto");case"arrow-reverse":return m2("auto-start-reverse");case"dot":return Lj;case"circle":case"circle-fill":return g2;case"circle-stroke":return Uj}throw new Error(`invalid marker: ${e}`)}function m2(e){return(t,r)=>Qe("svg:marker",r).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(n=>n.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Lj(e,t){return Qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(r=>r.append("circle").attr("r",2.5)).node()}function g2(e,t){return Qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","white").attr("stroke-width",1.5).call(r=>r.append("circle").attr("r",3)).node()}function Uj(e,t){return Qe("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",e).attr("stroke-width",1.5).call(r=>r.append("circle").attr("r",3)).node()}let Gj=0;function d8(e,t,{stroke:r},n){return Hj(e,t,r&&(i=>r[i]),n)}function Hj(e,{markerStart:t,markerMid:r,markerEnd:n,stroke:i},s=()=>i,o){const a=new Map;function l(u){return function(c){const h=s(c);let f=a.get(u);f||a.set(u,f=new Map);let d=f.get(h);if(!d){const p=this.parentNode.insertBefore(u(h,o),this),m=`plot-marker-${++Gj}`;p.setAttribute("id",m),f.set(h,d=`url(#${m})`)}return d}}t&&e.attr("marker-start",l(t)),r&&e.attr("marker-mid",l(r)),n&&e.attr("marker-end",l(n))}function td({inset:e,insetLeft:t,insetRight:r,...n}={}){return[t,r]=m8(e,t,r),{inset:e,insetLeft:t,insetRight:r,...n}}function p8({inset:e,insetTop:t,insetBottom:r,...n}={}){return[t,r]=m8(e,t,r),{inset:e,insetTop:t,insetBottom:r,...n}}function m8(e,t,r){return e===void 0&&t===void 0&&r===void 0?dr?[1,0]:[.5,.5]:[t,r]}function g8(e,{interval:t}){return e={...bu(e)},e.interval=d1(e.interval===void 0?t:e.interval),e}function S1(e,t,r,n){const{[e]:i,[`${e}1`]:s,[`${e}2`]:o}=r,{value:a,interval:l}=g8(i,r);if(a==null||l==null&&!n)return r;const u=to(i);if(l==null){let d;const p={transform:m=>d||(d=Be(m,a)),label:u};return{...r,[e]:void 0,[`${e}1`]:s===void 0?p:s,[`${e}2`]:o===void 0?p:o}}let c,h;function f(d){return h!==void 0&&d===c?h:h=Me(Be(c=d,a),p=>l.floor(p))}return t({...r,[e]:void 0,[`${e}1`]:s===void 0?{transform:f,label:u}:s,[`${e}2`]:o===void 0?{transform:d=>f(d).map(p=>l.offset(p)),label:u}:o})}function y8(e,t,r){const{[e]:n}=r,{value:i,interval:s}=g8(n,r);return i==null||s==null?r:t({...r,[e]:{label:to(n),transform:o=>{const a=Me(Be(o,i),u=>s.floor(u)),l=a.map(u=>s.offset(u));return a.map(sr(a)?(u,c)=>u==null||isNaN(u=+u)||(c=l[c],c==null)||isNaN(c=+c)?void 0:new Date((u+c)/2):(u,c)=>u==null||(c=l[c],c==null)?NaN:(+u+ +c)/2)}}})}function zj(e={}){return S1("x",td,e,!0)}function b8(e={}){return S1("x",td,e)}function Vj(e={}){return S1("y",p8,e)}function Wj(e={}){return y8("x",td,e)}function Xj(e={}){return y8("y",p8,e)}const _8={ariaLabel:"rule",fill:null,stroke:"currentColor"};class $j extends en{constructor(t,r={}){const{x:n,y1:i,y2:s,inset:o=0,insetTop:a=o,insetBottom:l=o}=r;super(t,{x:{value:n,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:s,scale:"y",optional:!0}},Jf(r,"x"),_8),this.insetTop=Xt(a),this.insetBottom=Xt(l),f8(this,r)}render(t,r,n,i,s){const{x:o,y:a}=r,{x:l,y1:u,y2:c}=n,{width:h,height:f,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=i,{insetTop:y,insetBottom:b}=this;return Qe("svg:g",s).call(qi,this,i,s).call(Ki,this,{x:l&&o},dr,0).call(_=>_.selectAll().data(t).enter().append("line").call(Zi,this).attr("x1",l?v=>l[v]:(m+h-p)/2).attr("x2",l?v=>l[v]:(m+h-p)/2).attr("y1",u&&!_n(a)?v=>u[v]+y:d+y).attr("y2",c&&!_n(a)?a.bandwidth?v=>c[v]+a.bandwidth()-b:v=>c[v]-b:f-g-b).call(eo,this,n).call(d8,this,n,s)).node()}}class jj extends en{constructor(t,r={}){const{x1:n,x2:i,y:s,inset:o=0,insetRight:a=o,insetLeft:l=o}=r;super(t,{y:{value:s,scale:"y",optional:!0},x1:{value:n,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Jf(r,"y"),_8),this.insetRight=Xt(a),this.insetLeft=Xt(l),f8(this,r)}render(t,r,n,i,s){const{x:o,y:a}=r,{y:l,x1:u,x2:c}=n,{width:h,height:f,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=i,{insetLeft:y,insetRight:b}=this;return Qe("svg:g",s).call(qi,this,i,s).call(Ki,this,{y:l&&a},0,dr).call(_=>_.selectAll().data(t).enter().append("line").call(Zi,this).attr("x1",u&&!_n(o)?v=>u[v]+y:m+y).attr("x2",c&&!_n(o)?o.bandwidth?v=>c[v]+o.bandwidth()-b:v=>c[v]-b:h-p-b).attr("y1",l?v=>l[v]:(d+f-g)/2).attr("y2",l?v=>l[v]:(d+f-g)/2).call(eo,this,n).call(d8,this,n,s)).node()}}function Yj(e,t){let{x:r=Ye,y:n,y1:i,y2:s,...o}=Vj(t);return[i,s]=v8(n,i,s),new $j(e,{...o,x:r,y1:i,y2:s})}function Hm(e,t){let{y:r=Ye,x:n,x1:i,x2:s,...o}=b8(t);return[i,s]=v8(n,i,s),new jj(e,{...o,y:r,x1:i,x2:s})}function v8(e,t,r){if(e==null){if(t===void 0){if(r!==void 0)return[0,r]}else if(r===void 0)return[0,t]}else{if(t===void 0)return r===void 0?[0,e]:[e,r];if(r===void 0)return[e,t]}return[t,r]}function w8(e,...t){let r=t.length;for(let n=0,i=!0;n<r;++n)typeof t[n]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(n,2,e[n]+t[n]+e[n+1]),t.splice(n,1),--n,--r);return n=>{let i=e[0];for(let s=0;s<r;++s)i+=t[s](n)+e[s+1];return i}}const qj={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},x8="";class M1 extends en{constructor(t,r={}){const{x:n,y:i,text:s=Yi(t)&&E6(t)?Ye:l1,frameAnchor:o,textAnchor:a=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:l=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:u=1,lineWidth:c=1/0,textOverflow:h,monospace:f,fontFamily:d=f?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:g,fontWeight:y,rotate:b}=r,[_,v]=fr(b,0),[w,A]=eY(p);if(super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:w,optional:!0},rotate:{value:MX(_),optional:!0},text:{value:s,filter:o6,optional:!0}},r,qj),this.rotate=v,this.textAnchor=Te(a,"middle"),this.lineAnchor=tn(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+c,this.textOverflow=T8(h),this.monospace=!!f,this.fontFamily=Ze(d),this.fontSize=A,this.fontStyle=Ze(m),this.fontVariant=Ze(g),this.fontWeight=Ze(y),this.frameAnchor=p1(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=E8(this),this.clipLine=C8(this)}render(t,r,n,i,s){const{x:o,y:a}=r,{x:l,y:u,rotate:c,text:h,title:f,fontSize:d}=n,{rotate:p}=this,[m,g]=qf(this,i);return Qe("svg:g",s).call(qi,this,i,s).call(A8,this,h,i).call(Ki,this,{x:l&&o,y:u&&a}).call(y=>y.selectAll().data(t).enter().append("text").call(Zi,this).call(Zj,this,h,f).attr("transform",w8`translate(${l?b=>l[b]:m},${u?b=>u[b]:g})${c?b=>` rotate(${c[b]})`:p?` rotate(${p})`:""}`).call(Mt,"font-size",d&&(b=>d[b])).call(eo,this,n)).node()}}function T8(e){return e==null?null:tn(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Zj(e,t,r,n){if(!r)return;const{lineAnchor:i,lineHeight:s,textOverflow:o,splitLines:a,clipLine:l}=t;e.each(function(u){const c=a(aa(r[u])??"").map(l),h=c.length,f=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let p=0;p<h;++p){if(++d,!c[p])continue;const m=this.ownerDocument.createElementNS(Xo.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(f+p)*s}em`):m.setAttribute("dy",`${d*s}em`),m.textContent=c[p],this.appendChild(m),d=0}}else f&&this.setAttribute("y",`${f*s}em`),this.textContent=c[0];if(o&&!n&&c[0]!==r[u]){const d=this.ownerDocument.createElementNS(Xo.svg,"title");d.textContent=r[u],this.appendChild(d)}})}function Zh(e,{x:t,y:r,...n}={}){return n.frameAnchor===void 0&&([t,r]=x6(t,r)),new M1(e,{...n,x:t,y:r})}function Kj(e,{x:t=Ye,...r}={}){return new M1(e,Xj({...r,x:t}))}function Qj(e,{y:t=Ye,...r}={}){return new M1(e,Wj({...r,y:t}))}function A8(e,t,r){Mt(e,"text-anchor",t.textAnchor),Mt(e,"font-family",t.fontFamily),Mt(e,"font-size",t.fontSize),Mt(e,"font-style",t.fontStyle),Mt(e,"font-variant",t.fontVariant===void 0?Jj(r):t.fontVariant),Mt(e,"font-weight",t.fontWeight)}function Jj(e){return e&&(PX(e)||sr(e))?"tabular-nums":void 0}const tY=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function eY(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),tY.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function rY(e,t,r){const n=[];let i,s=0;for(const[o,a,l]of nY(e)){if(i===void 0&&(i=o),s>i&&r(e,i,a)>t&&(n.push(e.slice(i,s)+(e[s-1]===x8?"-":"")),i=o),l){n.push(e.slice(i,a)),i=void 0;continue}s=a}return n}function*nY(e){let t=0,r=0;const n=e.length;for(;r<n;){let i=1;switch(e[r]){case x8:case"-":++r,yield[t,r,!1],t=r;break;case" ":for(yield[t,r,!1];e[++r]===" ";);t=r;break;case"\r":e[r+1]===`
`&&++i;case`
`:yield[t,r,!0],r+=i,t=r;break;default:++r;break}}yield[t,r,!0]}const y2={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function I1(e,t=0,r=e.length){let n=0;for(let i=t;i<r;i=ba(e,i))n+=y2[e[i]]??(M8(e,i)?120:y2.e);return n}function R1(e,t=0,r=e.length){let n=0;for(let i=t;i<r;i=ba(e,i))n+=M8(e,i)?200:100;return n}function E8({monospace:e,lineWidth:t,textOverflow:r}){if(r!=null||t==1/0)return s=>s.split(/\r\n?|\n/g);const n=e?R1:I1,i=t*100;return s=>rY(s,i,n)}function C8({monospace:e,lineWidth:t,textOverflow:r}){if(r==null||t==1/0)return s=>s;const n=e?R1:I1,i=t*100;switch(r){case"clip-start":return s=>_2(s,i,n,"");case"clip-end":return s=>b2(s,i,n,"");case"ellipsis-start":return s=>_2(s,i,n,Ho);case"ellipsis-middle":return s=>iY(s,i,n,Ho);case"ellipsis-end":return s=>b2(s,i,n,Ho)}}const Ho="";function la(e,t,r,n){const i=[];let s=0;for(let o=0,a=0,l=e.length;o<l;o=a){a=ba(e,o);const u=r(e,o,a);if(s+u>t){for(s+=n;s>t&&o>0;)a=o,o=i.pop(),s-=r(e,o,a);return[o,t-s]}s+=u,i.push(o)}return[-1,0]}function b2(e,t,r,n){e=e.trim();const i=r(n),[s]=la(e,t,r,i);return s<0?e:e.slice(0,s).trimEnd()+n}function iY(e,t,r,n){e=e.trim();const i=r(e);if(i<=t)return e;const s=r(n)/2,[o,a]=la(e,t/2,r,s),[l]=la(e,i-t/2-a+s,r,-s);return l<0?n:e.slice(0,o).trimEnd()+n+e.slice(ba(e,l)).trimStart()}function _2(e,t,r,n){e=e.trim();const i=r(e);if(i<=t)return e;const s=r(n),[o]=la(e,i-t+s,r,-s);return o<0?n:n+e.slice(ba(e,o)).trimStart()}const zm=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,v2=/\p{Extended_Pictographic}/uy;function ba(e,t){return t+=sY(e,t)?2:1,aY(e,t)&&(t=zm.lastIndex),oY(e,t)?ba(e,t+1):t}function S8(e,t){return e.charCodeAt(t)<128}function sY(e,t){const r=e.charCodeAt(t);if(r>=55296&&r<56320){const n=e.charCodeAt(t+1);return n>=56320&&n<57344}return!1}function oY(e,t){return e.charCodeAt(t)===8205}function aY(e,t){return S8(e,t)?!1:(zm.lastIndex=t,zm.test(e))}function M8(e,t){return S8(e,t)?!1:(v2.lastIndex=t,v2.test(e))}const lY={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},I8=3.5,uY=I8*5,R8={draw(e,t,r){const n=t*r/uY;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-n,n-t),e.lineTo(0,-t),e.lineTo(n,n-t)}},cY={draw(e,t,r){e.moveTo(-r,0),e.lineTo(0,-t),e.lineTo(r,0)}},hY=new Map([["arrow",R8],["spike",cY]]);function fY(e){return e&&typeof e.draw=="function"}function dY(e){if(fY(e))return e;const t=hY.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class P8 extends en{constructor(t,r={}){const{x:n,y:i,r:s=I8,length:o,rotate:a,shape:l=R8,anchor:u="middle",frameAnchor:c}=r,[h,f]=fr(o,12),[d,p]=fr(a,0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},r,lY),this.r=+s,this.length=f,this.rotate=p,this.shape=dY(l),this.anchor=tn(u,"anchor",["start","middle","end"]),this.frameAnchor=p1(c)}render(t,r,n,i,s){const{x:o,y:a}=r,{x:l,y:u,length:c,rotate:h}=n,{length:f,rotate:d,anchor:p,shape:m,r:g}=this,[y,b]=qf(this,i);return Qe("svg:g",s).call(qi,this,i,s).call(Ki,this,{x:l&&o,y:u&&a}).call(_=>_.selectAll().data(t).enter().append("path").call(Zi,this).attr("transform",w8`translate(${l?v=>l[v]:y},${u?v=>u[v]:b})${h?v=>` rotate(${h[v]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?c?v=>` translate(0,${c[v]})`:` translate(0,${f})`:c?v=>` translate(0,${c[v]/2})`:` translate(0,${f/2})`}`).attr("d",c?v=>{const w=op();return m.draw(w,c[v],g),w}:(()=>{const v=op();return m.draw(v,f,g),v})()).call(eo,this,n)).node()}}function pY(e,t={}){const{x:r=Ye,...n}=t;return new P8(e,{...n,x:r})}function mY(e,t={}){const{y:r=Ye,...n}=t;return new P8(e,{...n,y:r})}function Ji(e,t){return arguments.length<2&&!Yi(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function ed({anchor:e}={},t){return e===void 0?t[0]:tn(e,"anchor",t)}function k8(e){return ed(e,["left","right"])}function D8(e){return ed(e,["right","left"])}function N8(e){return ed(e,["bottom","top"])}function O8(e){return ed(e,["top","bottom"])}function F8(){const[e,t]=Ji(...arguments);return L8("y",k8(t),e,t)}function gY(){const[e,t]=Ji(...arguments);return L8("fy",D8(t),e,t)}function B8(){const[e,t]=Ji(...arguments);return U8("x",N8(t),e,t)}function yY(){const[e,t]=Ji(...arguments);return U8("fx",O8(t),e,t)}function L8(e,t,r,{color:n="currentColor",opacity:i=1,stroke:s=n,strokeOpacity:o=i,strokeWidth:a=1,fill:l=n,fillOpacity:u=i,textAnchor:c,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:p=e==="y"?6:0,tickPadding:m,tickRotate:g,x:y,margin:b,marginTop:_=b===void 0?20:b,marginRight:v=b===void 0?t==="right"?40:0:b,marginBottom:w=b===void 0?20:b,marginLeft:A=b===void 0?t==="left"?40:0:b,label:x,labelAnchor:E,labelArrow:T,labelOffset:M,...P}){return p=Xt(p),m=Xt(m),g=Xt(g),E!==void 0&&(E=tn(E,"labelAnchor",["center","top","bottom"])),T=j8(T),o8(p&&!er(s)?bY(e,t,r,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:g,x:y,...P}):null,er(l)?null:vY(e,t,r,{fill:l,fillOpacity:u,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:g,x:y,marginTop:_,marginRight:v,marginBottom:w,marginLeft:A,...P}),!er(l)&&x!==null?Zh([],V8({fill:l,fillOpacity:u,...P},function(R,S,C,I,F){const H=I[e],{marginTop:X,marginRight:Z,marginBottom:D,marginLeft:O}=e==="y"&&F.inset||F,z=E??(H.bandwidth?"center":"top"),k=M??(t==="right"?Z:O)-3;return z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=z,this.frameAnchor=`${z}-${t}`,this.rotate=0),this.dy=z==="top"?3-X:z==="bottom"?D-3:0,this.dx=t==="right"?k:-k,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[$8(e,H,{anchor:t,label:x,labelAnchor:z,labelArrow:T})]}}}})):null)}function U8(e,t,r,{color:n="currentColor",opacity:i=1,stroke:s=n,strokeOpacity:o=i,strokeWidth:a=1,fill:l=n,fillOpacity:u=i,textAnchor:c,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:p=e==="x"?6:0,tickPadding:m,tickRotate:g,y,margin:b,marginTop:_=b===void 0?t==="top"?30:0:b,marginRight:v=b===void 0?20:b,marginBottom:w=b===void 0?t==="bottom"?30:0:b,marginLeft:A=b===void 0?20:b,label:x,labelAnchor:E,labelArrow:T,labelOffset:M,...P}){return p=Xt(p),m=Xt(m),g=Xt(g),E!==void 0&&(E=tn(E,"labelAnchor",["center","left","right"])),T=j8(T),o8(p&&!er(s)?_Y(e,t,r,{stroke:s,strokeOpacity:o,strokeWidth:a,tickSize:p,tickPadding:m,tickRotate:g,y,...P}):null,er(l)?null:wY(e,t,r,{fill:l,fillOpacity:u,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:c,tickSize:p,tickPadding:m,tickRotate:g,y,marginTop:_,marginRight:v,marginBottom:w,marginLeft:A,...P}),!er(l)&&x!==null?Zh([],V8({fill:l,fillOpacity:u,...P},function(R,S,C,I,F){const H=I[e],{marginTop:X,marginRight:Z,marginBottom:D,marginLeft:O}=e==="x"&&F.inset||F,z=E??(H.bandwidth?"center":"right"),k=M??(t==="top"?X:D)-3;return z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${z}`,this.textAnchor=z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-k:k,this.dx=z==="right"?Z-3:z==="left"?3-O:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[$8(e,H,{anchor:t,label:x,labelAnchor:z,labelArrow:T})]}}}})):null)}function bY(e,t,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:u=0,insetLeft:c=u,insetRight:h=u,dx:f=0,y:d=e==="y"?void 0:null,...p}){return _a(mY,e,t,`${e}-axis tick`,r,{strokeWidth:n,strokeLinecap:i,strokeLinejoin:s,facetAnchor:o,frameAnchor:a,y:d,...p,dx:t==="left"?+f-dr+ +c:+f+dr-h,anchor:"start",length:l,shape:t==="left"?IY:RY})}function _Y(e,t,r,{strokeWidth:n=1,strokeLinecap:i=null,strokeLinejoin:s=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:a=t,tickSize:l,inset:u=0,insetTop:c=u,insetBottom:h=u,dy:f=0,x:d=e==="x"?void 0:null,...p}){return _a(pY,e,t,`${e}-axis tick`,r,{strokeWidth:n,strokeLinejoin:s,strokeLinecap:i,facetAnchor:o,frameAnchor:a,x:d,...p,dy:t==="bottom"?+f-dr-h:+f+dr+ +c,anchor:"start",length:l,shape:t==="bottom"?SY:MY})}function vY(e,t,r,{facetAnchor:n=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>60?4*Math.cos(o*h8):0),text:l,textAnchor:u=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:h,inset:f=0,insetLeft:d=f,insetRight:p=f,dx:m=0,y:g=e==="y"?void 0:null,...y}){return _a(Qj,e,t,`${e}-axis tick label`,r,{facetAnchor:n,frameAnchor:i,text:l,textAnchor:u,lineAnchor:c,fontVariant:h,rotate:o,y:g,...y,dx:t==="left"?+m-s-a+ +d:+m+ +s+ +a-p},function(b,_,v,w,A){h===void 0&&(this.fontVariant=X8(b)),l===void 0&&(A.text=W8(b,_,v,w,t))})}function wY(e,t,r,{facetAnchor:n=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:s,tickRotate:o=0,tickPadding:a=Math.max(3,9-s)+(Math.abs(o)>=10?4*Math.cos(o*h8):0),text:l,textAnchor:u=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:h,inset:f=0,insetTop:d=f,insetBottom:p=f,dy:m=0,x:g=e==="x"?void 0:null,...y}){return _a(Kj,e,t,`${e}-axis tick label`,r,{facetAnchor:n,frameAnchor:i,text:l===void 0?null:l,textAnchor:u,lineAnchor:c,fontVariant:h,rotate:o,x:g,...y,dy:t==="bottom"?+m+ +s+ +a-p:+m-s-a+ +d},function(b,_,v,w,A){h===void 0&&(this.fontVariant=X8(b)),l===void 0&&(A.text=W8(b,_,v,w,t))})}function xY(){const[e,t]=Ji(...arguments);return G8("y",k8(t),e,t)}function TY(){const[e,t]=Ji(...arguments);return G8("fy",D8(t),e,t)}function AY(){const[e,t]=Ji(...arguments);return H8("x",N8(t),e,t)}function EY(){const[e,t]=Ji(...arguments);return H8("fx",O8(t),e,t)}function G8(e,t,r,{y:n=e==="y"?void 0:null,x:i=null,x1:s=t==="left"?i:null,x2:o=t==="right"?i:null,...a}){return _a(Hm,e,t,`${e}-grid`,r,{y:n,x1:s,x2:o,...z8(a)})}function H8(e,t,r,{x:n=e==="x"?void 0:null,y:i=null,y1:s=t==="top"?i:null,y2:o=t==="bottom"?i:null,...a}){return _a(Yj,e,t,`${e}-grid`,r,{x:n,y1:s,y2:o,...z8(a)})}function z8({color:e="currentColor",opacity:t=.1,stroke:r=e,strokeOpacity:n=t,strokeWidth:i=1,...s}){return{stroke:r,strokeOpacity:n,strokeWidth:i,...s}}function V8({fill:e,fillOpacity:t,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:u,clip:c=!1},h){return[,e]=hi(e),[,t]=fr(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:r,fontSize:n,fontStyle:i,fontVariant:s,fontWeight:o,monospace:a,pointerEvents:l,shapeRendering:u,clip:c,initializer:h}}function _a(e,t,r,n,i,s,o){let a;function l(h,f,d,p,m,g){const y=h==null&&(t==="fx"||t==="fy"),{[t]:b}=p;if(!b)throw new Error(`missing scale: ${t}`);const _=b.domain();let{interval:v,ticks:w,tickFormat:A,tickSpacing:x=t==="x"?80:35}=s;if(typeof w=="string"&&Y8(b)&&(v=w,w=void 0),w===void 0&&(w=ya(v,b.type)??CY(b,x)),h==null){if(Yi(w))h=_r(w);else if(So(w))h=P0(w,...Ee(_));else if(b.interval){let T=b.interval;if(b.ticks){const[M,P]=Ee(_),R=(P-M)/T[gu];T=Wv(T,R/w)??T,h=P0(T,M,P)}else{h=_;const M=h.length;T=Wv(T,M/w)??T,T!==b.interval&&(h=P0(T,...Ee(h)))}if(T===b.interval){const M=Math.round(h.length/w);M>1&&(h=h.filter((P,R)=>R%M===0))}}else b.ticks?h=b.ticks(w):h=_;if(!b.ticks&&h.length&&h!==_){const T=new hf(_);h=h.filter(M=>T.has(M)),h.length||Es(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?f=[mi(h)]:a[t]={scale:t,value:Ye}}o==null||o.call(this,b,h,w,A,a);const E=Object.fromEntries(Object.entries(a).map(([T,M])=>[T,{...M,value:Be(h,M.value)}]));return y&&(f=g.filterFacets(h,E)),{data:h,facets:f,channels:E}}const u=Yh(s).initializer,c=e(i,Yh({...s,initializer:l},u));return i==null?(a=c.channels,c.channels={}):a={},c.ariaLabel=n,c.clip===void 0&&(c.clip=!1),c}function CY(e,t){const[r,n]=Ee(e.range());return(n-r)/t}function W8(e,t,r,n,i){return{value:P1(e,t,r,n,i)}}function P1(e,t,r,n,i){return typeof n=="function"?n:n===void 0&&t&&sr(t)?mX(t,i)??aa:e.tickFormat?e.tickFormat(typeof r=="number"?r:null,n):n===void 0?aa:typeof n=="string"?(sr(e.domain())?lu:Mn)(n):yu(n)}function P0(e,t,r){return e.range(t,e.offset(e.floor(r)))}const SY={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},MY={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},IY={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},RY={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function X8(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function PY(e){return Math.sign(oa(e.domain()))*Math.sign(oa(e.range()))}function $8(e,t,{anchor:r,label:n=t.label,labelAnchor:i,labelArrow:s}={}){if(!(n==null||n.inferred&&Y8(t)&&/^(date|time|year)$/i.test(n))){if(n=String(n),s==="auto"&&(s=(!t.bandwidth||t.interval)&&!/[]/.test(n)),!s)return n;if(s===!0){const o=PY(t);o&&(s=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(s){case"left":return` ${n}`;case"right":return`${n} `;case"up":return r==="right"?`${n} `:` ${n}`;case"down":return r==="right"?`${n} `:` ${n}`}return n}}function j8(e="auto"){return er(e)?!1:typeof e=="boolean"?e:tn(e,"labelArrow",["auto","up","right","down","left"])}function Y8(e){return sr(e.domain())}function w2(e,t){if(t==null)return t;const r=e(t);if(!r)throw new Error(`scale not found: ${t}`);return r}function kY(e,{opacity:t,...r}={}){if(!ro(e)&&!s8(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return q8(e,r,(n,i,s,o)=>n.append("svg").attr("width",s).attr("height",o).attr("fill",i.scale).attr("fill-opacity",fr(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function DY(e,{fill:t=(u=>(u=e.hint)==null?void 0:u.fill)()!==void 0?e.hint.fill:"none",fillOpacity:r=1,stroke:n=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:er(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:s=1.5,r:o=4.5,...a}={},l){const[h,f]=hi(t),[d,p]=hi(n),m=w2(l,h),g=w2(l,d),y=o*o*Math.PI;return r=fr(r)[1],i=fr(i)[1],s=fr(s)[1],q8(e,a,(b,_,v,w)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",v).attr("height",w).attr("fill",h==="color"?A=>m.scale(A):f).attr("fill-opacity",r).attr("stroke",d==="color"?A=>g.scale(A):p).attr("stroke-opacity",i).attr("stroke-width",s).append("path").attr("d",A=>{const x=op();return e.scale(A).draw(x,y),x}))}function q8(e,t={},r){let{columns:n,tickFormat:i,fontVariant:s=c8(e),swatchSize:o=15,swatchWidth:a=o,swatchHeight:l=o,marginLeft:u=0,className:c,style:h,width:f}=t;const d=v1(t);c=b1(c),i=P1(e.scale,e.domain,void 0,i);const p=Qe("div",d).attr("class",`${c}-swatches ${c}-swatches-${n!=null?"columns":"wrap"}`);let m;return n!=null?(m=`.${c}-swatches-columns .${c}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${c}-swatches-columns .${c}-swatch::before {
  flex-shrink: 0;
}
.${c}-swatches-columns .${c}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",n).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(r,e,a,l).call(g=>g.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(m=`.${c}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${c}-swatches-wrap .${c}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(r,e,a,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),p.call(g=>g.insert("style","*").text(`.${c}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${c}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",f===void 0?null:`${+f}px`).style("font-variant",Te(s,"normal")).call(_1,h).node()}const Vm=new Map([["symbol",DY],["color",K8],["opacity",OY]]);function NY(e,t,r={}){return(n,i)=>{if(!Vm.has(n))throw new Error(`unknown legend type: ${n}`);if(n in e)return Vm.get(n)(e[n],Z8(t,r[n],i),s=>e[s])}}function Z8({className:e,...t},{label:r,ticks:n,tickFormat:i}={},s){return OX(s,{className:e,...t},{label:r,ticks:n,tickFormat:i})}function K8(e,{legend:t=!0,...r}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return kY(e,r);case"ramp":return Bj(e,r);default:throw new Error(`unknown legend type: ${t}`)}}function OY({type:e,interpolate:t,...r},{legend:n=!0,color:i=Bi(0,0,0),...s}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(n===!0&&(n="ramp"),`${n}`.toLowerCase()!=="ramp")throw new Error(`${n} opacity legends are not supported`);return K8({type:e,...r,interpolate:FY(i)},{legend:n,...s})}function FY(e){const{r:t,g:r,b:n}=Bi(e)||Bi(0,0,0);return i=>`rgba(${t},${r},${n},${i})`}function BY(e,t,r){const n=[];for(const[i,s]of Vm){const o=r[i];if(o!=null&&o.legend&&i in e){const a=s(e[i],Z8(t,e[i],o),l=>e[l]);a!=null&&n.push(a)}}return n}const LY={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},UY={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class GY extends en{constructor(t={}){const{anchor:r=null,inset:n=0,insetTop:i=n,insetRight:s=n,insetBottom:o=n,insetLeft:a=n,rx:l,ry:u}=t;super(Gc,void 0,t,r==null?LY:UY),this.anchor=y6(r,"anchor",["top","right","bottom","left"]),this.insetTop=Xt(i),this.insetRight=Xt(s),this.insetBottom=Xt(o),this.insetLeft=Xt(a),this.rx=Xt(l),this.ry=Xt(u)}render(t,r,n,i,s){const{marginTop:o,marginRight:a,marginBottom:l,marginLeft:u,width:c,height:h}=i,{anchor:f,insetTop:d,insetRight:p,insetBottom:m,insetLeft:g,rx:y,ry:b}=this,_=u+g,v=c-a-p,w=o+d,A=h-l-m;return Qe(f?"svg:line":"svg:rect",s).datum(0).call(qi,this,i,s).call(Zi,this).call(eo,this,n).call(Ki,this,{}).call(f==="left"?x=>x.attr("x1",_).attr("x2",_).attr("y1",w).attr("y2",A):f==="right"?x=>x.attr("x1",v).attr("x2",v).attr("y1",w).attr("y2",A):f==="top"?x=>x.attr("x1",_).attr("x2",v).attr("y1",w).attr("y2",w):f==="bottom"?x=>x.attr("x1",_).attr("x2",v).attr("y1",A).attr("y2",A):x=>x.attr("x",_).attr("y",w).attr("width",v-_).attr("height",A-w).attr("rx",y).attr("ry",b)).node()}}function HY(e){return new GY(e)}const k0={ariaLabel:"tip",fill:"white",stroke:"currentColor"},zY=new Set(["geometry","href","src","ariaLabel","scales"]);class VY extends en{constructor(t,r={}){r.tip&&(r={...r,tip:!1}),r.title===void 0&&Yi(t)&&E6(t)&&(r={...r,title:Ye});const{x:n,y:i,x1:s,x2:o,y1:a,y2:l,anchor:u,monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:f,fontStyle:d,fontVariant:p,fontWeight:m,lineHeight:g=1,lineWidth:y=20,frameAnchor:b,format:_,textAnchor:v="start",textOverflow:w,textPadding:A=8,title:x,pointerSize:E=12,pathFilter:T="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=r;super(t,{x:{value:s!=null&&o!=null?null:n,scale:"x",optional:!0},y:{value:a!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:s,scale:"x",optional:o==null},y1:{value:a,scale:"y",optional:l==null},x2:{value:o,scale:"x",optional:s==null},y2:{value:l,scale:"y",optional:a==null},title:{value:x,optional:!0}},r,k0),this.anchor=C6(u,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=p1(b),this.textAnchor=Te(v,"middle"),this.textPadding=+A,this.pointerSize=+E,this.pathFilter=Ze(T),this.lineHeight=+g,this.lineWidth=+y,this.textOverflow=T8(w),this.monospace=!!c,this.fontFamily=Ze(h),this.fontSize=Xt(f),this.fontStyle=Ze(d),this.fontVariant=Ze(p),this.fontWeight=Ze(m);for(const M in k0)M in this.channels&&(this[M]=k0[M]);this.splitLines=E8(this),this.clipLine=C8(this),this.format={..._}}render(t,r,n,i,s){const o=this,{x:a,y:l,fx:u,fy:c}=r,{ownerSVGElement:h,document:f}=s,{anchor:d,monospace:p,lineHeight:m,lineWidth:g}=this,{textPadding:y,pointerSize:b,pathFilter:_}=this,{marginTop:v,marginLeft:w}=i,{x1:A,y1:x,x2:E,y2:T,x:M=A??E,y:P=x??T}=n,R=u?u(t.fx)-w:0,S=c?c(t.fy)-v:0,[C,I]=qf(this,i),F=l8(n,C),H=u8(n,I),X=p?R1:I1,Z=X(Ho);let D,O;"title"in n?(D=n.channels,O=qY):(D=YY.call(this,n,r),O=ZY);const z=Qe("svg:g",s).call(qi,this,i,s).call(A8,this).call(Ki,this,{x:M&&a,y:P&&l}).call(B=>B.selectAll().data(t).enter().append("g").attr("transform",rt=>`translate(${Math.round(F(rt))},${Math.round(H(rt))})`).call(Zi,this).call(rt=>rt.append("path").attr("filter",_)).call(rt=>rt.append("text").each(function(Q){const et=Po(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const U=O.call(o,Q,t,D,r,n);if(typeof U=="string")for(const j of o.splitLines(U))k(et,{value:o.clipLine(j)});else{const j=new Set;for(const K of U){const{label:L=""}=K;L&&j.has(L)||(j.add(L),k(et,K))}}})));function k(B,{label:rt,value:Q,color:et,opacity:U}){rt??(rt=""),Q??(Q="");const j=et!=null||U!=null;let K,L=g*100;const[dt]=la(rt,L,X,Z);if(dt>=0)rt=rt.slice(0,dt).trimEnd()+Ho,K=Q.trim(),Q="";else{(rt||!Q&&!j)&&(Q=" "+Q);const[bt]=la(Q,L-X(rt),X,Z);bt>=0&&(Q=Q.slice(0,bt).trimEnd()+Ho,K=Q.trim())}const lt=B.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");rt&&lt.append("tspan").attr("font-weight","bold").text(rt),Q&&lt.append(()=>f.createTextNode(Q)),j&&lt.append("tspan").text(" ").attr("fill",et).attr("fill-opacity",U).style("user-select","none"),K&&lt.append("title").text(K)}function Y(){const{width:B,height:rt}=i.facet??i;z.selectChildren().each(function(Q){let{x:et,width:U,height:j}=this.getBBox();U=Math.round(U),j=Math.round(j);let K=d;if(K===void 0){K=o.previousAnchor;const lt=F(Q)+R,bt=H(Q)+S,Nt=lt+U+y*2<B,Jt=lt-U-y*2>0,ye=bt+j+b+y*2+7<rt,mt=bt-j-b-y*2>0,Ut=(/-left$/.test(K)?Nt||!Jt:Nt&&!Jt)?"left":"right",wr=(/^top-/.test(K)?ye||!mt:ye&&!mt)?"top":"bottom";K=o.previousAnchor=`${wr}-${Ut}`}const L=this.firstChild,dt=this.lastChild;if(L.setAttribute("d",jY(K,b,y,U,j)),et)for(const lt of dt.childNodes)lt.setAttribute("x",-et);dt.setAttribute("y",`${+XY(K,dt.childNodes.length,m).toFixed(6)}em`),dt.setAttribute("transform",`translate(${$Y(K,b,y,U,j)})`)}),z.attr("visibility",null)}return t.length&&(z.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(Y):typeof requestAnimationFrame<"u"&&requestAnimationFrame(Y)),z.node()}}function WY(e,{x:t,y:r,...n}={}){return n.frameAnchor===void 0&&([t,r]=x6(t,r)),new VY(e,{...n,x:t,y:r})}function XY(e,t,r){return/^top(?:-|$)/.test(e)?.94-r:-.29-t*r}function $Y(e,t,r,n,i){switch(e){case"middle":return[-n/2,i/2];case"top-left":return[r,t+r];case"top":return[-n/2,t/2+r];case"top-right":return[-n-r,t+r];case"right":return[-t/2-n-r,i/2];case"bottom-left":return[r,-t-r];case"bottom":return[-n/2,-t/2-r];case"bottom-right":return[-n-r,-t-r];case"left":return[r+t/2,i/2]}}function jY(e,t,r,n,i){const s=n+r*2,o=i+r*2;switch(e){case"middle":return`M${-s/2},${-o/2}h${s}v${o}h${-s}z`;case"top-left":return`M0,0l${t},${t}h${s-t}v${o}h${-s}z`;case"top":return`M0,0l${t/2},${t/2}h${(s-t)/2}v${o}h${-s}v${-o}h${(s-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-s}v${o}h${s}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-s}v${o}h${s}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${s-t}v${-o}h${-s}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(s-t)/2}v${-o}h${-s}v${o}h${(s-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-s}v${-o}h${s}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${s}v${o}h${-s}v${t/2-o/2}z`}}function YY({channels:e},t){var i,s;const r={};let n=this.format;n=x2(n,e,"x"),n=x2(n,e,"y"),this.format=n;for(const o in n){const a=n[o];if(!(a===null||a===!1))if(o==="fx"||o==="fy")r[o]=!0;else{const l=Jv(e,o);l&&(r[o]=l)}}for(const o in e){if(o in r||o in n||zY.has(o))continue;const a=Jv(e,o);a&&(r[o]=a)}this.facet&&(t.fx&&!("fx"in n)&&(r.fx=!0),t.fy&&!("fy"in n)&&(r.fy=!0));for(const o in r){const a=this.format[o];if(typeof a=="string"){const l=((i=r[o])==null?void 0:i.value)??((s=t[o])==null?void 0:s.domain())??[];this.format[o]=(sr(l)?lu:Mn)(a)}else if(a===void 0||a===!0){const l=t[o];this.format[o]=l!=null&&l.bandwidth?P1(l,l.domain()):aa}}return r}function x2(e,t,r){if(!(r in e))return e;const n=`${r}1`,i=`${r}2`;if((n in e||!(n in t))&&(i in e||!(i in t)))return e;const s=Object.entries(e),o=e[r];return s.splice(s.findIndex(([a])=>a===r)+1,0,[n,o],[i,o]),Object.fromEntries(s)}function qY(e,t,{title:r}){return aa(r.value[e],e)}function*ZY(e,t,r,n,i){for(const s in r){if(s==="fx"||s==="fy"){yield{label:Kh(n,r,s),value:this.format[s](t[s],e)};continue}if(s==="x1"&&"x2"in r||s==="y1"&&"y2"in r)continue;const o=r[s];if(s==="x2"&&"x1"in r)yield{label:A2(n,r,"x"),value:T2(this.format.x2,r.x1,o,e)};else if(s==="y2"&&"y1"in r)yield{label:A2(n,r,"y"),value:T2(this.format.y2,r.y1,o,e)};else{const a=o.value[e],l=o.scale;if(!zs(a)&&l==null)continue;yield{label:Kh(n,r,s),value:this.format[s](a,e),color:l==="color"?i[s][e]:null,opacity:l==="opacity"?i[s][e]:null}}}}function T2(e,t,r,n){var i;return(i=r.hint)!=null&&i.length?`${e(r.value[n]-t.value[n],n)}`:`${e(t.value[n],n)}${e(r.value[n],n)}`}function A2(e,t,r){const n=Kh(e,t,`${r}1`,r),i=Kh(e,t,`${r}2`,r);return n===i?n:`${n}${i}`}function Kh(e,t,r,n=r){const i=t[r],s=e[(i==null?void 0:i.scale)??r];return String((s==null?void 0:s.label)??(i==null?void 0:i.label)??n)}function Q8(e={}){var Z;const{facet:t,style:r,title:n,subtitle:i,caption:s,ariaLabel:o,ariaDescription:a}=e,l=b1(e.className),u=e.marks===void 0?[]:C2(e.marks);u.push(...iq(u));const c=rq(t,e),h=new Map;for(const D of u){const O=S2(D,c,e);O&&h.set(D,O)}const f=new Map;c&&La(f,[c],e),La(f,h,e);const d=C2(sq(u,f,e));for(const D of d){const O=S2(D,c,e);O&&h.set(D,O)}u.unshift(...d);let p=vj(f,e);if(p!==void 0){const D=c?I0(p,c):void 0;for(const z of u){if(z.facet===null||z.facet==="super")continue;const k=h.get(z);k!==void 0&&(k.facetsIndex=z.fx!=null||z.fy!=null?I0(p,k):D)}const O=new Set;for(const{facetsIndex:z}of h.values())z==null||z.forEach((k,Y)=>{(k==null?void 0:k.length)>0&&O.add(Y)});p.forEach(0<O.size&&O.size<p.length?(z,k)=>z.empty=!O.has(k):z=>z.empty=!1);for(const z of u)if(z.facet==="exclude"){const k=h.get(z);k!==void 0&&(k.facetsIndex=Tj(k.facetsIndex))}}for(const D of fe.keys())Om(e[D])&&D!=="fx"&&D!=="fy"&&f.set(D,[]);const m=new Map;for(const D of u){if(m.has(D))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:O,channels:z}=h.get(D)??{},{data:k,facets:Y,channels:B}=D.initialize(O,z,e);k1(B,e),m.set(D,{data:k,facets:Y,channels:B})}const g=Um(La(f,m,e),e),y=bj(g,u,e);uj(g,y);const b=l2(g),{fx:_,fy:v}=b,w=_||v?r8(g,y):y,A=_||v?fq(b,y):y,x=v1(e),E=x.document,T=df("svg").call(E.documentElement);let M=T;x.ownerSVGElement=T,x.className=l,x.projection=x$(e,w),x.filterFacets=(D,O)=>I0(p,{channels:O,groups:E1(D,O)}),x.getMarkState=D=>{const O=m.get(D),z=h.get(D);return{...O,channels:{...O.channels,...z==null?void 0:z.channels}}},x.dispatchValue=D=>{M.value!==D&&(M.value=D,M.dispatchEvent(new Event("input",{bubbles:!0})))};const P=new Set;for(const[D,O]of m)if(D.initializer!=null){const z=D.facet==="super"?A:w,k=D.initializer(O.data,O.facets,O.channels,b,z,x);if(k.data!==void 0&&(O.data=k.data),k.facets!==void 0&&(O.facets=k.facets),k.channels!==void 0){const{fx:Y,fy:B,...rt}=k.channels;eq(rt),Object.assign(O.channels,rt);for(const Q of Object.values(rt)){const{scale:et}=Q;et!=null&&!BX(fe.get(et))&&(J8(Q,e),P.add(et))}(Y!=null||B!=null)&&h.set(D,!0)}}if(P.size){const D=new Map;La(D,m,e,Y=>P.has(Y)),La(f,m,e,Y=>P.has(Y));const O=hq(Um(D,e),g),{scales:z,...k}=l2(O);Object.assign(g,O),Object.assign(b,k),Object.assign(b.scales,z)}let R,S;p!==void 0&&(R={x:_==null?void 0:_.domain(),y:v==null?void 0:v.domain()},p=wj(p,R),S=xj(_,v,y));for(const[D,O]of m)O.values=D.scale(O.channels,b,x);const{width:C,height:I}=y;Po(T).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",C).attr("height",I).attr("viewBox",`0 0 ${C} ${I}`).attr("aria-label",o).attr("aria-description",a).call(D=>D.append("style").text(`.${l} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${l} text,
.${l} tspan {
  white-space: pre;
}`)).call(_1,r);for(const D of u){const{channels:O,values:z,facets:k}=m.get(D);if(p===void 0||D.facet==="super"){let Y=null;if(k&&(Y=k[0],Y=D.filter(Y,O,z),Y.length===0))continue;const B=D.render(Y,b,z,A,x);if(B==null)continue;T.appendChild(B)}else{let Y;for(const B of p){if(!(((Z=D.facetAnchor)==null?void 0:Z.call(D,p,R,B))??!B.empty))continue;let rt=null;if(k){const et=h.has(D);if(rt=k[et?B.i:0],rt=D.filter(rt,O,z),rt.length===0)continue;!et&&rt===k[0]&&(rt=AX(rt)),rt.fx=B.x,rt.fy=B.y,rt.fi=B.i}const Q=D.render(rt,b,z,w,x);if(Q!=null){(Y??(Y=Po(T).append("g"))).append(()=>Q).datum(B);for(const et of["aria-label","aria-description","aria-hidden","transform"])Q.hasAttribute(et)&&(Y.attr(et,Q.getAttribute(et)),Q.removeAttribute(et))}}Y==null||Y.selectChildren().attr("transform",S)}}const F=BY(g,x,e),{figure:H=n!=null||i!=null||s!=null||F.length>0}=e;H&&(M=E.createElement("figure"),M.className=`${l}-figure`,M.style.maxWidth="initial",n!=null&&M.append(E2(E,n,"h2")),i!=null&&M.append(E2(E,i,"h3")),M.append(...F,T),s!=null&&M.append(KY(E,s))),M.scale=gj(b.scales),M.legend=NY(g,x,e);const X=d$();return X>0&&Po(T).append("text").attr("x",C).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${X.toLocaleString("en-US")} warning${X===1?"":"s"}. Please check the console.`),M}function E2(e,t,r){if(t.ownerDocument)return t;const n=e.createElement(r);return n.append(t),n}function KY(e,t){const r=e.createElement("figcaption");return r.append(t),r}function QY({marks:e=[],...t}={}){return Q8({...t,marks:[...e,this]})}en.prototype.plot=QY;function C2(e){return e.flat(1/0).filter(t=>t!=null).map(JY)}function JY(e){return typeof e.render=="function"?e:new tq(e)}class tq extends en{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function k1(e,t){for(const r in e)J8(e[r],t);return e}function J8(e,t){const{scale:r,transform:n=!0}=e;if(r==null||!n)return;const{type:i,percent:s,interval:o,transform:a=s?l=>l*100:A6(o,i)}=t[r]??{};a!=null&&(e.value=Me(e.value,a),e.transform=!1)}function eq(e){for(const t in e)L6(t,e[t])}function La(e,t,r,n=vX){var i,s;for(const{channels:o}of t.values())for(const a in o){const l=o[a],{scale:u}=l;if(u!=null&&n(u))if(u==="projection"){if(!C$(r)){const c=((i=r.x)==null?void 0:i.domain)===void 0,h=((s=r.y)==null?void 0:s.domain)===void 0;if(c||h){const[f,d]=M$(l);c&&D0(e,"x",f),h&&D0(e,"y",d)}}}else D0(e,u,l)}return e}function D0(e,t,r){const n=e.get(t);n!==void 0?n.push(r):e.set(t,[r])}function rq(e,t){if(e==null)return;const{x:r,y:n}=e;if(r==null&&n==null)return;const i=_r(e.data);if(i==null)throw new Error("missing facet data");const s={};r!=null&&(s.fx=$l(i,{value:r,scale:"fx"})),n!=null&&(s.fy=$l(i,{value:n,scale:"fy"})),k1(s,t);const o=E1(i,s);return{channels:s,groups:o,data:e.data}}function S2(e,t,r){var l;if(e.facet===null||e.facet==="super")return;const{fx:n,fy:i}=e;if(n!=null||i!=null){const u=_r(e.data??n??i);if(u===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(u===null)return;const c={};return n!=null&&(c.fx=$l(u,{value:n,scale:"fx"})),i!=null&&(c.fy=$l(u,{value:i,scale:"fy"})),k1(c,r),{channels:c,groups:E1(u,c)}}if(t===void 0)return;const{channels:s,groups:o,data:a}=t;if(e.facet!=="auto"||e.data===a)return{channels:s,groups:o};a.length>0&&(o.size>1||o.size===1&&s.fx&&s.fy&&[...o][0][1].size>1)&&((l=_r(e.data))==null?void 0:l.length)===a.length&&Es(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function nq(e,t={}){return Yh({...t,x:null,y:null},(r,n,i,s,o,a)=>a.getMarkState(e))}function iq(e){const t=[];for(const r of e){let n=r.tip;if(n){n===!0?n={}:typeof n=="string"&&(n={pointer:n});let{pointer:i}=n;i=/^x$/i.test(i)?Oj:/^y$/i.test(i)?Fj:Nj,n=i(nq(r,n)),n.title=null;const s=WY(r.data,n);s.facet=r.facet,s.facetAnchor=r.facetAnchor,t.push(s)}}return t}function sq(e,t,r){let{projection:n,x:i={},y:s={},fx:o={},fy:a={},axis:l,grid:u,facet:c={},facet:{axis:h=l,grid:f}=c,x:{axis:d=l,grid:p=d===null?null:u}=i,y:{axis:m=l,grid:g=m===null?null:u}=s,fx:{axis:y=h,grid:b=y===null?null:f}=o,fy:{axis:_=h,grid:v=_===null?null:f}=a}=r;(n||!Om(i)&&!M2("x",e))&&(d=p=null),(n||!Om(s)&&!M2("y",e))&&(m=g=null),t.has("fx")||(y=b=null),t.has("fy")||(_=v=null),d===void 0&&(d=!Tc(e,"x")),m===void 0&&(m=!Tc(e,"y")),y===void 0&&(y=!Tc(e,"fx")),_===void 0&&(_=!Tc(e,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),y===!0&&(y=d==="top"||d===null?"bottom":"top"),_===!0&&(_=m==="right"||m===null?"left":"right");const w=[];return xc(w,v,TY,a),wc(w,_,gY,"right","left",c,a),xc(w,b,EY,o),wc(w,y,yY,"top","bottom",c,o),xc(w,g,xY,s),wc(w,m,F8,"left","right",r,s),xc(w,p,AY,i),wc(w,d,B8,"bottom","top",r,i),w}function wc(e,t,r,n,i,s,o){if(!t)return;const a=oq(t);o=aq(a?n:t,s,o);const{line:l}=o;(r===F8||r===B8)&&l&&!Xl(l)&&e.push(HY(lq(o))),e.push(r(o)),a&&e.push(r({...o,anchor:i,label:null}))}function xc(e,t,r,n){!t||Xl(t)||e.push(r(uq(t,n)))}function oq(e){return/^\s*both\s*$/i.test(e)}function aq(e,t,{line:r=t.line,ticks:n,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:u,ariaLabel:c,ariaDescription:h,label:f=t.label,labelAnchor:d,labelArrow:p=t.labelArrow,labelOffset:m}){return{anchor:e,line:r,ticks:n,tickSize:i,tickSpacing:s,tickPadding:o,tickFormat:a,tickRotate:l,fontVariant:u,ariaLabel:c,ariaDescription:h,label:f,labelAnchor:d,labelArrow:p,labelOffset:m}}function lq(e){const{anchor:t,line:r}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:r===!0?void 0:r}}function uq(e,{stroke:t=jf(e)?e:void 0,ticks:r=cq(e)?e:void 0,tickSpacing:n,ariaLabel:i,ariaDescription:s}){return{stroke:t,ticks:r,tickSpacing:n,ariaLabel:i,ariaDescription:s}}function cq(e){switch(typeof e){case"number":return!0;case"string":return!jf(e)}return Yi(e)||typeof(e==null?void 0:e.range)=="function"}function Tc(e,t){const r=`${t}-axis `;return e.some(n=>{var i;return(i=n.ariaLabel)==null?void 0:i.startsWith(r)})}function M2(e,t){for(const r of t)for(const n in r.channels){const{scale:i}=r.channels[n];if(i===e||i==="projection")return!0}return!1}function hq(e,t){for(const r in e){const n=e[r],i=t[r];n.label===void 0&&i&&(n.label=i.label)}return e}function fq({fx:e,fy:t},r){const{marginTop:n,marginRight:i,marginBottom:s,marginLeft:o,width:a,height:l}=A1(r),u=e&&I2(e),c=t&&I2(t);return{marginTop:t?c[0]:n,marginRight:e?a-u[1]:i,marginBottom:t?l-c[1]:s,marginLeft:e?u[0]:o,inset:{marginTop:r.marginTop,marginRight:r.marginRight,marginBottom:r.marginBottom,marginLeft:r.marginLeft},width:a,height:l}}function I2(e){const t=e.domain();let r=e(t[0]),n=e(t[t.length-1]);return n<r&&([r,n]=[n,r]),[r,n+e.bandwidth()]}function R2(e={y:"count"},t={}){[e,t]=pq(e,t);const{x:r,y:n}=t;return dq(mq(r,t,Ye),null,null,n,e,td(t))}function dq(e,t,r,n,{data:i=F6,filter:s=qh,sort:o,reverse:a,...l}={},u={}){e=P2(e),t=P2(t),l=yq(l,u),i=rA(i,Ye),o=o==null?void 0:tA("sort",o,u),s=s==null?void 0:eA("filter",s,u),r!=null&&yc(l,"x","x1","x2")&&(r=null),n!=null&&yc(l,"y","y1","y2")&&(n=null);const[c,h]=Wn(e),[f,d]=Wn(e),[p,m]=Wn(t),[g,y]=Wn(t),[b,_]=r!=null?[r,"x"]:n!=null?[n,"y"]:[],[v,w]=Wn(b),{x:A,y:x,z:E,fill:T,stroke:M,x1:P,x2:R,y1:S,y2:C,domain:I,cumulative:F,thresholds:H,interval:X,...Z}=u,[D,O]=Wn(E),[z]=hi(T),[k]=hi(M),[Y,B]=Wn(z),[rt,Q]=Wn(k);return{..."z"in u&&{z:D||E},..."fill"in u&&{fill:Y||T},..."stroke"in u&&{stroke:rt||M},...g1(Z,(et,U,j)=>{const K=T6(Be(et,b),j==null?void 0:j[_]),L=Be(et,E),dt=Be(et,z),lt=Be(et,k),bt=YX(l,{z:L,fill:dt,stroke:lt}),Nt=[],Jt=[],ye=K&&w([]),mt=L&&O([]),Ut=dt&&B([]),wr=lt&&Q([]),rn=e&&h([]),yi=e&&d([]),nn=t&&m([]),sn=t&&y([]),va=vq(e==null?void 0:e(et),t==null?void 0:t(et));let Au=0;for(const On of l)On.initialize(et);o&&o.initialize(et),s&&s.initialize(et);for(const On of U){const wa=[];for(const Fn of l)Fn.scope("facet",On);o&&o.scope("facet",On),s&&s.scope("facet",On);for(const[Fn,Je]of qv(On,bt))for(const[be,oe]of qv(Je,K))for(const[Ot,te]of va(oe))if(!(s&&!s.reduce(Ot,te))){wa.push(Au++),Jt.push(i.reduceIndex(Ot,et,te)),K&&ye.push(be),L&&mt.push(bt===L?Fn:L[(Ot.length>0?Ot:oe)[0]]),dt&&Ut.push(bt===dt?Fn:dt[(Ot.length>0?Ot:oe)[0]]),lt&&wr.push(bt===lt?Fn:lt[(Ot.length>0?Ot:oe)[0]]),rn&&(rn.push(te.x1),yi.push(te.x2)),nn&&(nn.push(te.y1),sn.push(te.y2));for(const Eu of l)Eu.reduce(Ot,te);o&&o.reduce(Ot)}Nt.push(wa)}return qX(Nt,o,a),{data:Jt,facets:Nt}}),...!yc(l,"x")&&(c?{x1:c,x2:f,x:jh(c,f)}:{x:A,x1:P,x2:R}),...!yc(l,"y")&&(p?{y1:p,y2:g,y:jh(p,g)}:{y:x,y1:S,y2:C}),...v&&{[_]:v},...Object.fromEntries(l.map(({name:et,output:U})=>[et,U]))}}function pq({cumulative:e,domain:t,thresholds:r,interval:n,...i},s){return[i,{cumulative:e,domain:t,thresholds:r,interval:n,...s}]}function mq(e,{cumulative:t,domain:r,thresholds:n,interval:i},s){return e={...bu(e)},e.domain===void 0&&(e.domain=r),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=n),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=s),e.thresholds=gq(e.thresholds,e.interval),e}function P2(e){if(e==null)return;const{value:t,cumulative:r,domain:n=Ee,thresholds:i}=e,s=o=>{let a=Be(o,t),l;if(sr(a)||_q(i)){a=Me(a,g6,Float64Array);let[c,h]=typeof n=="function"?n(a):n,f=typeof i=="function"&&!So(i)?i(a,c,h):i;typeof f=="number"&&(f=w3(c,h,f)),So(f)&&(n===Ee&&(c=f.floor(c),h=f.offset(f.floor(h))),f=f.range(c,f.offset(h))),l=f}else{a=Xh(a);let[c,h]=typeof n=="function"?n(a):n,f=typeof i=="function"&&!So(i)?i(a,c,h):i;if(typeof f=="number")if(n===Ee){let d=qc(c,h,f);if(isFinite(d))if(d>0){let p=Math.round(c/d),m=Math.round(h/d);p*d<=c||--p,m*d>h||++m;let g=m-p+1;f=new Float64Array(g);for(let y=0;y<g;++y)f[y]=(p+y)*d}else if(d<0){d=-d;let p=Math.round(c*d),m=Math.round(h*d);p/d<=c||--p,m/d>h||++m;let g=m-p+1;f=new Float64Array(g);for(let y=0;y<g;++y)f[y]=(p+y)/d}else f=[c];else f=[c]}else f=wl(c,h,f);else So(f)&&(n===Ee&&(c=f.floor(c),h=f.offset(f.floor(h))),f=f.range(c,f.offset(h)));l=f}const u=[];if(l.length===1)u.push([l[0],l[0]]);else for(let c=1;c<l.length;++c)u.push([l[c-1],l[c]]);return u.bin=(r<0?xq:r>0?wq:D1)(u,l,a),u};return s.label=to(t),s}function gq(e,t,r=k2){if(e===void 0)return t===void 0?r:ya(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return q9;case"scott":return Dw;case"sturges":return X9;case"auto":return k2}return a1(e)}return e}function yq(e,t){return XX(e,t,tA)}function tA(e,t,r){return N6(e,t,r,eA)}function eA(e,t,r){return O6(e,t,r,rA)}function rA(e,t){return y1(e,t,bq)}function bq(e){switch(`${e}`.toLowerCase()){case"x":return Tq;case"x1":return Eq;case"x2":return Cq;case"y":return Aq;case"y1":return Sq;case"y2":return Mq}throw new Error(`invalid bin reduce: ${e}`)}function k2(e,t,r){return Math.min(200,Dw(e,t,r))}function _q(e){return SX(e)||Yi(e)&&sr(e)}function vq(e,t){return e&&t?function*(r){const n=e.bin(r);for(const[i,[s,o]]of e.entries()){const a=t.bin(n[i]);for(const[l,[u,c]]of t.entries())yield[a[l],{x1:s,y1:u,x2:o,y2:c}]}}:e?function*(r){const n=e.bin(r);for(const[i,[s,o]]of e.entries())yield[n[i],{x1:s,x2:o}]}:function*(r){const n=t.bin(r);for(const[i,[s,o]]of t.entries())yield[n[i],{y1:s,y2:o}]}}function D1(e,t,r){return t=Xh(t),n=>{var s;const i=e.map(()=>[]);for(const o of n)(s=i[cf(t,r[o])-1])==null||s.push(o);return i}}function wq(e,t,r){const n=D1(e,t,r);return i=>{const s=n(i);for(let o=1,a=s.length;o<a;++o){const l=s[o-1],u=s[o];for(const c of l)u.push(c)}return s}}function xq(e,t,r){const n=D1(e,t,r);return i=>{const s=n(i);for(let o=s.length-2;o>=0;--o){const a=s[o+1],l=s[o];for(const u of a)l.push(u)}return s}}function nA(e,t){const r=(+e+ +t)/2;return e instanceof Date?new Date(r):r}const Tq={reduceIndex(e,t,{x1:r,x2:n}){return nA(r,n)}},Aq={reduceIndex(e,t,{y1:r,y2:n}){return nA(r,n)}},Eq={reduceIndex(e,t,{x1:r}){return r}},Cq={reduceIndex(e,t,{x2:r}){return r}},Sq={reduceIndex(e,t,{y1:r}){return r}},Mq={reduceIndex(e,t,{y2:r}){return r}};function Iq(e={}){return b6(e)?e:{...e,x:Ye}}function Rq(e={}){return _6(e)?e:{...e,y:Ye}}function Pq(e,t){if(t.length===1)return{data:e,facets:t};const r=e.length,n=new Uint8Array(r);let i=0;for(const a of t)for(const l of a)n[l]&&++i,n[l]=1;if(i===0)return{data:e,facets:t};e=Vl(e);const s=e[p6]=new Uint32Array(r+i);t=t.map(a=>Vl(a,Uint32Array));let o=r;n.fill(0);for(const a of t)for(let l=0,u=a.length;l<u;++l){const c=a[l];n[c]?(a[l]=o,e[o]=e[c],s[o]=c,++o):s[c]=c,n[c]=1}return{data:e,facets:t}}function kq(e={},t={}){arguments.length===1&&([e,t]=iA(e));const{y1:r,y:n=r,x:i,...s}=t,[o,a,l,u]=sA(n,i,"y","x",e,s);return{...o,y1:r,y:a,x1:l,x2:u,x:jh(l,u)}}function Dq(e={},t={}){arguments.length===1&&([e,t]=iA(e));const{x1:r,x:n=r,y:i,...s}=t,[o,a,l,u]=sA(n,i,"x","y",e,s);return{...o,x1:r,x:a,y1:l,y2:u,y:jh(l,u)}}function Nq({x:e,x1:t,x2:r,...n}={}){return n=Jf(n,"y"),t===void 0&&r===void 0?kq({x:e,...n}):([t,r]=w6(e,t,r),{...n,x1:t,x2:r})}function Oq({y:e,y1:t,y2:r,...n}={}){return n=Jf(n,"x"),t===void 0&&r===void 0?Dq({y:e,...n}):([t,r]=w6(e,t,r),{...n,y1:t,y2:r})}function iA(e){const{offset:t,order:r,reverse:n,...i}=e;return[{offset:t,order:r,reverse:n},i]}const Fq={length:!0};function sA(e,t=_X,r,n,{offset:i,order:s,reverse:o},a){if(t===null)throw new Error(`stack requires ${n}`);const l=TX(a),[u,c]=Wn(e),[h,f]=$h(t),[d,p]=$h(t);return h.hint=d.hint=Fq,i=Bq(i),s=Gq(s,i,n),[g1(a,(m,g,y)=>{({data:m,facets:g}=Pq(m,g));const b=e==null?void 0:c(T6(Be(m,e),y==null?void 0:y[r])),_=Be(m,t,Float64Array),v=Be(m,l),w=s&&s(m,b,_,v),A=m.length,x=f(new Float64Array(A)),E=p(new Float64Array(A)),T=[];for(const M of g){const P=b?Array.from(ng(M,R=>b[R]).values()):[M];if(w)for(const R of P)R.sort(w);for(const R of P){let S=0,C=0;o&&R.reverse();for(const I of R){const F=_[I];F<0?S=E[I]=(x[I]=S)+F:F>0?C=E[I]=(x[I]=C)+F:E[I]=x[I]=C}}T.push(P)}return i&&i(T,x,E,v),{data:m,facets:g}}),u,h,d]}function Bq(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return Lq;case"center":case"silhouette":return Uq;case"wiggle":return aA}throw new Error(`unknown offset: ${e}`)}}function oA(e,t){let r=0,n=0;for(const i of e){const s=t[i];s<r&&(r=s),s>n&&(n=s)}return[r,n]}function Lq(e,t,r){for(const n of e)for(const i of n){const[s,o]=oA(i,r);for(const a of i){const l=1/(o-s||1);t[a]=l*(t[a]-s),r[a]=l*(r[a]-s)}}}function Uq(e,t,r){for(const n of e){for(const i of n){const[s,o]=oA(i,r);for(const a of i){const l=(o+s)/2;t[a]-=l,r[a]-=l}}lA(n,t,r)}uA(e,t,r)}function aA(e,t,r,n){for(const i of e){const s=new Is;let o=0;for(const a of i){let l=-1;const u=a.map(d=>Math.abs(r[d]-t[d])),c=a.map(d=>{l=n?n[d]:++l;const p=r[d]-t[d],m=s.has(l)?p-s.get(l):0;return s.set(l,p),m}),h=[0,...U9(c)];for(const d of a)t[d]+=o,r[d]+=o;const f=Fi(u);f&&(o-=Fi(u,(d,p)=>(c[p]/2+h[p])*d)/f)}lA(i,t,r)}uA(e,t,r)}function lA(e,t,r){const n=ii(e,i=>ii(i,s=>t[s]));for(const i of e)for(const s of i)t[s]-=n,r[s]-=n}function uA(e,t,r){const n=e.length;if(n===1)return;const i=e.map(a=>a.flat()),s=i.map(a=>(ii(a,l=>t[l])+jr(a,l=>r[l]))/2),o=ii(s);for(let a=0;a<n;a++){const l=o-s[a];for(const u of i[a])t[u]+=l,r[u]+=l}}function Gq(e,t,r){if(e===void 0&&t===aA)return D2(Kr);if(e!=null){if(typeof e=="string"){const n=e.startsWith("-"),i=n?Wh:Kr;switch((n?e.slice(1):e).toLowerCase()){case"value":case r:return Hq(i);case"z":return zq(i);case"sum":return Vq(i);case"appearance":return Wq(i);case"inside-out":return D2(i)}return N2(m6(e))}if(typeof e=="function")return(e.length===1?N2:Xq)(e);if(Array.isArray(e))return $q(e);throw new Error(`invalid order: ${e}`)}}function Hq(e){return(t,r,n)=>(i,s)=>e(n[i],n[s])}function zq(e){return(t,r,n,i)=>(s,o)=>e(i[s],i[o])}function Vq(e){return rd(e,(t,r,n,i)=>sg(mi(t),s=>Fi(s,o=>n[o]),s=>i[s]))}function Wq(e){return rd(e,(t,r,n,i)=>sg(mi(t),s=>r[kw(s,o=>n[o])],s=>i[s]))}function D2(e){return rd(e,(t,r,n,i)=>{const s=mi(t),o=sg(s,h=>r[kw(h,f=>n[f])],h=>i[h]),a=Ro(s,h=>Fi(h,f=>n[f]),h=>i[h]),l=[],u=[];let c=0;for(const h of o)c<0?(c+=a.get(h),l.push(h)):(c-=a.get(h),u.push(h));return u.reverse().concat(l)})}function N2(e){return t=>{const r=Be(t,e);return(n,i)=>Kr(r[n],r[i])}}function Xq(e){return t=>(r,n)=>e(t[r],t[n])}function $q(e){return rd(Kr,()=>e)}function rd(e,t){return(r,n,i,s)=>{if(!s)throw new Error("missing channel: z");const o=new Is(t(r,n,i,s).map((a,l)=>[a,l]));return(a,l)=>e(o.get(s[a]),o.get(s[l]))}}class jq extends en{constructor(t,r,n={},i){super(t,r,n,i);const{inset:s=0,insetTop:o=s,insetRight:a=s,insetBottom:l=s,insetLeft:u=s,rx:c,ry:h}=n;this.insetTop=Xt(o),this.insetRight=Xt(a),this.insetBottom=Xt(l),this.insetLeft=Xt(u),this.rx=Te(c,"auto"),this.ry=Te(h,"auto")}render(t,r,n,i,s){const{rx:o,ry:a}=this;return Qe("svg:g",s).call(qi,this,i,s).call(this._transform,this,r).call(l=>l.selectAll().data(t).enter().append("rect").call(Zi,this).attr("x",this._x(r,n,i)).attr("width",this._width(r,n,i)).attr("y",this._y(r,n,i)).attr("height",this._height(r,n,i)).call(Mt,"rx",o).call(Mt,"ry",a).call(eo,this,n)).node()}_x(t,{x:r},{marginLeft:n}){const{insetLeft:i}=this;return r?s=>r[s]+i:n+i}_y(t,{y:r},{marginTop:n}){const{insetTop:i}=this;return r?s=>r[s]+i:n+i}_width({x:t},{x:r},{marginRight:n,marginLeft:i,width:s}){const{insetLeft:o,insetRight:a}=this,l=r&&t?t.bandwidth():s-n-i;return Math.max(0,l-o-a)}_height({y:t},{y:r},{marginTop:n,marginBottom:i,height:s}){const{insetTop:o,insetBottom:a}=this,l=r&&t?t.bandwidth():s-n-i;return Math.max(0,l-o-a)}}const Yq={ariaLabel:"bar"};class qq extends jq{constructor(t,r={}){const{x1:n,x2:i,y:s}=r;super(t,{x1:{value:n,scale:"x"},x2:{value:i,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},r,Yq)}_transform(t,r,{x:n}){t.call(Ki,r,{x:n},0,0)}_x({x:t},{x1:r,x2:n},{marginLeft:i}){const{insetLeft:s}=this;return _n(t)?i+s:o=>Math.min(r[o],n[o])+s}_width({x:t},{x1:r,x2:n},{marginRight:i,marginLeft:s,width:o}){const{insetLeft:a,insetRight:l}=this;return _n(t)?o-i-s-a-l:u=>Math.max(0,Math.abs(n[u]-r[u])-a-l)}}function O2(e,t={}){return v6(t)||(t={...t,y:l1,x2:Ye}),new qq(e,Nq(b8(Iq(t))))}const Zq={ariaLabel:"rect"};class Kq extends en{constructor(t,r={}){const{x1:n,y1:i,x2:s,y2:o,inset:a=0,insetTop:l=a,insetRight:u=a,insetBottom:c=a,insetLeft:h=a,rx:f,ry:d}=r;super(t,{x1:{value:n,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},x2:{value:s,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},r,Zq),this.insetTop=Xt(l),this.insetRight=Xt(u),this.insetBottom=Xt(c),this.insetLeft=Xt(h),this.rx=Te(f,"auto"),this.ry=Te(d,"auto")}render(t,r,n,i,s){const{x:o,y:a}=r,{x1:l,y1:u,x2:c,y2:h}=n,{marginTop:f,marginRight:d,marginBottom:p,marginLeft:m,width:g,height:y}=i,{projection:b}=s,{insetTop:_,insetRight:v,insetBottom:w,insetLeft:A,rx:x,ry:E}=this;return Qe("svg:g",s).call(qi,this,i,s).call(Ki,this,{x:l&&c&&o,y:u&&h&&a},0,0).call(T=>T.selectAll().data(t).enter().append("rect").call(Zi,this).attr("x",l&&c&&(b||!_n(o))?M=>Math.min(l[M],c[M])+A:m+A).attr("y",u&&h&&(b||!_n(a))?M=>Math.min(u[M],h[M])+_:f+_).attr("width",l&&c&&(b||!_n(o))?M=>Math.max(0,Math.abs(c[M]-l[M])-A-v):g-d-m-v-A).attr("height",u&&h&&(b||!_n(a))?M=>Math.max(0,Math.abs(u[M]-h[M])-_-w):y-f-p-_-w).call(Mt,"rx",x).call(Mt,"ry",E).call(eo,this,n)).node()}}function F2(e,t={}){return v6(t)||(t={...t,x:l1,y2:Ye,interval:1}),new Kq(e,Oq(zj(Rq(t))))}function B2(e){let t,r,n,i=[e[3]],s={};for(let o=0;o<i.length;o+=1)s=It(s,i[o]);return{c(){t=V("div"),ni(t,s)},m(o,a){tt(o,t,a),e[7](t),r||(n=ua(e[2].call(null,t)),r=!0)},p(o,a){ni(t,s=Dr(i,[a&8&&o[3]]))},d(o){o&&J(t),e[7](null),r=!1,n()}}}function Qq(e){let t=e[0],r,n=B2(e);return{c(){n.c(),r=or()},m(i,s){n.m(i,s),tt(i,r,s)},p(i,[s]){s&1&&Gt(t,t=i[0])?(n.d(1),n=B2(i),n.c(),n.m(r.parentNode,r)):n.p(i,s)},i:qt,o:qt,d(i){i&&J(r),n.d(i)}}}function Jq(e,t,r){let n,i,s;const o=["options","chart"];let a=ee(t,o),{options:l={}}=t,{chart:u=void 0}=t,c=$r("theme"),h;function f(d){zt[d?"unshift":"push"](()=>{h=d,r(1,h)})}return e.$$set=d=>{t=It(It({},t),de(d)),r(3,a=ee(t,o)),"options"in d&&r(0,l=d.options),"chart"in d&&r(4,u=d.chart)},e.$$.update=()=>{e.$$.dirty&65&&r(5,i=A9(n,l)),e.$$.dirty&32&&r(2,s=d=>{d.appendChild(Q8(i))}),e.$$.dirty&2&&h&&r(4,u=Po(h).select("svg"))},r(6,n={style:{backgroundColor:"transparent",color:c.colors.gray[500],fontFamily:c.fontFamily.sans,fontSize:"14px",overflow:"visible"}}),[l,h,s,a,u,i,n,f]}class cA extends Qt{constructor(t){super(),Kt(this,t,Jq,Qq,Gt,{options:0,chart:4})}}function L2(e){let t,r,n,i=e[3].label+"",s,o,a=e[3].id+"",l,u,c,h,f,d,p,m,g,y,b,_,v,w,A=e[3].rank+"",x,E,T,M,P,R,S=e[7](e[3].score)+"",C,I,F,H,X,Z,D,O,z=e[3].curated_degree_in+"",k,Y,B,rt,Q,et,U=e[3].curated_degree_out+"",j,K,L,dt,lt,bt,Nt,Jt,ye=e[3].profile_age+"",mt,Ut,wr,rn,yi,nn,sn=e[3].interacted_days+"",va,Au,On,wa,Fn,Je;h=new j4({props:{pill:!0,outline:!0,size:"xs",$$slots:{default:[tZ]},$$scope:{ctx:e}}}),h.$on("click",e[9]);let be=e[4]&&U2(e),oe=e[5]&&G2(e);return{c(){t=V("div"),r=V("div"),n=V("h2"),s=Ht(i),o=Ht(" ("),l=Ht(a),u=Ht(")"),c=ot(),Ft(h.$$.fragment),f=ot(),d=V("hr"),p=ot(),m=V("div"),g=V("table"),y=V("tr"),b=V("td"),b.textContent="Rank",_=ot(),v=V("td"),w=Ht("#"),x=Ht(A),E=ot(),T=V("tr"),M=V("td"),M.textContent="Score",P=ot(),R=V("td"),C=Ht(S),I=ot(),F=V("tr"),F.innerHTML='<td colspan="2" class="py-2"><hr/></td>',H=ot(),X=V("tr"),Z=V("td"),Z.textContent="Incoming Engagements",D=ot(),O=V("td"),k=Ht(z),Y=ot(),B=V("tr"),rt=V("td"),rt.textContent="Outgoing Engagements",Q=ot(),et=V("td"),j=Ht(U),K=ot(),L=V("tr"),L.innerHTML='<td colspan="2" class="py-2"><hr/></td>',dt=ot(),lt=V("tr"),bt=V("td"),bt.textContent="Profile age in days",Nt=ot(),Jt=V("td"),mt=Ht(ye),Ut=ot(),wr=V("tr"),rn=V("td"),rn.textContent="Number of interacted days",yi=ot(),nn=V("td"),va=Ht(sn),Au=ot(),On=V("hr"),wa=ot(),be&&be.c(),Fn=ot(),oe&&oe.c(),G(n,"class","font-bold text-lg"),G(r,"class","px-6 py-4 flex flex-row items-center justify-between"),G(b,"class","pr-4"),G(M,"class","pr-4"),G(Z,"class","pr-4"),G(rt,"class","pr-4"),G(bt,"class","pr-4"),G(rn,"class","pr-4"),G(g,"class","text-sm text-gray-500 w-full"),G(m,"class","px-6 py-4")},m(Ot,te){tt(Ot,t,te),N(t,r),N(r,n),N(n,s),N(n,o),N(n,l),N(n,u),N(r,c),kt(h,r,null),N(t,f),N(t,d),N(t,p),N(t,m),N(m,g),N(g,y),N(y,b),N(y,_),N(y,v),N(v,w),N(v,x),N(g,E),N(g,T),N(T,M),N(T,P),N(T,R),N(R,C),N(g,I),N(g,F),N(g,H),N(g,X),N(X,Z),N(X,D),N(X,O),N(O,k),N(g,Y),N(g,B),N(B,rt),N(B,Q),N(B,et),N(et,j),N(g,K),N(g,L),N(g,dt),N(g,lt),N(lt,bt),N(lt,Nt),N(lt,Jt),N(Jt,mt),N(g,Ut),N(g,wr),N(wr,rn),N(wr,yi),N(wr,nn),N(nn,va),N(t,Au),N(t,On),N(t,wa),be&&be.m(t,null),N(t,Fn),oe&&oe.m(t,null),Je=!0},p(Ot,te){(!Je||te&8)&&i!==(i=Ot[3].label+"")&&Ve(s,i),(!Je||te&8)&&a!==(a=Ot[3].id+"")&&Ve(l,a);const Eu={};te&4096&&(Eu.$$scope={dirty:te,ctx:Ot}),h.$set(Eu),(!Je||te&8)&&A!==(A=Ot[3].rank+"")&&Ve(x,A),(!Je||te&8)&&S!==(S=Ot[7](Ot[3].score)+"")&&Ve(C,S),(!Je||te&8)&&z!==(z=Ot[3].curated_degree_in+"")&&Ve(k,z),(!Je||te&8)&&U!==(U=Ot[3].curated_degree_out+"")&&Ve(j,U),(!Je||te&8)&&ye!==(ye=Ot[3].profile_age+"")&&Ve(mt,ye),(!Je||te&8)&&sn!==(sn=Ot[3].interacted_days+"")&&Ve(va,sn),Ot[4]?be?(be.p(Ot,te),te&16&&W(be,1)):(be=U2(Ot),be.c(),W(be,1),be.m(t,Fn)):be&&(ve(),$(be,1,1,()=>{be=null}),we()),Ot[5]?oe?(oe.p(Ot,te),te&32&&W(oe,1)):(oe=G2(Ot),oe.c(),W(oe,1),oe.m(t,null)):oe&&(ve(),$(oe,1,1,()=>{oe=null}),we())},i(Ot){Je||(W(h.$$.fragment,Ot),W(be),W(oe),Je=!0)},o(Ot){$(h.$$.fragment,Ot),$(be),$(oe),Je=!1},d(Ot){Ot&&J(t),Dt(h),be&&be.d(),oe&&oe.d()}}}function tZ(e){let t;return{c(){t=Ht("Close")},m(r,n){tt(r,t,n)},d(r){r&&J(t)}}}function U2(e){let t,r,n,i,s,o,a;function l(c){e[10](c)}let u={options:{marginLeft:175,marginRight:100,x:{axis:null},y:{label:null},marks:[O2(e[1],{x:"value",y:"label",fill:H2,sort:{y:"x",reverse:!0,limit:10}}),Zh(e[1],{text:z2,y:"label",x:"value",textAnchor:"start",dx:10})]}};return e[0]!==void 0&&(u.chart=e[0]),i=new cA({props:u}),zt.push(()=>me(i,"chart",l)),{c(){t=V("div"),r=V("h3"),r.textContent="Top Incoming Engagements",n=ot(),Ft(i.$$.fragment),G(r,"class","text-sm"),G(t,"class",o="px-6 py-4 "+(e[5]&&e[4]?"border-b":""))},m(c,h){tt(c,t,h),N(t,r),N(t,n),kt(i,t,null),a=!0},p(c,h){const f={};h&2&&(f.options={marginLeft:175,marginRight:100,x:{axis:null},y:{label:null},marks:[O2(c[1],{x:"value",y:"label",fill:H2,sort:{y:"x",reverse:!0,limit:10}}),Zh(c[1],{text:z2,y:"label",x:"value",textAnchor:"start",dx:10})]}),!s&&h&1&&(s=!0,f.chart=c[0],pe(()=>s=!1)),i.$set(f),(!a||h&48&&o!==(o="px-6 py-4 "+(c[5]&&c[4]?"border-b":"")))&&G(t,"class",o)},i(c){a||(W(i.$$.fragment,c),a=!0)},o(c){$(i.$$.fragment,c),a=!1},d(c){c&&J(t),Dt(i)}}}function G2(e){let t,r,n,i,s;return i=new cA({props:{options:{marginTop:30,marginBottom:50,height:300,x:{grid:!1,label:"Score",percent:!0},y:{grid:!0},marks:[F2(e[2],R2({y:"count"},{x:"value",fill:V2})),Hm([0])]}}}),{c(){t=V("div"),r=V("h3"),r.textContent="Incoming Engagement Distribution",n=ot(),Ft(i.$$.fragment),G(r,"class","text-sm mb-3"),G(t,"class","px-6 py-4")},m(o,a){tt(o,t,a),N(t,r),N(t,n),kt(i,t,null),s=!0},p(o,a){const l={};a&4&&(l.options={marginTop:30,marginBottom:50,height:300,x:{grid:!1,label:"Score",percent:!0},y:{grid:!0},marks:[F2(o[2],R2({y:"count"},{x:"value",fill:V2})),Hm([0])]}),i.$set(l)},i(o){s||(W(i.$$.fragment,o),s=!0)},o(o){$(i.$$.fragment,o),s=!1},d(o){o&&J(t),Dt(i)}}}function eZ(e){let t,r,n=e[3]&&L2(e);return{c(){t=V("div"),n&&n.c(),G(t,"class","tooltip-view")},m(i,s){tt(i,t,s),n&&n.m(t,null),r=!0},p(i,[s]){i[3]?n?(n.p(i,s),s&8&&W(n,1)):(n=L2(i),n.c(),W(n,1),n.m(t,null)):n&&(ve(),$(n,1,1,()=>{n=null}),we())},i(i){r||(W(n),r=!0)},o(i){$(n),r=!1},d(i){i&&J(t),n&&n.d()}}}const H2=e=>e.color,z2=e=>e.value,V2=e=>e.color;function rZ(e,t,r){let n,i,s,o,a,l,u;_t(e,$N,m=>r(8,a=m)),_t(e,cr,m=>r(6,l=m)),_t(e,ZN,m=>r(3,u=m));let c=$r("theme"),h;const f=Mn(".8f"),d=()=>{Ue(cr,l="",l)};function p(m){h=m,r(0,h)}return e.$$.update=()=>{e.$$.dirty&8&&r(1,n=u&&u.edges.length>0?wn(I9(u.edges,0,10),m=>({id:m.source.id,label:m.source.label,color:c.colors.scale.nodes[m.source.curated],value:m.weight})):[]),e.$$.dirty&8&&r(2,i=wn(u.edges,m=>({id:m.source.id,color:c.colors.scale.nodes[m.source.curated],value:m.weight}))),e.$$.dirty&4&&r(5,s=i.length>0),e.$$.dirty&2&&r(4,o=n.length>0),e.$$.dirty&257&&h&&h.selectAll('g[aria-label="y-axis tick label"]').style("cursor","pointer").on("click",m=>{const g=m.target.innerHTML;a[g]&&Ue(cr,l=a[g].id,l)})},[h,n,i,u,o,s,l,f,a,d,p]}class nZ extends Qt{constructor(t){super(),Kt(this,t,rZ,eZ,Gt,{})}}function iZ(e){let t,r;return t=new wz({}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},p:qt,i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function sZ(e){let t,r,n,i,s,o,a,l,u,c,h,f,d,p,m,g,y,b,_,v;i=new Tz({}),f=new _z({props:{width:e[1],height:e[2],nodes:e[3],edges:e[4]}}),f.$on("node-mouseover",e[19]),f.$on("node-mouseout",e[20]),f.$on("node-click",e[21]);const w=[aZ,oZ],A=[];function x(E,T){return E[6]==""?0:1}return g=x(e),y=A[g]=w[g](e),_=new uX({}),{c(){t=V("main"),r=V("div"),n=V("h1"),Ft(i.$$.fragment),s=ot(),o=V("span"),o.textContent="EXPLORER",a=ot(),l=V("div"),u=V("div"),c=V("div"),h=V("div"),Ft(f.$$.fragment),p=ot(),m=V("div"),y.c(),b=ot(),Ft(_.$$.fragment),G(o,"class","text-gray-500 pl-2 tracking-wider"),G(n,"class","text-white font-serif flex flex-row"),G(r,"class","header | p-4 bg-gray-800"),G(h,"class","stage__wrapper svelte-9x1wov"),G(c,"class","stage svelte-9x1wov"),Cs(()=>e[22].call(c)),G(u,"class","basis-9/12 h-full"),G(m,"class","flex flex-col flex-1 overflow-auto | basis-3/12 h-full | border-l border-l-gray-800"),G(l,"class","flex flex-row flex-1 overflow-auto"),G(t,"class","min-h-screen flex flex-col h-screen")},m(E,T){tt(E,t,T),N(t,r),N(r,n),kt(i,n,null),N(n,s),N(n,o),N(t,a),N(t,l),N(l,u),N(u,c),N(c,h),kt(f,h,null),d=CA(c,e[22].bind(c)),N(l,p),N(l,m),A[g].m(m,null),tt(E,b,T),kt(_,E,T),v=!0},p(E,T){const M={};T&2&&(M.width=E[1]),T&4&&(M.height=E[2]),T&8&&(M.nodes=E[3]),T&16&&(M.edges=E[4]),f.$set(M);let P=g;g=x(E),g!==P&&(ve(),$(A[P],1,1,()=>{A[P]=null}),we(),y=A[g],y||(y=A[g]=w[g](E),y.c()),W(y,1),y.m(m,null))},i(E){v||(W(i.$$.fragment,E),W(f.$$.fragment,E),W(y),W(_.$$.fragment,E),v=!0)},o(E){$(i.$$.fragment,E),$(f.$$.fragment,E),$(y),$(_.$$.fragment,E),v=!1},d(E){E&&(J(t),J(b)),Dt(i),Dt(f),d(),A[g].d(),Dt(_,E)}}}function oZ(e){let t,r;return t=new nZ({}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function aZ(e){let t,r;return t=new eX({}),{c(){Ft(t.$$.fragment)},m(n,i){kt(t,n,i),r=!0},i(n){r||(W(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){Dt(t,n)}}}function lZ(e){let t,r,n,i;const s=[sZ,iZ],o=[];function a(l,u){return l[0]?0:1}return t=a(e),r=o[t]=s[t](e),{c(){r.c(),n=or()},m(l,u){o[t].m(l,u),tt(l,n,u),i=!0},p(l,[u]){let c=t;t=a(l),t===c?o[t].p(l,u):(ve(),$(o[c],1,1,()=>{o[c]=null}),we(),r=o[t],r?r.p(l,u):(r=o[t]=s[t](l),r.c()),W(r,1),r.m(n.parentNode,n))},i(l){i||(W(r),i=!0)},o(l){$(r),i=!1},d(l){l&&J(n),o[t].d(l)}}}function uZ(e,t,r){let n,i,s,o,a,l,u,c,h,f,d,p,m,g,y,b,_;_t(e,Pg,M=>r(7,n=M)),_t(e,Fl,M=>r(8,i=M)),_t(e,Ol,M=>r(9,s=M)),_t(e,Rg,M=>r(10,o=M)),_t(e,Nl,M=>r(11,a=M)),_t(e,Dl,M=>r(12,l=M)),_t(e,QT,M=>r(13,u=M)),_t(e,kl,M=>r(14,c=M)),_t(e,Pl,M=>r(15,h=M)),_t(e,Ig,M=>r(16,f=M)),_t(e,Rl,M=>r(17,d=M)),_t(e,Il,M=>r(18,p=M)),_t(e,Dp,M=>r(0,m=M)),_t(e,Dg,M=>r(3,g=M)),_t(e,kf,M=>r(4,y=M)),_t(e,ll,M=>r(5,b=M)),_t(e,cr,M=>r(6,_=M));let v,w;zo("theme",KN);const A=M=>{Ue(ll,b=M.detail,b)},x=M=>{Ue(ll,b="",b)},E=M=>{_!==""&&_===M.detail?Ue(cr,_="",_):Ue(cr,_=M.detail,_)};function T(){v=this.clientWidth,w=this.clientHeight,r(1,v),r(2,w)}return e.$$.update=()=>{e.$$.dirty&524161&&m&&(p===void 0&&Ue(Il,p=f[0],p),d===void 0&&Ue(Rl,d=f[1],d),h===void 0&&Ue(Pl,h=u[0],h),c===void 0&&Ue(kl,c=u[1],c),l===void 0&&Ue(Dl,l=o[0],l),a===void 0&&Ue(Nl,a=o[1],a),s===void 0&&Ue(Ol,s=n[0],s),i===void 0&&Ue(Fl,i=n[1],i))},[m,v,w,g,y,b,_,n,i,s,o,a,l,u,c,h,f,d,p,A,x,E,T]}class cZ extends Qt{constructor(t){super(),Kt(this,t,uZ,lZ,Gt,{})}}new cZ({target:document.getElementById("app")})});export default hZ();
